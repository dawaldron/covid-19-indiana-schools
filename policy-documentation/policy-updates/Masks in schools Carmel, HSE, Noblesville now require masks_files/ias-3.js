var googleImaVansAdapter=function(){var D=function(f){var d=function(){var a,b=function(){var b=function(b){return"undefined"!==typeof b},a=function(){var a="u";try{b(window.opera)&&b(window.opera.buildNumber)?a="o":b(window.mozInnerScreenY)?a="g":b(window.chrome)&&b(window.chrome.csi)?a="c":b(window.msWriteProfilerMark)&&b(window.crypto)?a="e":b(window.attachEvent)||b(window.msCrypto)?a="i":b(window.WebKitPoint)&&(a="w")}catch(c){}return a}(),c=function(){var a=function(a){for(var c in a)if(a.hasOwnProperty(c)){var k=
    a[c];""!==k&&"null"!==k&&"undefined"!==k&&null!==k&&b(k)||delete a[c]}return a},c=function(a){var c={},k,e;for(e in a)a.hasOwnProperty(e)&&(k=a[e],b(c[k])?c[k]+=e:c[k]=e);a={};for(e in c)c.hasOwnProperty(e)&&(k=c[e],a[k]=e);return a};return function(){var e=function(){var a={g:"",q:""};try{a.q=window.parent.parent.parent.parent.parent.parent.parent.parent.parent.parent.location.href}catch(c){var k=c.message,k=k.substring(k.lastIndexOf("<")+1,k.lastIndexOf(">")),e;if(e=b(k))if(e=!1,b(window.navigator)&&
    b(window.navigator.userAgent)){var w=window.navigator.userAgent.match(/Firefox\/([\.0-9]+)/);null!==w&&2==w.length&&(w=w[1].split("."),3==parseInt(w[0],10)&&6>=parseInt(w[1],10)&&(3==w.length?13>=parseInt(w[2],10)&&(e=!0):e=!0))}e&&(a.g=k)}return a},q={};try{q.a=encodeURIComponent(top.location.href)}catch(r){}try{q.b=encodeURIComponent(parent.location.href)}catch(d){}if(window!=top){try{q.c=encodeURIComponent(parent.document.referrer)}catch(A){}try{q.e=encodeURIComponent(window.document.referrer)}catch(h){}}try{q.d=
    encodeURIComponent(window.location.href)}catch(v){}try{var f=e();q.g=encodeURIComponent(f.g);q.q=encodeURIComponent(f.q)}catch(l){}var q=a(q),q=c(q),e=[],g;for(g in q)q.hasOwnProperty(g)&&e.push({key:g,val:q[g]});e.sort(function(a,b){return a.val.length>b.val.length?1:a.val.length<b.val.length?-1:0});return e}()}();return{br:a,urls:c}},e=function(a,b,e){var d=["//pixel.adsafeprotected.com/db2/video/",b,"/",e,"/skeleton.js?videoId=",s.getVideoId()].join("");b=function(a){d=[d,"&adsafe_url=",a.val,
    "&adsafe_type=",a.key].join("")};try{a.urls.forEach(b),d=[d,"&adsafe_jsinfo=br:",a.br].join("")}catch(k){n.report(c.DIAGNOSTIC.BUILD_VIDEOAPI_URL,k)}return d},d=function(){if(this.readyState==c.XHR.READY_STATE.DONE)if(this.status==c.HTTP.STATUS_CODE.OK)try{a("failed"===JSON.parse(this.responseText).action?c.BLOCKING_RESPONSE.BLOCK:c.BLOCKING_RESPONSE.SAFE)}catch(b){n.report(c.DIAGNOSTIC.BLOCK_AD,b)}else n.report(c.DIAGNOSTIC.BLOCKING_URL_REQUEST_ERR,{message:this.status})};return{init:function(c,
    f,r){var g=b();c=e(g,c,f);a=r;h.sendUrlRequest(c,d)}}}(),p=function(){var a=[];return{addCallback:function(b,c){var d=0;c=c||Number.MAX_VALUE;a.push(function(){d<c&&(d++,b.apply({},arguments))})},executeCallbacks:function(){var b=arguments;a.forEach(function(a){a.apply({},b)})}}},t=function(){var a=window;return{getWin:function(){return a},setWin:function(b){(b=b&&b.ownerDocument)&&b.defaultView?a=b.defaultView:b&&b.parentWindow?a=b.parentWindow:n.report(c.DIAGNOSTIC.SET_CONTEXT,{message:""})},getDoc:function(){return a.document}}}(),
    m=function(){var a,b=[],e=!1,d=function(a){var b="";Object.keys(a).forEach(function(c){-1===["advEntityId","pubEntityId","partner","debug"].indexOf(c)&&(b+="&"+c+"="+a[c])});return b},g=function(k){if(s.isEstablished()){var e;try{if(e=h.stringify(k))if("AdImpression"===k.messageType)h.getWindow()[a](e);else h.getWindow().postMessage(e,"*")}catch(q){n.report(c.DIAGNOSTIC.DISPATCH_MESSAGE,q)}}else if(s.canNeverBeEstablished()){e=f||c.PROD_DOMAIN;var r=m.config;try{"AdImpression"===k.messageType&&(m.isCmTag?
    h.sendUrlRequest(["//"+e,"/mon?",d(r)].join("")):m.isFwTag&&h.sendUrlRequest(["//"+e,"/rfw/st/",r.advEntityId+"/"+r.pubEntityId,"/skeleton.js"].join("")))}catch(g){n.report(c.DIAGNOSTIC.DISPATCH_MESSAGE,g)}}else try{b.push(k)}catch(v){n.report(c.DIAGNOSTIC.CACHE_MESSAGE,v)}},v=function(a,b){h.sendMonitoringDebugPixel(c.MONITORING.AD_STOPPED,m.monitoringQS());r(a,b)},r=function(a,b){try{g({messageType:a,id:s.getVideoId(),time:h.now(),partner:u.getPartnerCode(),eventData:b})}catch(e){n.report(c.DIAGNOSTIC.SEND_EVENT,
    e)}},x={AdImpression:function(a,b){var d=l.getInjector();e||(b&&(b.ext_passthrough=m.passThroughObj),e=!0,h.sendMonitoringDebugPixel(c.MONITORING.AD_IMPRESSION,m.monitoringQS()),d.onInjectionResolution(function(){r(a,b)}),d.resolveInjection())},AdStopped:v,AdVideoComplete:v,AdError:function(a,b){h.sendMonitoringDebugPixel(c.MONITORING.AD_ERROR,m.monitoringQS());r(a,b)}};return{sendEvent:function(a,b){var c=x[a]||r;l.vans.hasBegun()&&c(a,b)},setImpressionCallback:function(b){a=b},flushUnsentEvents:function(){try{b.forEach(g)}catch(a){n.report(c.DIAGNOSTIC.FLUSH_UNSENT_EVENTS,
    a)}},passThroughObj:{},monitoringQS:function(){},clearSessionState:function(){e=!1;b.length=0}}}(),n=function(){var a={};return{report:function(b,c,d){if(!a[b])try{a[b]=!0;var g="//pixel.adsafeprotected.com/jsdiagnostic?code:vans-js_"+encodeURIComponent(u.getPartnerCode())+"_"+b+"&err:"+encodeURIComponent(c.message);d&&(g+="&config:"+encodeURIComponent(JSON.stringify(d)));h.sendUrlRequest(g)}catch(f){}}}}(),u=function(){return{initCM:function(a,b){y.initCM(a,b)},initFW:function(a,b,c){y.initFW(a,
    b,c)},getPartnerCode:function(){return l.get().partnerCode},getPassThroughObj:function(){return l.get().passThroughObj},getAltMonDomain:function(){return l.get().monDomain},hasDebugEnabled:function(){return l.get().debugEnabled}}}(),s=function(){var a,b=!1,e=!1,d=function(a,e){a==g()&&(b=!0,m.setImpressionCallback(e),h.sendMonitoringDebugPixel(c.MONITORING.HANDSHAKE_SUCCESS,m.monitoringQS()),m.flushUnsentEvents());return b?c.VIDEO_CHANNEL:null},g=function(){a||(a=h.generateUID());return a};return{getVideoId:g,
    setNodeInterface:function(a){var b,e,k,f=g();try{b="IASid"+f,e="blockAd"+f,k="getIasVidBridgeVersion"+f,a.className+=" integral-vid-"+f,a[e]=h.noop,a[b]=d,a[k]=function(){return"2"},a.getVersion=function(){return c.INTERNAL_VERSION}}catch(q){n.report(c.DIAGNOSTIC.SET_NODE_INTERFACE,q)}},isEstablished:function(){return b},canNeverBeEstablished:function(){return e},giveUpOnHandshaking:function(){e=!0;m.flushUnsentEvents()},resetHandshake:function(){e=b=!1}}}(),C=function(){var a=p();return{addCallback:function(b){a.addCallback(b,
    1)},executeCallbacks:a.executeCallbacks}},x=function(a){var b=!1,e=!1,d=new C,l=!1,x=function(a,b){var e,d=f||c.PROD_DOMAIN,g=function(a){var b="";Object.keys(a).forEach(function(c){"advEntityId"!=c&&"pubEntityId"!=c&&"partner"!=c&&(b+="&"+c+"="+a[c])});return b};try{e=["//",d,a,"?videoId=",s.getVideoId(),g(b)].join("")}catch(r){n.report(c.DIAGNOSTIC.BUILD_SRC_URL,r)}return e},r=function(k){var f,r=function(){!b&&a.parentNode?(a.parentNode.appendChild(k),clearInterval(f),e=b=!0,h.sendMonitoringDebugPixel(c.MONITORING.FWJS_INJECTED,
    g.buildMonitoringQS())):l&&(e=!0,clearInterval(f),s.giveUpOnHandshaking());e&&d.executeCallbacks()};r();b||(f=setInterval(r,200))},m=function(){var b=a&&a.ownerDocument,c=b&&b.parentWindow;return!!(b&&b.defaultView||c)};return{injectTagScript:function(a,b){var d,f=h.getDocument();if(m()){var l=function(a){h.sendMonitoringDebugPixel(c.MONITORING.FWJS_LOAD_SUCCESS,g.buildMonitoringQS())},A=function(a){s.giveUpOnHandshaking();h.sendMonitoringDebugPixel(c.MONITORING.FWJS_LOAD_ERROR,g.buildMonitoringQS())};
    try{d=f.createElement("script"),d.src=x(a,b),d.addEventListener("load",l),d.addEventListener("error",A),r(d)}catch(n){s.giveUpOnHandshaking(),h.sendMonitoringPixel(c.MONITORING.INJECTION_ERR)}}else e=!0,s.giveUpOnHandshaking()},sendInjectionDiagnostics:function(){var b=a&&a.ownerDocument,e=a&&a.parentNode,d=b&&(b.defaultView||b.parentWindow),f=c.MONITORING.AD_NODE_TYPE+"_"+(a?a.constructor.name||a.nodeName||typeof a:"null");a||h.sendMonitoringDebugPixel(c.MONITORING.AD_NODE_NULL,g.buildMonitoringQS());
    a&&!e&&h.sendMonitoringDebugPixel(c.MONITORING.AD_NODE_DETACHED,g.buildMonitoringQS());a&&!b&&h.sendMonitoringDebugPixel(c.MONITORING.AD_NODE_NO_DOC,g.buildMonitoringQS());b&&!d&&h.sendMonitoringDebugPixel(c.MONITORING.AD_NODE_NO_WINDOW,g.buildMonitoringQS());h.sendMonitoringDebugPixel(f,g.buildMonitoringQS())},onInjectionResolution:function(a){d.addCallback(a);e&&d.executeCallbacks()},resolveInjection:function(){l=!0}}},c={INTERNAL_VERSION:"3.5.1",VIDEO_CHANNEL:"jv3",PROD_DOMAIN:"pixel.adsafeprotected.com",
    DIAGNOSTIC_MONITORING_DOMAIN:"spixel.adsafeprotected.com",S4_ITERATIONS:8,EVENTS:{AD_IMPRESSION:"AdImpression"},PSUEDO_IMPRESSION_ID_PREFIX:"vidId_",DIAGNOSTIC:{INIT_FW:"ifw",INIT_CM:"icm",FLUSH_UNSENT_EVENTS:"fue",CACHE_MESSAGE:"cm",SEND_EVENT:"se",BLOCK_AD:"ba",SEND_MONITORING_PIXEL:"smp",SET_NODE_INTERFACE:"sni",BUILD_SRC_URL:"bsurl",BUILD_VIDEOAPI_URL:"bvu",BLOCKING_URL_REQUEST_ERR:"blk_url_req_err",DISPATCH_MESSAGE:"dm",SET_CONTEXT:"sc",STRINGIFY_EVENT_ERROR:"ser"},MONITORING:{INJECTION_ERR:"inj_err",
    VANS_INITIALIZED:"init",HANDSHAKE_SUCCESS:"hs",AD_IMPRESSION:"ai",DEFERRED_INTERFACE:"vans_defer",AD_STOPPED:"adstop",AD_ERROR:"aderr",AD_NODE_NULL:"adnode_null",AD_NODE_DETACHED:"adnode_detached",AD_NODE_NO_DOC:"adnode_nodoc",AD_NODE_NO_WINDOW:"adnode_nowin",AD_NODE_TYPE:"adnode_type",FWJS_INJECTED:"fwjsinj",FWJS_LOAD_SUCCESS:"fwjsload",FWJS_LOAD_ERROR:"fwjsload_err",IMPRESSION_DOMAIN_BLOCKING:"impblock"},HTTP:{VERBS:{GET:"GET"},STATUS_CODE:{OK:200}},BLOCKING_RESPONSE:{BLOCK:"block",SAFE:"safe"},
    XHR:{READY_STATE:{DONE:4}}},y=function(){var a=function(a,c,d,f){s.setNodeInterface(d);var g={};Object.getOwnPropertyNames(c).forEach(function(a){"debug"!==a&&(g[a]=c[a])});f.injectTagScript(a,g)};return{initCM:function(b,e){var d;if(!l.vans.hasBegun()){if(!b||!b.partner)throw Error("Missing partner code");t.setWin(e);l.setPreErrorConfig(b,"cm");try{if(!b.anId)throw Error("Missing anId");l.vans.begin();d=new x(e);l.setInjector(d);l.setConfig(b);h.sendMonitoringDebugPixel(c.MONITORING.VANS_INITIALIZED,
    g.buildMonitoringQS());h.sendMonitoringDebugPixel(c.MONITORING.IMPRESSION_DOMAIN_BLOCKING,g.buildMonitoringQS(),f||c.PROD_DOMAIN);d.sendInjectionDiagnostics();a("/jsvid",b,e,d)}catch(m){n.report(c.DIAGNOSTIC.INIT_CM,m)}}},initFW:function(b,e,m){var p,v;if(!l.vans.hasBegun()){if(!b||!b.partner)throw Error("Missing partner code");t.setWin(e);l.setPreErrorConfig(b,"fw");try{if(!b.advEntityId||!b.pubEntityId)throw Error("Missing client id: advEntityId: "+b.advEntityId+" ,pubEntityId: "+b.pubEntityId);
    l.vans.begin();v=new x(e);l.setInjector(v);l.setConfig(b);h.sendMonitoringDebugPixel(c.MONITORING.VANS_INITIALIZED,g.buildMonitoringQS());h.sendMonitoringDebugPixel(c.MONITORING.IMPRESSION_DOMAIN_BLOCKING,g.buildMonitoringQS(),f||c.PROD_DOMAIN);v.sendInjectionDiagnostics();m&&d.init(b.advEntityId,b.pubEntityId,m);p="/fwjsvid/st/"+b.advEntityId+"/"+b.pubEntityId+"/skeleton.js";a(p,b,e,v)}catch(r){n.report(c.DIAGNOSTIC.INIT_FW,r)}}}}}(),g={buildMonitoringQS:function(){var a=c.PSUEDO_IMPRESSION_ID_PREFIX+
    s.getVideoId(),b=l.getInfoParams();return["&chanId="+b.anId,"planId="+b.advEntityId,"placementId="+b.pubEntityId,"advId="+b.campId,"pubOrder="+b.placementId,"pubCreative="+b.creativeId,"impId="+(b.impId||a),"ts="+Date.now(),"custom="+c.INTERNAL_VERSION,"custom2=jv3&custom3="+l.get().tagType,"adsafe_par"].join("&")}},l=function(){var a={},b=!1,e={},d,f=function(b){"impId creativeId campId placementId advEntityId pubEntityId anId".split(" ").forEach(function(a){e[a]=b[a]});e.monDomain=a.monDomain},
    h=function(b){m.monitoringQS=g.buildMonitoringQS;m.passThroughObj=a.passThroughObj;Object.keys(b).forEach(function(a){m[a]=b[a]})};return{vans:{hasBegun:function(){return b},begin:function(){b=!0}},setInjector:function(a){d=a},getInjector:function(){return d},setPreErrorConfig:function(b,c){a.tagType=c;var e;e=b.partner;var d=/[^\w-.]/g;e="string"===typeof e?e.replace(d,""):e;a.partnerCode=e;a.debugEnabled=b.debug&&b.debug.enabled;a.debugEnabled&&(a.monDomain=b.debug.monDomain)},setConfig:function(b){f(b);
    a.passThroughObj={vv:c.INTERNAL_VERSION,vanstag:a.tagType,xcamp:e.campId,xplac:e.placementId,xcreat:e.creativeId,ximp:e.impId,xpc:a.partnerCode};a.config=b;h({isFwTag:"fw"===a.tagType,isCmTag:"cm"===a.tagType,config:b})},getInfoParams:function(){return e},get:function(){return a}}}(),h={now:function(){return(new Date).getTime()},sendMonitoringPixel:function(a){try{this.sendUrlRequest(["//pixel.adsafeprotected.com/mon?anId=10173&campId=",encodeURIComponent(u.getPartnerCode()),"&pubId=",encodeURIComponent("vans-js_"+
    a)].join(""))}catch(b){n.report(c.DIAGNOSTIC.SEND_MONITORING_PIXEL,b)}},sendMonitoringDebugPixel:function(){var a=[c.MONITORING.AD_STOPPED],b={};return function(e,d,f){var g=u.hasDebugEnabled(),l=-1<a.indexOf(e)&&b[e];if(g&&!l)try{var m=c.DIAGNOSTIC_MONITORING_DOMAIN,k=u.getAltMonDomain();f=f||k||m;var k=f===k?"925116":"10173",x=h.addProtocolToDomain(f),q=encodeURIComponent(e),p=encodeURIComponent(u.getPartnerCode()),s;s=d.replace(/=undefined&/g,"=&");h.sendUrlRequest(x+"/mon?anId="+k+"&campId="+
    p+"&pubId="+q+s);b[e]=!0}catch(y){n.report(c.DIAGNOSTIC.SEND_MONITORING_PIXEL,y)}}}(),sendUrlRequest:function(a,b){var e,d;if(a){e=this.getWindow();try{d=new e.XMLHttpRequest,b&&(d.onreadystatechange=b),d.open(c.HTTP.VERBS.GET,a),d.send()}catch(f){}}},stringify:function(a){if("AdImpression"!==a.messageType)return JSON.stringify(a);var b={};b.passthroughObj=u.getPassThroughObj();var e="";try{e=JSON.stringify(a)}catch(d){n.report(c.DIAGNOSTIC.STRINGIFY_EVENT_ERROR,d,b);return}return e},addProtocolToDomain:function(a){return a.match(/^[a-zA-Z]+:\/\//)?
    a:"https://"+a},getWindow:function(){return t.getWin()},getDocument:function(){return t.getDoc()},generateUID:function(){var a,b="";try{for(a=0;a<c.S4_ITERATIONS;a++)b=[b,Math.floor(65536*(1+Math.random())).toString(16).substring(1)].join("")}catch(d){}return b},noop:function(){}};return{initFW:u.initFW,initCM:u.initCM,sendEvent:m.sendEvent}},E=function(f){var d={partner:B.GOOGLE_IMA_PARTNER_CODE};if(0<f.getWrapperAdIds().length){var d=t.extend({},d),p=f.getWrapperAdSystems()[0];"GDFP"===p?(d.pubCreative=
    f.getWrapperCreativeIds()[0],d.placementId=f.getWrapperAdIds()[0]):"AdX/AdSense"===p&&(d.pubId="AdX",d.placementId=f.getDealId())}else d=t.extend({},d),p=f.getAdSystem(),"GDFP"===p?(d.placementId=f.getAdId(),d.pubCreative=f.getCreativeId()):"AdX/AdSense"===p&&(d.pubId="AdX",d.placementId=f.getDealId());return f=d},t=function(){return{extend:function(f,d){for(var p in d)t.isDefined(d[p])&&d.hasOwnProperty(p)&&(f[p]=d[p]);return f},isObject:function(f){return null!==f&&"object"===typeof f},isDefined:function(f){return"undefined"!==
    typeof f}}}(),B={ADAPTER:"google-ima",GOOGLE_IMA_PARTNER_CODE:"ima"};return function(){var f,d,p,z={},m=function(d,f){var c={volume:d.getVolume()};f&&(c.ad_duration=f.getDuration(),c.height=f.getHeight()||f.getVastMediaHeight(),c.width=f.getWidth()||f.getVastMediaWidth());return c},n=function(d,p,c){d.addEventListener(c,function(c){c=c.getAd&&c.getAd();f.sendEvent(p,m(d,c))})},u=function(d){Object.keys(z).forEach(function(f){n(d,f,z[f])})},s=function(p,n,c){var s=c&&c.fwServerDomain;p.addEventListener(d.LOADED,
    function(d){d=d.getAd&&d.getAd();var l=new E(d),h;t.isObject(c)?(h=t.extend({},c),t.extend(h,l)):h=l;l=h;try{f=new D(s),f.initCM(l,n)}catch(a){try{(new Image).src="//pixel.adsafeprotected.com/jsdiagnostic?code:vans-js-adapter_"+B.ADAPTER+"_initCm&err:"+encodeURIComponent(a.message)+"&config:"+encodeURIComponent(JSON.stringify(l))}catch(b){}}f.sendEvent("AdLoaded",m(p,d))})};return{init:function(f,m,c,n){t.isDefined(n)&&t.isDefined(n.anId)||console.error("The Integral Google IMA Adapter is missing a valid config with the required anId macro. The Web Video SDK will fail to initialize.");
    var g;try{g=f.ima,d=g.AdEvent.Type,p=g.AdErrorEvent.Type,z={AdStarted:d.STARTED,AdSkipped:d.SKIPPED,AdSkippableStateChange:d.SKIPPABLE_STATE_CHANGED,AdVolumeChange:d.VOLUME_CHANGED,AdRemainingTimeChange:d.DURATION_CHANGE,AdImpression:d.IMPRESSION,AdVideoStart:d.STARTED,AdVideoFirstQuartile:d.FIRST_QUARTILE,AdVideoMidpoint:d.MIDPOINT,AdVideoThirdQuartile:d.THIRD_QUARTILE,AdVideoComplete:d.COMPLETE,AdClickThru:d.CLICK,AdPaused:d.PAUSED,AdPlaying:d.RESUMED,AdError:p.AD_ERROR}}catch(l){console.error("The Integral Ad Science VANS Adaptor did not receive Google IMA SDK's 'google' object as the first argument during initialization.")}s(m,
    c,n);u(m)}}}()}();