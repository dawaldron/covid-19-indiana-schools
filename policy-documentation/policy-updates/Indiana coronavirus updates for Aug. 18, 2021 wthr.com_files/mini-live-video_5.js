define("mini-live-video",["module","jquery","page","utils","jwplayer","live-video-banner","header","jquery-utils"],function(e,p,c,i,m){"use strict";const y="stopped",f="playing";var g={name:e.id,class:"."+e.id};i.broadcast(g.name,"loaded"),i.createModule(g.name,function(t){const n=this;this.$el=t,this.module=g,this.uuid=i.uuid(),this.id="mini-live-video-"+this.uuid,this.player=null,this.init=function(){n.broadcast("init"),n.getElements("player").attr("id",n.id),"false"===n.$el.attr("data-is-watch")&&(window.tegna.headerData&&(n.broadcast("updatingFromExistingData"),d(window.tegna.headerData)),i.listen("header-updater","receivedUpdate",function(e,t,i){n.broadcast("updatingFromNewData"),d(i)}),i.listenNoJQ("header-updater","receivedUpdate",function(e,t,i){n.broadcast("updatingFromNewData"),d(i)}),i.listen("live-messages","liveVideoStarted",function(e,t,i){a===y&&r(i.message.id,i.message.metadata.url[`${c.model.platform}Url`],i.message.metadata.title,s(i.message.metadata.renditions,"HLS").url)}),i.listen("live-messages","liveVideoStopped",function(e,t,i){a===f&&i.message.id===l&&(n.broadcast("stopped"),u(y),l=null,n.player.remove())}),i.listen("video","play adPlay",function(e,t,i){l.toString()===i.instance.videoData.id.toString()&&(n.player.pause(!0),n.getElements("button").withModifier("type","pause").setModifier("type","play"))})),n.broadcast("ready")};var o=null,l=null,a=y;const s=(e,t)=>e.find(e=>e.format.toLowerCase()===t.toLowerCase()),d=e=>{var t;a===y&&(e.currentlyLiveVideos&&0<e.currentlyLiveVideos.length?r((t=e.currentlyLiveVideos[0]).id,t.metadata.url[`${c.model.platform}Url`],t.metadata.title,s(t.metadata.renditions,"HLS").url):0<e.breakingLiveVideos.length&&r((e=e.breakingLiveVideos[0]).id,e.video.metadata.url[`${c.model.platform}Url`],e.title,s(e.video.metadata.renditions,"HLS").url))};function r(e,t,i,a){l=e,o=t,n.broadcast("started",{id:e,url:t,title:i}),function(e,t,i){e={width:"110px",height:"62px",mute:"true",aspectratio:"16:9",androidhls:!0,hlshtml:!0,primary:"html5",abouttext:"Tegna Media",aboutlink:"http://www.tegna.com/media/",hlslabels:{346:"Low",659:"Medium",955:"High",1776:"HD"},file:t,title:e,autostart:!0,displaytitle:!1,displaydescription:!1,controls:!1};n.player=m(n.id),n.player.setup(e),p("#"+n.id).addClass(g.name+"__player"),n.player.on("ready",function(){i()})}(i,a,function(){n.getElements("button").on("click",function(){c.refreshTimer&&c.refreshTimer.stop()}),n.getElements("controls").on("click",`${g.class}__button_type_pause`,function(){n.player.pause(!0),n.getElements("button").withModifier("type","pause").setModifier("type","play")}),n.getElements("controls").on("click",`${g.class}__button_type_play`,function(){n.player.play(),n.getElements("button").withModifier("type","play").setModifier("type","pause")}),n.getElements("controls").on("click",`${g.class}__button_type_mute`,function(){n.player.setMute(!0),n.getElements("button").withModifier("type","mute").setModifier("type","unmute")}),n.getElements("controls").on("click",`${g.class}__button_type_unmute`,function(){n.player.setMute(!1),n.getElements("button").withModifier("type","unmute").setModifier("type","mute")}),n.getElements("button").withModifier("type","open").attr("href",o),u(f),n.broadcast("playerInitialized")})}function u(e){n.broadcast("updatingState",{newState:e,oldState:a}),a=e,t.getBlock(g.name).setModifier("state",e)}})});
//# sourceMappingURL=mini-live-video_5.8.4.js.map