// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","./GLMaterial"],function(g,c,h){return function(f){function e(a){var b=f.call(this,a)||this;b._textureIDs=new Set;b._textureRepository=a.textureRep;b._textureId=a.textureId;b._initTransparent=!!a.initTextureTransparent;b._texture=b._acquire(b._textureId);b._textureNormal=b._acquire(a.normalTextureId);b._textureEmissive=b._acquire(a.emissiveTextureId);b._textureOcclusion=b._acquire(a.occlusionTextureId);b._textureMetallicRoughness=
b._acquire(a.metallicRoughnessTextureId);return b}g._inheritsLoose(e,f);var d=e.prototype;d.dispose=function(){this._textureIDs.forEach(a=>this._textureRepository.release(a));this._textureIDs.clear()};d.updateTexture=function(a){a!==this._textureId&&(this._release(this._textureId),this._textureId=a,this._texture=this._acquire(this._textureId))};d.bindTextures=function(a){c.isSome(this._texture)&&a.bindTexture(this._texture.glTexture,"tex");c.isSome(this._textureNormal)&&a.bindTexture(this._textureNormal.glTexture,
"normalTexture");c.isSome(this._textureEmissive)&&a.bindTexture(this._textureEmissive.glTexture,"texEmission");c.isSome(this._textureOcclusion)&&a.bindTexture(this._textureOcclusion.glTexture,"texOcclusion");c.isSome(this._textureMetallicRoughness)&&a.bindTexture(this._textureMetallicRoughness.glTexture,"texMetallicRoughness")};d.bindTextureScale=function(a){const b=c.isSome(this._texture)&&this._texture.glTexture;b&&b.descriptor.textureCoordinateScaleFactor?a.setUniform2fv("textureCoordinateScaleFactor",
b.descriptor.textureCoordinateScaleFactor):a.setUniform2f("textureCoordinateScaleFactor",1,1)};d._acquire=function(a){if(!c.isNone(a))return this._textureIDs.add(a),this._textureRepository.acquire(a,this._initTransparent)};d._release=function(a){c.isNone(a)||(this._textureIDs.delete(a),this._textureRepository.release(a))};return e}(h)});