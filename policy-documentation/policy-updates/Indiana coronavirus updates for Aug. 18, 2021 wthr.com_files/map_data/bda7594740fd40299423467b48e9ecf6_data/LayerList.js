// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
/*
 MIT
*/
require({cache:{"esri/widgets/LayerList/LayerListViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./ListItem ./support/layerListUtils".split(" "),function(R,w,q,Q,ba,V,B,n,O,M,S,z,E,ta){const da=
q.ofType(E);q=function(T){function pa(k){k=T.call(this,k)||this;k._handles=new ba;k.listItemCreatedFunction=null;k.operationalItems=new da;k.view=null;return k}R._inheritsLoose(pa,T);var I=pa.prototype;I.initialize=function(){this._handles.add(V.init(this,["view","view.ready"],()=>this._viewHandles()),"view")};I.destroy=function(){this._handles.destroy();this.view=this._handles=null;this.operationalItems.removeAll()};I.triggerAction=function(k,r){k&&!k.disabled&&this.emit("trigger-action",{action:k,
item:r})};I.moveListItem=function(k,r,G,C){var U,fa;const Y=null==k?void 0:k.layer;if(Y){var t=null==(U=this.view)?void 0:null==(fa=U.map)?void 0:fa.layers;U=r?ta.getItemLayers(r):t;t=G?ta.getItemLayers(G):t;U&&t&&({operationalItems:fa}=this,r=(null==r?void 0:r.children)||fa,fa=(null==G?void 0:G.children)||fa,C=t.length-C,k.parent=G||null,r.includes(k)&&r.remove(k),U.includes(Y)&&U.remove(Y),fa.includes(k)||fa.add(k,C),t.includes(Y)||t.add(Y,C))}};I._createLayerViewHandles=function(k){const {_handles:r}=
this;r.remove("layer-views");this._compileList();k&&r.add(k.on("change",()=>this._compileList()),"layer-views")};I._createMapLayerHandles=function(k){const {_handles:r}=this;r.remove("map-layers");this._compileList();k&&r.add(k.on("change",()=>this._compileList()),"map-layers")};I._watchItemProperties=function(k){this._handles.add([k.children.on("change",()=>{this._modifyListItemChildren(k.children)})],`children-change-${k.uid}`)};I._modifyListItemChildren=function(k){k.forEach(r=>this._modifyListItem(r))};
I._modifyListItem=function(k){"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,{item:k});this._modifyListItemChildren(k.children)};I._createListItem=function(k){const {view:r}=this;k=new E({layer:k,view:r});this._watchItemProperties(k);return k};I._removeAllItems=function(){const {_handles:k,operationalItems:r}=this;r.forEach(G=>{k.remove(`children-change-${G.uid}`)});r.removeAll()};I._getViewableLayers=function(k){if(k)return k.filter(r=>"hide"!==ta.findLayerListMode(r))};
I._watchLayersListMode=function(k){const {_handles:r}=this;r.remove("layer-list-mode");k&&k.forEach(G=>{r.add(V.watch(G,"listMode",()=>this._compileList()),"layer-list-mode")})};I._compileList=function(){var k=this.get("view.map.layers");this._watchLayersListMode(k);(k=this._getViewableLayers(k))&&k.length?(this._createNewItems(k),this._modifyOrRemoveItems(k),this._sortItems(k)):this._removeAllItems()};I._createNewItems=function(k){const {operationalItems:r}=this;k.forEach(G=>{r.find(C=>C.layer===
G)||r.add(this._createListItem(G))})};I._modifyOrRemoveItems=function(k){const {_handles:r,operationalItems:G}=this,C=[];G.forEach(U=>{U&&k&&k.find(fa=>U.layer===fa)?this._modifyListItem(U):(r.remove(`children-change-${U.uid}`),C.push(U))});G.removeMany(C)};I._sortItems=function(k){const {operationalItems:r}=this;r.sort((G,C)=>{G=k.indexOf(G.layer);C=k.indexOf(C.layer);return G>C?-1:G<C?1:0})};I._viewHandles=function(){const {_handles:k,view:r}=this;k.remove(["map-layers","layer-views","view-layers"]);
this._compileList();r&&r.ready&&k.add([V.init(this,"view.map.allLayers",G=>this._createMapLayerHandles(G)),V.init(this,"view.allLayerViews",G=>this._createLayerViewHandles(G)),V.init(this,"listItemCreatedFunction",()=>this._compileList())],"view-layers")};R._createClass(pa,[{key:"state",get:function(){const k=this.get("view");return this.get("view.ready")?"ready":k?"loading":"disabled"}}]);return pa}(Q.EventedAccessor);w.__decorate([B.property()],q.prototype,"listItemCreatedFunction",void 0);w.__decorate([B.property({type:da})],
q.prototype,"operationalItems",void 0);w.__decorate([B.property({readOnly:!0})],q.prototype,"state",null);w.__decorate([B.property()],q.prototype,"view",void 0);return q=w.__decorate([z.subclass("esri.widgets.LayerList.LayerListViewModel")],q)})},"esri/widgets/LayerList/ListItem":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/HandleOwner ../../core/Identifiable ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/has ../../core/accessorSupport/decorators/cast ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(R,w,q,Q,ba,V,B,n,O,M,S,z,E,ta,da,T,pa,I,k,r){var G;O=Q.ofType({key:"type",defaultKeyValue:"button",base:da,typeMap:{button:T,toggle:I,slider:pa}});const C=Q.ofType(O);q=G=function(U){function fa(t){t=U.call(this,t)||this;t.actionsSections=new C;t.actionsOpen=!1;t.children=new (Q.ofType(G));t.childrenSortable=!0;t.error=null;t.layer=null;t.layerView=null;t.open=!1;t.panel=null;t.parent=null;t.sortable=!0;t.view=null;t.visible=null;return t}R._inheritsLoose(fa,U);var Y=fa.prototype;Y.initialize=
function(){this.handles.add([B.init(this,"layer",t=>this._watchLayerProperties(t)),B.init(this,"view",t=>this._updateChildren(t)),B.init(this,"panel",t=>this._setListItemOnPanel(t)),B.init(this,["layer","view"],()=>this._getLayerView())])};Y.destroy=function(){this.view=null};Y.castPanel=function(t){this.get("panel.open")&&!t.hasOwnProperty("open")&&(t.open=!0);return t?new k(t):null};Y.clone=function(){return new G({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),
layer:this.layer,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};Y._setListItemOnPanel=function(t){t&&(t.listItem=this)};Y._updateChildren=function(t){const Z=this.children;Z&&Z.forEach(xa=>xa.view=t)};Y._addChildren=function(t){this.handles.remove("child-list-mode");this.children.removeAll();if(t){t.forEach(xa=>{this.handles.add(B.watch(xa,"listMode",()=>this._addChildren(t)),"child-list-mode")});var Z=t.filter(xa=>"hide"!==r.findLayerListMode(xa));this.children.addMany(this._makeChildren(Z))}};
Y._watchSublayerChanges=function(t){t&&this.handles.add(t.on("change",()=>{this._addChildren(t)}),"layer")};Y._initializeChildLayers=function(t){this._addChildren(t);this._watchSublayerChanges(t)};Y._makeChildren=function(t){return t.map(Z=>r.canDisplayLayer(Z)?new G({layer:Z,parent:this,view:this.view}):null).reverse()};Y._watchLayerProperties=function(t){if(this.handles&&(this.handles.remove("layer"),this.handles.remove("child-list-mode"),t))if(this.handles.add(B.watch(t,"listMode",()=>this._watchLayerProperties(t)),
"layer"),"hide-children"===r.findLayerListMode(t))this.children.removeAll();else{var Z=r.getNormalizedChildLayerProperty(t);Z&&this.handles.add(B.init(t,Z,()=>{t.hasOwnProperty(Z)&&this._initializeChildLayers(t[Z])}),"layer")}};Y._getLayerView=function(){var t=R._asyncToGenerator(function*(){const {layer:Z,view:xa}=this;if(Z&&xa)try{const ha=yield xa.whenLayerView(Z);ha.layer===this.layer&&this._set("layerView",ha)}catch{}});return function(){return t.apply(this,arguments)}}();Y._isLayerUpdating=
function(t){return t&&"loading"===t.loadStatus};R._createClass(fa,[{key:"title",get:function(){const t=this.get("layer.layer");return(!t||t&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""},set:function(t){void 0===t?this._clearOverride("title"):this._override("title",t)}},{key:"updating",get:function(){const t=this.layerView;return t?t.updating:this._isLayerUpdating(this.layer)}},{key:"visibleAtCurrentScale",get:function(){return!r.isLayerOutsideScaleRange(this.layer,
this.get("view.scale"))}},{key:"visibilityMode",get:function(){return r.findLayerVisibilityMode(this.layer)}}]);return fa}(V.IdentifiableMixin(ba.HandleOwnerMixin(q)));w.__decorate([E.property({type:C})],q.prototype,"actionsSections",void 0);w.__decorate([E.property()],q.prototype,"actionsOpen",void 0);w.__decorate([E.property({type:Q})],q.prototype,"children",void 0);w.__decorate([E.property()],q.prototype,"childrenSortable",void 0);w.__decorate([n.aliasOf("layer.loadError?")],q.prototype,"error",
void 0);w.__decorate([E.property()],q.prototype,"layer",void 0);w.__decorate([E.property({readOnly:!0})],q.prototype,"layerView",void 0);w.__decorate([E.property()],q.prototype,"open",void 0);w.__decorate([E.property({type:k})],q.prototype,"panel",void 0);w.__decorate([M.cast("panel")],q.prototype,"castPanel",null);w.__decorate([E.property()],q.prototype,"parent",void 0);w.__decorate([E.property()],q.prototype,"sortable",void 0);w.__decorate([E.property()],q.prototype,"title",null);w.__decorate([E.property({readOnly:!0})],
q.prototype,"updating",null);w.__decorate([E.property({value:null})],q.prototype,"view",void 0);w.__decorate([n.aliasOf("layer.visible")],q.prototype,"visible",void 0);w.__decorate([E.property({readOnly:!0})],q.prototype,"visibleAtCurrentScale",null);w.__decorate([E.property({readOnly:!0})],q.prototype,"visibilityMode",null);return q=G=w.__decorate([ta.subclass("esri.widgets.LayerList.ListItem")],q)})},"esri/support/actions/ActionSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),
function(R,w,q,Q,ba,V,B,n,O){var M;Q=M=function(S){function z(E){E=S.call(this,E)||this;E.displayValueEnabled=!1;E.max=1;E.min=0;E.step=.1;E.type="slider";E.value=null;return E}R._inheritsLoose(z,S);z.prototype.clone=function(){return new M({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};return z}(O);
w.__decorate([q.property()],Q.prototype,"displayValueEnabled",void 0);w.__decorate([q.property()],Q.prototype,"max",void 0);w.__decorate([q.property()],Q.prototype,"min",void 0);w.__decorate([q.property()],Q.prototype,"step",void 0);w.__decorate([q.property()],Q.prototype,"value",void 0);return Q=M=w.__decorate([n.subclass("esri.support.Action.ActionSlider")],Q)})},"esri/widgets/LayerList/ListItemPanel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Handles ../../core/Identifiable ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../Widget ../support/widget ../support/jsxFactory".split(" "),
function(R,w,q,Q,ba,V,B,n,O,M,S,z,E,ta,da){ba=function(T){function pa(k,r){k=T.call(this,k,r)||this;k._legend=null;k._handles=new Q;k.content=null;k.image=null;k.listItem=null;k.open=!1;k.visible=!0;return k}w._inheritsLoose(pa,T);var I=pa.prototype;I.initialize=function(){this.own([V.init(this,"content",k=>this._createLegend(k))])};I.destroy=function(){const {_legend:k}=this;k&&k.destroy();this._legend=null};I.render=function(){return da.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};
I._renderContent=function(k){const {_legend:r,listItem:G}=this;return k?"legend"===k?G&&G.view&&G.layer&&r?da.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:r},r.render()):null:"string"===typeof k?da.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:k,innerHTML:k}):ta.isWidget(k)?da.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),
key:k},k.render()):k instanceof HTMLElement?da.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:k,bind:k,afterCreate:this._attachToNode}):null:null};I._renderContents=function(){const {content:k}=this;return Array.isArray(k)?k.map(r=>this._renderContent(r)):this._renderContent(k)};I._getLegendOptions=function(k){if(k){var {layer:r,view:G}=k;if(r&&G)return{view:G,layerInfos:[{layer:r,title:""}]}}};I._createLegend=function(k){this._hasLegend(k)&&
!this._legend&&(new Promise(function(r,G){R(["../Legend"],function(C){r(Object.freeze({__proto__:null,"default":C}))},G)})).then(({default:r})=>{const {_handles:G,listItem:C}=this,U=new r(this._getLegendOptions(C));this._legend=U;this.notifyChange("className");this.notifyChange("title");r=V.init(this,["listItem.view","listItem.layer"],()=>this._updateLegend(U));G.add(r,"legends");this.scheduleRender()})};I._hasLegend=function(k){return"legend"===k?!0:Array.isArray(k)?k.some(r=>"legend"===r):!1};I._attachToNode=
function(k){k.appendChild(this)};I._updateLegend=function(k){const {listItem:r}=this;if(r){var {layer:G,view:C}=r;k.view=C;k.layerInfos=[{layer:G,title:null}];this.scheduleRender()}};I._getWidget=function(k){return"legend"===k?this._legend:ta.isWidget(k)?k:null};I._getFirstWidget=function(){const {content:k}=this;if(Array.isArray(k)){let r=null;k.some(G=>{(G=this._getWidget(G))&&(r=G);return!!G});return r}return this._getWidget(k)};w._createClass(pa,[{key:"className",get:function(){const {image:k}=
this,r=this._getFirstWidget();return this._get("className")||!k&&r?r.iconClass:""},set:function(k){void 0===k?this._clearOverride("className"):this._override("className",k)}},{key:"title",get:function(){const k=this._getFirstWidget();return this._get("title")||k?k.label:""},set:function(k){void 0===k?this._clearOverride("title"):this._override("title",k)}}]);return pa}(ba.IdentifiableMixin(E));q.__decorate([B.property()],ba.prototype,"className",null);q.__decorate([B.property()],ba.prototype,"content",
void 0);q.__decorate([B.property()],ba.prototype,"image",void 0);q.__decorate([B.property()],ba.prototype,"listItem",void 0);q.__decorate([B.property()],ba.prototype,"title",null);q.__decorate([B.property()],ba.prototype,"open",void 0);q.__decorate([B.property()],ba.prototype,"visible",void 0);return ba=q.__decorate([z.subclass("esri.widgets.LayerList.ListItemPanel")],ba)})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["exports"],function(R){function w(n){if(n)return null!=n.listMode?
n.listMode:void 0}function q(n){if(n)return null!=n.minScale?n.minScale:void 0}function Q(n){if(n)return null!=n.maxScale?n.maxScale:void 0}function ba(n){if(n&&n.listMode!==B.hideChildren&&"wmts"!==n.type)return"group"===n.type?"layers":"sublayers"}function V(n,O){n&&n.sort((M,S)=>{M=O.indexOf(M.uid);S=O.indexOf(S.uid);return M>S?-1:M<S?1:0})}const B={hide:"hide",hideChildren:"hide-children"};R.canDisplayLayer=function(n){return w(n)!==B.hide};R.canSortSublayers=function(n){n=n&&(n.get("layer.layer")||
n.layer);if(!n)return!1;n=n.get("capabilities.exportMap.supportsDynamicLayers");return"boolean"===typeof n?n:!0};R.findLayerListMode=w;R.findLayerMaxScale=Q;R.findLayerMinScale=q;R.findLayerVisibilityMode=function(n){if(!n)return"inherited";var O=n.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"===typeof O)return O?"independent":"inherited";O=n.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"===typeof O?O?"independent":"inherited":null!=n.visibilityMode?
n.visibilityMode:"independent"};R.findSelectedItem=function(n,O){var M;const S=null==(M=n.layer)?void 0:M.uid;return S&&O.find(z=>{var E;return(null==(E=z.layer)?void 0:E.uid)===S})};R.getItemLayers=function(n){return(n=null==n?void 0:n.layer)&&"group"===n.type?n.layers:null};R.getNormalizedChildLayerProperty=ba;R.isLayerOutsideScaleRange=function(n,O){if(!n||isNaN(O))return!1;var M=q(n);n=Q(n);M=!isNaN(M)&&0<M&&O>M;O=!isNaN(n)&&0<n&&O<n;return M||O};R.sortChildLayersToIds=function(n,O){if(n=null==
n?void 0:n.layer){var M=ba(n);M&&(n=n.get(M),V(n,O))}};R.sortLayersToIds=V;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/chunks/sortable.esm":function(){define(["exports"],function(R){function w(a){w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};return w(a)}function q(){q=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=
arguments[b],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a};return q.apply(this,arguments)}function Q(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},e=Object.keys(c);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(c).filter(function(f){return Object.getOwnPropertyDescriptor(c,f).enumerable})));e.forEach(function(f){var l=c[f];f in a?Object.defineProperty(a,f,{value:l,enumerable:!0,configurable:!0,
writable:!0}):a[f]=l})}return a}function ba(a,b){if(null==a)return{};if(null==a)var c={};else{c={};var e=Object.keys(a),f;for(f=0;f<e.length;f++){var l=e[f];0<=b.indexOf(l)||(c[l]=a[l])}}if(Object.getOwnPropertySymbols)for(f=Object.getOwnPropertySymbols(a),l=0;l<f.length;l++)e=f[l],0<=b.indexOf(e)||Object.prototype.propertyIsEnumerable.call(a,e)&&(c[e]=a[e]);return c}function V(a){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(a)}function B(a,b,c){a.addEventListener(b,
c,!ia&&vb)}function n(a,b,c){a.removeEventListener(b,c,!ia&&vb)}function O(a,b){if(b){"\x3e"===b[0]&&(b=b.substring(1));if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(c){}return!1}}function M(a,b,c,e){if(a){c=c||document;do{if(null!=b&&("\x3e"===b[0]?a.parentNode===c&&O(a,b):O(a,b))||e&&a===c)return a;if(a===c)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}
function S(a,b,c){if(a&&b)if(a.classList)a.classList[c?"add":"remove"](b);else{var e=(" "+a.className+" ").replace(wb," ").replace(" "+b+" "," ");a.className=(e+(c?" "+b:"")).replace(wb," ")}}function z(a,b,c){var e=a&&a.style;if(e){if(void 0===c)return document.defaultView&&document.defaultView.getComputedStyle?c=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in e||-1!==b.indexOf("webkit")||(b="-webkit-"+b);e[b]=c+("string"===typeof c?"":"px")}}
function E(a,b){var c="";if("string"===typeof a)c=a;else{do{var e=z(a,"transform");e&&"none"!==e&&(c=e+" "+c)}while(!b&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)&&new a(c)}function ta(a,b,c){if(a){a=a.getElementsByTagName(b);b=0;var e=a.length;if(c)for(;b<e;b++)c(a[b],b);return a}return[]}function da(){var a=document.scrollingElement;return a?a:document.documentElement}function T(a,b,c,e,f){if(a.getBoundingClientRect||a===window){if(a!==
window&&a.parentNode&&a!==da()){var l=a.getBoundingClientRect();var m=l.top;var v=l.left;var y=l.bottom;var H=l.right;var J=l.height;var N=l.width}else v=m=0,y=window.innerHeight,H=window.innerWidth,J=window.innerHeight,N=window.innerWidth;if((b||c)&&a!==window&&(f=f||a.parentNode,!ia)){do if(f&&f.getBoundingClientRect&&("none"!==z(f,"transform")||c&&"static"!==z(f,"position"))){y=f.getBoundingClientRect();m-=y.top+parseInt(z(f,"border-top-width"));v-=y.left+parseInt(z(f,"border-left-width"));y=m+
l.height;H=v+l.width;break}while(f=f.parentNode)}e&&a!==window&&(e=(a=E(f||a))&&a.a,f=a&&a.d,a&&(m/=f,v/=e,N/=e,J/=f,y=m+J,H=v+N));return{top:m,left:v,bottom:y,right:H,width:N,height:J}}}function pa(a,b,c){var e=U(a,!0);for(a=T(a)[b];e;){b=T(e)[c];var f=void 0;f="top"===c||"left"===c?a>=b:a<=b;if(!f)return e;if(e===da())break;e=U(e,!1)}return!1}function I(a,b,c){for(var e=0,f=0,l=a.children;f<l.length;){if("none"!==l[f].style.display&&l[f]!==F.ghost&&l[f]!==F.dragged&&M(l[f],c.draggable,a,!1)){if(e===
b)return l[f];e++}f++}return null}function k(a,b){for(a=a.lastElementChild;a&&(a===F.ghost||"none"===z(a,"display")||b&&!O(a,b));)a=a.previousElementSibling;return a||null}function r(a,b){var c=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===F.clone||b&&!O(a,b)||c++;return c}function G(a){var b=0,c=0,e=da();if(a){do{var f=E(a),l=f.d;b+=a.scrollLeft*f.a;c+=a.scrollTop*l}while(a!==e&&(a=a.parentNode))}return[b,c]}function C(a,b){for(var c in a)if(a.hasOwnProperty(c))for(var e in b)if(b.hasOwnProperty(e)&&
b[e]===a[c][e])return Number(c);return-1}function U(a,b){if(!a||!a.getBoundingClientRect)return da();var c=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var e=z(a);if(a.clientWidth<a.scrollWidth&&("auto"==e.overflowX||"scroll"==e.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==e.overflowY||"scroll"==e.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;if(c||b)return a;c=!0}}while(a=a.parentNode);return da()}function fa(a,b){return Math.round(a.top)===Math.round(b.top)&&
Math.round(a.left)===Math.round(b.left)&&Math.round(a.height)===Math.round(b.height)&&Math.round(a.width)===Math.round(b.width)}function Y(a,b){return function(){if(!Ra){var c=arguments;1===c.length?a.call(this,c[0]):a.apply(this,c);Ra=setTimeout(function(){Ra=void 0},b)}}}function t(a,b,c){a.scrollLeft+=b;a.scrollTop+=c}function Z(a){var b=window.Polymer,c=window.jQuery||window.Zepto;return b&&b.dom?b.dom(a).cloneNode(!0):c?c(a).clone(!0)[0]:a.cloneNode(!0)}function xa(){var a=[],b;return{captureAnimationState:function(){a=
[];this.options.animation&&[].slice.call(this.el.children).forEach(function(c){if("none"!==z(c,"display")&&c!==F.ghost){a.push({target:c,rect:T(c)});var e=Q({},a[a.length-1].rect);if(c.thisAnimationDuration){var f=E(c,!0);f&&(e.top-=f.f,e.left-=f.e)}c.fromRect=e}})},addAnimationState:function(c){a.push(c)},removeAnimationState:function(c){a.splice(C(a,{target:c}),1)},animateAll:function(c){var e=this;if(this.options.animation){var f=!1,l=0;a.forEach(function(m){var v=0,y=m.target,H=y.fromRect,J=T(y),
N=y.prevFromRect,ma=y.prevToRect;m=m.rect;var ja=E(y,!0);ja&&(J.top-=ja.f,J.left-=ja.e);y.toRect=J;y.thisAnimationDuration&&fa(N,J)&&!fa(H,J)&&(m.top-J.top)/(m.left-J.left)===(H.top-J.top)/(H.left-J.left)&&(v=Math.sqrt(Math.pow(N.top-m.top,2)+Math.pow(N.left-m.left,2))/Math.sqrt(Math.pow(N.top-ma.top,2)+Math.pow(N.left-ma.left,2))*e.options.animation);fa(J,H)||(y.prevFromRect=H,y.prevToRect=J,v||(v=e.options.animation),e.animate(y,m,J,v));v&&(f=!0,l=Math.max(l,v),clearTimeout(y.animationResetTimer),
y.animationResetTimer=setTimeout(function(){y.animationTime=0;y.prevFromRect=null;y.fromRect=null;y.prevToRect=null;y.thisAnimationDuration=null},v),y.thisAnimationDuration=v)});clearTimeout(b);f?b=setTimeout(function(){"function"===typeof c&&c()},l):"function"===typeof c&&c();a=[]}else clearTimeout(b),"function"===typeof c&&c()},animate:function(c,e,f,l){if(l){z(c,"transition","");z(c,"transform","");var m=E(this.el),v=(e.left-f.left)/(m&&m.a||1);e=(e.top-f.top)/(m&&m.d||1);c.animatingX=!!v;c.animatingY=
!!e;z(c,"transform","translate3d("+v+"px,"+e+"px,0)");this.forRepaintDummy=c.offsetWidth;z(c,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:""));z(c,"transform","translate3d(0,0,0)");"number"===typeof c.animated&&clearTimeout(c.animated);c.animated=setTimeout(function(){z(c,"transition","");z(c,"transform","");c.animated=!1;c.animatingX=!1;c.animatingY=!1},l)}}}}function ha(a){var b=Q({putSortable:na,cloneEl:ea,targetEl:u,rootEl:ca,oldIndex:Ma,oldDraggableIndex:Sa,newIndex:ua,
newDraggableIndex:Fa},a);a=b.sortable;var c=b.rootEl,e=b.name,f=b.targetEl,l=b.cloneEl,m=b.toEl,v=b.fromEl,y=b.oldIndex,H=b.newIndex,J=b.oldDraggableIndex,N=b.newDraggableIndex,ma=b.originalEvent,ja=b.putSortable,qa=b.extraEventProperties;if(a=a||c&&c[va]){var W=a.options,ya="on"+e.charAt(0).toUpperCase()+e.substr(1);!window.CustomEvent||ia||wa?(b=document.createEvent("Event"),b.initEvent(e,!0,!0)):b=new CustomEvent(e,{bubbles:!0,cancelable:!0});b.to=m||c;b.from=v||c;b.item=f||c;b.clone=l;b.oldIndex=
y;b.newIndex=H;b.oldDraggableIndex=J;b.newDraggableIndex=N;b.originalEvent=ma;b.pullMode=ja?ja.lastPutMode:void 0;e=Q({},qa,Ta.getEventProperties(e,a));for(var Aa in e)b[Aa]=e[Aa];c&&c.dispatchEvent(b);W[ya]&&W[ya].call(a,b)}}function F(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=b=q({},b);a[va]=this;var c={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?"\x3eli":
"\x3e*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return xb(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,m){l.setData("Text",m.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,
10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==F.supportPointer&&"PointerEvent"in window&&!Ga,emptyInsertThreshold:5};Ta.initializePlugins(this,a,c);for(var e in c)e in b||(b[e]=c[e]);yb(b);for(var f in this)"_"===f.charAt(0)&&"function"===typeof this[f]&&(this[f]=this[f].bind(this));if(this.nativeDraggable=b.forceFallback?!1:Hb)this.options.touchStartThreshold=1;b.supportPointer?B(a,"pointerdown",this._onTapStart):
(B(a,"mousedown",this._onTapStart),B(a,"touchstart",this._onTapStart));this.nativeDraggable&&(B(a,"dragover",this),B(a,"dragenter",this));bb.push(this.el);b.store&&b.store.get&&this.sort(b.store.get(this)||[]);q(this,xa())}function Ba(a,b,c,e,f,l,m,v){var y=a[va],H=y.options.onMove,J;if(!window.CustomEvent||ia||wa){var N=document.createEvent("Event");N.initEvent("move",!0,!0)}else N=new CustomEvent("move",{bubbles:!0,cancelable:!0});N.to=b;N.from=a;N.dragged=c;N.draggedRect=e;N.related=f||b;N.relatedRect=
l||T(b);N.willInsertAfter=v;N.originalEvent=m;a.dispatchEvent(N);H&&(J=H.call(y,N,m));return J}function D(a){a.draggable=!1}function d(){lb=!1}function g(a,b,c){c=T(k(c.el,c.options.draggable));return b?a.clientX>c.right+10||a.clientX<=c.right&&a.clientY>c.bottom&&a.clientX>=c.left:a.clientX>c.right&&a.clientY>c.top||a.clientX<=c.right&&a.clientY>c.bottom+10}function h(a,b,c,e,f,l,m,v){a=e?a.clientY:a.clientX;var y=e?c.height:c.width,H=e?c.top:c.left;c=e?c.bottom:c.right;e=!1;if(!m)if(v&&cb<y*f)if(!Ua&&
(1===Va?a>H+y*l/2:a<c-y*l/2)&&(Ua=!0),Ua)e=!0;else{if(1===Va?a<H+cb:a>c-cb)return-Va}else if(a>H+y*(1-f)/2&&a<c-y*(1-f)/2)return b=r(u)<r(b)?1:-1,b;if(e||m)if(a<H+y*l/2||a>c-y*l/2)return a>H+y/2?1:-1;return 0}function p(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var b=a.length,c=0;b--;)c+=a.charCodeAt(b);return c.toString(36)}function x(a){db.length=0;a=a.getElementsByTagName("input");for(var b=a.length;b--;){var c=a[b];c.checked&&db.push(c)}}function A(a){return setTimeout(a,0)}function L(){ka.forEach(function(a){clearInterval(a.pid)});
ka=[]}function P(){}function aa(){}var ia=V(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),wa=V(/Edge/i),Wa=V(/firefox/i),Ga=V(/safari/i)&&!V(/chrome/i)&&!V(/android/i),Xa=V(/iP(ad|od|hone)/i),Ib=V(/chrome/i)&&V(/android/i),vb={capture:!1,passive:!1},wb=/\s+/g,Ra,va="Sortable"+(new Date).getTime(),Na=[],mb={initializeByDefault:!0},Ta={mount:function(a){for(var b in mb)!mb.hasOwnProperty(b)||b in a||(a[b]=mb[b]);Na.forEach(function(c){if(c.pluginName===a.pluginName)throw"Sortable: Cannot mount plugin ".concat(a.pluginName,
" more than once");});Na.push(a)},pluginEvent:function(a,b,c){var e=this;this.eventCanceled=!1;c.cancel=function(){e.eventCanceled=!0};var f=a+"Global";Na.forEach(function(l){if(b[l.pluginName]){if(b[l.pluginName][f])b[l.pluginName][f](Q({sortable:b},c));if(b.options[l.pluginName]&&b[l.pluginName][a])b[l.pluginName][a](Q({sortable:b},c))}})},initializePlugins:function(a,b,c,e){Na.forEach(function(l){var m=l.pluginName;if(a.options[m]||l.initializeByDefault)l=new l(a,b,a.options),l.sortable=a,l.options=
a.options,a[m]=l,q(c,l.defaults)});for(var f in a.options)a.options.hasOwnProperty(f)&&(e=this.modifyOption(a,f,a.options[f]),"undefined"!==typeof e&&(a.options[f]=e))},getEventProperties:function(a,b){var c={};Na.forEach(function(e){"function"===typeof e.eventProperties&&q(c,e.eventProperties.call(b[e.pluginName],a))});return c},modifyOption:function(a,b,c){var e;Na.forEach(function(f){a[f.pluginName]&&f.optionListeners&&"function"===typeof f.optionListeners[b]&&(e=f.optionListeners[b].call(a[f.pluginName],
c))});return e}},sa=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=c.evt;c=ba(c,["evt"]);Ta.pluginEvent.bind(F)(a,b,Q({dragEl:u,parentEl:la,ghostEl:K,rootEl:ca,nextEl:Ja,lastDownEl:eb,cloneEl:ea,cloneHidden:Ha,dragStarted:Ya,putSortable:na,activeSortable:F.active,originalEvent:e,oldIndex:Ma,oldDraggableIndex:Sa,newIndex:ua,newDraggableIndex:Fa,hideGhostForTarget:zb,unhideGhostForTarget:Ab,cloneNowHidden:function(){Ha=!0},cloneNowShown:function(){Ha=!1},dispatchSortableEvent:function(f){ha({sortable:b,
name:f,originalEvent:e})}},c))},u,la,K,ca,Ja,eb,ea,Ha,Ma,ua,Sa,Fa,fb,na,Oa=!1,gb=!1,bb=[],Ka,za,nb,ob,Bb,Cb,Ya,Pa,Va,Ua=!1,hb=!1,cb,ra,pb=[],lb=!1,db=[],ib="undefined"!==typeof document,Db=wa||ia?"cssFloat":"float",Hb=ib&&!Ib&&!Xa&&"draggable"in document.createElement("div"),Eb=function(){if(ib){if(ia)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),xb=function(a,b){var c=z(a),e=parseInt(c.width)-parseInt(c.paddingLeft)-parseInt(c.paddingRight)-
parseInt(c.borderLeftWidth)-parseInt(c.borderRightWidth),f=I(a,0,b);a=I(a,1,b);var l=f&&z(f);b=a&&z(a);var m=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+T(f).width,v=b&&parseInt(b.marginLeft)+parseInt(b.marginRight)+T(a).width;return"flex"===c.display?"column"===c.flexDirection||"column-reverse"===c.flexDirection?"vertical":"horizontal":"grid"===c.display?1>=c.gridTemplateColumns.split(" ").length?"vertical":"horizontal":f&&l["float"]&&"none"!==l["float"]?(c="left"===l["float"]?"left":"right",
!a||"both"!==b.clear&&b.clear!==c?"horizontal":"vertical"):f&&("block"===l.display||"flex"===l.display||"table"===l.display||"grid"===l.display||m>=e&&"none"===c[Db]||a&&"none"===c[Db]&&m+v>e)?"vertical":"horizontal"},Jb=function(a,b,c){var e=c?a.left:a.top,f=c?a.right:a.bottom;a=c?a.width:a.height;var l=c?b.left:b.top,m=c?b.right:b.bottom;b=c?b.width:b.height;return e===l||f===m||e+a/2===l+b/2},Kb=function(a,b){var c;bb.some(function(e){if(!k(e)){var f=T(e),l=e[va].options.emptyInsertThreshold,m=
a>=f.left-l&&a<=f.right+l;f=b>=f.top-l&&b<=f.bottom+l;if(l&&m&&f)return c=e}});return c},yb=function(a){function b(f,l){return function(m,v,y,H){var J=m.options.group.name&&v.options.group.name&&m.options.group.name===v.options.group.name;if(null==f&&(l||J))return!0;if(null==f||!1===f)return!1;if(l&&"clone"===f)return f;if("function"===typeof f)return b(f(m,v,y,H),l)(m,v,y,H);m=(l?m:v).options.group.name;return!0===f||"string"===typeof f&&f===m||f.join&&-1<f.indexOf(m)}}var c={},e=a.group;e&&"object"==
w(e)||(e={name:e});c.name=e.name;c.checkPull=b(e.pull,!0);c.checkPut=b(e.put);c.revertClone=e.revertClone;a.group=c},zb=function(){!Eb&&K&&z(K,"display","none")},Ab=function(){!Eb&&K&&z(K,"display","")};ib&&document.addEventListener("click",function(a){if(gb)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),gb=!1},!0);var La=function(a){if(u){a=a.touches?a.touches[0]:a;var b=Kb(a.clientX,a.clientY);if(b){var c={},e;for(e in a)a.hasOwnProperty(e)&&
(c[e]=a[e]);c.target=c.rootEl=b;c.preventDefault=void 0;c.stopPropagation=void 0;b[va]._onDragOver(c)}}},Lb=function(a){u&&u.parentNode[va]._isOutsideThisEl(a.target)};F.prototype={constructor:F,_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(Pa=null)},_getDirection:function(a,b){return"function"===typeof this.options.direction?this.options.direction.call(this,a,b,u):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b=this,c=this.el,e=this.options,f=e.preventOnFilter,
l=a.type,m=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,v=(m||a).target,y=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||v,H=e.filter;x(c);if(!(u||/mousedown|pointerdown/.test(l)&&0!==a.button||e.disabled||y.isContentEditable||!this.nativeDraggable&&Ga&&v&&"SELECT"===v.tagName.toUpperCase()||(v=M(v,e.draggable,c,!1),v&&v.animated||eb===v))){Ma=r(v);Sa=r(v,e.draggable);if("function"===typeof H){if(H.call(this,a,v,this)){ha({sortable:b,rootEl:y,
name:"filter",targetEl:v,toEl:c,fromEl:c});sa("filter",b,{evt:a});f&&a.cancelable&&a.preventDefault();return}}else if(H&&(H=H.split(",").some(function(J){if(J=M(y,J.trim(),c,!1))return ha({sortable:b,rootEl:J,name:"filter",targetEl:v,fromEl:c,toEl:c}),sa("filter",b,{evt:a}),!0}))){f&&a.cancelable&&a.preventDefault();return}e.handle&&!M(y,e.handle,c,!1)||this._prepareDragStart(a,m,v)}}},_prepareDragStart:function(a,b,c){var e=this,f=e.el,l=e.options,m=f.ownerDocument;if(c&&!u&&c.parentNode===f){var v=
T(c);ca=f;u=c;la=u.parentNode;Ja=u.nextSibling;eb=c;fb=l.group;F.dragged=u;Ka={target:u,clientX:(b||a).clientX,clientY:(b||a).clientY};Bb=Ka.clientX-v.left;Cb=Ka.clientY-v.top;this._lastX=(b||a).clientX;this._lastY=(b||a).clientY;u.style["will-change"]="all";c=function(){sa("delayEnded",e,{evt:a});F.eventCanceled?e._onDrop():(e._disableDelayedDragEvents(),!Wa&&e.nativeDraggable&&(u.draggable=!0),e._triggerDragStart(a,b),ha({sortable:e,name:"choose",originalEvent:a}),S(u,l.chosenClass,!0))};l.ignore.split(",").forEach(function(y){ta(u,
y.trim(),D)});B(m,"dragover",La);B(m,"mousemove",La);B(m,"touchmove",La);B(m,"mouseup",e._onDrop);B(m,"touchend",e._onDrop);B(m,"touchcancel",e._onDrop);Wa&&this.nativeDraggable&&(this.options.touchStartThreshold=4,u.draggable=!0);sa("delayStart",this,{evt:a});!l.delay||l.delayOnTouchOnly&&!b||this.nativeDraggable&&(wa||ia)?c():F.eventCanceled?this._onDrop():(B(m,"mouseup",e._disableDelayedDrag),B(m,"touchend",e._disableDelayedDrag),B(m,"touchcancel",e._disableDelayedDrag),B(m,"mousemove",e._delayedDragTouchMoveHandler),
B(m,"touchmove",e._delayedDragTouchMoveHandler),l.supportPointer&&B(m,"pointermove",e._delayedDragTouchMoveHandler),e._dragStartTimer=setTimeout(c,l.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){u&&D(u);clearTimeout(this._dragStartTimer);
this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;n(a,"mouseup",this._disableDelayedDrag);n(a,"touchend",this._disableDelayedDrag);n(a,"touchcancel",this._disableDelayedDrag);n(a,"mousemove",this._delayedDragTouchMoveHandler);n(a,"touchmove",this._delayedDragTouchMoveHandler);n(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||"touch"==a.pointerType&&a;!this.nativeDraggable||b?this.options.supportPointer?B(document,
"pointermove",this._onTouchMove):b?B(document,"touchmove",this._onTouchMove):B(document,"mousemove",this._onTouchMove):(B(u,"dragend",this),B(ca,"dragstart",this._onDragStart));try{document.selection?A(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(c){}},_dragStarted:function(a,b){Oa=!1;if(ca&&u){sa("dragStarted",this,{evt:b});this.nativeDraggable&&B(document,"dragover",Lb);var c=this.options;!a&&S(u,c.dragClass,!1);S(u,c.ghostClass,!0);F.active=this;a&&this._appendGhost();
ha({sortable:this,name:"start",originalEvent:b})}else this._nulling()},_emulateDragOver:function(){if(za){this._lastX=za.clientX;this._lastY=za.clientY;zb();for(var a=document.elementFromPoint(za.clientX,za.clientY),b=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(za.clientX,za.clientY);if(a===b)break;b=a}u.parentNode[va]._isOutsideThisEl(a);if(b){do{if(b[va]){var c=void 0;if((c=b[va]._onDragOver({clientX:za.clientX,clientY:za.clientY,target:a,rootEl:b}))&&!this.options.dragoverBubble)break}a=
b}while(b=b.parentNode)}Ab()}},_onTouchMove:function(a){if(Ka){var b=this.options,c=b.fallbackTolerance,e=b.fallbackOffset;b=a.touches?a.touches[0]:a;var f=K&&E(K,!0),l=K&&f&&f.a,m=K&&f&&f.d,v=Xa&&ra&&G(ra);l=(b.clientX-Ka.clientX+e.x)/(l||1)+(v?v[0]-pb[0]:0)/(l||1);e=(b.clientY-Ka.clientY+e.y)/(m||1)+(v?v[1]-pb[1]:0)/(m||1);if(!F.active&&!Oa){if(c&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<c)return;this._onDragStart(a,!0)}K&&(f?(f.e+=l-(nb||0),f.f+=e-(ob||0)):f={a:1,
b:0,c:0,d:1,e:l,f:e},c="matrix(".concat(f.a,",").concat(f.b,",").concat(f.c,",").concat(f.d,",").concat(f.e,",").concat(f.f,")"),z(K,"webkitTransform",c),z(K,"mozTransform",c),z(K,"msTransform",c),z(K,"transform",c),nb=l,ob=e,za=b);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!K){var a=this.options.fallbackOnBody?document.body:ca,b=T(u,!0,Xa,!0,a),c=this.options;if(Xa){for(ra=a;"static"===z(ra,"position")&&"none"===z(ra,"transform")&&ra!==document;)ra=ra.parentNode;ra!==document.body&&
ra!==document.documentElement?(ra===document&&(ra=da()),b.top+=ra.scrollTop,b.left+=ra.scrollLeft):ra=da();pb=G(ra)}K=u.cloneNode(!0);S(K,c.ghostClass,!1);S(K,c.fallbackClass,!0);S(K,c.dragClass,!0);z(K,"transition","");z(K,"transform","");z(K,"box-sizing","border-box");z(K,"margin",0);z(K,"top",b.top);z(K,"left",b.left);z(K,"width",b.width);z(K,"height",b.height);z(K,"opacity","0.8");z(K,"position",Xa?"absolute":"fixed");z(K,"zIndex","100000");z(K,"pointerEvents","none");F.ghost=K;a.appendChild(K);
z(K,"transform-origin",Bb/parseInt(K.style.width)*100+"% "+Cb/parseInt(K.style.height)*100+"%")}},_onDragStart:function(a,b){var c=this,e=a.dataTransfer,f=c.options;sa("dragStart",this,{evt:a});F.eventCanceled?this._onDrop():(sa("setupClone",this),F.eventCanceled||(ea=Z(u),ea.draggable=!1,ea.style["will-change"]="",this._hideClone(),S(ea,this.options.chosenClass,!1),F.clone=ea),c.cloneId=A(function(){sa("clone",c);F.eventCanceled||(c.options.removeCloneOnHide||ca.insertBefore(ea,u),c._hideClone(),
ha({sortable:c,name:"clone"}))}),!b&&S(u,f.dragClass,!0),b?(gb=!0,c._loopId=setInterval(c._emulateDragOver,50)):(n(document,"mouseup",c._onDrop),n(document,"touchend",c._onDrop),n(document,"touchcancel",c._onDrop),e&&(e.effectAllowed="move",f.setData&&f.setData.call(c,e,u)),B(document,"drop",c),z(u,"transform","translateZ(0)")),Oa=!0,c._dragStartId=A(c._dragStarted.bind(c,b,a)),B(document,"selectstart",c),Ya=!0,Ga&&z(document.body,"user-select","none"))},_onDragOver:function(a){function b(Ia,jb){sa(Ia,
W,Q({evt:a,isOwner:ma,axis:Aa?"vertical":"horizontal",revert:y,dragRect:Da,targetRect:v,canSort:ja,fromSortable:qa,target:m,completed:e,onMove:function(Fb,Mb){return Ba(ca,l,u,Da,Fb,T(Fb),a,Mb)},changed:f},jb))}function c(){b("dragOverAnimationCapture");W.captureAnimationState();W!==qa&&qa.captureAnimationState()}function e(Ia){b("dragOverCompleted",{insertion:Ia});Ia&&(ma?N._hideClone():N._showClone(W),W!==qa&&(S(u,na?na.options.ghostClass:N.options.ghostClass,!1),S(u,H.ghostClass,!0)),na!==W&&W!==
F.active?na=W:W===F.active&&na&&(na=null),qa===W&&(W._ignoreWhileAnimating=m),W.animateAll(function(){b("dragOverAnimationComplete");W._ignoreWhileAnimating=null}),W!==qa&&(qa.animateAll(),qa._ignoreWhileAnimating=null));if(m===u&&!u.animated||m===l&&!m.animated)Pa=null;H.dragoverBubble||a.rootEl||m===document||(u.parentNode[va]._isOutsideThisEl(a.target),!Ia&&La(a));!H.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return ya=!0}function f(){ua=r(u);Fa=r(u,H.draggable);ha({sortable:W,name:"change",
toEl:l,newIndex:ua,newDraggableIndex:Fa,originalEvent:a})}var l=this.el,m=a.target,v,y,H=this.options,J=H.group,N=F.active,ma=fb===J,ja=H.sort,qa=na||N,W=this,ya=!1;if(!lb){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();m=M(m,H.draggable,l,!0);b("dragOver");if(F.eventCanceled)return ya;if(u.contains(a.target)||m.animated&&m.animatingX&&m.animatingY||W._ignoreWhileAnimating===m)return e(!1);gb=!1;if(N&&!H.disabled&&(ma?ja||(y=!ca.contains(u)):na===this||(this.lastPutMode=fb.checkPull(this,
N,u,a))&&J.checkPut(this,N,u,a))){var Aa="vertical"===this._getDirection(a,m);var Da=T(u);b("dragOverValid");if(F.eventCanceled)return ya;if(y)return la=ca,c(),this._hideClone(),b("revert"),F.eventCanceled||(Ja?ca.insertBefore(u,Ja):ca.appendChild(u)),e(!0);J=k(l,H.draggable);if(!J||g(a,Aa,this)&&!J.animated){if(J===u)return e(!1);J&&l===a.target&&(m=J);m&&(v=T(m));if(!1!==Ba(ca,l,u,Da,m,v,a,!!m))return c(),l.appendChild(u),la=l,f(),e(!0)}else if(m.parentNode===l){v=T(m);var oa=0;oa=u.parentNode!==
l;var X=!Jb(u.animated&&u.toRect||Da,m.animated&&m.toRect||v,Aa);J=Aa?"top":"left";var Ea=pa(m,"top","top")||pa(u,"top","top"),Za=Ea?Ea.scrollTop:void 0;if(Pa!==m){var $a=v[J];Ua=!1;hb=!X&&H.invertSwap||oa}oa=h(a,m,v,Aa,X?1:H.swapThreshold,null==H.invertedSwapThreshold?H.swapThreshold:H.invertedSwapThreshold,hb,Pa===m);if(0!==oa){X=r(u);do{X-=oa;var Ca=la.children[X]}while(Ca&&("none"===z(Ca,"display")||Ca===K))}if(0===oa||Ca===m)return e(!1);Pa=m;Va=oa;Ca=m.nextElementSibling;X=!1;X=1===oa;oa=Ba(ca,
l,u,Da,m,v,a,X);if(!1!==oa){if(1===oa||-1===oa)X=1===oa;lb=!0;setTimeout(d,30);c();X&&!Ca?l.appendChild(u):m.parentNode.insertBefore(u,X?Ca:m);Ea&&t(Ea,0,Za-Ea.scrollTop);la=u.parentNode;void 0===$a||hb||(cb=Math.abs($a-T(m)[J]));f();return e(!0)}}if(l.contains(u))return e(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){n(document,"mousemove",this._onTouchMove);n(document,"touchmove",this._onTouchMove);n(document,"pointermove",this._onTouchMove);n(document,"dragover",La);n(document,
"mousemove",La);n(document,"touchmove",La)},_offUpEvents:function(){var a=this.el.ownerDocument;n(a,"mouseup",this._onDrop);n(a,"touchend",this._onDrop);n(a,"pointerup",this._onDrop);n(a,"touchcancel",this._onDrop);n(document,"selectstart",this)},_onDrop:function(a){var b=this.el,c=this.options;ua=r(u);Fa=r(u,c.draggable);sa("drop",this,{evt:a});la=u&&u.parentNode;ua=r(u);Fa=r(u,c.draggable);if(!F.eventCanceled&&(Ua=hb=Oa=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),
clearTimeout(this._dragStartId),this.nativeDraggable&&(n(document,"drop",this),n(b,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ga&&z(document.body,"user-select",""),z(u,"transform",""),a&&(Ya&&(a.cancelable&&a.preventDefault(),!c.dropBubble&&a.stopPropagation()),K&&K.parentNode&&K.parentNode.removeChild(K),(ca===la||na&&"clone"!==na.lastPutMode)&&ea&&ea.parentNode&&ea.parentNode.removeChild(ea),u&&(this.nativeDraggable&&n(u,"dragend",this),D(u),u.style["will-change"]=
"",Ya&&!Oa&&S(u,na?na.options.ghostClass:this.options.ghostClass,!1),S(u,this.options.chosenClass,!1),ha({sortable:this,name:"unchoose",toEl:la,newIndex:null,newDraggableIndex:null,originalEvent:a}),ca!==la?(0<=ua&&(ha({rootEl:la,name:"add",toEl:la,fromEl:ca,originalEvent:a}),ha({sortable:this,name:"remove",toEl:la,originalEvent:a}),ha({rootEl:la,name:"sort",toEl:la,fromEl:ca,originalEvent:a}),ha({sortable:this,name:"sort",toEl:la,originalEvent:a})),na&&na.save()):ua!==Ma&&0<=ua&&(ha({sortable:this,
name:"update",toEl:la,originalEvent:a}),ha({sortable:this,name:"sort",toEl:la,originalEvent:a})),F.active)))){if(null==ua||-1===ua)ua=Ma,Fa=Sa;ha({sortable:this,name:"end",toEl:la,originalEvent:a});this.save()}this._nulling()},_nulling:function(){sa("nulling",this);ca=u=la=K=Ja=ea=eb=Ha=Ka=za=Ya=ua=Fa=Ma=Sa=Pa=Va=na=fb=F.dragged=F.ghost=F.clone=F.active=null;db.forEach(function(a){a.checked=!0});db.length=nb=ob=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;
case "dragenter":case "dragover":u&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],b,c=this.el.children,e=0,f=c.length,l=this.options;e<f;e++)b=c[e],M(b,l.draggable,this.el,!1)&&a.push(b.getAttribute(l.dataIdAttr)||p(b));return a},sort:function(a,b){var c={},e=this.el;this.toArray().forEach(function(f,l){l=e.children[l];M(l,this.options.draggable,e,!1)&&(c[f]=l)},
this);b&&this.captureAnimationState();a.forEach(function(f){c[f]&&(e.removeChild(c[f]),e.appendChild(c[f]))});b&&this.animateAll()},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return M(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var c=this.options;if(void 0===b)return c[a];var e=Ta.modifyOption(this,a,b);c[a]="undefined"!==typeof e?e:b;"group"===a&&yb(c)},destroy:function(){sa("destroy",this);var a=this.el;a[va]=null;n(a,"mousedown",this._onTapStart);
n(a,"touchstart",this._onTapStart);n(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(n(a,"dragover",this),n(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(b){b.removeAttribute("draggable")});this._onDrop();this._disableDelayedDragEvents();bb.splice(bb.indexOf(this.el),1);this.el=a=null},_hideClone:function(){Ha||(sa("hideClone",this),F.eventCanceled||(z(ea,"display","none"),this.options.removeCloneOnHide&&ea.parentNode&&ea.parentNode.removeChild(ea),
Ha=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():Ha&&(sa("showClone",this),F.eventCanceled||(u.parentNode!=ca||this.options.group.revertClone?Ja?ca.insertBefore(ea,Ja):ca.appendChild(ea):ca.insertBefore(ea,u),this.options.group.revertClone&&this.animate(u,ea),z(ea,"display",""),Ha=!1))}};ib&&B(document,"touchmove",function(a){(F.active||Oa)&&a.cancelable&&a.preventDefault()});F.utils={on:B,off:n,css:z,find:ta,is:function(a,b){return!!M(a,b,a,!1)},extend:function(a,b){if(a&&
b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},throttle:Y,closest:M,toggleClass:S,clone:Z,index:r,nextTick:A,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:xb,getChild:I};F.get=function(a){return a[va]};F.mount=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];b[0].constructor===Array&&(b=b[0]);b.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));
e.utils&&(F.utils=Q({},F.utils,e.utils));Ta.mount(e)})};F.create=function(a,b){return new F(a,b)};F.version="1.13.0";var ka=[],ab,qb,rb=!1,sb,tb,kb,Qa,ub=Y(function(a,b,c,e){if(b.scroll){var f=(a.touches?a.touches[0]:a).clientX,l=(a.touches?a.touches[0]:a).clientY,m=b.scrollSensitivity,v=b.scrollSpeed,y=da(),H=!1;if(qb!==c){qb=c;L();ab=b.scroll;var J=b.scrollFn;!0===ab&&(ab=U(c,!0))}c=0;var N=ab;do{var ma=N,ja=T(ma),qa=ja.top,W=ja.bottom,ya=ja.left,Aa=ja.right,Da=ja.width;ja=ja.height;var oa=void 0,
X=void 0,Ea=ma.scrollWidth,Za=ma.scrollHeight;X=z(ma);var $a=ma.scrollLeft,Ca=ma.scrollTop;ma===y?(oa=Da<Ea&&("auto"===X.overflowX||"scroll"===X.overflowX||"visible"===X.overflowX),X=ja<Za&&("auto"===X.overflowY||"scroll"===X.overflowY||"visible"===X.overflowY)):(oa=Da<Ea&&("auto"===X.overflowX||"scroll"===X.overflowX),X=ja<Za&&("auto"===X.overflowY||"scroll"===X.overflowY));ya=oa&&(Math.abs(Aa-f)<=m&&$a+Da<Ea)-(Math.abs(ya-f)<=m&&!!$a);qa=X&&(Math.abs(W-l)<=m&&Ca+ja<Za)-(Math.abs(qa-l)<=m&&!!Ca);
if(!ka[c])for(W=0;W<=c;W++)ka[W]||(ka[W]={});if(ka[c].vx!=ya||ka[c].vy!=qa||ka[c].el!==ma)if(ka[c].el=ma,ka[c].vx=ya,ka[c].vy=qa,clearInterval(ka[c].pid),0!=ya||0!=qa)H=!0,ka[c].pid=setInterval(function(){e&&0===this.layer&&F.active._onTouchMove(kb);var Ia=ka[this.layer].vy?ka[this.layer].vy*v:0,jb=ka[this.layer].vx?ka[this.layer].vx*v:0;"function"===typeof J&&"continue"!==J.call(F.dragged.parentNode[va],jb,Ia,a,kb,ka[this.layer].el)||t(ka[this.layer].el,jb,Ia)}.bind({layer:c}),24);c++}while(b.bubbleScroll&&
N!==y&&(N=U(N,!1)));rb=H}},30),Gb=function(a){var b=a.originalEvent,c=a.putSortable,e=a.dragEl,f=a.activeSortable,l=a.dispatchSortableEvent,m=a.hideGhostForTarget;a=a.unhideGhostForTarget;b&&(f=c||f,m(),b=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:b,b=document.elementFromPoint(b.clientX,b.clientY),a(),f&&!f.el.contains(b)&&(l("spill"),this.onSpill({dragEl:e,putSortable:c})))};P.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var b=
a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var c=I(this.sortable.el,this.startIndex,this.options);c?this.sortable.el.insertBefore(b,c):this.sortable.el.appendChild(b);this.sortable.animateAll();a&&a.animateAll()},drop:Gb};q(P,{pluginName:"revertOnSpill"});aa.prototype={onSpill:function(a){var b=a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();b.parentNode&&b.parentNode.removeChild(b);a.animateAll()},drop:Gb};q(aa,{pluginName:"removeOnSpill"});
F.mount(new function(){function a(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var b in this)"_"===b.charAt(0)&&"function"===typeof this[b]&&(this[b]=this[b].bind(this))}a.prototype={dragStarted:function(b){b=b.originalEvent;this.sortable.nativeDraggable?B(document,"dragover",this._handleAutoScroll):this.options.supportPointer?B(document,"pointermove",this._handleFallbackAutoScroll):b.touches?B(document,"touchmove",this._handleFallbackAutoScroll):B(document,
"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(b){b=b.originalEvent;this.options.dragOverBubble||b.rootEl||this._handleAutoScroll(b)},drop:function(){this.sortable.nativeDraggable?n(document,"dragover",this._handleAutoScroll):(n(document,"pointermove",this._handleFallbackAutoScroll),n(document,"touchmove",this._handleFallbackAutoScroll),n(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(Qa);L();clearTimeout(Ra);Ra=void 0},nulling:function(){kb=qb=ab=rb=
Qa=sb=tb=null;ka.length=0},_handleFallbackAutoScroll:function(b){this._handleAutoScroll(b,!0)},_handleAutoScroll:function(b,c){var e=this,f=(b.touches?b.touches[0]:b).clientX,l=(b.touches?b.touches[0]:b).clientY,m=document.elementFromPoint(f,l);kb=b;if(c||wa||ia||Ga){ub(b,this.options,m,c);var v=U(m,!0);!rb||Qa&&f===sb&&l===tb||(Qa&&clearInterval(Qa),Qa=setInterval(function(){var y=U(document.elementFromPoint(f,l),!0);y!==v&&(v=y,L());ub(b,e.options,y,c)},10),sb=f,tb=l)}else this.options.bubbleScroll&&
U(m,!0)!==da()?ub(b,this.options,U(m,!1),!1):L()}};return q(a,{pluginName:"scroll",initializeByDefault:!0})});F.mount(aa,P);R.Sortable=F})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/deprecate ../core/events ../core/Handles ../core/has ../core/Logger ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/accessorSupport/decorators/cast ../core/jsonMap ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./LayerList/LayerListViewModel ./LayerList/ListItem ./LayerList/support/layerListUtils ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../chunks/sortable.esm".split(" "),function(R,
w,q,Q,ba,V,B,n,O,M,S,z,E,ta,da,T,pa,I,k,r,G,C,U,fa){function Y(F){const {actionsOpen:Ba,children:D}=F;Ba&&(F.actionsOpen=!1);D.forEach(d=>Y(d))}const t=q.ofType(pa),Z={exclusive:"exclusive",inherited:"inherited",independent:"independent"},xa=n.getLogger("esri.widgets.LayerList"),ha={statusIndicators:!0};q=function(F){function Ba(d,g){var h=F.call(this,d,g)||this;h._handles=new V;h._sortableNodes=new Map;h._sortableMap=new Map;h._focusSortUid=null;h._newUI=B("esri-layerlist-new-ui");h.visibleItems=
null;h.iconClass="esri-icon-layers";h.label=void 0;h.listItemCreatedFunction=null;h.localeStrings=null;h.messages=null;h.messagesCommon=null;h.multipleSelectionEnabled=!1;h.operationalItems=null;h.selectionEnabled=!1;h.selectedItems=new t;h.view=null;h.viewModel=new T;h.visibleElements={...ha};h._onSortableSort=({to:p,from:x,item:A,newIndex:L})=>{x&&p&&(x===p?h._sortLayers(h._sortableMap.get(x.dataset.group)):h._moveLayerFromChildList({to:p,from:x,item:A,newIndex:L}))};h._sortableCanPut=(p,x,A)=>
{var L,P;const aa=p.el.dataset.group;x=x.el.dataset.group;p=p.el["data-item"];A=A["data-item"];A=null==A?void 0:null==(L=A.layer)?void 0:L.type;L=null==p?void 0:null==(P=p.layer)?void 0:P.type;return aa&&x&&A&&!("group"===L&&"group"===A)};h._sortableCanPull=(p,x,A)=>{var L;p=p.el.dataset.group;x=x.el.dataset.group;A=A["data-item"];A=null==A?void 0:null==(L=A.layer)?void 0:L.type;return p&&x&&!!A};h._onSortableEnd=({oldIndex:p,from:x,to:A,item:L})=>{x!==A&&x.insertBefore(L,x.children[p])};return h}
R._inheritsLoose(Ba,F);var D=Ba.prototype;D.initialize=function(){const d=this.operationalItems;this._setVisibleItems(d);this.own(O.on(this,"operationalItems","change",()=>this._itemsChanged(d)),O.init(this,"selectionEnabled",()=>this._toggleAllSorting()))};D.destroy=function(){this._destroySortables();this._handles.destroy();this._handles=null};D.castVisibleElements=function(d){return{...ha,...d}};D.triggerAction=function(d,g){this.viewModel.triggerAction(d,g)};D.render=function(){var d;const {visibleItems:g,
_newUI:h}=this,p=null==(d=this.viewModel)?void 0:d.state;return C.tsx("div",{class:this.classes("esri-layer-list esri-widget esri-widget--panel",{["esri-layer-list--new-ui"]:h,["esri-hidden"]:"loading"===p,["esri-disabled"]:"disabled"===p})},null!=g&&g.length?this.renderItems():this.renderNoItems())};D.renderNoItems=function(){return C.tsx("div",{class:"esri-layer-list__no-items"},this.messages.noItemsToDisplay)};D.renderItems=function(){const {visibleItems:d,selectionEnabled:g,messages:h}=this;return C.tsx("ul",
{"aria-label":h.widgetLabel,role:g?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":"root",bind:this,class:this.classes("esri-layer-list__list","esri-layer-list__list--root","esri-layer-list__list--independent")},null==d?void 0:d.map(p=>this.renderItem(p,null)).toArray())};D.renderActionsMenuIcon=function(d,g){var {messages:h}=this;h=d.actionsOpen?h.closeActions:h.openActions;return C.tsx("div",{key:"actions-menu-toggle",
"data-item":d,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes("esri-layer-list__item-actions-menu-item",{["esri-layer-list__item-actions-menu-item--active"]:d.actionsOpen}),tabindex:"0",role:"button","aria-controls":g,"aria-label":h,title:h},C.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"}))};D.renderActionsMenu=function(d,g,h,p){var {panel:x}=d;x=x&&x.visible?this.renderPanelButton(x):null;const A=(g=1===h&&this._getSingleActionButton(g))?
this.renderAction({item:d,action:g,singleAction:!0}):null;return(d=!g&&h?this.renderActionsMenuIcon(d,p):null)||x||g?C.tsx("div",{key:"actions-menu",class:"esri-layer-list__item-actions-menu"},x,A,d):null};D.renderChildList=function(d,g){var h;const {selectionEnabled:p}=this,{visibilityMode:x,children:A}=d;var L=!!d.error;L=!!A.length&&!L;const P=!L&&p&&"group"===(null==(h=d.layer)?void 0:h.type),{exclusive:aa,inherited:ia}=Z;h={["esri-layer-list__list--exclusive"]:x===aa,["esri-layer-list__list--inherited"]:x===
ia,["esri-layer-list__list--independent"]:x!==ia&&x!==aa};return L||P?C.tsx("ul",{bind:this,key:"list-items",id:g,"data-group":d.uid,"data-item":d,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes("esri-layer-list__list",h),"aria-expanded":d.open?"true":"false",role:p?"listbox":x===aa?"radiogroup":"group",hidden:d.open||P?null:!0},null==A?void 0:A.map(wa=>this.renderItem(wa,d)).toArray()):null};D.renderChildrenToggle=function(d,
g){var {messagesCommon:h}=this;const {children:p}=d,x=!!d.error,A={["esri-layer-list__child-toggle--open"]:d.open};h=d.open?h.collapse:h.expand;return p.length&&!x?C.tsx("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":d,key:"toggle-children",class:this.classes("esri-layer-list__child-toggle",A),tabindex:"0",role:"button","aria-controls":g,"aria-label":h,title:h},C.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed",
"esri-icon-right-triangle-arrow")}),C.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--opened","esri-icon-down-arrow")}),C.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed-rtl","esri-icon-left-triangle-arrow")})):null};D.renderError=function(d){return d.error?C.tsx("div",{key:"esri-layer-list__error",class:"esri-layer-list__item-error-message",role:"alert"},C.tsx("span",null,this.messages.layerError)):null};D.renderItemContent=
function(d,g,h){var {id:p}=this,x=`${p}_${d.uid}`;p=`${x}_actions`;x=`${x}__list`;const {panel:A}=d,L=this._filterActions(d.actionsSections),P=this._countActions(L);return[C.tsx("div",{key:"list-item-container",class:"esri-layer-list__item-container"},this.renderChildrenToggle(d,x),this.renderLabel(d,g,h),this.renderActionsMenu(d,L,P,p)),this.renderError(d),P?this.renderActionsSections(d,L,p):null,A&&A.open?A.render():null,this.renderChildList(d,x)]};D.renderItem=function(d,g){const {_newUI:h,id:p,
selectionEnabled:x,selectedItems:A,visibleElements:L}=this;var {children:P}=d;const aa=`${`${p}_${d.uid}`}__title`;var ia=!!d.error;P={["esri-layer-list__item--has-children"]:!!P.length&&!ia,["esri-layer-list__item--error"]:!!ia,["esri-layer-list__item--updating"]:d.updating&&!g&&L.statusIndicators,["esri-layer-list__item--invisible"]:h&&!d.visible,["esri-layer-list__item--invisible-at-scale"]:!d.visibleAtCurrentScale,["esri-layer-list__item--selectable"]:x};if(x){var wa;ia={["data-layer-uid"]:null==
(wa=d.layer)?void 0:wa.uid,["data-sort-filter"]:(!d.sortable).toString()};return C.tsx("li",{key:`item-with-selection-${d.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",P),"aria-labelledby":aa,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":d,"data-group":g?g.uid:"root",tabIndex:0,"aria-selected":I.findSelectedItem(d,A)?"true":"false",role:"option",...ia},this.renderItemContent(d,g,aa))}return C.tsx("li",
{key:`item-no-selection-${d.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",P),"aria-labelledby":aa},this.renderItemContent(d,g,aa))};D.renderItemTitle=function(d,g){const {messages:h}=this,p=d.title||h.untitledLayer;d=d.visibleAtCurrentScale?p:`${p} (${h.layerInvisibleAtScale})`;return C.tsx("span",{key:"layer-title-container",id:g,title:d,"aria-label":d,class:"esri-layer-list__item-title"},p)};D.renderItemToggleIcon=function(d,
g){const {_newUI:h}=this,{exclusive:p}=Z;g=g&&g.visibilityMode;return C.tsx("span",{key:"item-toggle-icon",class:this.classes({["esri-layer-list__item-toggle-icon"]:h,["esri-layer-list__item-toggle-icon"]:h&&g!==p,["esri-layer-list__item-radio-icon"]:h&&g===p,["esri-icon-radio-checked"]:g===p&&d.visible,["esri-icon-radio-unchecked"]:g===p&&!d.visible,["esri-icon-visible"]:g!==p&&d.visible,["esri-icon-non-visible"]:g!==p&&!d.visible}),"aria-hidden":"true"})};D.renderItemToggle=function(d,g,h){const {selectionEnabled:p}=
this,{exclusive:x}=Z,A=g&&g.visibilityMode;return p?C.tsx("span",{key:"item-toggle-selection-enabled",class:"esri-layer-list__item-toggle",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":d,"data-parent-visibility":A,tabIndex:0,"aria-checked":d.visible?"true":"false",role:A===x?"radio":"switch","aria-labelledby":h},this.renderItemToggleIcon(d,g)):C.tsx("span",{key:"item-toggle",class:"esri-layer-list__item-toggle"},this.renderItemToggleIcon(d,g))};D.renderItemError=
function(d){return d.error?C.tsx("span",{key:"notice-triangle","aria-hidden":"true",class:"esri-icon-notice-triangle"}):null};D.renderLabel=function(d,g,h){const {selectionEnabled:p,_newUI:x}=this,{inherited:A,exclusive:L}=Z,P=null==g?void 0:g.visibilityMode;var aa=P===L?"radio":"switch";g=[this.renderItemToggle(d,g,h),this.renderItemTitle(d,h)];x&&g.reverse();aa=p?C.tsx("div",{key:`item-label-no-selection-${d.uid}`,class:"esri-layer-list__item-label"},g):C.tsx("div",{key:`item-label-with-selection-${d.uid}`,
class:"esri-layer-list__item-label",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":d,"data-parent-visibility":P,tabIndex:0,"aria-checked":d.visible?"true":"false",role:aa,"aria-labelledby":h},g);return P===A||d.error?C.tsx("div",{key:`item-label-container-${d.uid}`,class:"esri-layer-list__item-label"},this.renderItemError(d),this.renderItemTitle(d,h)):aa};D.renderPanelButton=function(d){const {className:g,open:h,title:p,image:x}=d,A=x||g?g:"esri-icon-default-action",
L=this._getIconImageStyles(d),P={["esri-layer-list__item-actions-menu-item--active"]:h},aa={["esri-layer-list__item-action-image"]:!!L["background-image"]};A&&(aa[A]=!!A);return C.tsx("div",{key:`panel-${d.uid}`,bind:this,"data-panel":d,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes("esri-layer-list__item-actions-menu-item",P),role:"button",tabindex:"0",title:p,"aria-label":p},C.tsx("span",{class:this.classes(aa),styles:L}))};D.renderActionsSections=function(d,g,h){g=g.toArray().map((p,
x)=>C.tsx("ul",{key:`${d}-action-section-${x}`,class:"esri-layer-list__item-actions-list"},this.renderActionSection(d,p)));return C.tsx("div",{role:"group","aria-expanded":d.actionsOpen?"true":"false",key:"actions-section",id:h,class:"esri-layer-list__item-actions",hidden:d.actionsOpen?null:!0},g)};D.renderActionSection=function(d,g){return(g&&g.toArray()).map(h=>this.renderAction({item:d,action:h}))};D.renderActionIcon=function(d){const {active:g,className:h}=d,p=this._getIconImageStyles(d);d="button"!==
d.type||d.image||h?h:"esri-icon-default-action";const x={["esri-layer-list__item-action-image"]:!g&&!!p["background-image"],["esri-icon-loading-indicator"]:g,["esri-rotating"]:g};d&&!g&&(x[d]=!0);return C.tsx("span",{key:"action-icon","aria-hidden":"true",class:this.classes("esri-layer-list__item-action-icon",x),styles:p})};D.renderActionTitle=function(d,g){return g?null:C.tsx("span",{key:"action-title",class:"esri-layer-list__item-action-title"},d)};D.renderAction=function(d){const {item:g,action:h,
singleAction:p}=d,{active:x,disabled:A,title:L}=h;d={["esri-layer-list__item-actions-menu-item"]:p&&"button"===h.type,["esri-layer-list__item-action"]:x||!p&&"toggle"!==h.type,["esri-layer-list__action-toggle"]:!x&&"toggle"===h.type,["esri-layer-list__action-toggle--on"]:!x&&"toggle"===h.type&&h.value,["esri-disabled-element"]:A};const P=[this.renderActionIcon(h),this.renderActionTitle(L,p)];return p?C.tsx("div",{bind:this,"data-item":g,"data-action":h,role:"button",key:`single-action-${h.uid}`,onclick:this._triggerAction,
onkeydown:this._triggerAction,classes:d,tabindex:"0",title:L,"aria-label":L},P):C.tsx("li",{bind:this,"data-item":g,"data-action":h,key:`action-${h.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:d,tabindex:"0",role:"button",title:L,"aria-label":L},P)};D._sortNodeRemoved=function(d){const {_sortableMap:g}=this;d=d.dataset.group;const h=g.get(d);h&&h.destroy();g.delete(d)};D._destroySortables=function(){const {_sortableMap:d,_sortableNodes:g}=this;d.forEach(h=>h&&h.destroy());
d.clear();g.clear()};D._moveLayerFromChildList=function({to:d,from:g,item:h,newIndex:p}){this.viewModel.moveListItem(h["data-item"],g["data-item"],d["data-item"],p)};D._sortLayers=function(d){if(d){var g=d.el["data-item"];d=d.toArray();if(g)I.sortChildLayersToIds(g,d);else{var h,p;I.sortLayersToIds(null==(h=this.view)?void 0:null==(p=h.map)?void 0:p.layers,d)}}};D._toggleSorting=function(d,g){const {_sortableMap:h,selectionEnabled:p}=this,x=h.get(g);var A=d["data-item"];A=("root"===g?!0:A.childrenSortable&&
I.canSortSublayers(A))&&p;x?x.option("disabled",!A):A&&(d=fa.Sortable.create(d,{dataIdAttr:"data-layer-uid",group:{name:g,pull:this._sortableCanPull,put:this._sortableCanPut},filter:'[data-sort-filter\x3d"true"]',fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!A,chosenClass:"esri-layer-list--chosen"}),h.set(g,d))};D._toggleAllSorting=function(){this._sortableNodes.forEach((d,g)=>this._toggleSorting(d,g))};D._sortNodeCreated=function(d){const g=d.dataset.group;g&&
(this._sortableNodes.set(g,d),this._toggleSorting(d,g))};D._setVisibleItems=function(d){this.visibleItems=null==d?void 0:d.filter(g=>this.errorsVisible||!g.error)};D._getSingleActionButton=function(d){return d.reduce(g=>g).filter(g=>g&&"button"===g.type).getItemAt(0)};D._focusListItem=function(d){var g;const {_focusSortUid:h}=this;d&&h&&(null==(g=d["data-item"].layer)?void 0:g.uid)===h&&(d.focus(),this._focusSortUid=null)};D._watchActionSectionChanges=function(d,g){const h="action-section"+g;this._handles.add(d.on("change",
this.scheduleRender.bind(this)),h);d.forEach(p=>this._renderOnActionChanges(p,g))};D._renderOnActionChanges=function(d,g){g="actions"+g;"toggle"===d.type?this._handles.add([O.init(d,"className image id title visible value".split(" "),()=>this.scheduleRender())],g):"slider"===d.type?this._handles.add([O.init(d,"className id title visible value displayValueEnabled max min step".split(" "),()=>this.scheduleRender())],g):this._handles.add([O.init(d,["className","image","id","title","visible"],()=>this.scheduleRender())],
g)};D._renderOnItemChanges=function(d){const g=d.uid,h="items"+g;this._handles.add([O.init(d,"actionsOpen visible open updating title visibleAtCurrentScale error visibilityMode panel panel.title panel.content panel.className sortable childrenSortable".split(" "),()=>this.scheduleRender()),d.actionsSections.on("change",()=>this.scheduleRender()),d.children.on("change",()=>this.scheduleRender())],h);d.children.forEach(p=>this._renderOnItemChanges(p));d.actionsSections.forEach(p=>this._watchActionSectionChanges(p,
g))};D._itemsChanged=function(d){this._handles.removeAll();d.forEach(g=>this._renderOnItemChanges(g));this._setVisibleItems(d);this.scheduleRender()};D._filterActions=function(d){return d.map(g=>g.filter(h=>h.visible))};D._countActions=function(d){return d.reduce((g,h)=>g+h.length,0)};D._getIconImageStyles=function(d){d="esri.widgets.LayerList.ListItemPanel"===d.declaredClass||"esri.support.Action.ActionButton"===d.declaredClass||"esri.support.Action.ActionToggle"===d.declaredClass?d.image:null;return{"background-image":d?
`url("${d}")`:null}};D._selectionKeydown=function(d){var g=ba.eventKey(d);if(-1===["ArrowDown","ArrowUp"].indexOf(g))this._toggleSelection(d);else{d.stopPropagation();var h=d.currentTarget,p=h["data-item"],{_sortableMap:x,selectedItems:A}=this;if(h=x.get(h.dataset.group)){var L=I.findSelectedItem(p,A),P=h.toArray();d=P.indexOf(d.target.dataset.layerUid);if(-1!==d){if("ArrowDown"===g){const Ga=d+1;if(Ga>=P.length)return;if(L){var aa;P.splice(Ga,0,P.splice(d,1)[0]);h.sort(P);this._sortLayers(h);this._focusSortUid=
null==(aa=p.layer)?void 0:aa.uid}else{var ia;this._focusSortUid=null==(ia=p.layer)?void 0:ia.uid;this.scheduleRender()}}if("ArrowUp"===g&&(g=d-1,!(-1>=g)))if(L){var wa;P.splice(g,0,P.splice(d,1)[0]);h.sort(P);this._sortLayers(h);this._focusSortUid=null==(wa=p.layer)?void 0:wa.uid}else{var Wa;this._focusSortUid=null==(Wa=p.layer)?void 0:Wa.uid;this.scheduleRender()}}}}};D._toggleActionsOpen=function(d){const g=d.currentTarget["data-item"];var {actionsOpen:h}=g;(h=!h)&&this.operationalItems.forEach(p=>
Y(p));g.actionsOpen=h;d.stopPropagation()};D._triggerPanel=function(d){const g=d.currentTarget["data-panel"];g&&(g.open=!g.open);d.stopPropagation()};D._triggerAction=function(d){var g=d.currentTarget;const h=g["data-action"];g=g["data-item"];"toggle"===h.type&&(h.value=!h.value);this.triggerAction(h,g);d.stopPropagation()};D._toggleVisibility=function(d){var g=d.currentTarget;const h=g.getAttribute("data-parent-visibility");g=g["data-item"];h===Z.exclusive&&g.visible||(g.visible=!g.visible);d.stopPropagation()};
D._toggleChildrenClick=function(d){const g=d.currentTarget["data-item"];g.open=!g.open;d.stopPropagation()};D._toggleSelection=function(d){d.stopPropagation();const {multipleSelectionEnabled:g,selectedItems:h}=this;d=d.currentTarget["data-item"];const p=I.findSelectedItem(d,h),{length:x}=h,A=p&&1===x;g?p?null==h.remove?void 0:h.remove(p):h.add(d):x&&!A?(h.removeAll(),h.add(d)):p?null==h.remove?void 0:h.remove(p):h.add(d)};R._createClass(Ba,[{key:"statusIndicatorsVisible",set:function(d){Q.deprecatedProperty(xa,
"statusIndicatorsVisible",{replacement:"visibleElements.statusIndicators",version:"4.15"});this.visibleElements={...this.visibleElements,statusIndicators:d}}}]);return Ba}(da);w.__decorate([E.property()],q.prototype,"visibleItems",void 0);w.__decorate([E.property()],q.prototype,"iconClass",void 0);w.__decorate([E.property()],q.prototype,"errorsVisible",void 0);w.__decorate([E.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],q.prototype,"label",void 0);w.__decorate([M.aliasOf("viewModel.listItemCreatedFunction")],
q.prototype,"listItemCreatedFunction",void 0);w.__decorate([E.property()],q.prototype,"localeStrings",void 0);w.__decorate([E.property(),r.messageBundle("esri/widgets/LayerList/t9n/LayerList")],q.prototype,"messages",void 0);w.__decorate([E.property(),r.messageBundle("esri/t9n/common")],q.prototype,"messagesCommon",void 0);w.__decorate([E.property()],q.prototype,"multipleSelectionEnabled",void 0);w.__decorate([M.aliasOf("viewModel.operationalItems")],q.prototype,"operationalItems",void 0);w.__decorate([E.property()],
q.prototype,"selectionEnabled",void 0);w.__decorate([E.property()],q.prototype,"selectedItems",void 0);w.__decorate([E.property()],q.prototype,"statusIndicatorsVisible",null);w.__decorate([M.aliasOf("viewModel.view")],q.prototype,"view",void 0);w.__decorate([G.vmEvent("trigger-action"),E.property({type:T})],q.prototype,"viewModel",void 0);w.__decorate([E.property()],q.prototype,"visibleElements",void 0);w.__decorate([S.cast("visibleElements")],q.prototype,"castVisibleElements",null);w.__decorate([M.aliasOf("viewModel.triggerAction")],
q.prototype,"triggerAction",null);w.__decorate([k.accessibleHandler()],q.prototype,"_toggleActionsOpen",null);w.__decorate([k.accessibleHandler()],q.prototype,"_triggerPanel",null);w.__decorate([k.accessibleHandler()],q.prototype,"_triggerAction",null);w.__decorate([k.accessibleHandler()],q.prototype,"_toggleVisibility",null);w.__decorate([k.accessibleHandler()],q.prototype,"_toggleChildrenClick",null);w.__decorate([k.accessibleHandler()],q.prototype,"_toggleSelection",null);return q=w.__decorate([ta.subclass("esri.widgets.LayerList")],
q)});