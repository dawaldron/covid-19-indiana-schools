// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../core/number ../geometry/support/coordsUtils ../core/maybe".split(" "),function(e,Fa,A,Ga,E,Ha,U,O,V,F,W,X,Y,Ia,Ja){function B(a,b,c){return""===b||null===b||void 0===b||b===c||b===c?a:a=a.split(b).join(c)}function G(a){return a instanceof
H||a instanceof Fa||a instanceof I}function P(a){return m(a)||p(a)||n(a)||q(a)||null===a||a===t||"number"===typeof a?!0:!1}function Z(a,b){return void 0===a?b:a}function m(a){return"string"===typeof a||a instanceof String}function q(a){return"boolean"===typeof a}function p(a){return"number"===typeof a}function aa(a){return"number"===typeof a&&isFinite(a)&&Math.floor(a)===a}function u(a){return a instanceof Array}function ba(a){return!0===(a&&a.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===
a.declaredRootClass)}function ca(a){return!0===(a&&a.declaredRootClass&&"esri.arcade.featureSetCollection"===a.declaredRootClass)}function x(a){return a instanceof A}function n(a){return a instanceof Date}function da(a,b,c){if(a.length<b||a.length>c)throw Error("Function called with wrong number of Parameters");}function ea(){let a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){const c=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===b?c:c&3|
8).toString(16)})}function J(a,b){if(!1===isNaN(a)){if(void 0===b||null===b||""===b)return a.toString();b=B(b,"\u2030","");b=B(b,"\u00a4","");return Y.format(a,{pattern:b})}return a.toString()}function D(a,b){a=y.Moment(a);return void 0===b||null===b||""===b?a.format():a.format(Q(b))}function Q(a){return a.replace(/(LTS)|L|l/g,function(b){return"["+b+"]"})}function g(a,b,c){switch(c){case "\x3e":return a>b;case "\x3c":return a<b;case "\x3e\x3d":return a>=b;case "\x3c\x3d":return a<=b}return!1}function fa(a,
b,c){if(null===a){if(null===b||b===t)return g(null,null,c);if(p(b))return g(0,b,c);if(m(b)||q(b))return g(0,k(b),c);if(n(b))return g(0,b.getTime(),c)}if(a===t){if(null===b||b===t)return g(null,null,c);if(p(b))return g(0,b,c);if(m(b)||q(b))return g(0,k(b),c);if(n(b))return g(0,b.getTime(),c)}else if(p(a)){if(p(b))return g(a,b,c);if(q(b))return g(a,k(b),c);if(null===b||b===t)return g(a,0,c);if(m(b))return g(a,k(b),c);if(n(b))return g(a,b.getTime(),c)}else if(m(a)){if(m(b))return g(w(a),w(b),c);if(n(b))return g(k(a),
b.getTime(),c);if(p(b))return g(k(a),b,c);if(null===b||b===t)return g(k(a),0,c);if(q(b))return g(k(a),k(b),c)}else if(n(a)){if(n(b))return g(a,b,c);if(null===b||b===t)return g(a.getTime(),0,c);if(p(b))return g(a.getTime(),b,c);if(q(b)||m(b))return g(a.getTime(),k(b),c)}else if(q(a)){if(q(b))return g(a,b,c);if(p(b))return g(k(a),k(b),c);if(n(b))return g(k(a),b.getTime(),c);if(null===b||b===t)return g(k(a),0,c);if(m(b))return g(k(a),k(b),c)}return!R(a,b)||"\x3c\x3d"!==c&&"\x3e\x3d"!==c?!1:!0}function R(a,
b){if(a===b||null===a&&b===t||null===b&&a===t)return!0;if(n(a)&&n(b))return a.getTime()===b.getTime();if(a instanceof Ga||a instanceof E)return a.equalityTest(b);if(a instanceof F&&b instanceof F){const c=a.cache._arcadeCacheId,f=b.cache._arcadeCacheId;if(void 0!==c&&null!==c)return c===f}return void 0!==a&&void 0!==b&&null!==a&&null!==b&&"object"===typeof a&&"object"===typeof b&&(a._arcadeCacheId===b._arcadeCacheId&&void 0!==a._arcadeCacheId&&null!==a._arcadeCacheId||a._underlyingGraphic===b._underlyingGraphic&&
void 0!==a._underlyingGraphic&&null!==a._underlyingGraphic)?!0:!1}function w(a,b){if(m(a))return a;if(null===a)return"";if(p(a))return J(a,b);if(q(a))return a.toString();if(n(a))return D(a,b);if(a instanceof O)return JSON.stringify(a.toJSON());if(u(a)){b=[];for(var c=0;c<a.length;c++)b[c]=K(a[c]);return"["+b.join(",")+"]"}if(a instanceof A){b=[];for(c=0;c<a.length();c++)b[c]=K(a.get(c));return"["+b.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():G(a)?"object, Function":
""}function ha(a){const b=[];if(!1===u(a))return null;if(a instanceof A){for(var c=0;c<a.length();c++)b[c]=k(a.get(c));return b}for(c=0;c<a.length;c++)b[c]=k(a[c]);return b}function S(a,b){if(m(a))return a;if(null===a)return"";if(p(a))return J(a,b);if(q(a))return a.toString();if(n(a))return D(a,b);if(a instanceof O)return a instanceof U?'{"xmin":'+a.xmin.toString()+',"ymin":'+a.ymin.toString()+","+(a.hasZ?'"zmin":'+a.zmin.toString()+",":"")+(a.hasM?'"mmin":'+a.mmin.toString()+",":"")+'"xmax":'+a.xmax.toString()+
',"ymax":'+a.ymax.toString()+","+(a.hasZ?'"zmax":'+a.zmax.toString()+",":"")+(a.hasM?'"mmax":'+a.mmax.toString()+",":"")+'"spatialReference":'+L(a.spatialReference)+"}":L(a.toJSON(),(f,d)=>f.key===d.key?0:"spatialReference"===f.key?1:"spatialReference"===d.key||f.key<d.key?-1:f.key>d.key?1:0);if(u(a)){b=[];for(var c=0;c<a.length;c++)b[c]=K(a[c]);return"["+b.join(",")+"]"}if(a instanceof A){b=[];for(c=0;c<a.length();c++)b[c]=K(a.get(c));return"["+b.join(",")+"]"}return null!==a&&"object"===typeof a&&
void 0!==a.castToText?a.castToText():G(a)?"object, Function":""}function K(a){return null===a?"null":q(a)||p(a)||m(a)?JSON.stringify(a):a instanceof O||a instanceof A||a instanceof Array?S(a):a instanceof Date?JSON.stringify(D(a,"")):null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():"null"}function k(a,b){return p(a)?a:null===a||""===a?0:n(a)?NaN:q(a)?a?1:0:u(a)||""===a||void 0===a?NaN:void 0!==b&&m(a)?(b=B(b,"\u2030",""),b=B(b,"\u00a4",""),Y.parse(a,{pattern:b})):a===t?0:Number(a)}
function ia(a,b){return n(a)?a:m(a)&&(a=y.Moment(a,[void 0===b||null===b||""===b?y.Moment.ISO_8601:b]),a.isValid())?a.toDate():null}function ja(a,b){return n(a)?y.Moment(a):m(a)&&(a=y.Moment(a,[void 0===b||null===b||""===b?y.Moment.ISO_8601:b]),a.isValid())?a:null}function ka(a){return q(a)?a:m(a)?(a=a.toLowerCase(),"true"===a?!0:!1):p(a)?0===a||isNaN(a)?!1:!0:!1}function la(a,b){if(Ja.isNone(a))return null;if(null===a.spatialReference||void 0===a.spatialReference)a.spatialReference=b;return a}function ma(a){if(null===
a)return null;if(a instanceof F)return"NaN"===a.x||null===a.x||isNaN(a.x)?null:a;if(a instanceof W){if(0===a.rings.length)return null;for(const b of a.rings)if(0<b.length)return a;return null}if(a instanceof X){if(0===a.paths.length)return null;for(const b of a.paths)if(0<b.length)return a;return null}return a instanceof V?0===a.points.length?null:a:a instanceof U?"NaN"===a.xmin||null===a.xmin||isNaN(a.xmin)?null:a:null}function na(a,b){if(!a||!a.domain)return b;let c=null;if("string"===a.field.type||
"esriFieldTypeString"===a.field.type)b=w(b);else{if(null===b||void 0===b)return null;if(""===b)return b;b=k(b)}for(let f=0;f<a.domain.codedValues.length;f++){const d=a.domain.codedValues[f];d.code===b&&(c=d)}return null===c?b:c.name}function oa(a,b){if(!a||!a.domain)return b;let c=null;b=w(b);for(let f=0;f<a.domain.codedValues.length;f++){const d=a.domain.codedValues[f];d.name===b&&(c=d)}return null===c?b:c.code}function pa(a,b,c=null,f){if(!b||!b.fields)return null;let d=null;for(let v=0;v<b.fields.length;v++){const r=
b.fields[v];r.name.toLowerCase()===a.toString().toLowerCase()&&(d=r)}if(null===d)throw Error("Field not found");let l,h;f||(f=c&&b.typeIdField&&c._field(b.typeIdField));null!=f&&b.types.some(function(v){return v.id===f?((l=v.domains&&v.domains[d.name])&&"inherited"===l.type&&(l=qa(d.name,b),h=!0),!0):!1});h||l||(l=qa(a,b));return{field:d,domain:l}}function qa(a,b){let c;b.fields.some(function(f){f.name.toLowerCase()===a.toLowerCase()&&(c=f.domain);return!!c});return c}function L(a,b){b||(b={});"function"===
typeof b&&(b={cmp:b});const c="boolean"===typeof b.cycles?b.cycles:!1,f=b.cmp&&function(l){return function(h){return function(v,r){return l({key:v,value:h[v]},{key:r,value:h[r]})}}}(b.cmp),d=[];return function v(h){h&&h.toJSON&&"function"===typeof h.toJSON&&(h=h.toJSON());if(void 0!==h){if("number"===typeof h)return isFinite(h)?""+h:"null";if("object"!==typeof h)return JSON.stringify(h);var r;if(Array.isArray(h)){var z="[";for(r=0;r<h.length;r++)r&&(z+=","),z+=v(h[r])||"null";return z+"]"}if(null===
h)return"null";if(-1!==d.indexOf(h)){if(c)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var Ka=d.push(h)-1,ra=Object.keys(h).sort(f&&f(h));z="";for(r=0;r<ra.length;r++){const sa=ra[r],ta=v(h[sa]);ta&&(z&&(z+=","),z+=JSON.stringify(sa)+":"+ta)}d.splice(Ka,1);return"{"+z+"}"}}(a)}function ua(a){if(null===a)return null;const b=[];for(const c of a)c&&(c.declaredClass&&"esri.arcade.Feature"===c.declaredClass||"FeatureSetReader"===c.type)?b.push(c.geometry()):
b.push(c);return b}function C(a,b){if(b instanceof F)a.push(b.hasZ?b.hasM?[b.x,b.y,b.z,b.m]:[b.x,b.y,b.z]:[b.x,b.y]);else throw Error("Invalid Argument");}function va(a,b){if(u(a)||x(a)){let c=!1,f=!1,d=[];if(u(a)){for(const l of a)C(d,l);0<d.length&&(b=a[0].spatialReference,c=a[0].hasZ,f=a[0].hasM)}else if(a instanceof E)d=a._elements,0<d.length&&(c=a._hasZ,f=a._hasM,b=a.get(0).spatialReference);else if(x(a)){for(const l of a.toArray())C(d,l);0<d.length&&(b=a.get(0).spatialReference,c=!0===a.get(0).hasZ,
f=!0===a.get(0).hasM)}else throw Error("Invalid Argument");if(0===d.length)return null;!1===Ia.isClockwise(d,f,c)&&(d=d.slice(0).reverse());return new W({rings:[d],spatialReference:b,hasZ:c,hasM:f})}return a}function wa(a,b){if(u(a)||x(a)){let c=!1,f=!1,d=[];if(u(a)){for(const l of a)C(d,l);0<d.length&&(b=a[0].spatialReference,c=!0===a[0].hasZ,f=!0===a[0].hasM)}else if(a instanceof E)d=a._elements,0<d.length&&(c=a._hasZ,f=a._hasM,b=a.get(0).spatialReference);else if(x(a)){for(const l of a.toArray())C(d,
l);0<d.length&&(b=a.get(0).spatialReference,c=!0===a.get(0).hasZ,f=!0===a.get(0).hasM)}return 0===d.length?null:new X({paths:[d],spatialReference:b,hasZ:c,hasM:f})}return a}function xa(a,b){if(u(a)||x(a)){let c=!1,f=!1,d=[];if(u(a)){for(const l of a)C(d,l);0<d.length&&(b=a[0].spatialReference,c=!0===a[0].hasZ,f=!0===a[0].hasM)}else if(a instanceof E)d=a._elements,0<d.length&&(c=a._hasZ,f=a._hasM,b=a.get(0).spatialReference);else if(x(a)){for(const l of a.toArray())C(d,l);0<d.length&&(b=a.get(0).spatialReference,
c=!0===a.get(0).hasZ,f=!0===a.get(0).hasM)}return 0===d.length?null:new V({points:d,spatialReference:b,hasZ:c,hasM:f})}return a}function ya(a,b=!1){const c=[];if(null===a)return c;if(!0===u(a)){for(var f=0;f<a.length;f++){var d=w(a[f]);""===d&&!0!==b||c.push(d)}return c}if(a instanceof A){for(f=0;f<a.length();f++)d=w(a.get(f)),""===d&&!0!==b||c.push(d);return c}return P(a)?(a=w(a),""===a&&!0!==b||c.push(a),c):[]}function za(a){T++;return 0===T%100?(T=0,Ha.create(b=>{setTimeout(()=>{b(a)},0)})):a}
function Aa(a,b,c){switch(c){case "\x26":return a&b;case "|":return a|b;case "^":return a^b;case "\x3c\x3c":return a<<b;case "\x3e\x3e":return a>>b;case "\x3e\x3e\x3e":return a>>>b}}let M=function(a){this.value=a},N=function(a){this.value=a},H=function(a){this.fn=a},I=function(a){this.fn=a};const Ba=H,Ca=I,t={type:"VOID"},Da={type:"BREAK"},Ea={type:"CONTINUE"};let T=0;const y={Moment:null};var La=Object.freeze({__proto__:null,ReturnResultE:M,ImplicitResultE:N,NativeFunctionE:H,SizzleFunctionE:I,NativeFunction:Ba,
ImplicitResult:N,ReturnResult:M,SizzleFunction:Ca,voidOperation:t,breakResult:Da,continueResult:Ea,multiReplace:B,isFunctionParameter:G,isSimpleType:P,defaultUndefined:Z,isString:m,isBoolean:q,isNumber:p,isInteger:aa,isArray:u,isFeatureSet:ba,isFeatureSetCollection:ca,isImmutableArray:x,isDate:n,pcCheck:da,generateUUID:ea,formatNumber:J,formatDate:D,standardiseDateFormat:Q,greaterThanLessThan:fa,equalityTest:R,toString:w,toNumberArray:ha,toStringExplicit:S,toNumber:k,toDate:ia,toDateM:ja,toBoolean:ka,
fixSpatialReference:la,fixNullGeometry:ma,getDomainValue:na,getDomainCode:oa,getDomain:pa,stableStringify:L,autoCastFeatureToGeometry:ua,autoCastArrayOfPointsToPolygon:va,autoCastArrayOfPointsToPolyline:wa,autoCastArrayOfPointsToMultiPoint:xa,toStringArray:ya,tick:za,MomentLibrary:y,binaryOperator:Aa});e.ImplicitResult=N;e.ImplicitResultE=N;e.MomentLibrary=y;e.NativeFunction=Ba;e.NativeFunctionE=H;e.ReturnResult=M;e.ReturnResultE=M;e.SizzleFunction=Ca;e.SizzleFunctionE=I;e.autoCastArrayOfPointsToMultiPoint=
xa;e.autoCastArrayOfPointsToPolygon=va;e.autoCastArrayOfPointsToPolyline=wa;e.autoCastFeatureToGeometry=ua;e.binaryOperator=Aa;e.breakResult=Da;e.continueResult=Ea;e.defaultUndefined=Z;e.equalityTest=R;e.fixNullGeometry=ma;e.fixSpatialReference=la;e.formatDate=D;e.formatNumber=J;e.generateUUID=ea;e.getDomain=pa;e.getDomainCode=oa;e.getDomainValue=na;e.greaterThanLessThan=fa;e.isArray=u;e.isBoolean=q;e.isDate=n;e.isFeatureSet=ba;e.isFeatureSetCollection=ca;e.isFunctionParameter=G;e.isImmutableArray=
x;e.isInteger=aa;e.isNumber=p;e.isSimpleType=P;e.isString=m;e.lc=La;e.multiReplace=B;e.pcCheck=da;e.stableStringify=L;e.standardiseDateFormat=Q;e.tick=za;e.toBoolean=ka;e.toDate=ia;e.toDateM=ja;e.toNumber=k;e.toNumberArray=ha;e.toString=w;e.toStringArray=ya;e.toStringExplicit=S;e.voidOperation=t});