// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/unitUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ./Point ./Polygon ./projectionEllipsoid ./support/geodesicUtils ./support/webMercatorUtils ./support/WKIDUnitConversion".split(" "),function(w,h,u,l,g,B,C,D,x,y,p,z,A,v,m){var q;g=q=function(n){function r(...a){a=n.call(this,...a)||this;a.center=null;a.geodesic=
!1;a.numberOfPoints=60;a.radius=1E3;a.radiusUnit="meters";return a}w._inheritsLoose(r,n);var k=r.prototype;k.normalizeCtorArgs=function(a,b){if(!a||!a.center){if(a&&a.rings)return n.prototype.normalizeCtorArgs.call(this,a,b);a={center:a}}return{...n.prototype.normalizeCtorArgs.call(this),...a,...b}};k.initialize=function(){var a=this.center;const b=this.numberOfPoints;this.hasZ=a&&a.hasZ;if(0===this.rings.length&&a){var f=u.convertUnit(this.radius,this.radiusUnit,"meters"),c=a.spatialReference,e=
"geographic";if(c.isWebMercator)e="webMercator";else if(null!=m[c.wkid]||c.wkt&&0===c.wkt.indexOf("PROJCS"))e="projected";if(this.geodesic){let d;switch(e){case "webMercator":d=v.webMercatorToGeographic(a);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":d=a}a=this._createGeodesicCircle(d,f,b);"webMercator"===e&&(a=v.geographicToWebMercator(a))}else{let d;"webMercator"===e||
"projected"===e?d=f/this._convert2Meters(1,a.spatialReference):"geographic"===e&&(d=u.lengthToDegrees(f,"meters",z.getReferenceEllipsoid(a.spatialReference).radius));a=this._createPlanarCircle(a,d,b)}this.spatialReference=a.spatialReference;this.addRing(a.rings[0])}};k.clone=function(){const {center:a,numberOfPoints:b,radius:f,radiusUnit:c,geodesic:e}=this;return new q({center:a.clone(),numberOfPoints:b,radius:f,radiusUnit:c,geodesic:e})};k._createGeodesicCircle=function(a,b,f){let c=0;const e=[];
for(;360>c;){const d=[0,0];A.directGeodeticSolver(d,[a.x,a.y],c,b);this.hasZ&&d.push(a.z);e.push(d);c+=360/f}e.push(e[0]);return new p(e)};k._createPlanarCircle=function(a,b,f){const c=[],e=2*Math.PI/f;for(let t=0;t<f;++t){var d=e*t;d=[a.x+Math.cos(-d)*b,a.y+Math.sin(-d)*b];this.hasZ&&d.push(a.z);c.push(d)}c.push(c[0]);return new p({spatialReference:a.spatialReference,rings:[c]})};k._convert2Meters=function(a,b){if(null!=m[b.wkid])b=m.values[m[b.wkid]];else{b=b.wkt;const f=b.lastIndexOf(",")+1,c=
b.lastIndexOf("]]");b=parseFloat(b.substring(f,c))}return a*b};return r}(p);h.__decorate([l.property({type:y})],g.prototype,"center",void 0);h.__decorate([l.property()],g.prototype,"geodesic",void 0);h.__decorate([l.property()],g.prototype,"numberOfPoints",void 0);h.__decorate([l.property()],g.prototype,"radius",void 0);h.__decorate([l.property()],g.prototype,"radiusUnit",void 0);return g=q=h.__decorate([x.subclass("esri.geometry.Circle")],g)});