// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["exports","./string","../intl/locale"],function(l,t,w){function p(a){a||(a=w.getLocale());let b=a in q;if(!b){const f=a.split("-");1<f.length&&f[0]in q&&(a=f[0],b=!0);b||(a="en")}const [e,c,d="#,##0.###"]=q[a];return{decimal:e,group:c,pattern:d}}function x(a,b,e){e=e||{};!0===e.places&&(e.places=0);Infinity===e.places&&(e.places=6);b=b.split(".");var c="string"===typeof e.places&&e.places.indexOf(","),d=e.places;c?d=e.places.substring(c+1):0<=d||(d=(b[1]||[]).length);0>e.round||(a=Number(a.toFixed(Number(d))));
a=String(Math.abs(a)).split(".");const f=a[1]||"";b[1]||e.places?(c&&(e.places=e.places.substring(0,c)),c=void 0!==e.places?e.places:b[1]&&b[1].lastIndexOf("0")+1,c>f.length&&(a[1]=f.padEnd(Number(c),"0")),d<f.length&&(a[1]=f.substr(0,Number(d)))):a[1]&&a.pop();d=b[0].replace(",","");c=d.indexOf("0");-1!==c&&(c=d.length-c,c>a[0].length&&(a[0]=a[0].padStart(c,"0")),-1===d.indexOf("#")&&(a[0]=a[0].substr(a[0].length-c)));d=b[0].lastIndexOf(",");let h,g;-1!==d&&(h=b[0].length-d-1,b=b[0].substr(0,d),
d=b.lastIndexOf(","),-1!==d&&(g=b.length-d-1));b=[];for(d=a[0];d;)c=d.length-h,b.push(0<c?d.substr(c):d),d=0<c?d.slice(0,c):"",g&&(h=g,g=void 0);a[0]=b.reverse().join(e.group||",");return a.join(e.decimal||".")}function r(a){a=a||{};var b=p(a.locale);const e=a.pattern||b.pattern,c=b.group,d=b.decimal;let f=1;if(-1!==e.indexOf("%"))f/=100;else if(-1!==e.indexOf("\u2030"))f/=1E3;else if(-1!==e.indexOf("\u00a4"))throw Error("currency notation not supported");b=e.split(";");1===b.length&&b.push("-"+b[0]);
return{regexp:n(b,function(h){h="(?:"+t.escapeRegExpString(h,".")+")";return h.replace(u,function(g){const m={signed:!1,separator:a.strict?c:[c,""],fractional:a.fractional,decimal:d,exponent:!1};g=g.split(".");let k=a.places;1===g.length&&1!==f&&(g[1]="###");1===g.length||0===k?m.fractional=!1:(void 0===k&&(k=a.pattern?g[1].lastIndexOf("0")+1:Infinity),k&&null==a.fractional&&(m.fractional=!0),!a.places&&k<g[1].length&&(k+=","+g[1].length),m.places=k);g=g[0].split(",");1<g.length&&(m.groupSize=g.pop().length,
1<g.length&&(m.groupSize2=g.pop().length));return"("+y(m)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:c,decimal:d,factor:f}}function y(a){a=a||{};"places"in a||(a.places=Infinity);"string"!==typeof a.decimal&&(a.decimal=".");"fractional"in a&&!/^0/.test(String(a.places))||(a.fractional=[!0,!1]);"exponent"in a||(a.exponent=[!0,!1]);"eSigned"in a||(a.eSigned=[!0,!1]);var b=v(a);const e=n(a.fractional,function(d){let f="";d&&0!==a.places&&(f="\\"+a.decimal,f=Infinity===a.places?"(?:"+f+"\\d+)?":
f+("\\d{"+a.places+"}"));return f},!0),c=n(a.exponent,function(d){return d?"([eE]"+v({signed:a.eSigned})+")":""});b+=e;e&&(b="(?:(?:"+b+")|(?:"+e+"))");return b+c}function v(a){a=a||{};"signed"in a||(a.signed=[!0,!1]);"separator"in a?"groupSize"in a||(a.groupSize=3):a.separator="";const b=n(a.signed,function(c){return c?"[-+]":""},!0),e=n(a.separator,function(c){if(!c)return"(?:\\d+)";c=t.escapeRegExpString(c);" "===c?c="\\s":"\u00a0"===c&&(c="\\s\\xa0");const d=a.groupSize,f=a.groupSize2;return f?
(c="(?:0|[1-9]\\d{0,"+(f-1)+"}(?:["+c+"]\\d{"+f+"})*["+c+"]\\d{"+d+"})",0<d-f?"(?:"+c+"|(?:0|[1-9]\\d{0,"+(d-1)+"}))":c):"(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+c+"]\\d{"+d+"})*)"},!0);return b+e}const q={ar:[".",","],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",",
"."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},u=/[#0,]*[#0](?:\.0*#*)?/,n=function(a,b,e){if(!(a instanceof Array))return b(a);const c=[];for(let d=0;d<
a.length;d++)c.push(b(a[d]));a=c.join("|");return"("+(e?"?:":"")+a+")"};l._parseInfo=r;l.format=function(a,b){b={...b};var e=p(b.locale);b.customs=e;var c=b.pattern||e.pattern;if(isNaN(a)||Infinity===Math.abs(a))return null;{b=b||{};e=b.customs.group;const f=b.customs.decimal;c=c.split(";");var d=c[0];c=c[0>a?1:0]||"-"+d;if(-1!==c.indexOf("%"))a*=100;else if(-1!==c.indexOf("\u2030"))a*=1E3;else{if(-1!==c.indexOf("\u00a4"))throw Error("currency notation not supported");if(-1!==c.indexOf("E"))throw Error("exponential notation not supported");
}const h=u;d=d.match(h);if(!d)throw Error("unable to find a number expression in pattern: "+c);!1===b.fractional&&(b.places=0);a=c.replace(h,x(a,d[0],{decimal:f,group:e,places:b.places,round:b.round}))}return a};l.getCustoms=p;l.parse=function(a,b){b=r(b);a=(new RegExp("^"+b.regexp+"$")).exec(a);if(!a)return NaN;let e=a[1];if(!a[1]){if(!a[2])return NaN;e=a[2];b.factor*=-1}e=e.replace(new RegExp("["+b.group+"\\s\\xa0]","g"),"").replace(b.decimal,".");return Number(e)*b.factor};l.regexp=function(a){return r(a).regexp};
Object.defineProperty(l,"__esModule",{value:!0})});