// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ./enums ./RenderingContext ./ShaderTranspiler".split(" "),function(n,u,p,m,q,r,v){function k(h,e){if(m.isNone(h)||h.length!==e.length)return!0;for(let b=0;b<h.length;++b)if(h[b]!==e[b])return!0;return!1}function t(h,e,b){const a="webgl2"===h.webglVersion?v.transpileShader(b,e):b,c=h.gl,d=c.createShader(e);c.shaderSource(d,a);c.compileShader(d);r.webglValidateShadersEnabled()&&!c.getShaderParameter(d,c.COMPILE_STATUS)&&
(console.error("Compile error in ".concat(35633===e?"vertex":"fragment"," shader")),console.error(c.getShaderInfoLog(d)),console.error(w(a)),"webgl2"===h.webglVersion&&(console.log("Shader source before transpilation:"),console.log(b)));return d}function w(h){let e=2;return h.replace(/\n/g,()=>{var b=e++;b=1E3<=b?b.toString():("  "+b).slice(-3);return"\n"+b+":"})}function l(h,e){for(let b=0;b<h.length;++b)e[b]=h[b]}p=function(){function h(b,a,c,d){this._context=b;this._locations=d;this._fShader=this._vShader=
null;this._nameToUniformLocation={};this._nameToUniform1={};this._nameToUniform1v={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};b||console.error("RenderingContext isn't initialized!");0===a.length&&console.error("Shaders source should not be empty!");this._vShader=t(this._context,35633,a);this._fShader=t(this._context,35632,c);this._vShader&&this._fShader||console.error("Error loading shaders!");const f=this._context.gl,
g=f.createProgram();f.attachShader(g,this._vShader);f.attachShader(g,this._fShader);d.forEach((x,y)=>f.bindAttribLocation(g,x,y));f.linkProgram(g);r.webglValidateShadersEnabled()&&!f.getProgramParameter(g,f.LINK_STATUS)&&console.error("Could not initialize shader\nVALIDATE_STATUS: "+f.getProgramParameter(g,f.VALIDATE_STATUS)+", gl error ["+f.getError()+"]infoLog: "+f.getProgramInfoLog(g));this._glName=g;this._context.instanceCounter.increment(q.ResourceType.Program,this)}var e=h.prototype;e.dispose=
function(){const b=this._context.gl;this._vShader&&(b.deleteShader(this._vShader),this._vShader=null);this._fShader&&(b.deleteShader(this._fShader),this._fShader=null);this._glName&&(b.deleteProgram(this._glName),this._glName=null,this._context.instanceCounter.decrement(q.ResourceType.Program,this))};e._getUniformLocation=function(b){void 0===this._nameToUniformLocation[b]&&(this._nameToUniformLocation[b]=this._context.gl.getUniformLocation(this._glName,b));return this._nameToUniformLocation[b]};
e.hasUniform=function(b){return null!==this._getUniformLocation(b)};e.setUniform1i=function(b,a){const c=this._nameToUniform1[b];if(void 0===c||a!==c)this._context.useProgram(this),this._context.gl.uniform1i(this._getUniformLocation(b),a),this._nameToUniform1[b]=a};e.setUniform1iv=function(b,a){const c=this._nameToUniform1v[b];k(c,a)&&(this._context.useProgram(this),this._context.gl.uniform1iv(this._getUniformLocation(b),a),void 0===c?this._nameToUniform1v[b]=Array.from(a):l(a,c))};e.setUniform2iv=
function(b,a){const c=this._nameToUniform2[b];k(c,a)&&(this._context.useProgram(this),this._context.gl.uniform2iv(this._getUniformLocation(b),a),void 0===c?this._nameToUniform2[b]=Array.from(a):l(a,c))};e.setUniform3iv=function(b,a){const c=this._nameToUniform3[b];k(c,a)&&(this._context.useProgram(this),this._context.gl.uniform3iv(this._getUniformLocation(b),a),void 0===c?this._nameToUniform3[b]=Array.from(a):l(a,c))};e.setUniform4iv=function(b,a){const c=this._nameToUniform4[b];k(c,a)&&(this._context.useProgram(this),
this._context.gl.uniform4iv(this._getUniformLocation(b),a),void 0===c?this._nameToUniform4[b]=Array.from(a):l(a,c))};e.setUniform1f=function(b,a){const c=this._nameToUniform1[b];if(void 0===c||a!==c)this._context.useProgram(this),this._context.gl.uniform1f(this._getUniformLocation(b),a),this._nameToUniform1[b]=a};e.setUniform1fv=function(b,a){const c=this._nameToUniform1v[b];k(c,a)&&(this._context.useProgram(this),this._context.gl.uniform1fv(this._getUniformLocation(b),a),void 0===c?this._nameToUniform1v[b]=
Array.from(a):l(a,c))};e.setUniform2f=function(b,a,c){const d=this._nameToUniform2[b];if(void 0===d||a!==d[0]||c!==d[1])this._context.useProgram(this),this._context.gl.uniform2f(this._getUniformLocation(b),a,c),void 0===d?this._nameToUniform2[b]=[a,c]:(d[0]=a,d[1]=c)};e.setUniform2fv=function(b,a){const c=this._nameToUniform2[b];k(c,a)&&(this._context.useProgram(this),this._context.gl.uniform2fv(this._getUniformLocation(b),a),void 0===c?this._nameToUniform2[b]=Array.from(a):l(a,c))};e.setUniform3f=
function(b,a,c,d){const f=this._nameToUniform3[b];if(void 0===f||a!==f[0]||c!==f[1]||d!==f[2])this._context.useProgram(this),this._context.gl.uniform3f(this._getUniformLocation(b),a,c,d),void 0===f?this._nameToUniform3[b]=[a,c,d]:(f[0]=a,f[1]=c,f[2]=d)};e.setUniform3fv=function(b,a){const c=this._nameToUniform3[b];k(c,a)&&(this._context.useProgram(this),this._context.gl.uniform3fv(this._getUniformLocation(b),a),void 0===c?this._nameToUniform3[b]=Array.from(a):l(a,c))};e.setUniform4f=function(b,a,
c,d,f){const g=this._nameToUniform4[b];if(void 0===g||a!==g[0]||c!==g[1]||d!==g[2]||f!==g[3])this._context.useProgram(this),this._context.gl.uniform4f(this._getUniformLocation(b),a,c,d,f),void 0===g?this._nameToUniform4[b]=[a,c,d,f]:(g[0]=a,g[1]=c,g[2]=d,g[3]=f)};e.setUniform4fv=function(b,a){const c=this._nameToUniform4[b];k(c,a)&&(this._context.useProgram(this),this._context.gl.uniform4fv(this._getUniformLocation(b),a),void 0===c?this._nameToUniform4[b]=Array.from(a):l(a,c))};e.setUniformMatrix3fv=
function(b,a,c=!1){const d=this._nameToUniformMatrix3[b];var f=m.isNone(d)?!0:9!==d.length?k(d,a):9!==d.length||d[0]!==a[0]||d[1]!==a[1]||d[2]!==a[2]||d[3]!==a[3]||d[4]!==a[4]||d[5]!==a[5]||d[6]!==a[6]||d[7]!==a[7]||d[8]!==a[8];f&&(this._context.useProgram(this),this._context.gl.uniformMatrix3fv(this._getUniformLocation(b),c,a),void 0===d?this._nameToUniformMatrix3[b]=Array.from(a):l(a,d))};e.setUniformMatrix4fv=function(b,a,c=!1){const d=this._nameToUniformMatrix4[b];var f=m.isNone(d)?!0:16!==d.length?
k(d,a):16!==d.length||d[0]!==a[0]||d[1]!==a[1]||d[2]!==a[2]||d[3]!==a[3]||d[4]!==a[4]||d[5]!==a[5]||d[6]!==a[6]||d[7]!==a[7]||d[8]!==a[8]||d[9]!==a[9]||d[10]!==a[10]||d[11]!==a[11]||d[12]!==a[12]||d[13]!==a[13]||d[14]!==a[14]||d[15]!==a[15];f&&(this._context.useProgram(this),this._context.gl.uniformMatrix4fv(this._getUniformLocation(b),c,a),void 0===d?this._nameToUniformMatrix4[b]=Array.from(a):l(a,d))};e.assertCompatibleVertexAttributeLocations=function(b){b.locations!==this._locations&&console.error("VertexAttributeLocations are incompatible")};
e.stop=function(){};u._createClass(h,[{key:"glName",get:function(){return this._glName}}]);return h}();n.Program=p;Object.defineProperty(n,"__esModule",{value:!0})});