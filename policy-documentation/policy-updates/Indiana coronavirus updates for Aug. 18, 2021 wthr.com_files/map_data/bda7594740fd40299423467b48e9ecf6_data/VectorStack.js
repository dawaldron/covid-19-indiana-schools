// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../chunks/_rollupPluginBabelHelpers ./maybe ./nextTick ../chunks/mat3f64 ../chunks/mat4f64 ../chunks/quatf64 ../chunks/vec2f64 ../chunks/vec3f64 ../chunks/vec4f64".split(" "),function(g,k,e,h,l,m,n,p,q,r){let t=function(){function b(a,d,c){this.itemByteSize=a;this.itemCreate=d;this.buffers=[];this.items=[];this.itemsPtr=this.itemsPerBuffer=0;this.itemsPerBuffer=Math.ceil(c/this.itemByteSize);this.tickHandle=h.before(()=>this.reset())}var f=b.prototype;f.destroy=function(){this.tickHandle&&
(this.tickHandle.remove(),this.tickHandle=e.nullifyNonnullableForDispose(this.tickHandle));this.itemsPtr=0;this.items=e.nullifyNonnullableForDispose(this.items);this.buffers=e.nullifyNonnullableForDispose(this.buffers)};f.get=function(){0===this.itemsPtr&&h(()=>{});const a=Math.floor(this.itemsPtr/this.itemsPerBuffer);for(;this.buffers.length<=a;){const d=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize);for(let c=0;c<this.itemsPerBuffer;++c)this.items.push(this.itemCreate(d,c*this.itemByteSize));
this.buffers.push(d)}return this.items[this.itemsPtr++]};f.reset=function(){const a=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);for(;this.buffers.length>a;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0};b.createVec2f64=function(a=4096){return new b(16,p.createView,a)};b.createVec3f64=function(a=4096){return new b(24,q.createView,a)};b.createVec4f64=function(a=4096){return new b(32,r.createView,a)};b.createMat3f64=function(a=4096){return new b(72,
l.createView,a)};b.createMat4f64=function(a=4096){return new b(128,m.createView,a)};b.createQuatf64=function(a=4096){return new b(32,n.createView,a)};k._createClass(b,[{key:"test",get:function(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}}}]);return b}();g.VectorStack=t;Object.defineProperty(g,"__esModule",{value:!0})});