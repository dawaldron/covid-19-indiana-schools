// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["exports","../../chunks/_rollupPluginBabelHelpers","../../support/arcadeOnDemand","../../support/basemapUtils"],function(e,q,r,t){function h(){h=q._asyncToGenerator(function*(a){const b=a.field,d=a.normalizationField;a=a.valueExpression;var c=[];a&&(k||({arcadeUtils:c}=yield r.loadArcade(),k=c),c=k.extractFieldNames(a));b&&c.push(b);d&&c.push(d);return c});return h.apply(this,arguments)}function g(a){return String(a).padStart(2,"0")}function n(a,b,d){if("date"===b||"number"===b){"number"===
b&&(a=new Date(a));b=d?a.getFullYear():a.getUTCFullYear();const c=g((d?a.getMonth():a.getUTCMonth())+1),f=g(d?a.getDate():a.getUTCDate()),u=g(d?a.getHours():a.getUTCHours()),v=g(d?a.getMinutes():a.getUTCMinutes());a=g(d?a.getSeconds():a.getUTCSeconds());a=`TIMESTAMP'${b}-${c}-${f} ${u}:${v}:${a}'`}return a}function l(a,b){if(b instanceof Date)return"date";if("number"===typeof b)return"number";if("string"===typeof b&&(a=a.getField(b),"\x3cnow\x3e"!==b.toLowerCase()&&a&&"date"===a.type))return"field"}
const p={light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},m={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},w=["integer","small-integer"];let k=null;e.castIntegerFieldToFloat=function(a){return`cast(${a} as float)`};e.defaultBasemapGroups=p;e.getBasemapGroup=function(a,
b=p){for(const d in b)if(-1<b[d].indexOf(a))return d};e.getBasemapId=function(a,b,d=!0){let c=null;a&&("string"===typeof a?b.includes(a)&&(c=a):c=t.getWellKnownBasemapId(a));return d?c||"gray":c};e.getDateDiffSQL=function(a,b,d,c){var {hasQueryEngine:f}=a;d=n(d,l(a,d),f);a=n(b,l(a,b),f);a=`(${d} - ${a})`;f&&(a=`(${a} * ${m.milliseconds})`);c=m[c];f="/";1>c&&(c=1/c,f="*");return{sqlExpression:1===c?a:`(${a} ${f} ${c})`,sqlWhere:null}};e.getDateType=l;e.getFieldsList=function(a){return h.apply(this,
arguments)};e.getNormalizationType=function(a){let b=a.normalizationType;b||(a.normalizationField?b="field":null!=a.normalizationTotal&&(b="percent-of-total"));return b};e.isIntegerField=function(a,b){return(a=b&&a.getField(b))&&-1<w.indexOf(a.type)};e.unitValueInDays=m;Object.defineProperty(e,"__esModule",{value:!0})});