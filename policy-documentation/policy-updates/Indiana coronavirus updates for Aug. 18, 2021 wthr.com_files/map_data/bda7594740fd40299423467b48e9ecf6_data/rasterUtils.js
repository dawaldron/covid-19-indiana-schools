// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["exports","./FramebufferObject","./Texture"],function(g,k,h){g.createColormapTexture=function(a,c){return new h(a,{width:c.length/4,height:1,target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,flipped:!1},c)};g.createFrameBuffer=function(a,c,f,b){b=new h(a,{width:c,height:f,target:3553,pixelFormat:6408,internalFormat:6408,samplingMode:9728,dataType:b?5121:5126,wrapMode:33071,flipped:!1});return new k(a,{colorTarget:0,depthStencilTarget:3,width:c,
height:f},b)};g.createRasterTexture=function(a,c,f="nearest",b=!1){var e;const d=(b=!(b&&"u8"===c.pixelType))?5126:5121,l=null==c.pixels||0===c.pixels.length?null:b?c.getAsRGBAFloat():c.getAsRGBA(),m=null==(e=a.capabilities.textureFloat)?void 0:e.textureFloatLinear;return new h(a,{width:c.width,height:c.height,target:3553,pixelFormat:6408,internalFormat:"webgl2"===a.webglVersion&&b?34836:6408,samplingMode:!m||"bilinear"!==f&&"cubic"!==f?9728:9729,dataType:d,wrapMode:33071,flipped:!1},l)};g.createTransformTexture=
function(a,c){var f=4*c.size[0],b=c.size[1];const e={width:f,height:b,target:3553,pixelFormat:6408,internalFormat:"webgl2"===a.webglVersion?34836:6408,dataType:5126,samplingMode:9728,wrapMode:33071,flipped:!1};f=new Float32Array(f*b*4);b=0;for(let d=0;d<c.coefficients.length;d++)f[b++]=c.coefficients[d],2===d%3&&(f[b++]=1);return new h(a,e,f)};g.getBasicGridUniforms=function(a,c){return{u_scale:a,u_offset:c}};g.getColormapUniforms=function(a,c){return{u_colormapOffset:c||0,u_colormapMaxIndex:a?a.length/
4-1:null}};g.getCommonUniforms=function(a,c,f,b=1,e=!0,d=!1){return{u_flipY:e,u_isFloatTexture:d,u_applyTransform:a?!0:!1,u_opacity:b,u_transformSpacing:a?a.spacing:null,u_transformGridSize:a?a.size:null,u_targetImageSize:c,u_srcImageSize:f}};g.getShadedReliefUniforms=function(a){return{u_hillshadeType:a.hillshadeType,u_sinZcosAs:a.sinZcosAs,u_sinZsinAs:a.sinZsinAs,u_cosZs:a.cosZs,u_weights:a.weights,u_factor:a.factor,u_minValue:a.minValue,u_maxValue:a.maxValue}};g.getStretchUniforms=function(a){return{u_bandCount:a.bandCount,
u_minOutput:a.outMin,u_maxOutput:a.outMax,u_minCutOff:a.minCutOff,u_maxCutOff:a.maxCutOff,u_factor:a.factor,u_useGamma:a.useGamma,u_gamma:a.gamma,u_gammaCorrection:a.gammaCorrection}};g.getUniformLocationInfos=function(a,c){a=a.gl;c=c.glName;const f=a.getProgramParameter(c,a.ACTIVE_UNIFORMS),b=new Map;let e;for(let d=0;d<f;d++)(e=a.getActiveUniform(c,d))&&b.set(e.name,{location:a.getUniformLocation(c,e.name),info:e});return b};g.setTextures=function(a,c,f,b){f.length===b.length&&(b.some(e=>null==
e)||f.some(e=>null==e)||f.forEach((e,d)=>{c.setUniform1i(e,d);a.bindTexture(b[d],d)}))};g.setUniforms=function(a,c,f){Object.keys(f).forEach(b=>{var e=c.get(b)||c.get(b+"[0]");if(e){var d=f[b];if(null!==e&&null!=d)switch({info:e}=e,e.type){case 5126:1<e.size?a.setUniform1fv(b,d):a.setUniform1f(b,d);break;case 35664:a.setUniform2fv(b,d);break;case 35665:a.setUniform3fv(b,d);break;case 35666:a.setUniform4fv(b,d);break;case 35675:a.setUniformMatrix3fv(b,d);break;case 35676:a.setUniformMatrix4fv(b,d);
break;case 5124:1<e.size?a.setUniform1iv(b,d):a.setUniform1i(b,d);break;case 35670:a.setUniform1i(b,d?1:0);break;case 35667:case 35671:a.setUniform2iv(b,d);break;case 35668:case 35672:a.setUniform3iv(b,d);break;case 35669:case 35673:a.setUniform4iv(b,d)}}})};Object.defineProperty(g,"__esModule",{value:!0})});