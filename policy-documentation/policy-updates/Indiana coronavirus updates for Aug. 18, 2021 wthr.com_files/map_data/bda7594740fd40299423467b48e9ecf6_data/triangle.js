// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define("exports ../../core/ObjectStack ../../chunks/vec2 ../../chunks/vec3 ../../chunks/vec3f64 ./lineSegment ./vectorStacks".split(" "),function(h,F,y,e,p,q,m){function z(a){return a?{p0:p.clone(a.p0),p1:p.clone(a.p1),p2:p.clone(a.p2)}:{p0:p.create(),p1:p.create(),p2:p.create()}}function G(a,c,d,b=z()){e.copy(b.p0,a);e.copy(b.p1,c);e.copy(b.p2,d);return b}function H(a,c,d){var b=y.distance(a,c);c=y.distance(c,d);a=y.distance(d,a);d=(b+c+a)/2;b=d*(d-b)*(d-c)*(d-a);return 0>=b?0:Math.sqrt(b)}const A=
new F.ObjectStack(q.create),K=new F.ObjectStack(()=>({p0:null,p1:null,p2:null})),B=p.create(),I=p.create();h.area2d=function(a){return H(a.p0,a.p1,a.p2)};h.areaPoints2d=H;h.areaPoints3d=function(a,c,d){e.subtract(B,c,a);e.subtract(I,d,a);return e.length(e.cross(B,B,I))/2};h.copy=function(a,c=z()){return G(a.p0,a.p1,a.p2,c)};h.create=z;h.distance2=function(a,c){var d=a.p0,b=a.p1;a=a.p2;const n=e.subtract(m.sv3d.get(),b,d),g=e.subtract(m.sv3d.get(),a,b),r=e.subtract(m.sv3d.get(),d,a),u=e.subtract(m.sv3d.get(),
c,d);var k=e.subtract(m.sv3d.get(),c,b),l=e.subtract(m.sv3d.get(),c,a);const f=e.cross(n,n,r),w=e.dot(e.cross(m.sv3d.get(),n,f),u);k=e.dot(e.cross(m.sv3d.get(),g,f),k);l=e.dot(e.cross(m.sv3d.get(),r,f),l);if(0<w&&0<k&&0<l)return c=e.dot(f,u),c*c/e.dot(f,f);d=q.distance2(q.fromValues(d,n,A.get()),c);b=q.distance2(q.fromValues(b,g,A.get()),c);c=q.distance2(q.fromValues(a,r,A.get()),c);return Math.min(d,b,c)};h.fromValues=G;h.intersectRay=function(a,c,d){const {direction:b,origin:n}=c,{p0:g,p1:r,p2:u}=
a;var k=r[0]-g[0],l=r[1]-g[1],f=r[2]-g[2];a=u[0]-g[0];c=u[1]-g[1];const w=u[2]-g[2];var v=b[1]*w-c*b[2],x=b[2]*a-w*b[0];const J=b[0]*c-a*b[1];var t=k*v+l*x+f*J;if(-1E-5<t&&1E-5>t)return!1;t=1/t;const C=n[0]-g[0],D=n[1]-g[1],E=n[2]-g[2];v=t*(C*v+D*x+E*J);if(0>v||1<v)return!1;x=D*f-l*E;f=E*k-f*C;k=C*l-k*D;l=t*(b[0]*x+b[1]*f+b[2]*k);if(0>l||1<v+l)return!1;d&&(e.scale(d,b,t*(a*x+c*f+w*k)),e.add(d,n,d));return!0};h.wrap=function(a,c,d){const b=K.get();b.p0=a;b.p1=c;b.p2=d;return b};Object.defineProperty(h,
"__esModule",{value:!0})});