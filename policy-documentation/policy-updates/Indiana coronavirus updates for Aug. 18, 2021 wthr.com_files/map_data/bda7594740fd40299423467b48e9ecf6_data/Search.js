// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Search/SearchResultRenderer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../Widget ./SearchViewModel ../support/decorators/accessibleHandler ../support/decorators/messageBundle ../support/jsxFactory ../support/widgetUtils".split(" "),function(m,a,b,f,
e,x,w,E,h,l,g,p,d,q){f=function(k){function v(A,H){A=k.call(this,A,H)||this;A.messages=null;A.showMoreResultsOpen=!1;A.viewModel=null;return A}m._inheritsLoose(v,k);var n=v.prototype;n.render=function(){return d.tsx("div",{class:"esri-search-result-renderer esri-widget"},d.tsx("div",{key:"esri-search-renderer__container",class:this.classes("esri-search-result-renderer__more-results",{["esri-search-result-renderer__more-results--show-more-results"]:this.showMoreResultsOpen})},this.renderSearchResultName(),
this.renderMoreResults()))};n.renderMoreResults=function(){return d.tsx("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())};n.renderSearchResultName=function(){var A;const H=null==(A=this.viewModel)?void 0:A.selectedResult;return d.tsx("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},H&&H.name||"")};n.renderMoreResultsLists=function(){var A,H=null==(A=this.viewModel)?void 0:A.results;
({resultCount:A}=this.viewModel);if(2>A)return null;H=H.map(M=>this.renderMoreResultsList(M));return d.tsx("div",{key:"esri-search-renderer__more-results-container",class:"esri-search-result-renderer__more-results-list"},H)};n.renderMoreResultsButton=function(){const {messages:A}=this,{resultCount:H}=this.viewModel;return 2>H?null:d.tsx("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},d.tsx("a",{class:"esri-widget__anchor",href:"#",bind:this,
onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?A.hideMoreResults:A.showMoreResults))};n.renderMoreResultsHeader=function(A,H){return d.tsx("div",{key:`esri-search-result-renderer__header-${H}`,class:"esri-search-result-renderer__more-results-list-header"},A)};n.renderMoreResultsList=function(A){var H,M;const {results:W}=A;var L=W.length;const Z=!!L,ca=null==(H=this.viewModel)?void 0:H.selectedResult;H=1===L&&W[0]===ca;L=this._getSourceName(A.source,
A.sourceIndex);L=1<(null==(M=this.viewModel)?void 0:M.results.length)&&!H?this.renderMoreResultsHeader(L,A.sourceIndex):null;M=Z&&W.map((U,Y)=>this.renderMoreResultsListItem(U,Y));M=Z&&!H?d.tsx("ul",{key:`esri-search-result-renderer__list-${A.sourceIndex}`},M):null;return Z?d.tsx("div",{key:`esri-search-result-renderer__results-${A.sourceIndex}`},L,M):null};n.renderMoreResultsListItem=function(A,H){const M=this.get("viewModel.selectedResult");return A!==M?d.tsx("li",{key:`esri-search-result-renderer__list-item-${H}`},
d.tsx("a",{class:"esri-widget__anchor",href:"#",tabindex:"0",bind:this,"data-result":A,onclick:this._selectResultClick,onkeydown:this._selectResultClick},A.name)):null};n._showMoreResultsClick=function(A){A.preventDefault();this.showMoreResultsOpen=!this.showMoreResultsOpen;(A=this.get("viewModel.view.popup"))&&A.reposition()};n._selectResultClick=function(A){A.preventDefault();A=A.currentTarget["data-result"];this.viewModel&&this.viewModel.select(A)};n._getSourceName=function(A,H){return H===l.ALL_INDEX?
this.messages.all:A.name};return v}(h);a.__decorate([b.property(),p.messageBundle("esri/widgets/Search/t9n/Search")],f.prototype,"messages",void 0);a.__decorate([b.property()],f.prototype,"showMoreResultsOpen",void 0);a.__decorate([b.property()],f.prototype,"viewModel",void 0);a.__decorate([g.accessibleHandler()],f.prototype,"_showMoreResultsClick",null);a.__decorate([g.accessibleHandler()],f.prototype,"_selectResultClick",null);return f=a.__decorate([E.subclass("esri.widgets.Search.SearchResultRenderer")],
f)})},"esri/widgets/Search/SearchViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../assets ../../config ../../Graphic ../../PopupTemplate ../../core/Accessor ../../core/Collection ../../core/Error ../../core/Evented ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/SpatialReference ../../intl/locale ../../intl/messages ../../portal/Portal ../../chunks/location ../../symbols/PictureMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleMarkerSymbol ../../symbols/TextSymbol ../../views/support/layerViewUtils ./LayerSearchSource ./LocatorSearchSource ./SearchSource ./support/geometryUtils ./support/locatorUtils ../support/geolocationUtils ../support/GoTo".split(" "),
function(m,a,b,f,e,x,w,E,h,l,g,p,d,q,k,v,n,A,H,M,W,L,Z,ca,U,Y,J,r,C,u,y,F,I,R,K,P,Q,X,S){function O(aa,ba){return aa.hasOwnProperty(ba)&&null!=aa[ba]&&""!==aa[ba]}const T=d.getLogger("esri.widgets.Search.SearchViewModel"),ea=E.ofType({key:aa=>aa.layer?"layer":"locator",base:K,typeMap:{layer:I,locator:R}}),fa=L.WGS84,ha=/<(?:.|\s)*?>/g;w=function(aa){function ba(c){c=aa.call(this,c)||this;c._handles=new g;c._gotoController=null;c._searching=null;c.autoNavigate=!0;c.autoSelect=!0;c.defaultPopupTemplate=
null;c.defaultSources=new ea;c.defaultSymbol=new J({url:b.getAssetUrl(p("trident")?"esri/images/search/search-symbol-32.png":"esri/images/search/search-symbol-32.svg"),size:24,width:24,height:24});c.includeDefaultSources=!0;c.maxInputLength=128;c.maxResults=6;c.maxSuggestions=6;c.messages=null;c.minSuggestCharacters=1;c.popupEnabled=!0;c.popupTemplate=null;c.portal=U.getDefault();c.resultCount=null;c.resultGraphicEnabled=!0;c.resultGraphic=null;c.results=null;c.selectedSuggestion=null;c.searchAllEnabled=
!0;c.selectedResult=null;c.sources=new ea;c.suggestionDelay=150;c.suggestionCount=null;c.suggestions=null;c.suggestionsEnabled=!0;c.view=null;return c}m._inheritsLoose(ba,aa);var G=ba.prototype;G.initialize=function(){var c=this;const t=function(){var z=m._asyncToGenerator(function*(){const B=yield ca.fetchMessageBundle("esri/widgets/Search/t9n/Search");c.messages=B;c.defaultPopupTemplate=new x({title:B.searchResult,content:"{Match_addr}"})});return function(){return z.apply(this,arguments)}}();t();
this._handles.add([v.on(this,["defaultSources","sources"],"change",()=>this.notifyChange("allSources")),v.init(this,["includeDefaultSources","view","portal"],()=>this._update()),Z.onLocaleChange(t)])};G.destroy=function(){this._abortGoTo();this.clearGraphics();this._handles.destroy();this._handles=null};G.clear=function(){this.searchTerm=""};G.clearGraphics=function(){this._removeHighlight();this._closePopup();this.view&&this.view.graphics.remove(this.resultGraphic);this._set("resultGraphic",null)};
G.search=function(c,t){this.emit("search-start");this.clearGraphics();const z=this._createSuggestionForSearch(c);this._searching=c=this.when().then(()=>this._getResultsFromSources(z,t).then(B=>{var D;if(null!=(D=q.unwrap(null==t?void 0:t.signal))&&D.aborted)return null;const N={activeSourceIndex:this.activeSourceIndex,searchTerm:z.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(N,B,z);B=this._getFirstResult(N.results);D=(z.location&&B?B.name:z.text).replace(ha,"");this._set("searchTerm",
D);(z.key&&"number"===typeof z.sourceIndex||z.location)&&this._set("selectedSuggestion",z);this._set("results",N.results);this._set("resultCount",N.results.reduce((V,da)=>V+da.results.length,0));this.emit("search-complete",N);return this._selectFirstResult(B).then(()=>N)})).then(B=>{this._clearSearching();return B},B=>{this._clearSearching();throw B;});this.notifyChange("state");return c};G.searchNearby=function(c){if(!this.locationEnabled){var t=new h("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",
{geolocation:navigator.geolocation});T.error(t);return Promise.reject(t)}this._searching=t=X.getCurrentPosition().then(z=>X.positionToPoint({position:z,view:this.view},c)).then(z=>this.search(z,c));this.notifyChange("state");t.catch(()=>{}).then(()=>this._clearSearching());return t};G.select=function(c){this.clearGraphics();if(!c){var t=new h("select:missing-parameter","Cannot select without a searchResult.",{searchResult:c});T.error(t);return Promise.reject(t)}const {view:z}=this,B=O(c,"sourceIndex")?
c.sourceIndex:this._getSourceIndexOfResult(c),D=this.allSources.getItemAt(B);if(!D)return t=new h("select:missing-source","Cannot select without a source.",{source:D}),T.error(t),Promise.reject(t);t=D instanceof I?this._getLayerSourcePopupTemplate(D):D.popupTemplate;const N=D.resultSymbol||this._getDefaultSymbol(c),V=O(D,"resultGraphicEnabled")?D.resultGraphicEnabled:this.resultGraphicEnabled,da=O(D,"autoNavigate")?D.autoNavigate:this.autoNavigate,ia=O(D,"popupEnabled")?D.popupEnabled:this.popupEnabled,
pa=ia?t||this.popupTemplate||this.defaultPopupTemplate:null,{feature:ja}=c;if(!ja)return t=new h("select:missing-feature","Cannot select without a feature.",{feature:ja}),T.error(t),Promise.reject(t);const {attributes:sa,geometry:qa,layer:ta,sourceLayer:ua}=ja,na=P.getPointFromGeometry(qa);t={layerViewQuery:this._getLayerView(ja),elevationQuery:z&&q.isSome(na)?P.getPointWithElevation(na,z).catch(()=>na):Promise.resolve(na)};return k.eachAlways(t).then(ka=>{const la=ka.layerViewQuery.value,va=ka.elevationQuery.value;
N instanceof y&&(N.text=c.name);ka=z&&da?c.target||c.extent:null;return(q.isSome(ka)?this._goToSearchResult(ka):Promise.resolve()).then(()=>{var oa;const ma=la?ja:new e({geometry:qa,symbol:N,attributes:sa,layer:ta,sourceLayer:ua,popupTemplate:pa}),ra=ia&&(null==(oa=this.view)?void 0:oa.popup);(oa=ra&&ma.getEffectivePopupTemplate(ra.defaultPopupTemplateEnabled))&&z.popup.open({features:[ma],location:va});la&&F.highlightsSupported(la)&&!oa&&this._highlightFeature({graphic:ma,layerView:la});!la&&V&&
z&&z.graphics.push(ma);this._set("selectedResult",c);this._set("resultGraphic",ma);this.emit("select-result",{result:c,source:D,sourceIndex:B});return c})})};G.suggest=function(c,t,z){const B=c||this.searchTerm;this.emit("suggest-start",{searchTerm:B});return this._suggestTimer(t,z).then(()=>this._suggestImmediate(B,z).then(D=>{this._set("suggestions",D.results);this._set("suggestionCount",D.results.reduce((N,V)=>N+V.results.length,0));this.emit("suggest-complete",D);return D}))};G.when=function(){var c=
m._asyncToGenerator(function*(){yield v.whenFalseOnce(this,"updating")});return function(){return c.apply(this,arguments)}}();G._update=function(){var c=m._asyncToGenerator(function*(){const {portal:t,view:z}=this;if(this.includeDefaultSources){var B=this._updatingPromise=k.eachAlways([null==t?void 0:t.load(),null==z?void 0:z.when()]);if(this.destroyed)return;this.notifyChange("updating");yield B;if(B!==this._updatingPromise)return}this._updatingPromise=null;this.notifyChange("updating");B=v.whenOnce(this,
"messages");this.destroyed||(this._handles.add(B),yield B,this._updateDefaultSources())});return function(){return c.apply(this,arguments)}}();G._clearSearching=function(){this._searching=null;this.notifyChange("state")};G._convertHelperServices=function(){var c,t;const z=null==(c=this.portal)?void 0:null==(t=c.helperServices)?void 0:t.geocode;return z?z.map(B=>{var D;if(!1!==B.placefinding){var N=f.apiKey&&Q.isArcGISWorldGeocoder(B.url)?{url:Q.meteredArcGISLocatorUrl}:null;B=R.fromJSON({...B,...N});
N=null==(D=B.locator)?void 0:D.url;(Q.isArcGISWorldGeocoder(N)||Q.isProxiedArcGISWorldGeocoder(N)||Q.isMeteredArcGISWorldGeocoder(N))&&B.set({singleLineFieldName:"SingleLine",outFields:B.outFields||["Addr_type","Match_addr","StAddr","City"],placeholder:B.placeholder||this.messages.placeholder,defaultZoomScale:"number"===typeof B.defaultZoomScale?B.defaultZoomScale:2500});if(B.singleLineFieldName)return B}}).filter(Boolean):[]};G._getLayerSources=function(c,t){var z;const B=null==(z=this.view)?void 0:
z.map;return c.map(D=>{const N=B.findLayerById(D.id);if(N){D=this._getLayerJSON(D);var V=I.fromJSON(D);V.placeholder=t;this._getLayer(N,D).then(da=>{V.layer=da});return V}}).filter(Boolean).toArray()};G._getTableSources=function(c,t){var z;const B=null==(z=this.view)?void 0:z.map;return c.map(D=>{const N=B.findTableById(D.id);if(N){D=this._getLayerJSON(D);var V=I.fromJSON(D);V.placeholder=t;this._getLayer(N,D).then(da=>{V.layer=da});return V}}).filter(Boolean).toArray()};G._convertApplicationProperties=
function(){var c,t,z;const B=null==(c=this.view)?void 0:c.map;c=null==B?void 0:null==(t=B.applicationProperties)?void 0:null==(z=t.viewing)?void 0:z.search;if(!c)return[];const {enabled:D,hintText:N,layers:V,tables:da}=c;if(!D)return[];t=this._getLayerSources(V,N);z=this._getTableSources(da,N);return[...t,...z]};G._getSubLayer=function(c,t){return c.load().then(()=>{if(!c.allSublayers)return Promise.reject();const z=c.allSublayers.find(B=>B.id===t.subLayer);return z?z.createFeatureLayer():Promise.reject()})};
G._getBuildingSubLayer=function(){var c=m._asyncToGenerator(function*(t,z){yield t.load();t=t.allSublayers.find(B=>B.id===z.subLayer);if("building-component"!==(null==t?void 0:t.type))return Promise.reject();yield t.load();if(null==t.associatedLayer)return Promise.reject();yield t.associatedLayer.load();return t});return function(t,z){return c.apply(this,arguments)}}();G._getLayer=function(c,t){return"feature"===c.type||"scene"===c.type||"csv"===c.type||"geojson"===c.type||"ogc-feature"===c.type?
Promise.resolve(c):"map-image"===c.type?this._getSubLayer(c,t).catch(()=>{const z=new h("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:c});T.error(z);return null}):"building-scene"===c.type?this._getBuildingSubLayer(c,t):Promise.resolve(null)};G._getLayerJSON=function(c){return"function"===typeof c.toJSON?c.toJSON():c};G._updateDefaultSources=function(){const {defaultSources:c,includeDefaultSources:t}=this;c.removeAll();t&&c.addMany([...this._convertApplicationProperties(),
...this._convertHelperServices()]);this.notifyChange("allSources")};G._abortGoTo=function(){this._gotoController&&this._gotoController.abort();this._gotoController=null};G._clear=function(){this._abortGoTo();this._set("resultCount",null);this._set("results",null);this._set("suggestions",null);this._set("suggestionCount",null);this._set("selectedResult",null);this._set("selectedSuggestion",null);this.emit("search-clear")};G._closePopup=function(){var c;const t=null==(c=this.view)?void 0:c.popup;({resultGraphic:c}=
this);if(t&&c){var {selectedFeature:z}=t;z&&z===c&&t.close()}};G._suggestTimer=function(c,t){return k.after(null!=c?c:this.suggestionDelay,null,t&&t.signal)};G._createLocationForSearch=function(c){return c instanceof e?P.getPointFromGeometry(c.geometry):c instanceof W?c:Array.isArray(c)&&2===c.length?new W({longitude:c[0],latitude:c[1]}):null};G._createSuggestionForSearch=function(c){if(c&&O(c,"key")&&O(c,"text")&&O(c,"sourceIndex"))return c;const t=this._createLocationForSearch(c),z="string"===typeof c?
c:this.searchTerm,{selectedSuggestion:B,selectedResult:D}=this,N=(c=!c&&B&&D)&&B.location;return c&&B.key===D.key&&B.sourceIndex===D.sourceIndex||N?B:{location:q.unwrap(t),text:t?"":z,sourceIndex:null,key:null}};G._getFirstResult=function(c){let t=null;c&&c.some(z=>{({results:z}=z);z=z[0];const B=!!z;B&&(t=z);return B});return t};G._selectFirstResult=function(c){return this.autoSelect&&c?this.select(c):Promise.resolve(null)};G._suggestImmediate=function(c,t){return this.when().then(()=>this._getSuggestionsFromSources(c,
t)).then(z=>{var B;if(null!=(B=q.unwrap(null==t?void 0:t.signal))&&B.aborted)return null;B={activeSourceIndex:this.activeSourceIndex,searchTerm:c,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(B,z);return B})};G._formatSourceResponse=function(c,t,z){const B=t&&t.value||[];t=t&&t.error;const D=this.allSources.getItemAt(z);t?(c.errors.push({sourceIndex:z,source:D,error:t}),T.error(t),c.numErrors++):(c.results.push({sourceIndex:z,source:D,results:B}),c.numResults+=B.length)};G._formatResponse=
function(c,t,z){if(t)if(-1===c.activeSourceIndex){const B=z&&O(z,"sourceIndex")&&-1!==z.sourceIndex?z.sourceIndex:void 0;t.forEach((D,N)=>{this._formatSourceResponse(c,D,void 0!==B?B:N)})}else this._formatSourceResponse(c,t[0],c.activeSourceIndex)};G._getResultsFromSources=function(c,t){var {allSources:z}=this;const B=!c.location&&O(c,"sourceIndex")?c.sourceIndex:this.activeSourceIndex,D=[];if(!z.length)return z=new h("search:no-sources-defined","At least one source is required.",{allSources:z}),
T.error(z),Promise.reject(z);-1===B?z.forEach((N,V)=>{D.push(this._getResultsFromSource(c,V,t))}):D.push(this._getResultsFromSource(c,B,t));return k.eachAlways(D)};G._getSuggestionsFromSources=function(c,t){const {allSources:z,activeSourceIndex:B}=this,D=[];if(!z.length){const N=new h("suggest:no-sources-defined","At least one source is required.",{allSources:z});T.error(N);return Promise.reject(N)}-1===B?z.forEach((N,V)=>{D.push(this._getSuggestionsFromSource(c,V,t))}):D.push(this._getSuggestionsFromSource(c,
B,t));return k.eachAlways(D)};G._getResultsFromSource=function(c,t,z){var B;const D=this.allSources.getItemAt(t),{location:N=null}=c,V=(null==(B=this.view)?void 0:B.spatialReference)||fa;B=O(D,"maxResults")?D.maxResults:this.maxResults;const da=D instanceof I&&O(D,"exactMatch")?D.exactMatch:!1,{view:ia}=this;return D.getResults({view:ia,sourceIndex:t,location:N,suggestResult:c,spatialReference:V,exactMatch:da,maxResults:B},z)};G._getSuggestionsFromSource=function(c,t,z){const B=this.allSources.getItemAt(t);
var D=O(B,"suggestionsEnabled")?B.suggestionsEnabled:this.suggestionsEnabled,N=c.length;const V=O(B,"minSuggestCharacters")?B.minSuggestCharacters:this.minSuggestCharacters;if(D&&c.trim()&&N>=V){var da;D=(null==(da=this.view)?void 0:da.spatialReference)||fa;da=O(B,"maxSuggestions")?B.maxSuggestions:this.maxSuggestions;({view:N}=this);return B.getSuggestions({view:N,sourceIndex:t,suggestTerm:c,spatialReference:D,maxSuggestions:da},z)}return Promise.resolve(null)};G.createDefaultSymbol=function(c,t){if("point"===
t)return new u({color:c.color,size:c.size,outline:{color:c.outline.color,width:c.outline.width}});if("polyline"===t)return new C({color:c.color,width:c.width});if("polygon"===t)return new r({color:c.color,outline:{color:c.outline.color,width:c.outline.width}})};G._getLayerSourcePopupTemplate=function(c){const {layer:t}=c;if(t)return O(c,"popupTemplate")?c.popupTemplate:t.popupTemplate};G._getSourceIndexOfResult=function(c){let t=null;this.results.some(z=>z.results.some(B=>B===c?(t=z.sourceIndex,!0):
!1));return t};G._goToSearchResult=function(){var c=m._asyncToGenerator(function*(t){const z=!!t;this._abortGoTo();const B=k.createAbortController();this._gotoController=B;yield this.callGoTo({target:{target:t},options:{animate:z,signal:B.signal}});this._gotoController=null});return function(t){return c.apply(this,arguments)}}();G._getDefaultSymbol=function(c){var t,z,B,D=null==(t=this.view)?void 0:null==(z=t.map)?void 0:null==(B=z.basemap)?void 0:B.id;c=q.get(c,"feature","geometry","type");return q.isSome(c)&&
(D=(D=Y.getSchemes({basemap:D,geometryType:c})||Y.getSchemes({basemap:"topo",geometryType:c}))&&D.primaryScheme)?(D.color&&O(D,"opacity")&&(D.color.a=D.opacity),this.createDefaultSymbol(D,c)):this.defaultSymbol};G._removeHighlight=function(){this._handles.remove("highlight")};G._getLayerView=function(){var c=m._asyncToGenerator(function*(t){const {view:z}=this;if(!t||!z||"building-component"===t.layer.type||"subtype-sublayer"===t.layer.type)return Promise.resolve(null);({layer:t}=t);yield z.when();
return z.whenLayerView(t)});return function(t){return c.apply(this,arguments)}}();G._highlightFeature=function(c){const {graphic:t,layerView:z}=c,{attributes:B,layer:D}=t;({objectIdField:c}=D);c=z.highlight(B&&B[c]||t);this._handles.add(c,"highlight")};m._createClass(ba,[{key:"activeSource",get:function(){return this.allSources.getItemAt(this.activeSourceIndex)||null}},{key:"activeSourceIndex",get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?-1:0},set:function(c){void 0===c?
this._clearOverride("activeSourceIndex"):this._override("activeSourceIndex",c)}},{key:"allPlaceholder",get:function(){var c;return null==(c=this.messages)?void 0:c.allPlaceholder},set:function(c){c?this._override("allPlaceholder",c):this._clearOverride("allPlaceholder")}},{key:"allSources",get:function(){const {sources:c,defaultSources:t,includeDefaultSources:z}=this,B="function"===typeof z?z.call(null,{sources:c,defaultSources:t}):z?t.concat(c):c,D=this._get("allSources")||new ea;D.removeAll();D.addMany(B.filter(Boolean));
return D}},{key:"locationEnabled",get:function(){return this._get("locationEnabled")||X.supported()},set:function(c){if(void 0===c)this._clearOverride("locationEnabled");else{var t=X.supported();if(c&&!t){const z=new h("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});T.error(z)}this._override("locationEnabled",c&&t)}}},{key:"placeholder",get:function(){const {allSources:c,activeSourceIndex:t,allPlaceholder:z}=this;if(-1===t)return z;
const B=c.getItemAt(t);return B?B.placeholder:""}},{key:"searchTerm",get:function(){return this._get("searchTerm")||""},set:function(c){this._set("searchTerm",c||"");this.clearGraphics();this.selectedSuggestion&&this.selectedSuggestion.text!==c&&this._set("selectedSuggestion",null);""===c&&this._clear()}},{key:"state",get:function(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}},{key:"updating",get:function(){return null!=this._updatingPromise}}]);
return ba}(S.GoToMixin(l.EventedMixin(w)));w.ALL_INDEX=-1;a.__decorate([n.property({readOnly:!0,value:null})],w.prototype,"activeSource",null);a.__decorate([n.property()],w.prototype,"activeSourceIndex",null);a.__decorate([n.property()],w.prototype,"allPlaceholder",null);a.__decorate([n.property({readOnly:!0,dependsOn:["defaultSources.length","sources.length","includeDefaultSources"]})],w.prototype,"allSources",null);a.__decorate([n.property()],w.prototype,"autoNavigate",void 0);a.__decorate([n.property()],
w.prototype,"autoSelect",void 0);a.__decorate([n.property()],w.prototype,"defaultPopupTemplate",void 0);a.__decorate([n.property({readOnly:!0})],w.prototype,"defaultSources",void 0);a.__decorate([n.property()],w.prototype,"defaultSymbol",void 0);a.__decorate([n.property()],w.prototype,"includeDefaultSources",void 0);a.__decorate([n.property()],w.prototype,"locationEnabled",null);a.__decorate([n.property()],w.prototype,"maxInputLength",void 0);a.__decorate([n.property()],w.prototype,"maxResults",void 0);
a.__decorate([n.property()],w.prototype,"maxSuggestions",void 0);a.__decorate([n.property()],w.prototype,"messages",void 0);a.__decorate([n.property()],w.prototype,"minSuggestCharacters",void 0);a.__decorate([n.property({readOnly:!0})],w.prototype,"placeholder",null);a.__decorate([n.property()],w.prototype,"popupEnabled",void 0);a.__decorate([n.property({type:x})],w.prototype,"popupTemplate",void 0);a.__decorate([n.property({type:U})],w.prototype,"portal",void 0);a.__decorate([n.property()],w.prototype,
"resultCount",void 0);a.__decorate([n.property()],w.prototype,"resultGraphicEnabled",void 0);a.__decorate([n.property({readOnly:!0})],w.prototype,"resultGraphic",void 0);a.__decorate([n.property({readOnly:!0})],w.prototype,"results",void 0);a.__decorate([n.property({readOnly:!0})],w.prototype,"selectedSuggestion",void 0);a.__decorate([n.property()],w.prototype,"searchAllEnabled",void 0);a.__decorate([n.property({readOnly:!0})],w.prototype,"selectedResult",void 0);a.__decorate([n.property()],w.prototype,
"searchTerm",null);a.__decorate([n.property({type:ea})],w.prototype,"sources",void 0);a.__decorate([n.property({readOnly:!0,dependsOn:["allSources.length","updating"]})],w.prototype,"state",null);a.__decorate([n.property()],w.prototype,"suggestionDelay",void 0);a.__decorate([n.property()],w.prototype,"suggestionCount",void 0);a.__decorate([n.property({readOnly:!0})],w.prototype,"suggestions",void 0);a.__decorate([n.property()],w.prototype,"suggestionsEnabled",void 0);a.__decorate([n.property({readOnly:!0})],
w.prototype,"updating",null);a.__decorate([n.property()],w.prototype,"view",void 0);a.__decorate([n.property()],w.prototype,"clear",null);return w=a.__decorate([M.subclass("esri.widgets.Search.SearchViewModel")],w)})},"esri/chunks/location":function(){define(["exports","../Color","../smartMapping/symbology/support/symbologyUtils","../smartMapping/symbology/support/utils"],function(m,a,b,f){function e(g){return b.getThemesforBasemap(h,g)}function x(g){const p=b.getRawSchemes({basemap:g.basemap,geometryType:g.geometryType,
basemapTheme:g.basemapTheme,theme:h.get("default")});if(p){var {schemesInfo:d,basemapId:q,basemapTheme:k}=p;return{primaryScheme:E(g,d.primary),secondarySchemes:d.secondary.map(v=>E(g,v)).filter(Boolean),basemapId:q,basemapTheme:k}}}function w(g){if(g)return g={...g},g.color&&(g.color=new a(g.color)),"outline"in g&&g.outline&&(g.outline={color:g.outline.color&&new a(g.outline.color),width:g.outline.width}),g}function E(g,p){var d="mesh"!==g.geometryType&&g.worldScale?g.view:null;switch(g.geometryType){case "point":case "multipoint":g=
{...p.outline};var q=p.size;return{color:new a(p.color),outline:{color:new a(g.color),width:g.width},size:d?f.toWorldScale(q,d):q,opacity:1};case "polyline":return g=p.width,{color:new a(p.color),width:d?f.toWorldScale(g,d):g,opacity:1};case "polygon":g=p.size;q={...p.outline};var k=p.opacity;return{color:new a(p.color),outline:{color:new a(q.color),width:q.width},size:d?f.toWorldScale(g,d):g,opacity:k};case "mesh":return d=p.opacity,{color:new a(p.color),opacity:d}}}const h=b.createThemes({themeDictionary:{default:{name:"default",
label:"Default",description:"Default theme for basic visualization of features.",schemes:{point:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[255,255,255,1],outline:{color:[51,51,51,.25],width:"1px"},size:"8px"}]},dark:{primary:{color:[255,255,255,1],outline:{color:[92,92,92,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,
255,255,.25],width:"1px"},size:"8px"},{color:[26,26,26,1],outline:{color:[178,178,178,.25],width:"1px"},size:"8px"}]}},polyline:{light:{primary:{color:[77,77,77,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[255,255,255,1],width:"2px"}]},dark:{primary:{color:[255,255,255,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[26,26,26,1],width:"2px"}]}},polygon:{light:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},
secondary:[{size:"12px",color:[128,128,128,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},{size:"12px",color:[255,255,255,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]},dark:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[92,92,92,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[178,178,178,1],outline:{color:[92,92,92,.25],width:"1px"},opacity:.8},{size:"12px",color:[26,26,26,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]}}}}}});
var l=Object.freeze({__proto__:null,getThemes:e,getSchemes:x,cloneScheme:w});m.cloneScheme=w;m.getSchemes=x;m.getThemes=e;m.locationSymbology=l})},"esri/smartMapping/symbology/support/symbologyUtils":function(){define(["exports","./Theme"],function(m,a){m.createThemes=function(b){b=b.themeDictionary;const f=new Map;for(const e in b)f.set(e,new a(b[e]));return f};m.filterSchemesByName=function(b,f){if(b&&f){var e=null;f=[f.primaryScheme,...f.secondarySchemes];for(const x of f)if(x.name.toLowerCase()===
b.toLowerCase()){e=x;break}return e}};m.filterSchemesByTag=function(b,f,e){if(!b&&!f||!e)return[];const x=!(b&&b.length),w=!(f&&f.length);var E=[e.primaryScheme,...e.secondarySchemes];e=[];for(const h of E){E=x?!0:b.some(g=>-1<h.tags.indexOf(g));const l=!w&&f.some(g=>-1<h.tags.indexOf(g));E&&!l&&e.push(h)}return e};m.getRawSchemes=function(b){const f=b.theme;if(f)return f.getRawSchemes({basemap:b.basemap,geometryType:b.geometryType,basemapTheme:b.basemapTheme})};m.getThemesforBasemap=function(b,f){const e=
[];b.forEach(x=>{x.isBasemapSupported(f)&&e.push({name:x.name,label:x.label,description:x.description,basemaps:[...x.supportedBasemaps]})});return e};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/smartMapping/symbology/support/Theme":function(){define(["../../../core/lang","../../../core/maybe","../../support/utils"],function(m,a,b){return function(){function f(x){this.schemes=this.basemapGroups=this.supportedBasemaps=this.description=this.label=this.name=null;const {name:w,label:E,description:h,
schemes:l}=x;this.name=w;this.label=E;this.description=h;this.schemes=l;x=x.basemapGroups||b.defaultBasemapGroups;let g=[];if(x)for(const p in x)g=g.concat(x[p]);this.supportedBasemaps=g;this.basemapGroups=x}var e=f.prototype;e.isBasemapSupported=function(x){return(x=b.getBasemapId(x,this.supportedBasemaps))&&-1<this.supportedBasemaps.indexOf(x)?!0:!1};e.getRawSchemes=function(x){{var w=x.basemap;var E=x.basemapTheme;var h=null;let p=null;w&&(h=b.getBasemapId(w,this.supportedBasemaps,!1))&&(w=b.getBasemapGroup(h),
a.isSome(w)&&(p=w));!h&&E&&(h="dark"===E?"dark-gray":"gray",p=E);h||p||(h="gray",p="light");E={basemapId:h,basemapTheme:p}}const {basemapId:l,basemapTheme:g}=E;E=g;l&&(h=b.getBasemapGroup(l,this.basemapGroups),a.isSome(h)&&(E=h));x=x.geometryType;"multipoint"===x?x="point":"mesh"===x&&(x="polygon");return{schemesInfo:m.clone((this.schemes[x]||this.schemes["default"])[E]),basemapId:l,basemapTheme:g}};return f}()})},"esri/smartMapping/support/utils":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers",
"../../support/arcadeOnDemand","../../support/basemapUtils"],function(m,a,b,f){function e(){e=a._asyncToGenerator(function*(d){const q=d.field,k=d.normalizationField;d=d.valueExpression;var v=[];d&&(p||({arcadeUtils:v}=yield b.loadArcade(),p=v),v=p.extractFieldNames(d));q&&v.push(q);k&&v.push(k);return v});return e.apply(this,arguments)}function x(d){return String(d).padStart(2,"0")}function w(d,q,k){if("date"===q||"number"===q){"number"===q&&(d=new Date(d));q=k?d.getFullYear():d.getUTCFullYear();
const v=x((k?d.getMonth():d.getUTCMonth())+1),n=x(k?d.getDate():d.getUTCDate()),A=x(k?d.getHours():d.getUTCHours()),H=x(k?d.getMinutes():d.getUTCMinutes());d=x(k?d.getSeconds():d.getUTCSeconds());d=`TIMESTAMP'${q}-${v}-${n} ${A}:${H}:${d}'`}return d}function E(d,q){if(q instanceof Date)return"date";if("number"===typeof q)return"number";if("string"===typeof q&&(d=d.getField(q),"\x3cnow\x3e"!==q.toLowerCase()&&d&&"date"===d.type))return"field"}const h={light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),
dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},l={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},g=["integer","small-integer"];let p=null;m.castIntegerFieldToFloat=function(d){return`cast(${d} as float)`};m.defaultBasemapGroups=h;m.getBasemapGroup=function(d,q=h){for(const k in q)if(-1<q[k].indexOf(d))return k};m.getBasemapId=function(d,q,k=!0){let v=null;d&&("string"===typeof d?q.includes(d)&&(v=d):v=f.getWellKnownBasemapId(d));
return k?v||"gray":v};m.getDateDiffSQL=function(d,q,k,v){var {hasQueryEngine:n}=d;k=w(k,E(d,k),n);d=w(q,E(d,q),n);d=`(${k} - ${d})`;n&&(d=`(${d} * ${l.milliseconds})`);v=l[v];n="/";1>v&&(v=1/v,n="*");return{sqlExpression:1===v?d:`(${d} ${n} ${v})`,sqlWhere:null}};m.getDateType=E;m.getFieldsList=function(d){return e.apply(this,arguments)};m.getNormalizationType=function(d){let q=d.normalizationType;q||(d.normalizationField?q="field":null!=d.normalizationTotal&&(q="percent-of-total"));return q};m.isIntegerField=
function(d,q){return(d=q&&d.getField(q))&&-1<g.indexOf(d.type)};m.unitValueInDays=l;Object.defineProperty(m,"__esModule",{value:!0})})},"esri/smartMapping/symbology/support/utils":function(){define(["exports","../../../core/screenUtils","../../support/utils"],function(m,a,b){function f(h,l){return h.r===l.r&&h.g===l.g&&h.b===l.b}function e(h){var l=h.width;const g=h.height;let p=h.pixelSizeAt(h.toMap(a.createScreenPoint(.5*l,.5*g),{exclude:[]}));0>=p&&(p=h.pixelSizeAt(h.toMap(a.createScreenPoint(.5*
l,.95*g),{exclude:[]})),0>=p&&(l=h.camera.position.clone(),l.z=0,p=2*h.pixelSizeAt(l)));return p}const x="streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),w=["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"],E=[].concat(x).concat(w);m.getBasemapTheme=function(h){h=b.getBasemapId(h,E,!1);if(!h)return null;if(-1<x.indexOf(h))return"light";if(-1<w.indexOf(h))return"dark"};
m.getPixelSize=e;m.getStorageType=function(h){return"multipoint"===h?"point":"mesh"===h?"polygon":h};m.getTagsFromSchemes=function(h){if(!h)return[];const l=new Set,g=[h.primaryScheme];h.secondarySchemes&&g.push(...h.secondarySchemes);for(const p of g)p&&"tags"in p&&p.tags&&p.tags.forEach(d=>l.add(d));return[...l]};m.hasIdenticalColors=function(h,l){let g=0;if(h.length===l.length){let p=h.every((d,q)=>f(d,l[q]));p?g=1:(p=h.slice(0).reverse().every((d,q)=>f(d,l[q])))&&(g=-1)}return g};m.toWorldScale=
function(h,l){return Math.ceil(e(l)*a.pt2px(a.toPt(h)))};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/widgets/Search/LayerSearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./SearchSource ./support/layerSearchUtils".split(" "),function(m,a,b,f,
e,x,w,E,h,l,g){var p;e=p=function(d){function q(v){var n=d.call(this,v)||this;n.displayField=null;n.exactMatch=null;n.orderByFields=null;n.searchFields=null;n.searchTemplate=null;n.suggestionTemplate=null;n.getResults=(A,H)=>g.getResults({source:m._assertThisInitialized(n),...A},H);n.getSuggestions=(A,H)=>g.getSuggestions({source:m._assertThisInitialized(n),...A},H);return n}m._inheritsLoose(q,d);var k=q.prototype;k.clone=function(){return new p({autoNavigate:this.autoNavigate,filter:this.filter,
maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?b.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,
layer:this.layer,searchFields:this.searchFields?b.clone(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})};k._getFirstStringField=function(){var v,n;return null!=(v=null==(n=this.layer.fieldsIndex.fields.find(A=>"string"===A.type))?void 0:n.name)?v:""};k._getDisplayField=function(){return this.displayField||this.layer.displayField||this._getFirstStringField()};k._getSearchFieldsString=function(){const {layer:v,searchFields:n}=this;return v.loaded?`: ${(n||
[this._getDisplayField()]).map(A=>{const H=v.getField(A);return H&&H.alias||A}).join(", ")}`:""};k._getLayerTitle=function(){var {layer:v}=this;if(v&&({title:v}=v,v))return`${v}${this._getSearchFieldsString()}`};m._createClass(q,[{key:"layer",set:function(v){this._set("layer",v);v&&v.load().catch(()=>{})}},{key:"name",get:function(){return this._getLayerTitle()||""},set:function(v){void 0===v?this._clearOverride("name"):this._override("name",v)}}]);return q}(l);a.__decorate([f.property({json:{read:{source:"field.name"},
write:{target:"field.name"}}})],e.prototype,"displayField",void 0);a.__decorate([f.property({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],e.prototype,"exactMatch",void 0);a.__decorate([f.property({value:null})],e.prototype,"layer",null);a.__decorate([f.property()],e.prototype,"name",null);a.__decorate([f.property({type:[String],json:{write:!0}})],e.prototype,"orderByFields",void 0);a.__decorate([f.property()],e.prototype,"searchFields",void 0);a.__decorate([f.property()],
e.prototype,"searchTemplate",void 0);a.__decorate([f.property()],e.prototype,"suggestionTemplate",void 0);return e=p=a.__decorate([h.subclass("esri.widgets.Search.LayerSearchSource")],e)})},"esri/widgets/Search/SearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Identifiable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,a,b,f,e,x,w,E,h,l){b=function(g){function p(d){d=g.call(this,d)||this;d.autoNavigate=null;d.filter=null;d.getResults=null;d.getSuggestions=null;d.maxResults=null;d.maxSuggestions=null;d.minSuggestCharacters=null;d.outFields=null;d.placeholder="";d.popupEnabled=null;d.popupTemplate=null;d.prefix="";d.resultGraphicEnabled=null;d.resultSymbol=null;d.suggestionsEnabled=null;d.suffix="";d.withinViewEnabled=!1;d.zoomScale=null;return d}m._inheritsLoose(p,g);return p}(b.IdentifiableMixin(f.JSONSupport));
a.__decorate([e.property()],b.prototype,"autoNavigate",void 0);a.__decorate([e.property()],b.prototype,"filter",void 0);a.__decorate([e.property()],b.prototype,"getResults",void 0);a.__decorate([e.property()],b.prototype,"getSuggestions",void 0);a.__decorate([e.property()],b.prototype,"maxResults",void 0);a.__decorate([e.property()],b.prototype,"maxSuggestions",void 0);a.__decorate([e.property()],b.prototype,"minSuggestCharacters",void 0);a.__decorate([e.property()],b.prototype,"outFields",void 0);
a.__decorate([e.property()],b.prototype,"placeholder",void 0);a.__decorate([e.property()],b.prototype,"popupEnabled",void 0);a.__decorate([e.property()],b.prototype,"popupTemplate",void 0);a.__decorate([e.property()],b.prototype,"prefix",void 0);a.__decorate([e.property()],b.prototype,"resultGraphicEnabled",void 0);a.__decorate([e.property()],b.prototype,"resultSymbol",void 0);a.__decorate([e.property()],b.prototype,"suggestionsEnabled",void 0);a.__decorate([e.property()],b.prototype,"suffix",void 0);
a.__decorate([e.property()],b.prototype,"withinViewEnabled",void 0);a.__decorate([e.property()],b.prototype,"zoomScale",void 0);return b=a.__decorate([l.subclass("esri.widgets.Search.SearchSource")],b)})},"esri/widgets/Search/support/layerSearchUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/maybe ../../../core/unitUtils ../../../geometry/Polygon ./geometryUtils ../../../intl/substitute ../../../intl/date".split(" "),
function(m,a,b,f,e,x,w,E,h,l,g,p){function d(y,F){const {filter:I,withinViewEnabled:R}=y;y=F&&F.extent;return I&&I.geometry||(R&&y?y:void 0)}function q(y){return k.apply(this,arguments)}function k(){k=a._asyncToGenerator(function*(y){y&&(yield y.load())});return k.apply(this,arguments)}function v(y){var F,I,R;return null!=(F=null==y?void 0:null==(I=y.capabilities)?void 0:null==(R=I.query)?void 0:R.supportsPagination)?F:!1}function n(y){var F,I,R,K;return null!=(F=null==y?void 0:null==(I=y.fieldsIndex)?
void 0:null==(R=I.fields)?void 0:null==(K=R.find(P=>"string"===P.type))?void 0:K.name)?F:""}function A(y,F){return y&&F?F.every(I=>!!y.getField(I)):!1}function H(y){for(let F=0;F<y.length;F++)if(255<y.charCodeAt(F))return!0;return!1}function M(y,F,I){let R=null;({codedValues:y}=y);y&&y.some(K=>{var P=K.name;P=I?P:P.toLowerCase();return(I?F:F.toLowerCase())===P?(R=K.code.toString(),!0):!1});return R}function W(y,F){return(F=F&&F.where)?`(${y}) AND (${F})`:y}function L(y,F,I,R,K){const {definitionExpression:P}=
F;let Q="";if(y){const X=r.test(F.url)&&H(y)?"N":"";I&&I.forEach(S=>{var O=F.getField(S);S=((S="function"===typeof F.getFieldDomain&&F.getFieldDomain(S))&&"coded-value"===S.type?M(S,y,K):null)||y||null;if(null!==S){{const T=O.type;O=O.name;"string"===T||"date"===T||"global-id"===T?K?O=W(`${O} = ${X}'${S}'`,R):(S=S.toUpperCase(),O=W(`UPPER(${O}) LIKE ${X}'%${S}%'`,R)):"oid"===T||"small-integer"===T||"integer"===T||"single"===T||"double"===T?(S=Number(S),O=isNaN(S)?null:W(`${O} = ${S}`,R)):O=W(`${O} = ${S}`,
R)}O&&(Q+=Q?` OR (${O})`:`(${O})`)}})}return P?`(${P}) AND (${Q})`:Q}function Z(y,F){let I=null;({codedValues:y}=y);y&&y.length&&y.some(R=>R.code===F?(I=R.name,!0):!1);return I}function ca(y,F){return y[Object.keys(y).find(I=>I.toLowerCase()===F.toLowerCase())]}function U(y,F,I){const R=y.sourceLayer,{attributes:K}=y;y="function"===typeof R.getFieldDomain&&R.getFieldDomain(I);return F?g.substitute(F,K):I&&K?(F=R.getField(I),I=ca(K,I),null==I?"":y&&"coded-value"===y.type?Z(y,I):"date"===(null==F?void 0:
F.type)?p.formatDate(new Date(I)):"number"===typeof I?I.toString():"string"!==typeof I?"":I.trim()):""}function Y(y,F,I,R){return y.features.map(K=>{var P=K.sourceLayer,{attributes:Q}=K;({objectIdField:P}=P);Q=Q[P];return K={text:U(K,F.suggestionTemplate,R),key:Q,sourceIndex:I}})}function J(y,F,I,R,K,P,Q){return y.features.map(X=>{{var S=X.clone();var O=X.sourceLayer;O=(O=O&&O.objectIdField)&&X.attributes[O];const ea=U(X,I.searchTemplate,K);var T=l.createExtentFromGeometry(S.geometry,F,P);T="number"===
typeof Q?l.scaleExtent(e.clone(T),F,Q):T;X=X.clone();w.isSome(T)&&(X.geometry=h.fromExtent(T));S={extent:T,target:X,feature:S,key:O,name:ea,sourceIndex:R}}return S})}const r=/https?:\/\/services.*\.arcgis\.com/i,C=/(?:\{([^}]+)\})/g,u=x.getLogger("esri.widgets.Search.support.layerSearchUtils");m.getResults=function(y,F){const {exactMatch:I=!1,location:R,maxResults:K,spatialReference:P,source:Q,sourceIndex:X,suggestResult:S,view:O}=y,{layer:T,filter:ea,zoomScale:fa}=Q,ha=O&&O.scale,aa=d(Q,O),ba=F&&
F.signal;return q(T).then(()=>{const G=T.popupTemplate;return G?G.getRequiredFields(T.fieldsIndex):null}).then(G=>{var c,t;const {objectIdField:z,returnZ:B}=T,D=Q.displayField||Q.layer.displayField||n(Q.layer);if(!T.getField(D))throw u.error("invalid-field: displayField is invalid."),new f("getResults():invalid-field","displayField is invalid.");G=G&&G.length?G:[D];const N=Q.outFields||G;G=N&&-1!==N.indexOf("*");-1!==N.indexOf(z)||G||N.push(z);if(!G&&!A(T,N))throw u.error("invalid-field: outField is invalid."),
new f("getResults():invalid-field","outField is invalid.");G=T.createQuery();var {orderByFields:V}=Q;V&&(G.orderByFields=V);P&&(G.outSpatialReference=P,V=1/E.getMetersPerUnitForSR(P))&&(G.maxAllowableOffset=V);V="mesh"===T.geometryType||"multipatch"===T.geometryType;const da=(null==(c=T.capabilities)?void 0:null==(t=c.data)?void 0:t.supportsZ)&&!V;G.returnZ=da&&!1!==B;G.returnGeometry=!0;G.multipatchOption=V?"xyFootprint":null;N&&(G.outFields=N);if(R)G.geometry=R;else if(S.key)G.objectIds=[S.key];
else{c=Q.searchFields||[D];if(!A(T,c))throw u.error("invalid-field: search field is invalid."),new f("getResults():invalid-field","search field is invalid.");v(T)&&(G.num=K);aa&&(G.geometry=aa);if(!S.text.trim())return[];const {prefix:ia="",suffix:pa=""}=Q;t=`${ia}${S.text}${pa}`.replace(/'/g,"''");c=L(t,T,c,ea,I);if(!c)return[];G.where=c}return T.queryFeatures(G,{signal:ba}).then(ia=>J(ia,O,Q,X,D,ha,fa))})};m.getSuggestions=function(y,F){const {source:I,spatialReference:R,view:K,suggestTerm:P,maxSuggestions:Q,
sourceIndex:X}=y,{layer:S,filter:O}=I,T=F&&F.signal,ea=d(I,K);return q(S).then(()=>{if(!v(S))return[];const fa=I.displayField||I.layer.displayField||n(I.layer);var ha=I.searchFields||[fa];const aa=[];I.suggestionTemplate?I.suggestionTemplate.replace(C,(B,D)=>{aa.push(D);return B}):aa.push(fa);var ba=aa&&-1!==aa.indexOf("*");-1!==aa.indexOf(S.objectIdField)||ba||aa.push(S.objectIdField);var G=!!S.getField(fa);ba=ba||A(S,aa);const c=A(S,ha);if(!G)throw u.error("invalid-field: displayField is invalid."),
new f("getSuggestions():invalid-field","displayField is invalid.");if(!ba)throw u.error("invalid-field: outField is invalid."),new f("getSuggestions():invalid-field","outField is invalid.");if(!c)throw u.error("invalid-field: search field is invalid."),new f("getSuggestions():invalid-field","search field is invalid.");G=S.createQuery();({orderByFields:ba}=I);ba&&(G.orderByFields=ba);G.outSpatialReference=R;G.returnGeometry=!1;G.num=Q;G.outFields=aa;ea&&(G.geometry=ea);if(!P.trim())return[];const {prefix:t=
"",suffix:z=""}=I;ba=`${t}${P}${z}`.replace(/'/g,"''");ha=L(ba,S,ha,O,!1);if(!ha)return[];G.where=ha;return S.queryFeatures(G,{signal:T}).then(B=>Y(B,I,X,fa))})};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/widgets/Search/support/geometryUtils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../geometry/support/scaleUtils ../../../geometry/Extent".split(" "),function(m,a,b,f,e,x,w){function E(l,g,p){const d=l.hasZ?l.z:void 0;
return g&&g.map?(p?x.getExtentForScale(g,p):g.extent).clone().centerAt(l).set({zmax:d,zmin:d}):new w({xmin:l.x-.25,ymin:l.y-.25,xmax:l.x+.25,ymax:l.y+.25,spatialReference:l.spatialReference,zmin:d,zmax:d})}const h=f.getLogger("esri.widgets.Search.support.geometryUtils");m.createExtentFromGeometry=function(l,g,p){if(e.isNone(l))return null;if("extent"===l.type)return l;if("multipoint"===l.type||"polygon"===l.type||"polyline"===l.type)return l.extent;if("point"===l.type)return E(l,g,p)};m.getPointFromGeometry=
function(l){if(e.isNone(l))return null;switch(l.type){case "point":return l;case "extent":return l.center;case "polygon":return l.centroid;case "multipoint":return l.getPoint(0);case "polyline":return l.getPoint(0,0)}return null};m.getPointWithElevation=function(l,g){var p,d;if(!g)return h.error("missing-parameter: view is missing."),Promise.reject(new b("searchgeometryutils:missing-parameter","view is missing."));if(!l)return h.error("missing-parameter: point is missing."),Promise.reject(new b("searchgeometryutils:missing-parameter",
"point is missing."));if(l.hasZ||"2d"===g.type)return Promise.resolve(l);const q=null==g?void 0:null==(p=g.map)?void 0:p.ground;return q&&q.layers.length?q.queryElevation(l,{cache:null==(d=g.basemapTerrain)?void 0:d.elevationQueryCache}).then(k=>k.geometry):Promise.resolve(l)};m.scaleExtent=function(l,g,p){return e.isNone(l)||e.isNone(g)?null:E(l.center,g,p)};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/geometry/support/scaleUtils":function(){define(["exports","../../core/unitUtils"],
function(m,a){function b(f,e){e=a.getMetersPerUnitForSR(e);return f/(e*a.inchesPerMeter*96)}m.getExtentForScale=function(f,e){const x=f.extent;f=f.width;e=b(e,x.spatialReference);return x.clone().expand(e*f/x.width)};m.getResolutionForScale=b;m.getScale=function(f,e){e=e||f.extent;f=f.width;const x=a.getMetersPerUnitForSR(e&&e.spatialReference);return e&&f?e.width/f*x*a.inchesPerMeter*96:0};m.getScaleForResolution=function(f,e){e=a.getMetersPerUnitForSR(e);return f*e*a.inchesPerMeter*96};Object.defineProperty(m,
"__esModule",{value:!0})})},"esri/widgets/Search/LocatorSearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../tasks/Locator ./SearchSource ./support/locatorUtils".split(" "),
function(m,a,b,f,e,x,w,E,h,l,g,p,d,q){var k;e=k=function(v){function n(H){var M=v.call(this,H)||this;M.apiKey=null;M.categories=null;M.countryCode=null;M.defaultZoomScale=null;M.locator=null;M.locationType=null;M.name="";M.placeholder="";M.searchTemplate="";M.singleLineFieldName=null;M.suggestionsEnabled=null;M.zoomScale=null;M.getResults=(W,L)=>q.getResults({source:m._assertThisInitialized(M),...W},L);M.getSuggestions=(W,L)=>q.getSuggestions({source:m._assertThisInitialized(M),...W},L);return M}
m._inheritsLoose(n,v);var A=n.prototype;A.readLocator=function(H,M){({url:H}=M);return H?new p({url:H}):null};A.writeLocator=function(H,M){M.url=H?H.url:null};A.clone=function(){return new k({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?b.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,
resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?b.clone(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})};return n}(d);a.__decorate([f.property()],e.prototype,
"apiKey",void 0);a.__decorate([f.property()],e.prototype,"categories",void 0);a.__decorate([f.property()],e.prototype,"countryCode",void 0);a.__decorate([f.property({json:{write:!0}})],e.prototype,"defaultZoomScale",void 0);a.__decorate([f.property({type:p})],e.prototype,"locator",void 0);a.__decorate([h.reader("locator",["url"])],e.prototype,"readLocator",null);a.__decorate([g.writer("locator")],e.prototype,"writeLocator",null);a.__decorate([f.property()],e.prototype,"locationType",void 0);a.__decorate([f.property({json:{write:!0}})],
e.prototype,"name",void 0);a.__decorate([f.property({json:{write:!0}})],e.prototype,"placeholder",void 0);a.__decorate([f.property()],e.prototype,"searchTemplate",void 0);a.__decorate([f.property({json:{write:!0}})],e.prototype,"singleLineFieldName",void 0);a.__decorate([f.property({json:{read:{source:"suggest"},write:{target:"suggest"}}})],e.prototype,"suggestionsEnabled",void 0);a.__decorate([f.property({json:{write:!0}})],e.prototype,"zoomScale",void 0);return e=k=a.__decorate([l.subclass("esri.widgets.Search.LocatorSearchSource")],
e)})},"esri/tasks/Locator":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ../rest/locator/addressToLocations ../rest/locator/addressesToLocations ../rest/locator/locationToAddress ../rest/locator/suggestLocations ./Task".split(" "),function(m,a,b,f,e,x,w,E,h,l,g,p,d,q){f=function(k){function v(A){A=
k.call(this,A)||this;A.outSpatialReference=null;A.url=null;return A}m._inheritsLoose(v,k);var n=v.prototype;n.addressToLocations=function(A,H){!A.outSpatialReference&&this.outSpatialReference&&(A.outSpatialReference=this.outSpatialReference);return l.addressToLocations(this.url,A,{...this.requestOptions,...H})};n.suggestLocations=function(A,H){return d.suggestLocations(this.url,A,{...this.requestOptions,...H})};n.addressesToLocations=function(A,H){!A.outSpatialReference&&this.outSpatialReference&&
(A.outSpatialReference=this.outSpatialReference);return g.addressesToLocations(this.url,A,{...this.requestOptions,...H})};n.locationToAddress=function(A,H){!A.outSpatialReference&&this.outSpatialReference&&(A.outSpatialReference=this.outSpatialReference);return p.locationToAddress(this.url,A,{...this.requestOptions,...H})};return v}(q);a.__decorate([b.property({type:h})],f.prototype,"outSpatialReference",void 0);a.__decorate([b.property()],f.prototype,"url",void 0);return f=a.__decorate([E.subclass("esri.tasks.Locator")],
f)})},"esri/rest/locator/addressToLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ./utils ../support/AddressCandidate ../support/AddressToLocationsParameters".split(" "),function(m,a,b,f,e,x,w){function E(){E=a._asyncToGenerator(function*(l,g,p){g=w.from(g);l=f.parseUrl(l);const {address:d,...q}=g.toJSON();g=f.encode({...l.query,...d,...q,f:"json"});p=f.asValidOptions(g,p);return b(`${l.path}/findAddressCandidates`,p).then(h)});return E.apply(this,
arguments)}function h({data:l}){if(!l)return[];const {candidates:g,spatialReference:p}=l;return g?g.map(d=>{if(d){var {extent:q,location:k}=d,v=q?e.isValidExtent(q):!0;if(e.isValidLocation(k)&&v)return q&&(q.spatialReference=p),k.spatialReference=p,x.fromJSON(d)}}):[]}m.addressToLocations=function(l,g,p){return E.apply(this,arguments)};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/rest/locator/utils":function(){define(["exports"],function(m){m.isValidExtent=function(a){return a&&"number"===
typeof a.xmin&&"number"===typeof a.ymin&&"number"===typeof a.xmax&&"number"===typeof a.ymax};m.isValidLocation=function(a){return a&&"number"===typeof a.x&&"number"===typeof a.y};m.normalizeExtent=function(a){return a?a.shiftCentralMeridian():null};m.normalizePoint=function(a){return a?a.clone().normalize():null};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/rest/support/AddressCandidate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/Point".split(" "),
function(m,a,b,f,e,x,w,E,h,l,g){b=function(p){function d(q){q=p.call(this,q)||this;q.address=null;q.attributes=null;q.extent=null;q.location=null;q.score=null;return q}m._inheritsLoose(d,p);return d}(b.JSONSupport);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"address",void 0);a.__decorate([f.property({type:Object,json:{write:!0}})],b.prototype,"attributes",void 0);a.__decorate([f.property({type:l,json:{write:!0}})],b.prototype,"extent",void 0);a.__decorate([f.property({type:g,
json:{write:!0}})],b.prototype,"location",void 0);a.__decorate([f.property({type:Number,json:{write:!0}})],b.prototype,"score",void 0);return b=a.__decorate([h.subclass("esri.rest.support.AddressCandidate")],b)})},"esri/rest/support/AddressToLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference ../../geometry/Extent".split(" "),
function(m,a,b,f,e,x,w,E,h,l,g,p,d,q){b=function(k){function v(n){n=k.call(this,n)||this;n.address=null;n.apiKey=null;n.categories=null;n.countryCode=null;n.forStorage=null;n.location=null;n.locationType=null;n.magicKey=null;n.maxLocations=null;n.outFields=null;n.outSpatialReference=null;n.searchExtent=null;return n}m._inheritsLoose(v,k);return v}(f.JSONSupport);a.__decorate([e.property({type:Object,json:{write:!0}})],b.prototype,"address",void 0);a.__decorate([e.property(g.apiKey)],b.prototype,"apiKey",
void 0);a.__decorate([e.property({type:[String],json:{read:{source:"category",reader:k=>k?k.split(","):null},write:{target:"category",writer:(k,v)=>{v.category=k?k.join(","):null}}}})],b.prototype,"categories",void 0);a.__decorate([e.property({type:String,json:{write:!0}})],b.prototype,"countryCode",void 0);a.__decorate([e.property({type:Boolean,json:{write:!0}})],b.prototype,"forStorage",void 0);a.__decorate([e.property({type:p,json:{write:{writer:(k,v)=>{v.location=k?k.clone().normalize():null}}}})],
b.prototype,"location",void 0);a.__decorate([e.property({type:String,json:{write:!0}})],b.prototype,"locationType",void 0);a.__decorate([e.property({type:String,json:{write:!0}})],b.prototype,"magicKey",void 0);a.__decorate([e.property({type:Number,json:{write:!0}})],b.prototype,"maxLocations",void 0);a.__decorate([e.property({type:[String],json:{write:{writer:(k,v)=>{v.outFields=k?k.join(","):null}}}})],b.prototype,"outFields",void 0);a.__decorate([e.property({type:d,json:{read:{source:"outSR"},
write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);a.__decorate([e.property({type:q,json:{write:{writer:(k,v)=>{k=k?k.shiftCentralMeridian():null;v.searchExtent=k}}}})],b.prototype,"searchExtent",void 0);b=a.__decorate([l.subclass("esri.rest.support.AddressToLocationsParameters")],b);b.from=w.ensureType(b);return b})},"esri/rest/support/commonProperties":function(){define(["exports"],function(m){m.apiKey={type:String,json:{read:{source:"token"},write:{target:"token"}}};Object.defineProperty(m,
"__esModule",{value:!0})})},"esri/rest/locator/addressesToLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/AddressCandidate ../support/AddressesToLocationsParameters".split(" "),function(m,a,b,f,e,x){function w(){w=a._asyncToGenerator(function*(h,l,g){l=x.from(l);h=f.parseUrl(h);l={...l.toJSON(),f:"json"};l=f.encode({...h.query,...l});g=f.asValidOptions(l,g);return b(`${h.path}/geocodeAddresses`,g).then(E)});return w.apply(this,arguments)}
function E(h){({data:h}=h);if(!h)return[];const {locations:l,spatialReference:g}=h;return l?l.map(p=>{const {location:d}=p;d&&(d.spatialReference=g);return e.fromJSON(p)}):[]}m.addressesToLocations=function(h,l,g){return w.apply(this,arguments)};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/rest/support/AddressesToLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../geometry/SpatialReference".split(" "),
function(m,a,b,f,e,x,w,E,h,l,g){b=function(p){function d(q){q=p.call(this,q)||this;q.addresses=null;q.categories=null;q.countryCode=null;q.locationType=null;q.outSpatialReference=null;return q}m._inheritsLoose(d,p);return d}(f.JSONSupport);a.__decorate([e.property({type:[Object],json:{read:{reader:p=>p&&p.records?p.records.map(d=>d.attributes):null},write:{writer:(p,d)=>{const q=[];Array.isArray(p)&&p.forEach(k=>{q.push({attributes:k})});d.addresses={records:q}}}}})],b.prototype,"addresses",void 0);
a.__decorate([e.property({type:[String],json:{read:{source:"category",reader:p=>p?p.split(","):null},write:{target:"category",writer:(p,d)=>{d.category=p?p.join(","):null}}}})],b.prototype,"categories",void 0);a.__decorate([e.property({type:String,json:{read:{source:"sourceCountry"},write:{target:"sourceCountry"}}})],b.prototype,"countryCode",void 0);a.__decorate([e.property({type:String,json:{write:!0}})],b.prototype,"locationType",void 0);a.__decorate([e.property({type:g,json:{read:{source:"outSR"},
write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);b=a.__decorate([l.subclass("esri.rest.support.AddressesToLocationsParameters")],b);b.from=w.ensureType(b);return b})},"esri/rest/locator/locationToAddress":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/AddressCandidate ../support/LocationToAddressParameters".split(" "),function(m,a,b,f,e,x){function w(){w=a._asyncToGenerator(function*(h,l,g){l=x.from(l);h=f.parseUrl(h);l={...l.toJSON(),
f:"json"};l=f.encode({...h.query,...l});g=f.asValidOptions(l,g);return b(`${h.path}/reverseGeocode`,g).then(E)});return w.apply(this,arguments)}function E({data:h}){if(h){var {address:l,location:g}=h;return e.fromJSON({address:l&&l.Match_addr||"",attributes:l||{},location:g,score:100})}}m.locationToAddress=function(h,l,g){return w.apply(this,arguments)};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/rest/support/LocationToAddressParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference".split(" "),
function(m,a,b,f,e,x,w,E,h,l,g,p,d){b=function(q){function k(v){v=q.call(this,v)||this;v.apiKey=null;v.location=null;v.locationType=null;v.outSpatialReference=null;return v}m._inheritsLoose(k,q);return k}(f.JSONSupport);a.__decorate([e.property(g.apiKey)],b.prototype,"apiKey",void 0);a.__decorate([e.property({type:p,json:{write:{writer:(q,k)=>{q=q?q.clone().normalize():null;k.location="undefined"!==typeof q?q:null}}}})],b.prototype,"location",void 0);a.__decorate([e.property({type:String,json:{write:!0}})],
b.prototype,"locationType",void 0);a.__decorate([e.property({type:d,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);b=a.__decorate([l.subclass("esri.rest.support.LocationToAddressParameters")],b);b.from=w.ensureType(b);return b})},"esri/rest/locator/suggestLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/SuggestionCandidate ../support/SuggestLocationsParameters".split(" "),function(m,a,b,
f,e,x){function w(){w=a._asyncToGenerator(function*(h,l,g){h=f.parseUrl(h);l=x.from(l);l={...l.toJSON(),f:"json"};l=f.encode({...h.query,...l});g=f.asValidOptions(l,g);return b(`${h.path}/suggest`,g).then(E)});return w.apply(this,arguments)}function E(h){({data:h}=h);if(!h)return[];({suggestions:h}=h);return h?h.map(l=>new e(l)):[]}m.suggestLocations=function(h,l,g){return w.apply(this,arguments)};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/rest/support/SuggestionCandidate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,a,b,f,e,x,w,E,h){b=function(l){function g(p){p=l.call(this,p)||this;p.isCollection=null;p.magicKey=null;p.text=null;return p}m._inheritsLoose(g,l);return g}(b.JSONSupport);a.__decorate([f.property({type:Boolean,json:{write:!0}})],b.prototype,"isCollection",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"magicKey",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);return b=a.__decorate([h.subclass("esri.rest.support.SuggestionCandidate")],
b)})},"esri/rest/support/SuggestLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference ../../geometry/Extent".split(" "),function(m,a,b,f,e,x,w,E,h,l,g,p,d,q){b=
function(k){function v(n){n=k.call(this,n)||this;n.apiKey=null;n.categories=null;n.countryCode=null;n.location=null;n.maxSuggestions=null;n.outSpatialReference=null;n.searchExtent=null;n.text=null;return n}m._inheritsLoose(v,k);return v}(f.JSONSupport);a.__decorate([e.property(g.apiKey)],b.prototype,"apiKey",void 0);a.__decorate([e.property({type:[String],json:{read:{source:"category",reader:k=>k?k.split(","):null},write:{target:"category",writer:(k,v)=>{v.category=k?k.join(","):null}}}})],b.prototype,
"categories",void 0);a.__decorate([e.property({type:String,json:{write:!0}})],b.prototype,"countryCode",void 0);a.__decorate([e.property({type:p,json:{write:{writer:(k,v)=>{v.location=k?k.clone().normalize():null}}}})],b.prototype,"location",void 0);a.__decorate([e.property({type:Number,json:{write:!0}})],b.prototype,"maxSuggestions",void 0);a.__decorate([e.property({type:d,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);a.__decorate([e.property({type:q,
json:{write:{writer:(k,v)=>{k=k?k.shiftCentralMeridian():null;v.searchExtent=JSON.stringify(k)}}}})],b.prototype,"searchExtent",void 0);a.__decorate([e.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);b=a.__decorate([l.subclass("esri.rest.support.SuggestLocationsParameters")],b);b.from=w.ensureType(b);return b})},"esri/widgets/Search/support/locatorUtils":function(){define("exports ../../../Graphic ../../../core/maybe ../../../geometry/Polygon ../../../rest/support/AddressToLocationsParameters ../../../rest/support/LocationToAddressParameters ../../../rest/support/SuggestLocationsParameters ./geometryUtils".split(" "),
function(m,a,b,f,e,x,w,E){function h(k){const v=null==k?void 0:k.scale;return"number"===typeof v&&3E5>=v?k.get("extent.center"):null}function l(k,v){const {source:n,spatialReference:A,location:H,sourceIndex:M,view:W}=k,{apiKey:L,locator:Z,zoomScale:ca,defaultZoomScale:U}=n,Y=W&&W.scale;k=v&&v.signal;v=new x;v.location=H;L&&(v.apiKey=L);A&&(v.outSpatialReference=A);return Z.locationToAddress(v,{signal:k}).then(J=>q([J],{sourceIndex:M,scale:Y,view:W,zoomScale:ca,defaultZoomScale:U}))}function g(k,v){const {filter:n,
withinViewEnabled:A}=k;k=v&&v.extent;return(v=E.createExtentFromGeometry(n&&n.geometry,v,v&&v.scale))||(A&&k?k:void 0)}function p(k,v){const {source:n,suggestResult:A,spatialReference:H,view:M,maxResults:W,sourceIndex:L}=k,Z=n&&n.zoomScale,ca=n&&n.defaultZoomScale;if(!A.text.trim())return Promise.resolve(null);k=`${!A.key&&n.prefix?n.prefix:""}${A.text}${!A.key&&n.suffix?n.suffix:""}`;const U=new e,{apiKey:Y,locator:J}=n,r=M&&M.scale;var C=g(n,M);v=v&&v.signal;Y&&(U.apiKey=Y);if(!J)return Promise.resolve(null);
n.categories&&(U.categories=n.categories);n.locationType&&(U.locationType=n.locationType);H&&(U.outSpatialReference=H);const u=h(M);u&&(U.location=u);U.maxLocations=W;C&&(U.searchExtent=b.unwrap(C));n.countryCode&&(U.countryCode=n.countryCode);({key:C}=A);const y=`${C}`;C&&(U.magicKey=y);U.address={};U.address[n.singleLineFieldName||"Single Line Input"]=k;n.outFields&&(U.outFields=n.outFields);return J.addressToLocations(U,{signal:v}).then(F=>q(F,{key:y,scale:r,sourceIndex:L,view:M,zoomScale:Z,defaultZoomScale:ca}))}
function d(k,v){return k.map(n=>({text:n.text,key:n.magicKey,sourceIndex:v}))}function q(k,v){return k.map(n=>{{const {key:M,scale:W,sourceIndex:L,view:Z,zoomScale:ca,defaultZoomScale:U}=v,{attributes:Y,extent:J,location:r,address:C}=n;n=new a({geometry:r,attributes:Y});var A=J||r,H=E.createExtentFromGeometry(A,Z,W);A="number"===typeof ca?E.scaleExtent(H,Z,ca):"number"===typeof U&&"point"===A.type?E.scaleExtent(H,Z,U):H;H=r?`${r.x},${r.y}`:"";H=C||H;const u=n.clone();b.isSome(A)&&(u.geometry=f.fromExtent(A));
n={extent:A,feature:n,target:u,key:M,name:H,sourceIndex:L}}return n})}m.getLocation=h;m.getResults=function(k,v){return k.location?l(k,v):p(k,v)};m.getSuggestions=function(k,v){const {source:n,spatialReference:A,view:H,suggestTerm:M,maxSuggestions:W,sourceIndex:L}=k;k=new w;const {apiKey:Z,locator:ca}=n,U=g(n,H);v=v&&v.signal;if(!ca)return Promise.resolve(null);Z&&(k.apiKey=Z);n.categories&&(k.categories=n.categories);A&&(k.outSpatialReference=A);const Y=h(H);Y&&(k.location=Y);if(!M.trim())return Promise.resolve(null);
const {prefix:J="",suffix:r=""}=n;k.text=`${J}${M}${r}`;U&&(k.searchExtent=b.unwrap(U));k.maxSuggestions=W;n.countryCode&&(k.countryCode=n.countryCode);return ca.suggestLocations(k,{signal:v}).then(C=>d(C,L))};m.isArcGISWorldGeocoder=function(k){return k?/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(k):!1};m.isMeteredArcGISWorldGeocoder=function(k){return k?/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(k):!1};m.isProxiedArcGISWorldGeocoder=
function(k){return k?/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(k):!1};m.meteredArcGISLocatorUrl="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";Object.defineProperty(m,"__esModule",{value:!0})})},"esri/widgets/support/geolocationUtils":function(){define("exports ../../config ../../core/Error ../../core/has ../../core/Logger ../../geometry/Point ../../geometry/support/webMercatorUtils ../../portal/Portal ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/urlUtils ../../geometry ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Polygon ../../geometry/Polyline ../../rest/geometryService/units ../../rest/support/GeneralizeParameters ../../tasks/operations/generalize ../../rest/support/LengthsParameters ../../tasks/operations/lengths ../../rest/support/OffsetParameters ../../tasks/operations/offset ../../rest/geometryService/project ../../rest/support/RelationParameters ../../tasks/operations/relation ../../rest/support/TrimExtendParameters ../../tasks/operations/trimExtend ../../rest/support/ProjectParameters".split(" "),
function(m,a,b,f,e,x,w,E,h,l,g,p,d,q,k,v,n,A,H,M,W,L,Z,ca,U,Y,J,r,C,u){function y(K,P,Q){if(!P)return Promise.resolve(K);const X=P.spatialReference;return X.isWGS84?Promise.resolve(K):X.isWebMercator?Promise.resolve(w.geographicToWebMercator(K)):F(Q).then(S=>{if(!S)throw new b("geometry-service:missing-url","Geometry service URL is missing");const O=new u({geometries:[K],outSpatialReference:X});return U.project(S,O,Q).then(T=>T[0])})}function F(K){if(a.geometryServiceUrl)return Promise.resolve(a.geometryServiceUrl);
const P=E.getDefault();return P.load(K).catch(()=>{}).then(()=>P.get("helperServices.geometry.url"))}const I=e.getLogger("esri.widgets.support.geolocationUtils"),R={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};m.getCurrentPosition=function(K){K||(K=R);return new Promise((P,Q)=>{setTimeout(()=>Q(new b("geolocation:timeout","getting the current geolocation position timed out")),15E3);navigator.geolocation.getCurrentPosition(P,Q,K)})};m.positionToPoint=function(K,P){const {position:Q,view:X}=K;K=
Q&&Q.coords||{};K={accuracy:K.accuracy,altitude:K.altitude,altitudeAccuracy:K.altitudeAccuracy,heading:K.heading,latitude:K.latitude,longitude:K.longitude,speed:K.speed};K=Q?{coords:K,timestamp:Q.timestamp}:Q;K=(K=K&&K.coords)?new x({longitude:K.longitude,latitude:K.latitude,z:K.altitude||null,spatialReference:{wkid:4326}}):null;return y(K,X,P)};m.supported=function(){var K;(K=f("esri-geolocation"))||I.warn("geolocation-unsupported","Geolocation unsupported.");K&&((K=window.isSecureContext)||I.warn("insecure-context",
"Geolocation requires a secure origin."));return K};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/rest/geometryService/units":function(){define(["exports","../../core/jsonMap"],function(m,a){a=new a.JSONMap({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});m.conversionTypeKebabDict=a;m.units={UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,
UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,
UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,
UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",
UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/rest/support/GeneralizeParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(m,a,b,f,e,x,w,E,h,l){b=function(g){function p(d){d=g.call(this,d)||this;d.deviationUnit=null;d.geometries=null;d.maxDeviation=null;return d}m._inheritsLoose(p,g);return p}(b.JSONSupport);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"deviationUnit",void 0);a.__decorate([f.property({json:{read:{reader:g=>g?g.map(p=>l.fromJSON(p)):null},write:{writer:(g,p)=>{p.geometries=g.map(d=>d.toJSON())}}}})],b.prototype,"geometries",void 0);a.__decorate([f.property({type:Number,
json:{write:!0}})],b.prototype,"maxDeviation",void 0);b=a.__decorate([h.subclass("esri.rest.support.GeneralizeParameters")],b);b.from=x.ensureType(b);return b})},"esri/tasks/operations/generalize":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(m,a,b){const f=new a.JSONMap({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",
9096:"yards"});m.generalizeToRESTParameters=function(e){const {geometries:x,deviationUnit:w,maxDeviation:E}=e.toJSON();e={maxDeviation:E};x&&x.length&&(e.geometries=JSON.stringify({geometryType:b.getJsonType(x[0]),geometries:x}),e.sr=JSON.stringify(x[0].spatialReference));f.write(w,e,"deviationUnit");return e};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/rest/support/LengthsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/Polyline".split(" "),
function(m,a,b,f,e,x,w,E,h,l,g,p){b=function(d){function q(k){k=d.call(this,k)||this;k.calculationType=null;k.geodesic=null;k.lengthUnit=null;k.polylines=null;return k}m._inheritsLoose(q,d);return q}(f.JSONSupport);a.__decorate([e.property({type:String,json:{write:!0}})],b.prototype,"calculationType",void 0);a.__decorate([e.property({type:Boolean,json:{write:!0}})],b.prototype,"geodesic",void 0);a.__decorate([e.property({json:{write:!0}})],b.prototype,"lengthUnit",void 0);a.__decorate([e.property({type:[p],
json:{read:{reader:d=>d?d.map(q=>g.fromJSON(q)):null},write:{writer:(d,q)=>{q.polylines=d.map(k=>k.toJSON())}}}})],b.prototype,"polylines",void 0);b=a.__decorate([l.subclass("esri.rest.support.LengthsParameters")],b);b.from=w.ensureType(b);return b})},"esri/tasks/operations/lengths":function(){define(["exports","../../core/jsonMap"],function(m,a){const b=new a.JSONMap({preserveShape:"preserve-shape"});m.lengthsToRESTParameters=function(f){const {polylines:e,lengthUnit:x,geodesic:w,calculationType:E}=
f.toJSON(),h={};h.polylines=JSON.stringify(e);f=f.polylines[0].spatialReference;h.sr=f.wkid?f.wkid:JSON.stringify(f.toJSON());x&&(h.lengthUnit=x);w&&(h.geodesic=w);E&&(h.calculationType=b.toJSON(E));return h};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/rest/support/OffsetParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(m,a,b,f,e,x,w,E,h,l){b=function(g){function p(d){d=g.call(this,d)||this;d.bevelRatio=null;d.geometries=null;d.offsetDistance=null;d.offsetHow=null;d.offsetUnit=null;return d}m._inheritsLoose(p,g);return p}(b.JSONSupport);a.__decorate([f.property({type:Number,json:{write:!0}})],b.prototype,"bevelRatio",void 0);a.__decorate([f.property({json:{read:{reader:g=>g?g.map(p=>l.fromJSON(p)):null},write:{writer:(g,p)=>{p.geometries=g.map(d=>d.toJSON())}}}})],b.prototype,"geometries",void 0);a.__decorate([f.property({type:Number,
json:{write:!0}})],b.prototype,"offsetDistance",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"offsetHow",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"offsetUnit",void 0);b=a.__decorate([h.subclass("esri.rest.support.OffsetParameters")],b);b.from=x.ensureType(b);return b})},"esri/tasks/operations/offset":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(m,a,b){const f=new a.JSONMap({esriGeometryOffsetBevelled:"bevelled",
esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),e=new a.JSONMap({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});m.offsetToRESTParameters=function(x){const {geometries:w,bevelRatio:E,offsetDistance:h,offsetHow:l,offsetUnit:g}=x.toJSON();x={bevelRatio:E,offsetDistance:h};w&&w.length&&(x.geometries=JSON.stringify({geometryType:b.getJsonType(w[0]),geometries:w}),x.sr=JSON.stringify(w[0].spatialReference));l&&(x.offsetHow=f.toJSON(l));
g&&(x.offsetUnit=e.toJSON(g));return x};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/rest/geometryService/project":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../utils ./utils ../support/ProjectParameters".split(" "),function(m,a,b,f,e,x,w,E){function h(){h=a._asyncToGenerator(function*(g,p,d){p=l(p);g=x.parseUrl(g);const q={...g.query,f:"json",...p.toJSON()},k=p.outSpatialReference,
v=e.getJsonType(p.geometries[0]);p=x.asValidOptions(q,d);return b(g.path+"/project",p).then(({data:{geometries:n}})=>w.decodeGeometries(n,v,k))});return h.apply(this,arguments)}const l=f.ensureType(E);m.project=function(g,p,d){return h.apply(this,arguments)};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(m,a){m.decodeGeometries=function(b,f,e){const x=a.getGeometryType(f);return b.map(w=>
{w=x.fromJSON(w);w.spatialReference=e;return w})};m.encodeGeometries=function(b){return{geometryType:a.getJsonType(b[0]),geometries:b.map(f=>f.toJSON())}};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/rest/support/ProjectParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(m,a,b,f,e,x,w,E,h,l){b=function(g){function p(d){d=g.call(this,d)||this;d.geometries=null;d.outSpatialReference=null;d.transformation=null;d.transformForward=null;return d}m._inheritsLoose(p,g);p.prototype.toJSON=function(){const d=this.geometries.map(function(v){return v.toJSON()}),q=this.geometries[0],k={};k.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());k.inSR=q.spatialReference.wkid||JSON.stringify(q.spatialReference.toJSON());k.geometries=JSON.stringify({geometryType:l.getJsonType(q),
geometries:d});this.transformation&&(k.transformation=this.transformation.wkid||JSON.stringify(this.transformation));null!=this.transformForward&&(k.transformForward=this.transformForward);return k};return p}(b.JSONSupport);a.__decorate([f.property()],b.prototype,"geometries",void 0);a.__decorate([f.property({json:{read:{source:"outSR"}}})],b.prototype,"outSpatialReference",void 0);a.__decorate([f.property()],b.prototype,"transformation",void 0);a.__decorate([f.property()],b.prototype,"transformForward",
void 0);return b=a.__decorate([h.subclass("esri.rest.support.ProjectParameters")],b)})},"esri/rest/support/RelationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),function(m,a,b,f,e,x,w,E,h,l){b=function(g){function p(d){d=
g.call(this,d)||this;d.geometries1=null;d.geometries2=null;d.relation=null;d.relationParameter=null;return d}m._inheritsLoose(p,g);return p}(b.JSONSupport);a.__decorate([f.property({json:{read:{reader:g=>g?g.map(p=>l.fromJSON(p)):null},write:{writer:(g,p)=>{p.geometries1=g.map(d=>d.toJSON())}}}})],b.prototype,"geometries1",void 0);a.__decorate([f.property({json:{read:{reader:g=>g?g.map(p=>l.fromJSON(p)):null},write:{writer:(g,p)=>{p.geometries2=g.map(d=>d.toJSON())}}}})],b.prototype,"geometries2",
void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"relation",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"relationParameter",void 0);b=a.__decorate([h.subclass("esri.rest.support.RelationParameters")],b);b.from=x.ensureType(b);return b})},"esri/tasks/operations/relation":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(m,a,b){const f=new a.JSONMap({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",
esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});m.relationToRESTParameters=function(e){const {geometries1:x,geometries2:w,
relation:E,relationParameter:h}=e.toJSON();e={};if(x&&x.length){e.geometries1=JSON.stringify({geometryType:b.getJsonType(x[0]),geometries:x});const l=x[0].spatialReference;e.sr=l.wkid?l.wkid:JSON.stringify(l)}w&&0<w.length&&(e.geometries2=JSON.stringify({geometryType:b.getJsonType(w[0]),geometries:w}));E&&(e.relation=f.toJSON(E));h&&(e.relationParam=h);return e};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/rest/support/TrimExtendParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/Polyline".split(" "),
function(m,a,b,f,e,x,w,E,h,l,g,p){b=function(d){function q(k){k=d.call(this,k)||this;k.extendHow="default-curve-extension";k.polylines=null;k.trimExtendTo=null;return k}m._inheritsLoose(q,d);return q}(f.JSONSupport);a.__decorate([e.property({type:String,json:{write:!0}})],b.prototype,"extendHow",void 0);a.__decorate([e.property({type:[p],json:{read:{reader:d=>d?d.map(q=>g.fromJSON(q)):null},write:{writer:(d,q)=>{q.polylines=d.map(k=>k.toJSON())}}}})],b.prototype,"polylines",void 0);a.__decorate([e.property({json:{read:{reader:d=>
d?g.fromJSON(d):null},write:{writer:(d,q)=>{q.trimExtendTo=d.toJSON()}}}})],b.prototype,"trimExtendTo",void 0);b=a.__decorate([l.subclass("esri.rest.support.TrimExtendParameters")],b);b.from=w.ensureType(b);return b})},"esri/tasks/operations/trimExtend":function(){define(["exports","../../core/jsonMap"],function(m,a){const b=new a.JSONMap({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});m.trimExtendToRESTParameters=
function(f){const {extendHow:e,polylines:x,trimExtendTo:w}=f.toJSON();f={};f.extendHow=b.toJSON(e);x&&x.length&&(f.polylines=JSON.stringify(x),f.sr=JSON.stringify(x[0].spatialReference));w&&(f.trimExtendTo=JSON.stringify(w));return f};Object.defineProperty(m,"__esModule",{value:!0})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/events ../core/Handles ../core/promiseUtils ../core/string ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/jsonMap ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Search/SearchResultRenderer ./Search/SearchViewModel ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ../intl/substitute".split(" "),function(m,
a,b,f,e,x,w,E,h,l,g,p,d,q,k,v,n,A,H,M,W,L,Z){const ca=/<[a-z/][\s\S]*>/i;b=function(U){function Y(r,C){var u=U.call(this,r,C)||this;u._activeMenuItemIndex=-1;u._handles=new e;u._inputNode=null;u._menuItemCount=0;u._sourceMenuButtonNode=null;u._sourceListNode=null;u._suggestionListNode=null;u._searchResultRenderer=new n;u._locateFailed=null;u._container=null;u.activeMenu="none";u.activeSource=null;u.activeSourceIndex=null;u.allPlaceholder=null;u.allSources=null;u.autoNavigate=null;u.autoSelect=null;
u.defaultSources=null;u.disabled=!1;u.goToOverride=null;u.iconClass="esri-icon-search";u.includeDefaultSources=null;u.label=void 0;u.locationEnabled=null;u.maxResults=null;u.maxSuggestions=null;u.messages=null;u.messagesCommon=null;u.minSuggestCharacters=null;u.popupEnabled=null;u.popupTemplate=null;u.portal=null;u.resultGraphic=null;u.resultGraphicEnabled=null;u.results=null;u.searchAllEnabled=null;u.searchTerm=null;u.selectedResult=null;u.sources=null;u.suggestions=null;u.suggestionsEnabled=null;
u.view=null;u.viewModel=new A;u._clearActiveMenu=()=>{u.activeMenu="none"};u._removeActiveMenu=y=>{var F;(y=y.relatedTarget)&&null!=(F=u._container)&&F.contains(y)||u._clearActiveMenu()};u.own(E.watch(m._assertThisInitialized(u),"searchTerm",y=>{(y&&"warning"===u.activeMenu||!y&&!u.get("viewModel.selectedSuggestion.location"))&&u._clearActiveMenu()}),E.on(m._assertThisInitialized(u),"viewModel.allSources","change",()=>u._watchSourceChanges()),E.init(m._assertThisInitialized(u),"activeMenu",()=>u._resetActiveMenuItemIndex()),
E.init(m._assertThisInitialized(u),"viewModel.defaultPopupTemplate",y=>{y&&(y.content=u._renderSearchResultsContent.bind(m._assertThisInitialized(u)))}));return u}m._inheritsLoose(Y,U);var J=Y.prototype;J.destroy=function(){this._handles.destroy();this._handles=null;this._cancelSuggest();this._cancelSearch();this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)};J.clear=function(){};J.focus=function(){var r;null==
(r=this._inputNode)?void 0:r.focus();this.emit("search-focus")};J.blur=function(){var r;null==(r=this._inputNode)?void 0:r.blur();this.emit("search-blur")};J.search=function(r){this._clearActiveMenu();this._cancelSuggest();this._cancelSearch();const C=x.createAbortController(),{signal:u}=C;this._searchController=C;return this.viewModel.search(r,{signal:u}).catch(y=>{if(this._searchController===C)return this._clearActiveMenu(),this._searchController=null,y}).then(y=>{if(this._searchController===C)return this.activeMenu=
y.numResults?"none":"warning",this._searchController=null,y})};J.suggest=function(r){this._cancelSuggest();const C=x.createAbortController(),{signal:u}=C;this._suggestController=C;return this.viewModel.suggest(r,null,{signal:u}).then(y=>{if(this._suggestController===C)return this._suggestController=null,y.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),y}).catch(()=>{if(this._suggestController===C)return this._suggestController=null})};J.render=function(){const {state:r}=this.viewModel;
return L.tsx("div",{class:this.classes("esri-search esri-widget",{["esri-disabled"]:"disabled"===r,["esri-widget--disabled"]:this.disabled})},"loading"===r?this.renderLoader():this.renderContainer())};J.renderSubmitButton=function(){const {messages:r}=this;return L.tsx("button",{"aria-label":r.searchButtonTitle,bind:this,class:this.classes("esri-search__submit-button","esri-widget--button"),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:r.searchButtonTitle},L.tsx("span",
{"aria-hidden":"true",class:"esri-icon-search"}))};J.renderWarningMenu=function(){return L.tsx("div",{key:"esri-search__error-menu",class:this.classes("esri-menu","esri-search__warning-menu")},L.tsx("div",{class:"esri-search__warning-body"},this.renderWarning()))};J.renderSourceMenuButton=function(){const {messages:r,activeMenu:C,sourceMenuId:u,sourceMenuButtonId:y}=this,{activeSourceIndex:F,allSources:I}=this.viewModel;return 1<I.length?L.tsx("button",{id:y,key:"esri-search__source-menu-button",
bind:this,"aria-label":r.searchIn,title:r.searchIn,"aria-haspopup":"true","aria-expanded":("source"===C).toString(),"aria-controls":u,class:this.classes("esri-search__sources-button","esri-widget--button"),onclick:this._handleSourcesMenuToggleClick,onfocus:this._clearActiveMenu,afterCreate:H.storeNode,"data-node-ref":"_sourceMenuButtonNode"},L.tsx("span",{"aria-hidden":"true",class:"esri-icon-down-arrow esri-search__sources-button--down"}),L.tsx("span",{"aria-hidden":"true",class:"esri-icon-up-arrow esri-search__sources-button--up"}),
L.tsx("span",{class:"esri-search__source-name"},this._getSourceName(F))):null};J.renderSourcesList=function(){const {allSources:r,searchAllEnabled:C}=this.viewModel,{_activeMenuItemIndex:u,activeMenu:y,sourceMenuId:F,sourceMenuButtonId:I}=this,R="source"===y&&-1<u?this._buildId("source-item",u):null;return 1<r.length?L.tsx("ul",{"aria-activedescendant":R,"aria-labelledby":I,id:F,role:"menu",bind:this,afterCreate:H.storeNode,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,
"data-node-ref":"_sourceListNode",class:"esri-menu__list",tabIndex:-1},C?this.renderSource(A.ALL_INDEX):null,r.map((K,P)=>this.renderSource(P)).toArray()):null};J.renderSourcesMenu=function(){const {allSources:r}=this.viewModel;return 1<r.length?L.tsx("div",{key:"esri-search__source-menu",class:this.classes("esri-menu","esri-search__sources-menu")},this.renderSourcesList()):null};J.renderLoader=function(){const {messages:r,messagesCommon:C}=this;return L.tsx("div",{class:"esri-widget__loader",key:"base-loader"},
L.tsx("span",{"aria-hidden":"true",class:"esri-widget__loader-animation"}),L.tsx("span",{class:"esri-icon-font-fallback-text"},r.searchButtonTitle),L.tsx("span",{class:"esri-widget__loader-text"},C.loading))};J.renderContainer=function(){const {allSources:r,state:C}=this.viewModel,{activeMenu:u}=this;return L.tsx("div",{tabIndex:-1,afterCreate:y=>{this._container=y;y.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:y=>{y.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes({["esri-search--multiple-sources"]:1<
r.length,["esri-search--loading"]:"loading"===C,["esri-search--searching"]:"searching"===C,["esri-search--warning"]:"warning"===u,["esri-search--sources"]:"source"===u,["esri-search--show-suggestions"]:"suggestion"===u},"esri-search__container"),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())};J.renderClearButton=function(){return this.searchTerm?L.tsx("button",{bind:this,class:this.classes("esri-search__clear-button",
"esri-widget--button"),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle},L.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})):null};J.renderLocationGroup=function(){const {messages:r,locationEnabled:C,displayedSearchTerm:u}=this,y="suggestion"===this.activeMenu&&0===this._activeMenuItemIndex;return C&&!u?L.tsx("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes("esri-menu__list",
"esri-search__suggestions-list","esri-search__suggestions-list--current-location")},L.tsx("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":("suggestion"===this.activeMenu&&0===this._activeMenuItemIndex).toString(),role:"option",class:this.classes("esri-menu__list-item",y?"esri-menu__list-item--focus":null)},L.tsx("span",{"aria-hidden":"true",class:"esri-icon-locate-circled"})," ",r.useCurrentLocation)):
null};J.renderInput=function(){const {activeMenu:r,locationEnabled:C,displayedSearchTerm:u,messages:y,suggestionsMenuId:F,inputId:I,_activeMenuItemIndex:R}=this,{maxInputLength:K,placeholder:P,searchTerm:Q,suggestionCount:X}=this.viewModel,S=!!(C&&!u||X),O="suggestion"===r&&-1<R?this._buildId("suggestion-item",R):null;return L.tsx("input",{"aria-activedescendant":O,"aria-autocomplete":"list","aria-expanded":(S&&"suggestion"===r).toString(),"aria-controls":S?F:null,"aria-haspopup":"listbox","aria-label":y.searchButtonTitle,
bind:this,placeholder:P,maxlength:K,autocomplete:"off",type:"text",class:this.classes("esri-input","esri-search__input"),value:Q,id:I,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:H.storeNode,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:Q?"":P})};J.renderForm=function(){return L.tsx("form",{key:"esri-search__form",bind:this,class:"esri-search__form",onsubmit:this._formSubmit,
role:"search"},this.renderInput())};J.renderSuggestList=function(r){const {sourceIndex:C}=r,u=r.results;return r.results.length?L.tsx("ul",{role:"group",key:`esri-search__suggestion-list-${C}`,class:this.classes("esri-menu__list","esri-search__suggestions-list")},u.map(y=>this.renderSuggestion(y,this._menuItemCount++))):null};J.renderSuggestionsGroup=function(){const {suggestions:r}=this.viewModel;return r?r.map(C=>[this.renderSuggestionHeader(C),this.renderSuggestList(C)]):null};J.renderSuggestionsMenu=
function(){const {displayedSearchTerm:r,locationEnabled:C,suggestionsMenuId:u,inputId:y}=this,{suggestionCount:F}=this.viewModel;this._menuItemCount=0;return C&&!r||F?L.tsx("div",{id:u,key:"esri-search__suggestions-menu",class:this.classes("esri-menu","esri-search__suggestions-menu"),role:"listbox","aria-labelledby":y,bind:this,afterCreate:H.storeNode,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null};J.renderInputContainer=function(){return L.tsx("div",
{key:"esri-search__input-container",class:"esri-search__input-container"},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())};J.renderSuggestionHeader=function(r){const {allSources:C,activeSourceIndex:u}=this.viewModel,{sourceIndex:y}=r,F=1<C.length&&u===A.ALL_INDEX;return r.results.length&&F?L.tsx("div",{key:`esri-search__suggestion-header-${y}`,class:"esri-menu__header"},this._getSourceName(y)):null};J.renderSuggestion=function(r,C){const {_activeMenuItemIndex:u,messages:y}=
this;var {searchTerm:F}=this.viewModel;if(F){var {text:I}=r;I=I||y.untitledResult;const R=[];if(ca.test(I))R.push(L.tsx("div",{innerHTML:I}));else{I=this._splitResult(I,F);const K=F.toLowerCase();I.forEach((P,Q)=>{P&&P.length&&(P.toLowerCase()===K?R.push(L.tsx("strong",{key:Q},P)):R.push(P))})}F="suggestion"===this.activeMenu&&u===C;return L.tsx("li",{bind:this,id:this._buildId("suggestion-item",C),"aria-selected":("suggestion"===this.activeMenu&&this._activeMenuItemIndex===C).toString(),onclick:this._handleSuggestionClick,
key:`esri-search__suggestion_${C}`,"data-suggestion":r,role:"option",class:this.classes("esri-menu__list-item",F?"esri-menu__list-item--focus":null)},R)}};J.renderSource=function(r){const {activeSourceIndex:C,searchAllEnabled:u}=this.viewModel,y={["esri-menu__list-item--active"]:r===C,["esri-menu__list-item--focus"]:"source"===this.activeMenu&&r===(u?this._activeMenuItemIndex-1:this._activeMenuItemIndex)};return L.tsx("li",{bind:this,key:`esri-search__source-${r}`,id:this._buildId("source-item",u?
r+1:r),"aria-checked":(r===C).toString(),onclick:this._handleSourceClick,"data-source-index":r,role:"menuitemradio",class:this.classes("esri-search__source","esri-menu__list-item",y)},this._getSourceName(r))};J.renderNoResultsWarning=function(r){const {messages:C}=this;r=r?Z.substitute(C.noResultsFoundForValue,{value:`"${r}"`}):C.noResultsFound;return L.tsx("div",{key:"esri-search__no_results"},L.tsx("div",{class:"esri-search__warning-header"},C.noResults),L.tsx("div",{class:"esri-search__warning-text"},
r))};J.renderEmptySearchWarning=function(){const {messages:r}=this;return L.tsx("div",{key:"esri-search__empty-search"},L.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),L.tsx("span",{class:"esri-search__no-value-text"},r.emptyValue))};J.renderLocateWarning=function(){const {messages:r}=this;return L.tsx("div",{key:"esri-search__locate-error"},L.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),L.tsx("span",{class:"esri-search__no-value-text"},r.locateError))};
J.renderWarning=function(){var r;const {displayedSearchTerm:C,_locateFailed:u}=this,{viewModel:y}=this;return u?this.renderLocateWarning():null!=(r=y.selectedSuggestion)&&r.location||C?this.renderNoResultsWarning(C):this.renderEmptySearchWarning()};J._resetActiveMenuItemIndex=function(){this._activeMenuItemIndex=-1};J._buildId=function(r,C){return`${this.id}-${r}${void 0===C?"":`-${C}`}`};J._watchSourceChanges=function(){const {_handles:r,viewModel:{allSources:C}}=this;r.remove("sources");C.forEach(u=>
r.add(E.watch(u,"name",()=>this.scheduleRender()),"sources"))};J._handleSourcesMenuToggleClick=function(){this.activeMenu="source"===this.activeMenu?"none":"source";this.renderNow();if("source"===this.activeMenu){var r;null==(r=this._sourceListNode)?void 0:r.focus()}};J._handleClearButtonClick=function(){this.viewModel.clear();this._focus()};J._handleSearchButtonClick=function(){this.search()};J._handleSuggestionClick=function(r){if(r=r.currentTarget["data-suggestion"])this._focus(),this.search(r)};
J._handleUseCurrentLocationClick=function(){this._useCurrentLocation()};J._useCurrentLocation=function(){this._focus("none");this._cancelSuggest();this._cancelSearch();const r=x.createAbortController(),{signal:C}=r;this._searchController=r;this.viewModel.searchNearby({signal:C}).catch(()=>{this._locateFailed=!0;this.activeMenu="warning"}).then(()=>{this._searchController=null})};J._handleSourceClick=function(r){this._setSourceFromMenuItem(r.currentTarget)};J._setSourceFromMenuItem=function(r){var C;
r&&(this.viewModel.activeSourceIndex=r["data-source-index"],this._clearActiveMenu(),null==(C=this._sourceMenuButtonNode)?void 0:C.focus())};J._cancelSuggest=function(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)};J._cancelSearch=function(){this._searchController&&(this._searchController.abort(),this._searchController=null);this._locateFailed=!1};J._handleInputKeyup=function(r){var C,u=f.eventKey(r);if(!r.ctrlKey&&!r.metaKey&&"Copy"!==u&&"ArrowLeft"!==u&&
"ArrowRight"!==u&&"Shift"!==u)if("Tab"===u||"Escape"===u||r.shiftKey&&"Tab"===u)this._cancelSuggest(),"Escape"===u&&this._clearActiveMenu();else{var y="Home"===u||"End"===u||"ArrowUp"===u||"ArrowDown"===u;if("Enter"===u&&0>this._activeMenuItemIndex)this._cancelSuggest();else{var F=null==(C=this._suggestionListNode)?void 0:C.getElementsByTagName("li");if(null!=F&&F.length){"suggestion"!==this.activeMenu&&this._openSuggestionMenu();if(y){r.preventDefault();this._cancelSuggest();this.handleItemNavigation(u,
F,this._suggestionListNode);return}r=F[this._activeMenuItemIndex];if("Enter"===u&&r){(u=r["data-suggestion"])?(this._focus(),this.search(u)):r["data-current-location-item"]&&this._useCurrentLocation();return}}this.viewModel.searchTerm&&this.suggest()}}};J.handleItemNavigation=function(r,C,u){const y=this._activeMenuItemIndex;"Home"===r&&(this._activeMenuItemIndex=0);"End"===r&&(this._activeMenuItemIndex=C.length-1);"ArrowUp"===r&&(this._activeMenuItemIndex=0>=this._activeMenuItemIndex?C.length-1:
this._activeMenuItemIndex-1);"ArrowDown"===r&&(this._activeMenuItemIndex=this._activeMenuItemIndex===C.length-1?0:this._activeMenuItemIndex+1);y!==this._activeMenuItemIndex&&H.keepMenuItemWithinView(C[this._activeMenuItemIndex],u)};J._scrollToTopSuggestion=function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)};J._openSuggestionMenu=function(){this.activeMenu="suggestion"};J._handleInputPaste=function(r){r=r.target;this.viewModel.searchTerm!==r.value&&(this.viewModel.searchTerm=
r.value);this.viewModel.searchTerm&&this.suggest()};J._handleSourceMenuKeydown=function(r){const C=f.eventKey(r);H.isActivationKey(C)?(r.preventDefault(),r=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex],this._setSourceFromMenuItem(r)):"ArrowUp"!==C&&"ArrowDown"!==C&&"End"!==C&&"Home"!==C||r.preventDefault()};J._handleSourceMenuKeyup=function(r){var C;const u=f.eventKey(r),y="ArrowUp"===u||"ArrowDown"===u||"End"===u||"Home"===u;y&&r.preventDefault();if("Escape"===u){var F;
this._clearActiveMenu();null==(F=this._sourceMenuButtonNode)?void 0:F.focus()}else(r=null==(C=this._sourceListNode)?void 0:C.getElementsByTagName("li"))&&0!==r.length&&y&&("source"!==this.activeMenu&&(this.activeMenu="source"),this.handleItemNavigation(u,r,this._sourceListNode.parentElement))};J._focus=function(r){this.focus();r&&(this.activeMenu=r)};J._formSubmit=function(r){r.preventDefault();-1===this._activeMenuItemIndex&&this.search()};J._getSourceName=function(r){const {messages:C}=this;var {allSources:u}=
this.viewModel;u=u.getItemAt(r);return r===A.ALL_INDEX?C.all:u?u.name||C.untitledSource:C.untitledSource};J._splitResult=function(r,C){C=w.escapeRegExpString(C);return r.replace(new RegExp(`(^|)(${C})(|$)`,"ig"),"$1|$2|$3").split("|")};J._renderSearchResultsContent=function(){this._searchResultRenderer.showMoreResultsOpen=!1;this._searchResultRenderer.viewModel=this.viewModel;return this._searchResultRenderer};m._createClass(Y,[{key:"displayedSearchTerm",get:function(){return`${this.viewModel.searchTerm}`.trim()}},
{key:"inputId",get:function(){return this._buildId("input")}},{key:"suggestionsMenuId",get:function(){return this._buildId("suggest-menu")}},{key:"sourceMenuId",get:function(){return this._buildId("source-menu")}},{key:"sourceMenuButtonId",get:function(){return this._buildId("source-menu-button")}}]);return Y}(v);a.__decorate([q.property()],b.prototype,"_activeMenuItemIndex",void 0);a.__decorate([q.property()],b.prototype,"displayedSearchTerm",null);a.__decorate([q.property({readOnly:!0})],b.prototype,
"inputId",null);a.__decorate([q.property({readOnly:!0})],b.prototype,"suggestionsMenuId",null);a.__decorate([q.property({readOnly:!0})],b.prototype,"sourceMenuId",null);a.__decorate([q.property({readOnly:!0})],b.prototype,"sourceMenuButtonId",null);a.__decorate([q.property()],b.prototype,"activeMenu",void 0);a.__decorate([h.aliasOf("viewModel.activeSource")],b.prototype,"activeSource",void 0);a.__decorate([h.aliasOf("viewModel.activeSourceIndex")],b.prototype,"activeSourceIndex",void 0);a.__decorate([h.aliasOf("viewModel.allPlaceholder")],
b.prototype,"allPlaceholder",void 0);a.__decorate([h.aliasOf("viewModel.allSources")],b.prototype,"allSources",void 0);a.__decorate([h.aliasOf("viewModel.autoNavigate")],b.prototype,"autoNavigate",void 0);a.__decorate([h.aliasOf("viewModel.autoSelect")],b.prototype,"autoSelect",void 0);a.__decorate([h.aliasOf("viewModel.defaultSources")],b.prototype,"defaultSources",void 0);a.__decorate([q.property()],b.prototype,"disabled",void 0);a.__decorate([h.aliasOf("viewModel.goToOverride")],b.prototype,"goToOverride",
void 0);a.__decorate([q.property()],b.prototype,"iconClass",void 0);a.__decorate([h.aliasOf("viewModel.includeDefaultSources")],b.prototype,"includeDefaultSources",void 0);a.__decorate([q.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0);a.__decorate([h.aliasOf("viewModel.locationEnabled")],b.prototype,"locationEnabled",void 0);a.__decorate([h.aliasOf("viewModel.maxResults")],b.prototype,"maxResults",void 0);a.__decorate([h.aliasOf("viewModel.maxSuggestions")],
b.prototype,"maxSuggestions",void 0);a.__decorate([q.property(),M.messageBundle("esri/widgets/Search/t9n/Search")],b.prototype,"messages",void 0);a.__decorate([q.property(),M.messageBundle("esri/t9n/common")],b.prototype,"messagesCommon",void 0);a.__decorate([h.aliasOf("viewModel.minSuggestCharacters")],b.prototype,"minSuggestCharacters",void 0);a.__decorate([h.aliasOf("viewModel.popupEnabled")],b.prototype,"popupEnabled",void 0);a.__decorate([h.aliasOf("viewModel.popupTemplate")],b.prototype,"popupTemplate",
void 0);a.__decorate([h.aliasOf("viewModel.portal")],b.prototype,"portal",void 0);a.__decorate([h.aliasOf("viewModel.resultGraphic")],b.prototype,"resultGraphic",void 0);a.__decorate([h.aliasOf("viewModel.resultGraphicEnabled")],b.prototype,"resultGraphicEnabled",void 0);a.__decorate([h.aliasOf("viewModel.results")],b.prototype,"results",void 0);a.__decorate([h.aliasOf("viewModel.searchAllEnabled")],b.prototype,"searchAllEnabled",void 0);a.__decorate([h.aliasOf("viewModel.searchTerm")],b.prototype,
"searchTerm",void 0);a.__decorate([h.aliasOf("viewModel.selectedResult")],b.prototype,"selectedResult",void 0);a.__decorate([h.aliasOf("viewModel.sources")],b.prototype,"sources",void 0);a.__decorate([h.aliasOf("viewModel.suggestions")],b.prototype,"suggestions",void 0);a.__decorate([h.aliasOf("viewModel.suggestionsEnabled")],b.prototype,"suggestionsEnabled",void 0);a.__decorate([h.aliasOf("viewModel.view")],b.prototype,"view",void 0);a.__decorate([W.vmEvent("search-complete search-clear search-start select-result suggest-start suggest-complete".split(" ")),
q.property({type:A})],b.prototype,"viewModel",void 0);a.__decorate([h.aliasOf("viewModel.clear")],b.prototype,"clear",null);return b=a.__decorate([k.subclass("esri.widgets.Search")],b)});