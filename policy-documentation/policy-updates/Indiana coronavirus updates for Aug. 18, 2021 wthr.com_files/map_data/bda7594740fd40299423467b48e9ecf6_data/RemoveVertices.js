// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["exports","../../../../core/maybe","../EditGeometry"],function(g,k,l){let m=function(){function h(b,a,d=0){this.editGeometry=b;this.vertices=a;this.minNumberOfVertices=d;this.removedVertices=null}var f=h.prototype;f.apply=function(){let b="redo";null==this.removedVertices?(this.removedVertices=[],this.vertices.forEach(a=>{a=this._removeVertex(a);k.isSome(a)&&this.removedVertices.push(a)}),b="apply"):this.removedVertices.forEach(a=>{this._removeVertex(a.removedVertex)});this.editGeometry.emit("change",
{removedVertices:this.vertices,operation:b})};f.undo=function(){this.removedVertices.forEach(b=>{this._undoRemoveVertex(b)});this.editGeometry.emit("change",{addedVertices:this.vertices,operation:"undo"})};f.accumulate=function(){return!1};f._removeVertex=function(b){const a=b.component;if(a.vertices.length<=this.minNumberOfVertices)return null;const d={removedVertex:b,createdEdge:null},e=b.left,c=b.right;a.vertices.splice(a.vertices.indexOf(b),1);e&&(a.edges.splice(a.edges.indexOf(e),1),e.left.right=
null);c&&(a.edges.splice(a.edges.indexOf(c),1),c.right.left=null);0===b.index&&c&&0<this.vertices.length&&a.swapVertices(a.vertices.indexOf(c.right),0);e&&c&&(d.createdEdge=new l.Edge(a,e.left,c.right),a.edges.push(d.createdEdge));c&&a.updateVertexIndex(c.right,c.right.index-1);return d};f._undoRemoveVertex=function(b){const a=b.removedVertex,d=b.removedVertex.component,e=a.left,c=a.right;b.createdEdge&&d.edges.splice(d.edges.indexOf(b.createdEdge),1);d.vertices.push(a);e&&(d.edges.push(e),e.left.right=
e);c&&(d.edges.push(c),c.right.left=c);d.updateVertexIndex(a,a.index)};return h}();g.RemoveVertices=m;Object.defineProperty(g,"__esModule",{value:!0})});