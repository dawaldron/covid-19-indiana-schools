// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.20/esri/copyright.txt for details.
//>>built
define(["exports","./error-handler","./scanner","./token"],function(g,h,k,l){let m=function(){function f(){this.values=[];this.curly=this.paren=-1}var e=f.prototype;e.beforeFunctionExpression=function(a){return 0<="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d **\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * ** / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ").indexOf(a)};
e.isRegexStart=function(){var a=this.values[this.values.length-1];let b=null!==a;switch(a){case "this":case "]":b=!1;break;case ")":a=this.values[this.paren-1];b="if"===a||"while"===a||"for"===a||"with"===a;break;case "}":b=!0,"function"===this.values[this.curly-3]?b=(a=this.values[this.curly-4])?!this.beforeFunctionExpression(a):!1:"function"===this.values[this.curly-4]&&(b=(a=this.values[this.curly-5])?!this.beforeFunctionExpression(a):!0)}return b};e.push=function(a){7===a.type||4===a.type?("{"===
a.value?this.curly=this.values.length:"("===a.value&&(this.paren=this.values.length),this.values.push(a.value)):this.values.push(null)};return f}(),n=function(){function f(a,b){this.errorHandler=new h.ErrorHandler;this.errorHandler.tolerant=b?"boolean"===typeof b.tolerant&&b.tolerant:!1;this.scanner=new k.Scanner(a,this.errorHandler);this.scanner.trackComment=b?"boolean"===typeof b.comment&&b.comment:!1;this.trackRange=b?"boolean"===typeof b.range&&b.range:!1;this.trackLoc=b?"boolean"===typeof b.loc&&
b.loc:!1;this.buffer=[];this.reader=new m}var e=f.prototype;e.errors=function(){return this.errorHandler.errors};e.getNextToken=function(){if(0===this.buffer.length){var a=this.scanner.scanComments();if(this.scanner.trackComment)for(let d=0;d<a.length;++d){const c=a[d];var b=this.scanner.source.slice(c.slice[0],c.slice[1]);b={type:c.multiLine?"BlockComment":"LineComment",value:b};this.trackRange&&(b.range=c.range);this.trackLoc&&(b.loc=c.loc);this.buffer.push(b)}if(!this.scanner.eof()){let d;this.trackLoc&&
(d={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});let c;if("/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()){a=this.scanner.saveState();try{c=this.scanner.scanRegExp()}catch(p){this.scanner.restoreState(a),c=this.scanner.lex()}}else c=this.scanner.lex();this.reader.push(c);a={type:l.TokenName[c.type],value:this.scanner.source.slice(c.start,c.end)};this.trackRange&&(a.range=[c.start,c.end]);this.trackLoc&&(d.end={line:this.scanner.lineNumber,
column:this.scanner.index-this.scanner.lineStart},a.loc=d);9===c.type&&(a.regex={pattern:c.pattern,flags:c.flags});this.buffer.push(a)}}return this.buffer.shift()};return f}();g.Tokenizer=n;Object.defineProperty(g,"__esModule",{value:!0})});