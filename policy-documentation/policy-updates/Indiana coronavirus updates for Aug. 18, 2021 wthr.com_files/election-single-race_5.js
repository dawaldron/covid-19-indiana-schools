define("election-single-race",["module","jquery","page","utils"],function(t,e,a,s){const r={name:t.id,class:"."+t.id};s.broadcast(r.name,"loaded"),s.createModule(r.name,function(t){const a=this;this.$el=t,this.module=r,this.context=t[0].dataset.context,this.electionResultId=t[0].dataset.electionResultId,this.getAllRaceInfoByElectionResultId=function(t){e.ajax({url:`/ajax/elections/getAllRaceInfoByElectionResultId/${t}`,type:"GET",dataType:"json",success:function(t){if(t){var e=a.getElements("result-template").html();a.getElements("results-list").html(""),a.getElements("results-list").append(e);let i=a.getElements("result").last();i.find(`${r.class}__result-title`).html(t.Title),i.find(`${r.class}__result-precinct`).html(`Precincts: ${t.PrecinctsReporting.toLocaleString()} / ${t.PrecinctsTotal.toLocaleString()} (${t.PrecinctsReportingPercent}% reporting)`),i.find(`${r.class}__result-total`).html(`Vote Total: ${t.VotesTotal.toLocaleString()}`),i.find(`${r.class}__result-updated`).html(`Last Updated: ${t.Updated}`),i.find(`${r.class}__more-button`).attr("data-tracking-label",i.closest(".article").attr("data-title"));let c=i.find(`${r.class}__candidates`).html();i.find(`${r.class}__candidates`).html("");let d=0;t.Candidates.forEach(t=>{t.VotePercent>d&&(d=t.VotePercent)}),t.Candidates.forEach(t=>{var e=t.FirstName&&t.LastName?" ":"",a=`${t.FirstName}${e}${t.LastName}`,s=t.Party?`&nbsp;(${t.Party})`:"",n=""===t.Party?"i":t.Party.toLowerCase(),e=!0===t.Incumbent?"*":"";i.find(`${r.class}__candidates`).append(c);let l=i.find(`${r.class}__candidate`).last();l.find(`${r.class}__candidate-name`).html(`${a}${s}${e}`),t.Winner&&l.find(`${r.class}__candidate-name-wrap`).addClass(`${r.name}__candidate-name-wrap_winner_true`),l.find(`${r.class}__candidate-percent`).html(`${t.VotePercent}%`),l.find(`${r.class}__candidate-votes`).html(t.Votes.toLocaleString()),l.find(`${r.class}__candidate-bar`).addClass(`${r.name}__candidate-bar_color_${n}`),l.find(`${r.class}__candidate-bar`).find("progress").text(` ${t.VotePercent}% `),l.find(`${r.class}__candidate-bar`).find("progress").attr("value",t.VotePercent),l.find(`${r.class}__candidate-bar`).find("progress").attr("max",d)}),a.getElements("wrap").show()}}})},this.init=function(){a.broadcast("init"),"article"===a.context&&a.getAllRaceInfoByElectionResultId(a.electionResultId),a.broadcast("ready")}})});
//# sourceMappingURL=election-single-race_5.8.4.js.map