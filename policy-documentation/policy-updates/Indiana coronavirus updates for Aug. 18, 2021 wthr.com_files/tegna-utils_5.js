define("utils",["jquery"],function(s){"use strict";class t extends HTMLElement{get auto(){return this.hasAttribute("auto")}async load(n){let t={};for(var e in this.dataset)t[e]=this.dataset[e];const o=await fetch("/ajax/content/module",{method:"POST",mode:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});o.text().then(t=>{this.innerHTML=t;let e=[];this.querySelectorAll("[data-module]").forEach(t=>{t=t.dataset.module;e.push(t)}),require(e,()=>{l.broadcast("grid","addedSection",{$el:s(this)})}),"function"==typeof n&&n()})}constructor(){super(),this.auto&&this.load()}}window.customElements.define("tegna-ajax-module",t);class e extends HTMLElement{constructor(){super();const t=this.attachShadow({mode:"open"});t.innerHTML=`
                <style>
                    :host {
                        position: fixed;
                        top: 0;
                        right: 0;
                        bottom: 0;
                        left: 0;
                        background-color: rgba(0,0,0,.8);
                        z-index: 5;
                        opacity: 0;
                        transition: .2s ease opacity;
                    }
                    #inner {
                        position: fixed;
                        left: 50%;
                        top: 50%;
                        transform: translate(-50%, -50%);
                        padding: 15px 15px 15px 15px;
                        width: 320px;
                        max-width: calc(100% - 45px);
                        background-color: #fff;
                    }
                    #close {
                        position: absolute;
                        top: -45px;
                        right: -12px;
                        width: 45px;
                        height: 45px;
                        border-width: 0;
                        text-indent: -9001px;
                        background: transparent url('/assets/shared-images/icons/close.svg') center center no-repeat;
                        filter: invert(1);
                        cursor: pointer;
                    }
                </style>
                <div id="inner">
                    <slot></slot>
                    <button id="close">close</button>
                </div>
            `,this.shadowRoot.querySelector("#close").addEventListener("click",t=>this.remove()),window.setTimeout(()=>{this.style.opacity=1},100)}}window.customElements.define("tegna-alert",e),HTMLElement.prototype.on=function(t,n,o){this.addEventListener(t,function(e){try{let t=e.target;if("string"==typeof n){for(;!t.matches(n)&&t!==this;)t=t.parentElement;t.matches(n)&&o.call(t,e)}else n.call(this,e)}catch(t){}})},Array.prototype.last=function(){return this[this.length-1]},Array.prototype.pushIfUnique=function(t,e){if(-1===this.indexOf(t)&&this.push(t),void 0!==e&&0<=e)for(;this.length>e;)this.shift()};var l={assembleHtmlAttributes:function(n){var o=[];return Object.keys(n).forEach(t=>{var e=n[t];null!=e&&""!==e&&(e=(e=e.toString()).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),o.push(t+'="'+e+'"'))}),o.join(" ")},assembleQueryString:function(n,o){var t,a=[];return Object.keys(n).forEach(t=>{var e=n[t];null!=e&&""!==e&&(o||(t=encodeURIComponent(t),"object"!=typeof e&&(e=encodeURIComponent(e.toString()))),e="object"==typeof e?t+"="+l.assembleQueryString(e,!0):t+"="+e,a.push(e))}),t=a.join("&"),t=o?encodeURIComponent(t):t},formatBroadcast:function(t,e,n,o,a){void 0===n&&(n={});var i=(i=20-t.length)<0?0:i,r=(r=30-e.length)<0?0:r,s="log";"error"in console&&3===o?s="error":"warn"in console&&2===o?s="warn":"info"in console&&(s="info");r="["+t+"] "+" ".repeat(i)+e+" ".repeat(r);return!0!==a&&(0<Object.keys(n).length?void 0:void 0),[t,e,n]},broadcast:function(t,e,n,o,a){a=l.formatBroadcast(t,e,n,o,a);s(window).trigger("tegnaBroadcast",a)},broadcastNoJQ:function(t,e,n,o,a){a=l.formatBroadcast(t,e,n,o,a);window.dispatchEvent(new CustomEvent("tegnaBroadcastNoJQ",{detail:{source:a[0],action:a[1],data:a[2]}}))},clone:function(t){let e,n,o;if("object"!=typeof inObject||null===inObject)return inObject;for(o in e=Array.isArray(inObject)?[]:{},inObject)n=inObject[o],e[o]=deepCopyFunction(n);return e},createModuleNoJQ:function(o,a,i){function r(t,e,n){"true"!==n.dataset.initialized&&(n.dataset.initialized="true",e.prototype.broadcast=function(t,e){(e=e||{}).el=this.el,l.broadcastNoJQ(this.module.name,t,e)},e.prototype.listen=l.listenNoJQ,(n=new e(n)).init(),i&&i(n))}tegna.log("utils","creatingModuleNoJQ",{module:o}),l.docReady(()=>{document.querySelectorAll(`.${o}`).forEach(t=>{tegna.log("utils","instantiatingModuleNoJQ",{module:o}),r(0,a,t)}),l.listenNoJQ("grid","addedSection",function(t,e,n){n.el.querySelectorAll(`.${o}`).forEach(t=>{tegna.log("utils","instantiatingLazyModuleNoJQ",{module:o}),r(0,a,t)})})})},createModule:function(o,a,i){function r(t,e,n){"true"!==n[0].dataset.initialized&&(n[0].dataset.initialized="true",e.prototype.getModel=function(){return this.$el.getModelData(!0)},e.prototype.broadcast=function(t,e){(e=e||{}).$el=this.$el,l.broadcast(this.module.name,t,e)},e.prototype.listen=l.listen,e.prototype.getBlock=function(){return this.$el.getBlock(this.module.name)},e.prototype.getElements=function(t){return this.$el.getBlock(this.module.name).getElements(t)},(n=new e(n)).init(),i&&i(n))}tegna.log("utils","creatingModule",{module:o}),s(function(){s("."+o).each(function(){tegna.log("utils","instantiatingModule",{module:o}),r(0,a,s(this))}),l.listen("grid","addedSection",function(t,e,n){n.$el.find("."+o).each(function(){tegna.log("utils","instantiatingLazyModule",{module:o}),r(0,a,s(this))})})})},dashesToCamel:function(t){return t=t.replace(/-([a-z])/g,function(t,e){return e.toUpperCase()})},delegateEvent:function(n,t,o,a){n.addEventListener(t,function(t){let e=t.target;if("string"==typeof o){for(;!e.matches(o)&&e!==n;)e=e.parentElement;e.matches(o)&&a.call(e,t)}else o.call(n,t)})},docReady:function(t){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(t,1):document.addEventListener("DOMContentLoaded",t)},getAutoHeight:function(t){let e=t.cloneNode(!0);e.setAttribute("id","utils__auto-height"),e.style.opacity="0",e.style.pointerEvents="none",e.style.position="fixed",e.style.left="-9001px",e.style.top="-9001px",e.style.bottom="auto",e.style.right="auto",e.style.height="auto",e.style.width=l.getWidth(t),t.parentNode.append(e);t=l.getHeight(t);return e.remove(),t},getClasses:function(t){return t.getAttribute("class").split(/\s+/)},getHeight:t=>parseFloat(getComputedStyle(t,null).height.replace("px","")),getWidth:t=>parseFloat(getComputedStyle(t,null).width.replace("px","")),initialCap:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},image:{getSrc:function(t,e,n,o){},getSrcSet:function(t,e){}},joinIfSet:function(t,e){let n=[];return e.forEach(t=>{null!=t&&""!==t&&n.push(t)}),n.join(t)},listen:function(a,i,r){var t;"function"==typeof a?(r=a,i=a=null):"function"==typeof i&&(r=i,i=null),null!==i&&(t=i.split(" ")),null!==i&&1<t.length?s.each(t,function(t,e){l.listen(a,e,r)}):(s(window).on("tegnaBroadcast",function(t,e,n,o){a!==e&&null!==a||i!==n&&null!==i||null==e||r(e,n,o)}),window.addEventListener("tegnaBroadcastNoJQ",t=>{a!==t.detail.source&&null!==a||i!==t.detail.action&&null!==i||r(t.detail.source,t.detail.action,t.detail.data)}))},listenNoJQ:function(n,e,o){var t;"function"==typeof n?(o=n,e=n=null):"function"==typeof e&&(o=e,e=null),null!==e&&(t=e.split(" ")),null!==e&&1<t.length?s.each(t,function(t,e){l.listenNoJQ(n,e,o)}):(window.addEventListener("tegnaBroadcastNoJQ",t=>{n!==t.detail.source&&null!==n||e!==t.detail.action&&null!==e||o(t.detail.source,t.detail.action,t.detail.data)}),window.addEventListener("tegnaBroadcast",t=>{n!==t.detail.source&&null!==n||e!==t.detail.action&&null!==e||o(t.detail.source,t.detail.action,t.detail.data)}))},loadScript:function(o){return new Promise((t,e)=>{var n=document.createElement("script");n.src=o,n.onload=()=>{t()},n.onerror=()=>{e("cannot load script "+o)},document.body.appendChild(n)})},observeIntersections:function(t,n,o){var e,a="IntersectionObserver"in window&&"IntersectionObserverEntry"in window;return(o=o||{}).threshold=o.threshold||0,a&&(e=new window.IntersectionObserver(function(t,e){t.forEach(function(t){"true"===t.target.dataset.firstObservation&&(t.isInitialObservation=!0,t.target.removeAttribute("data-first-observation")),t.isIntersectingThreshold=t.intersectionRatio>=o.threshold,n(t,e)})},o),t.dataset.firstObservation="true",e.observe(t),tegna.log("utils","observingIntersections",{el:t,options:o})),e},padNumber:function(t,e){return(-1===Math.sign(t)?"-":"")+new Array(e).concat([Math.abs(t)]).join("0").slice(-e)},parseSSTS:function(t){var t=s.isArray(t)?t:t.split("/"),e=t[0]||"",n=t[1]||"",o=t[2]||"",a=t[3]||"";return{section:e,subsection:n,topic:o,subtopic:a,0:e,1:n,2:o,3:a,length:4,toString:function(){var t="";return""!==e&&(t+=e,""!==n&&(t+="/"+n,""!==o&&(t+="/"+o,""!==a&&(t+="/"+a)))),t}}},performance:{initialBacklogHasBeenParsed:!(Array.prototype.joinIfSet=function(t){return s.grep(this,Boolean).join(t)}),pageLoadOffset:0,track:function(t,e,n){"received"===t&&(window.tegna.log("performance","("+Math.round(1e5*(n/1e3+1e-8))/1e5+") serverResponse"),l.performance.pageLoadOffset=n),!1===l.performance.initialBacklogHasBeenParsed&&l.performance.parseBacklog(),null==n&&(n=window.performance.now());var o=Math.round(1e5*((n-l.performance.pageLoadOffset)/1e3+1e-8))/1e5;Math.round(1e5*(n/1e3+1e-8));!1===window.tegna.hasBeenBlurred&&document.hasFocus()?(null==e?tegna.log("performance","("+o+") "+t):tegna.log("performance","("+o+") "+t,e),window.appInsights&&!1===window.tegna.hasBeenBlurred?window.appInsights.trackMetric(t,o,e):tegna.log("performance","Application Insights not loaded.")):window.tegna.log("performance","("+o+") "+t)},parseBacklog:function(){l.performance.initialBacklogHasBeenParsed=!0,Object.keys(window.tegna.performance).forEach(t=>{l.performance.track(t,window.tegna.performance[t].data,window.tegna.performance[t].time)}),window.tegna.performance={}}},queue:function(t,n,o){t.forEach((t,e)=>{window.setTimeout(function(){n(t)},o*e)})},repeat:function(e,n){for(let t=0;t<e;t++)n(t)},setTriggerPoint:function(t,a){let e=document.createElement("div");e.classList.add("utils__trigger-point"),e.style.height="1px",e.style.width="100%",e.style.position="absolute",e.style.left="0",e.style.zIndex="2",e.style.pointerEvents="none",e.style.top=`${t}px`,document.body.appendChild(e),l.observeIntersections(e,function(t,e){var n=parseInt(t.target.dataset.oldOffset),o=t.boundingClientRect.top<n?"down":"up",n=t.isIntersecting?"on":"up"==o?"below":"above";a(n,o),t.target.dataset.oldOffset=t.boundingClientRect.top})},tealium:{load:function(o){require(["tealium"],function(){window.performance.mark("tegna_tealium_loaded"),Array.isArray(o)?o.forEach((t,e)=>{var n=t;(n="string"==typeof t?parseInt(document.getElementsByClassName("page")[0].getAttribute(`data-tealium-id-${n}`)):n)?l.broadcast("utils","requestingTealiumTag",{tagIds:[n],callback:function(){l.broadcast("utils","loadedTealiumTag",{tagIds:o}),l.performance.track("loadedTag"+n),window.performance.mark(`tegna_tag_${n}_loaded`)}}):l.broadcast("utils","invalidTealiumTag",{request:t,id:n})}):l.tealium.load([o])})},getId:function(t){return parseInt(document.getElementsByClassName("page")[0].dataset[`tealiumId${l.initialCap(t)}`])}},Timer:function(t,e){var n=setInterval(t,e);this.stop=function(){return n&&(clearInterval(n),n=null),this},this.start=function(){return n||(this.stop(),n=setInterval(t,e)),this},this.reset=function(t){if(void 0!==t&&(e=t),null!==n)return this.stop().start()}},tryParseJSON:function(e){try{var t=JSON.parse(e);if(t&&"object"==typeof t)return t}catch(t){return e}},url:{getQueryParam:function(t,e){e=e||window.location.href,t=t.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null},removeQueryParam:function(t,e){var n=t;return null!==l.getQueryParam(e,t)&&(e=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=n.replace(e,"")),n},addQueryParam:function(t,e,n){return-1<t.indexOf("?")?t+"&"+e+"="+n:t+"?"+e+"="+n},setQueryParam:function(t,e,n){var o=l.removeQueryParam(t,e);return l.addQueryParam(o,e,n)}},uuid:function(){var n=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(n+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"===t?e:3&e|8).toString(16)})}};return l});
//# sourceMappingURL=tegna-utils_5.8.4.js.map