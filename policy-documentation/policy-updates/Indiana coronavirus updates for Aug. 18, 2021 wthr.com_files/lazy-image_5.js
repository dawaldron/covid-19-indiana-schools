define("lazy-image",["module","page","utils","bem","jquery"],function(e,t,a,s,i){const n={name:e.id,class:"."+e.id};a.broadcast(n.name,"loaded"),a.createModule(n.name,function(e){const t=this,a=e[0];new s(a,n.name),this.el=a,this.$el=e,this.module=n,this.init=function(){t.broadcast("init"),"true"!==a.dataset.preloaded&&(t.getElements("image").on("load",function(){t.getElements("image").setModifier("loaded",!0),window.setTimeout(function(){t.getElements("placeholder").setModifier("visible",!1),e.attr("style",null)},"true"===e[0].dataset.blur?500:0)}),t.getElements("image").on("error",function(){t.broadcast("failed")}),t.getElements("image").observeIntersections(function(e,t){var a,s,n;e.isIntersecting&&(a=e.target,s=i(a),n=a.dataset.src,e=a.dataset.srcset,s.attr("srcset",e).attr("src",n),s.attr("data-srcset",null).attr("data-src",null),t.unobserve(a))})),t.broadcast("ready")}})});
//# sourceMappingURL=lazy-image_5.8.4.js.map