(function(){var N=function(a,c,b){var d={};return function(a,b,c){var m;try{d[a]||(d[a]=!0,c&&(m=c.contextNode,c.contextNode=""),(new Image).src="//pixel.adsafeprotected.com/jsdiagnostic?code:"+a+"&err:"+encodeURIComponent(b.message)+"&config:"+encodeURIComponent(JSON.stringify(c)),c&&(c.contextNode=m))}catch(l){}}}();try{(function(a){function c(){}function b(a,b){return function(){a.apply(b,arguments)}}function d(a){if(!(this instanceof d))throw new TypeError("Promises must be constructed via new");
if("function"!==typeof a)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];u(a,this)}function f(a,b){for(;3===a._state;)a=a._value;0===a._state?a._deferreds.push(b):(a._handled=!0,d._immediateFn(function(){var d=1===a._state?b.onFulfilled:b.onRejected;if(null===d)(1===a._state?e:k)(b.promise,a._value);else{var c;try{c=d(a._value)}catch(l){k(b.promise,l);return}e(b.promise,c)}}))}function e(a,e){try{if(e===a)throw new TypeError("A promise cannot be resolved with itself.");
if(e&&("object"===typeof e||"function"===typeof e)){var c=e.then;if(e instanceof d){a._state=3;a._value=e;m(a);return}if("function"===typeof c){u(b(c,e),a);return}}a._state=1;a._value=e;m(a)}catch(l){k(a,l)}}function k(a,b){a._state=2;a._value=b;m(a)}function m(a){2===a._state&&0===a._deferreds.length&&d._immediateFn(function(){a._handled||d._unhandledRejectionFn(a._value)});for(var b=0,e=a._deferreds.length;b<e;b++)f(a,a._deferreds[b]);a._deferreds=null}function l(a,b,e){this.onFulfilled="function"===
typeof a?a:null;this.onRejected="function"===typeof b?b:null;this.promise=e}function u(a,b){var d=!1;try{a(function(a){d||(d=!0,e(b,a))},function(a){d||(d=!0,k(b,a))})}catch(c){d||(d=!0,k(b,c))}}var C=setTimeout;d.prototype["catch"]=function(a){return this.then(null,a)};d.prototype.then=function(a,b){var e=new this.constructor(c);f(this,new l(a,b,e));return e};d.all=function(a){return new d(function(b,e){function d(a,l){try{if(l&&("object"===typeof l||"function"===typeof l)){var m=l.then;if("function"===
typeof m){m.call(l,function(b){d(a,b)},e);return}}c[a]=l;0===--k&&b(c)}catch(f){e(f)}}if(!a||"undefined"===typeof a.length)throw new TypeError("Promise.all accepts an array");var c=Array.prototype.slice.call(a);if(0===c.length)return b([]);for(var k=c.length,l=0;l<c.length;l++)d(l,c[l])})};d.resolve=function(a){return a&&"object"===typeof a&&a.constructor===d?a:new d(function(b){b(a)})};d.reject=function(a){return new d(function(b,e){e(a)})};d.race=function(a){return new d(function(b,e){for(var d=
0,c=a.length;d<c;d++)a[d].then(b,e)})};d._immediateFn="function"===typeof setImmediate&&function(a){setImmediate(a)}||function(a){C(a,0)};d._unhandledRejectionFn=function(a){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};d._setImmediateFn=function(a){d._immediateFn=a};d._setUnhandledRejectionFn=function(a){d._unhandledRejectionFn=a};"undefined"!==typeof module&&module.exports?module.exports=d:a.Promise||(a.Promise=d)})(this);var r=function(){return{getDoc:function(){return document},
getWindow:function(a){var c;a&&(c=a.ownerDocument);return a&&c?c.defaultView||c.parentWindow:window}}}(),g=function(){var a=null,c=null,b=null,d=null,f,e=function(a){return a.replace(/^https?:\/\//,"//")};return{getFullUrl:function(b){if(null===a){g.log("getFullUrl called");var e=null;Array.prototype.slice.call(b.getElementsByTagName("script")).forEach(function(a){null===e&&0<=a.src.indexOf("IASVideo.js")&&(e=a.src)});g.log("src = "+e);a=e}return a},getQueryString:function(a){null===c&&(a=this.getFullUrl(a).split("?"),
a.splice(0,1),c="?"+a.join("?"));return c},getDomain:function(a){null===b&&(b=this.getFullUrl(a).split("?")[0]);return b},getUserAgent:function(){var a=r.getWindow(),b="";a&&a.navigator&&a.navigator.userAgent&&(b=a.navigator.userAgent);return b},loadJsCssFile:function(a,b,e,d){e=e||r.getDoc();var c;"js"===b?null===e.querySelector('script[src*="'+a+'"]')&&(c=e.createElement("script"),c.setAttribute("type","text/javascript"),c.setAttribute("src",a),c.setAttribute("async",!1)):"css"===b&&(c=e.createElement("link"),
c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href",a));a=e.getElementsByTagName("head")[0];"undefined"!==typeof c&&(d?a.insertBefore(c,a.firstChild):a.appendChild(c),F.addDomElement(c))},getQueryParamByName:function(a,b){var e=this.getQueryString(r.getDoc());if(b){var c=e.split(a+"=");if(1<c.length)return c.splice(0,1),decodeURIComponent(c.join(a+"="))}a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");c=RegExp("[\\?&]"+a+"=([^&#]*)");g.log('looking for param "'+
a+'" in '+e);e=c.exec(e);g.log("found "+e);null!==e||this.isXDomain()||(e=c.exec(r.getWindow().top.location.search));return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},getAdTagUrl:function(){var a=this.getQueryParamByName("originalVast",!0);return e(a)},getIasVidOpts:function(){var a={continueonclick:!1,hidecountdown:!1,frtimer:!1,gertimer:!1,topleftcount:!1,topmiddlecount:!1,toprightcount:!1,bottomleftcount:!0,bottommiddlecount:!1,bottomrightcount:!1},b=this.getQueryParamByName("IAS_VID_OPTS");
if(0===b.length)return a;a=b.toLowerCase().split("|");return a={continueonclick:0<=a.indexOf("continueonclick"),hidecountdown:0<=a.indexOf("hidecountdown"),frtimer:0<=a.indexOf("frtimer"),gertimer:0<=a.indexOf("gertimer"),topleftcount:0<=a.indexOf("topleftcount"),topmiddlecount:0<=a.indexOf("topmiddlecount"),toprightcount:0<=a.indexOf("toprightcount"),bottomleftcount:0<=a.indexOf("bottomleftcount"),bottommiddlecount:0<=a.indexOf("bottommiddlecount"),bottomrightcount:0<=a.indexOf("bottomrightcount")}},
getIasScript:function(a){var b=this.getQueryParamByName("IAS_PATH"),e=this.getQueryParamByName("fwServer"),c=0<b.length?b:"/jsvid";"/"!==c.charAt(0)&&(c="/"+c);var d=this.getFullUrl(r.getDoc()),b=function(a){a=a.split("?");var b="";(2>a.length?"":a[1]).split("&").forEach(function(a){0!==a.indexOf("IAS_VID_OPTS")&&0!==a.indexOf("originalVast")&&0!==a.indexOf("IAS_PATH")&&0!==a.indexOf("fwServer")&&(b+=a+"&")});0<b.length&&(b=b.substr(0,b.length-1));return b}(d);a=function(a,b,e){var c=a.indexOf(":"),
d=a.substr(0,c);b=a.substr(c+3,a.length-c-3-b.length);b=b.replace("?","");var c=b=b.substr(0,b.indexOf("/")),l=b.split(".");2<l.length&&(l.splice(0,1),b=l.join("."));"/"===b.charAt(b.length-1)&&(b=b.substr(0,b.length-1));a=-1===a.indexOf("dev-")&&-1===a.indexOf("test-");l="";d+="://";return e=e&&0<e.length?d+e.replace(/^https?\:\/\//i,""):a?d+(l+"pixel.")+b:d+c}(d,b,e)+c+"?videoId="+a;0<b.length&&(a+="&"+b);return a},isXDomain:function(){if(null===d)try{d="string"!==typeof r.getTop().location.search}catch(a){d=
!0}return d},log:function(a,b,e){"error"===b&&"undefined"!==typeof e&&t.sendVideoMessage("error",{errorCode:e})},extend:function(a,b){b=b instanceof Array?b:[b];b.forEach(function(b){Object.keys(b).forEach(function(e){a[e]=b[e]})})},appendAttributesToNode:function(a,b){if(b)for(var e in b)if(b.hasOwnProperty(e))try{a.setAttribute(e,b[e])}catch(c){}return a},now:function(){return(new (r.getWindow().Date)).getTime()},getVideoId:function(){if(!f){var a=this.getQueryParamByName("videoId");f=0===a.length||
isNaN(a)?Math.floor(1E5*Math.random()):parseInt(a)}return f},fetch:function(a,b){var e,c=r.getWindow();try{e=new c.XMLHttpRequest,e.onreadystatechange=function(){4==e.readyState&&200==e.status&&b(e)},e.open("GET",a),e.send()}catch(d){}},toRelativeProtocol:e}}(),v=function(a,c){this.element=h.create(a,c);this.parent=void 0;this.children=[];this.remove=function(){this.parent instanceof v&&this.parent.children.splice(this.parent.children.indexOf(this),1);this.parent=void 0;this.children.forEach(function(a){a.remove()});
h.remove(this.element);return this};this.appendChild=function(a){if(a instanceof v)return this.children.push(a),h.appendChild(this.element,a.element),a.parent=this,this};this.appendTo=function(a){h.getNodeAndDo(a,function(c){h.appendChild(c,this.element);this.parent=a;a instanceof v&&a.children.push(this);return this}.bind(this))};this.updateProps=function(a){h.setProperties(this.element,a);return this};this.updateProp=function(a,c){h.setProperty(this.element,a,c);return this};this.getName=function(){return h.getName(this.element)};
this.attr=function(a){return h.getAttribute(this.element,a)};this.is=function(a){return this.getName()===a};this.getWindow=function(a){a=a||this;return void 0===a.parent?r.getWindow(a.element):"iframe"===a.getName()?a.element.contentWindow:this.getWindow(a.parent)};this.getDocument=function(){return this.element.ownerDocument};this.addEventListener=this.element.addEventListener.bind(this.element);this.removeEventListener=this.element.removeEventListener.bind(this.element);this.dispatchEvent=this.element.dispatchEvent.bind(this.element)},
h=function(){var a=["svg","circle","polygon"],c=function(a,b){a.contentWindow?a.contentWindow.document.body.appendChild(b):a.addEventListener("load",function(){a.contentWindow.document.body.appendChild(b)},!1)},b=function(a){a.addEventListener("load",function(){var b=a.contentWindow.document.body.style;b.margin=0;b.width=a.style.width;b.height=a.style.height;b.border=a.style.border},!1)},d=function(a){return!/%$/.test(a)&&/\d+/.test(a)&&parseFloat(/\d+/.exec(a)[0])},f=function(a){return[Element,XMLDocument,
HTMLDocument].some(function(b){return a instanceof b})};return{getOne:function(a,b){return(f(b)?b:r.getDoc()).querySelector(a)},get:function(a,b){var c=f(b)?b:r.getDoc();return n.toArray(c.querySelectorAll(a))},create:function(e,c,d){n.isDOMElement(e)||(d=d||r.getDoc(),e=-1!==a.indexOf(e)?d.createElementNS("http://www.w3.org/2000/svg",e):d.createElement(e));c&&this.setProperties(e,c);"iframe"===e.nodeName.toLowerCase()&&b(e);return e},setProperties:function(a,b){Object.keys(b).forEach(function(c){this.setProperty(a,
c,b[c])}.bind(this))},setProperty:function(a,b,c){b.split(".").reduce(function(a,b,e,d){if(e===d.length-1)n.isFunction(a.setAttribute)?a.setAttribute(b,c):a[b]=c;else return a[b]},a)},appendChild:function(a,b){n.isDOMElement(a)&&n.isDOMElement(b)&&("iframe"===a.nodeName.toLowerCase()?c(a,b):a.appendChild(b))},remove:function(a){a.remove?a.remove():a.removeNode?a.removeNode():a.parentNode.removeChild(a)},getNodeAndDo:function(a,b){var c;a instanceof v?c=a.element:n.isDOMElement(a)&&(c=a);if(c)return b(c)},
toPx:function(a){return(a=d(a))&&a+"px"},getWidth:function(a){return this.getNodeAndDo(a,function(a){return d(getComputedStyle(a,"").getPropertyValue("width"))||d(a.style.width)||a.width||a.clientWidth}.bind(this))},getHeight:function(a){return this.getNodeAndDo(a,function(a){return d(getComputedStyle(a,"").getPropertyValue("height"))||d(a.style.height)||a.height||a.clientHeight}.bind(this))},getParent:function(a){return a.parentElement||a.parentNode},getParentUntil:function(a,b){for(var c=this.getParent(a);this.getParent(c)&&
c.tagName.toLowerCase()!==b.toLowerCase();)c=this.getParent(c);return c},getText:function(a){return a?n.toArray(a.childNodes).map(function(a){return a.textContent.trim()}).join(""):""},getCdata:function(a){return a?n.toArray(a.childNodes).filter(function(a){return"#cdata-section"===a.nodeName}).map(function(a){return a.textContent.trim()})[0]:""},getName:function(a){return a.tagName.toLowerCase()},getAttribute:function(a,b){return a.getAttribute(b)||a[b]||""},getAttributes:function(a){return a?n.toArray(a.attributes).reduce(function(a,
b){return a[b.name]=b.nodeValue,a},{}):{}},getData:function(a){var b=h.getCdata(a);a=h.getText(a);return b||a||""},createEvent:function(a){var b;try{b=new Event(a)}catch(c){b=r.getDoc().createEvent("Event"),b.initEvent(a,!1,!0)}finally{return b}},parseXML:function(a){var b;try{b=n.isString(a)?(new DOMParser).parseFromString(a,"text/xml"):a,G.xmlParseError(b)}catch(c){console.error(c)}finally{return b}},serializeXMLNode:function(a){var b;try{b=(new XMLSerializer).serializeToString(a),G.xmlSerializeError()}catch(c){console.error(c)}finally{return b}}}}(),
G=function(){var a={create:function(a){return function(c){this.name=a;this.message=c}}},c=["ArgumentsException","XMLParsingException","XMLSerializingException"].reduce(function(b,c){b[c]=a.create(c);return b},{});return{initializerErrors:function(a,d,f,e,k,m){if(!a&&0!==a)throw new c.ArgumentsException("User MUST supply width, see http://www.iab.net/media/file/VPAID_2.0_Final_04-10-2012.pdf p18-19.");if(!d&&0!==d)throw new c.ArgumentsException("User MUST supply height, see http://www.iab.net/media/file/VPAID_2.0_Final_04-10-2012.pdf p18-19.");
if(!m)throw new c.ArgumentsException("User MUST supply environmentVars object, see http://www.iab.net/media/file/VPAID_2.0_Final_04-10-2012.pdf p18-19.");if(!m.slot)throw new c.ArgumentsException("User MUST supply environmentVars.slot, see http://www.iab.net/media/file/VPAID_2.0_Final_04-10-2012.pdf p18-19.");if(!m.videoSlot)throw new c.ArgumentsException("User MUST supply environmentVars.videoSlot, see http://www.iab.net/media/file/VPAID_2.0_Final_04-10-2012.pdf p18-19.");},xmlParseError:function(a){if(!n.isEmpty(h.get("parsererror",
a)))throw new c.XMLParsingException("supplied XML is invalid");},xmlSerializeError:function(){if(!n.isFunction(XMLSerializer))throw new c.XMLSerializingException("XML Serializer does not exist in this browser");}}}(),X=function(a,c){this.element=a;this.parent=void 0;this.children=[];this.remove=function(){this.parent instanceof v&&this.parent.children.splice(this.parent.children.indexOf(this),1);this.parent=void 0;this.children.forEach(function(a){a.remove()});h.remove(this.element);return this};
this.appendChild=function(a){};this.appendTo=function(a){};this.updateProps=function(a){Object.keys(a).forEach(function(c){this.updateProp(c,a[c])}.bind(this));return this};this.updateProp=function(a,c){this.element.setAttribute?this.element.setAttribute(a,c):this.element[a]=c;return this};this.getName=function(){return"player"};this.attr=function(a){return this.element[a]};this.is=function(a){return this.getName()===a};this.getWindow=function(){var a=c.ownerDocument;return a.defaultView||a.parentWindow};
this.getDocument=function(){return c.ownerDocument};this.addEventListener=this.element.addEventListener.bind(this.element);this.removeEventListener=this.element.removeEventListener.bind(this.element)},F=function(){var a=[];return{addDomElement:function(c){a.push(c)},clearDomElements:function(){a.forEach(h.remove);a=[]}}}(),H=function(){return{get:function(a){if(n.isFalsy(a))return Promise.reject(D.WRAPPER_URI_TIMEOUT);var c=new XMLHttpRequest;c.open("GET",a);c.send(null);return new Promise(function(a,
d){c.addEventListener("load",function(){/^5/.test(c.status)&&d(D.WRAPPER_URI_TIMEOUT);a(c.response)});c.addEventListener("error",function(a){d(D.WRAPPER_URI_TIMEOUT)})})},getImg:function(a){var c=new Image;c.src=a;return new Promise(function(a,d){c.addEventListener("load",a);c.addEventListener("error",d)})}}}(),z=function(){var a=function(a){return h.create("a",{href:a}).search.replace(/^\?/,"").split("&").reduce(function(a,b){var c=a.slice(-1).join();return/originalVast/.test(c)?(c=c.concat("&",
b),a.slice(0,-1).concat(c)):a.concat(b)},[]).filter(n.isTruthy).reduce(function(a,b){var c=b.split("=");a[c[0]]=c.slice(1).join("=");return a},{})},c=function(a){var b="&".concat(a).concat("=.*$");return{regexp:RegExp(b),length:a.length+2}},b=function(a){var b=["nuggv"].map(c).map(function(b){var c=a.match(b.regexp),c=c?c[0]:"";return 0===c.length?void 0:{encodeableString:c,captureLength:b.length}}).filter(n.isTruthy);if(~[0,1].indexOf(b.length))return b.reduce(function(a,b){var c;if(n.isTruthy(b)){c=
a.substring(0,a.length-b.encodeableString.length+b.captureLength);var d=encodeURIComponent(b.encodeableString.substring(b.captureLength));c=c.concat(d)}else c=a;return c},a);throw"There are multiple blacklisted Urls in this tag";},d=function(a){var c;try{var d=decodeURIComponent(a);c=b(d)}catch(l){console.error(l),c=a}finally{return c}},f=function(b,c){var f=a(b)[c];return f?d(f):""};return{isValid:function(a){if(!n.isDefined(a)||!n.isString(a))return!1;if(0<=a.indexOf("iasOverrideHostnameValidation"))return!0;
var b=h.create("a",{href:a});return b.hostname&&b.hostname!==r.getWindow().location.hostname&&0<=a.toLowerCase().indexOf(b.hostname)},getQueryParams:a,getQueryParamByName:f,getOriginalVast:function(a){return f(a,"originalVast")},toRelativeProtocol:function(a){return n.isString(a)&&d(a.replace(/^https?:\/\//,"//"))},parseIASVidOpts:function(a){return{config:[].concat(f(a,"IAS_VID_OPTS")||"").map(d).join().split("|").filter(n.isTruthy).reduce(function(a,b){a[b]=!0;return a},{})}}}}(),J=function(a,c){a=
a||'<?xml version="1.0" encoding="utf-8"?><xml></xml>';c=c||{};var b=h.parseXML(a);this.normalize=function(b,f){var e=a.replace(RegExp("(</?)"+b,"gi"),"$1"+f);return new J(e,c)};this.select=function(a,f){var e=h.get(a,b);c[f]=e;return this};this.create=function(a,f,e){a=h.create(a,e,b);c[f]=[a];return this};this.createCDATA=function(a,f){c[f]=[b.createCDATASection(a)];return this};this.concatenateWithVAST=function(){var a=h.parseXML('<?xml version="1.0" encoding="utf-8"?>\n<VAST version="2.0">\n<Ad id="">\n<InLine>\n<AdSystem version="2.0"/>\n<AdTitle><![CDATA[]]\x3e</AdTitle>\n<Description><![CDATA[]]\x3e</Description>\n<Impression></Impression>\n<Creatives>\n<Creative sequence="1" id="">\n<Linear>\n<Duration>\n00:00:15\n</Duration>\n<TrackingEvents></TrackingEvents>\n<VideoClicks>\n<ClickThrough></ClickThrough>\n</VideoClicks>\n<MediaFiles></MediaFiles>\n</Linear>\n</Creative>\n</Creatives>\n</InLine>\n</Ad>\n</VAST>');
Object.keys(c).forEach(function(b){c[b].forEach(function(c){h.getOne(b,a).appendChild(c)})});return a}},n=function(){var a=function(a){return a.name||(a.toString().trim().match(/^function\s*([^\s(]+)/)||[]).slice(-1).join()},c=function(b){return a(b.constructor)||(b.constructor.toString().match(/\s\w+/)||[]).join().trim()};return{noop:function(){},fname:a,cname:c,isDOMElement:function(a){return!!a.nodeName},isOfDOMType:function(a,c){return!!a.nodeName&&a.nodeName.toLowerCase()===c.toLowerCase()},
isType:function(a,d){return c(a)===d},isString:function(a){return"string"===typeof a},isFunction:function(a){return"function"===typeof a},isNonNullObj:function(a){return null!==a&&"object"===typeof a},isUndefined:function(a){return"undefined"===typeof a},isDefined:function(a){return"undefined"!==typeof a},isTruthy:function(a){return Boolean(a)},isFalsy:function(a){return!Boolean(a)},toArray:function(a){return Array.prototype.slice.call(a)},isEmpty:function(a){return Array.isArray(a)&&0===a.length},
isEmptyObj:function(a){return 0===Object.keys(a).length&&a.constructor===Object},mergeObjects:function(){return n.toArray(arguments).reduce(function(a,c){return Object.keys(c).reduce(function(a,b){var k=c[b];a[b]?Array.isArray(a[b])?a[b]=a[b].concat(k):a[b]=[a[b]].concat(k):a[b]=k;return a},a)},{})},clone:function(a){return Object.keys(a).reduce(function(c,f){var e;e=a[f]instanceof Array?a[f].slice():a[f]instanceof Function?a[f]:a[f]instanceof Object?n.clone(a[f]):a[f];c[f]=e;return c},{})},del:function(a,
c){return Object.keys(a).reduce(function(f,e){e!==c&&(f[e]=a[e]);return f},{})},throttle:function(a,c,f){var e,k,m;return function(){var l=f||this;k=(new Date).getTime();!e||k-e>=c?(e=k,m=a.apply(l,arguments)):m=function(){};return m}},fromJSON:function(a){var c;try{JSON.parse(a)}catch(f){c={}}finally{return c}}}}(),D={XML_PARSE_ERROR:{code:100,message:"XML parsing error."},VAST_SCHEMA_ERROR:{code:101,message:"VAST schema validation error."},VAST_VERSION_RESPONSE_ERROR:{code:102,message:"VAST version of response not supported."},
VAST_TRAFFICKING_ERROR:{code:200,message:"Trafficking error. Video player received an Ad type that it was not expecting and/or cannot display."},EXPECTING_LINEARARITY_ERROR:{code:201,message:"Video player expecting different linearity."},INCORRECT_DURATION_ERROR:{code:202,message:"Video player expecting different duration."},INCORRECT_SIZE_ERROR:{code:203,message:"Video player expecting different size."},GENERAL_WRAPPER_ERROR:{code:300,message:"General Wrapper error."},WRAPPER_URI_TIMEOUT:{code:301,
message:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element. (URI was either unavailable or reached a timeout as defined by the video player.)"},VAST_WRAPPER_LIMIT_EXCEEDED:{code:302,message:"Wrapper limit reached, as defined by the video player. Too many Wrapper responses have been received with no InLine response. "},NO_ADS:{code:303,message:"No Ads VAST response after one or more Wrappers."},LINEAR_AD_ERROR:{code:400,message:"General Linear error. Video player is unable to display the Linear Ad."},
NO_AD_AT_URL:{code:401,message:"File not found. Unable to find Linear/MediaFile from URI."},MEDIAFILE_TIMEOUT:{code:402,message:"Timeout of MediaFile URI."},NO_ACCEPTABLE_MEDIAFILE:{code:403,message:"Couldn\u2019t find MediaFile that is supported by this video player, based on the attributes of the MediaFile element."},MEDIAFILE_NOT_DISPLAYABLE:{code:405,message:"Problem displaying MediaFile. Video player found a MediaFile with supported type but couldn\u2019t display it. MediaFile may include: unsupported codecs, different MIME type than MediaFile@type, unsupported delivery method, etc."},
NON_LINEAR_ADS_ERROR:{code:500,message:"General NonLinearAds error."},CREATIVE_DIMENSION_MISMATCH:{code:501,message:"Unable to display NonLinear Ad because creative dimensions do not align with creative display area (i.e. creative dimension too large)."},NON_LINEAR_FETCH_ERROR:{code:502,message:"Unable to fetch NonLinearAds/NonLinear resource."},MISSING_SUPPORTED_NON_LINEAR_RESOURCE:{code:503,message:"Couldn\u2019t find NonLinear resource with supported type."},COMPANION_ADS_ERROR:{code:600,message:"General CompanionAds error."},
CREATIVE_COMPANION_DIMESNION_MISMATCH:{code:601,message:"Unable to display Companion because creative dimensions do not fit within Companion display area (i.e., no available space)."},DISPLAY_COMPANION_ERROR:{code:602,message:"Unable to display Required Companion."},COMPANION_FETCH_ERROR:{code:603,message:"Unable to fetch CompanionAds/Companion resource."},NO_SUPPORTED_COMPANION:{code:604,message:"Couldn\u2019t find Companion resource with supported type."},UNDEFINED_ERROR:{code:900,message:"Undefined Error."},
GENERAL_VPAID_ERROR:{code:901,message:"General VPAID error."}},Z=function(a,c,b,d,f,e){G.initializerErrors.apply(G.initializerErrors,arguments);var k=b||"normal",m=d||-1,l=n.isString(f)?n.fromJSON(f):f||{},u={provideVastURL:function(b){z.getOriginalVast(b);O.getXml(b,a,c,m,l).then(O.provideXml,q.error).then(function(a){var c=z.parseIASVidOpts(b),c=n.mergeObjects(a,c);p.init(a.vastEvents);q.setUrl(c.errorUrl);P.init(c);u.manager.provideAd(c)},q.log)}};u.manager=new Y(a,c,k,m,l,e);return u},Y=function(a,
c,b,d,f,e){var k=new v("iframe",{src:"about:blank",frameBorder:"0","style.border":"none","style.top":"0","style.left":"0",scrolling:"no","style.overflow":"hidden",padding:"0","style.width":h.toPx(a),"style.height":h.toPx(c),allowfullscreen:"true"});k.element.style.setProperty("position","absolute","important");k.width=a;k.height=c;k.viewMode=b;k.desiredBitrate=d;k.creativeData=f;k.environmentVars=e;p.attachTarget(k);E.attachManager(k);k.provideAd=function(a){a.mediaFile.isVPAID()?$(k,a):aa(k,a)};
k.loadSource=function(){p.dispatchEvent("EventBridgeLoadSource")};k.appendTo(e.slot);return k},ba=function(a,c,b){var d=new v("svg",{width:a,height:c,viewBox:"0 0 100 100",cursor:"pointer"});a=new v("circle",{cx:"50%",cy:"50%",r:"25%",fill:"none",stroke:"white","stroke-width":"2px"});c=new v("polygon",{points:"45,40,45,60,60,50",fill:"white"});var f=!1;b.addEventListener("canplay",function(){f=!0});d.addEventListener("click",function(a){if(f||4===b.element.readyState||b.element.paused)f=!0,b.element.play(),
d.remove();a.stopPropagation()},!1);d.appendChild(a);d.appendChild(c);return d},q=function(){var a;return{run:function(a,b){var d;try{d=a()}catch(f){q.log(f),q.log(b),q.sendError(b)}finally{return d}},setUrl:function(c){a=c},sendError:function(c){a&&(c=a.replace("[ERRORCODE]",D[c].code),H.get(c))},log:function(){},error:function(a){a.code===D.WRAPPER_URI_TIMEOUT.code&&(g.log("Missing media creative","error","q"),g.log("Missing media creative. Please specify one of the three: 1. `mediaUrl` and `clickUrl`; 2. `originalVast`; 3. Ad Parameters"));
throw a;}}}(),Q=function(a,c,b,d,f){var e;b&&n.isOfDOMType(b,"video")?e=new v(b):n.isNonNullObj(b)&&(e=new X(b,d));e.attr("currentSrc")||e.attr("src");e.attr("currentTime");e._startAd=function(){e.attr("currentTime");e.play()};e.setSource=function(a){a&&(e.updateProp("src",a),e.element.load())};e.play=function(){var a=e.element.play();void 0!==a&&a["catch"](function(a){}).then(function(){})};e.pause=function(){e.element.pause()};e.seekTo=function(a){e.element.currentTime=a};e.width=a;e.height=c;e.addEventListener("pause",
function(){var a=1===e.element.currentTime/e.element.duration;e.element.paused&&!a&&(e.pauseAd?e.pauseAd():e.pause())});e.addEventListener("playing",function(){e.pauseFxnCalled=!1});e.element.addEventListener("durationchange",function(){e.adDuration=Math.floor(e.element.duration)||-2;K.init(e.element,f)},!0);return e},ea=function(a,c){if(!c.config.hidecountdown){var b=ca(c),d=da(c),f=new v("div",n.mergeObjects({"style.backgroundColor":"rgba(0,0,0,0.7)","style.right":"0","style.width":"100%","style.position":"absolute",
"style.color":"white","style.fontSize":"12px","style.fontWeight":"200","style.fontFamily":"Helvetica, Arial, sans-serif",id:"ias-countdown-timer"},d)),e=function(){var c;isNaN(a.video.remainingSeconds)||(c=b.replace(/XX/,a.video.remainingSeconds),f.element.textContent=c)};p.addEventListener("countdownupdate",e);p.addEventListener("EventBridgeEnded",function m(){f.remove();p.removeEventListener("countdownupdate",e);p.removeEventListener("EventBridgeEnded",m)});e();p.addEventListener("AdLoaded",function(){f.appendTo(a)});
a.appendChild(f);return f}},fa=function(a,c){var b=c.mediaFile,d=b.getDuration();if(b=b.getSkipoffset()){var f=L(b,d),e=!1,k=new v("div",{"style.backgroundColor":"rgba(0,0,0,0.7)","style.border":"1px solid white","style.cursor":"pointer","style.color":"white","style.text-align":"center","style.font-size":"12px","style.width":"135px","style.height":"35px","style.line-height":"35px","style.right":"20px","style.bottom":"20px","style.fontWeight":"200","style.fontFamily":"Helvetica, Arial, sans-serif",
"style.position":"absolute",id:"ias-skip-button",name:"skip-ad"}),m=function(){var b=isNaN(f-a.video.currentSeconds)?f:f-a.video.currentSeconds,b=(e=0>=b)?"Skip Ad":"You can skip in XXs".replace(/XX/,b);k.element.textContent=b};p.addEventListener("countdownupdate",m);k.addEventListener("click",function(){e&&p.dispatchEvent("skipped")});p.addEventListener("EventBridgeEnded",function u(){k.remove();p.removeEventListener("countdownupdate",m);p.removeEventListener("EventBridgeEnded",u)});m();a.appendChild(k);
return k}},ca=function(a){var c={engtimer:"Advertisement. Your video will begin in XX seconds.",gertimer:"Nur ein Werbespot. Das Video beginnt in XX Sekunden.",frtimer:"Publicit\u00e9: Votre vid\u00e9o commence dans XX secondes."};return Object.keys(c).reduce(function(b,d){return a.config[d]?c[d]:b},c.engtimer)},da=function(a){var c={topleftcount:{"style.top":"0","style.textAlign":"left"},topmiddlecount:{"style.top":"0","style.textAlign":"center"},toprightcount:{"style.top":"0","style.textAlign":"right"},
bottomleftcount:{"style.bottom":"10px","style.textAlign":"left"},bottommiddlecount:{"style.bottom":"10px","style.textAlign":"center"},bottomrightcount:{"style.bottom":"10px","style.textAlign":"right"}};return Object.keys(c).reduce(function(b,d){return a.config[d]?c[d]:b},c.bottommiddlecount)},L=function(a,c){var b;(b=String(a).match(/([0-9]+)%/))?(b=+b[1],b=b/100*c):b=Date.parse("1970-01-01T"+(a||"00:00:00.0")+"Z")/1E3;return b},E=function(a){var c={vastEventsReset:!1,vpaidEventsReset:!1,bridgeEventsReset:!1,
fullscreenEventsReset:!1,stopAd:function(a){c[a]=!0;c.adManager.video.vpaidEvents||(c.vpaidEventsReset=!0);c.vastEventsReset&&c.vpaidEventsReset&&c.bridgeEventsReset&&c.fullscreenEventsReset&&(a=h.createEvent("AdStopped"),q.log(a),c.adManager.dispatchEvent(a))},attachManager:function(a){c.adManager=a}};return c}(),p=function(){var a={},c,b,d,f=function(a){return a.reduce(function(a,b){a[b]=h.createEvent(b);return a},{})};a.dispatchEvent=function(b,d){var e=a.events[b];e.opts=d;c.dispatchEvent(e)};
a.removeEventListener=function(a,b){c.removeEventListener(a,b)};a.addEventListener=function(a,b){c.addEventListener(a,b)};var e={},k=n.throttle(function(a,b,c,d){d={url:d.video.clickThroughUrl};n.isString(a)?d.url=a:n.isNonNullObj(a)&&!n.isUndefined(a.data)&&n.isNonNullObj(a.data)&&(d=a.data);z.isValid(d.url)?(q.log("AdUnit probably handles adclickthru",a),r.getWindow().open(d.url)):d.playerHandles=!0;c[b].data=d;c[b]()},1E3);a.attachAd=function(f){b=f.vastEvents;(d=f.is("video")||f.is("player")?
f:f.ad)&&a.list.adEventNames.forEach(function(l){var u="AdStopped"===l?"EventBridgeEnded":l;e[u]=a.dispatchEvent.bind(f,u);(b.hasEvent(l)?b:d).subscribe(function(a){var b=n.isNonNullObj(a)?a:{};Object.keys(b).forEach(function(a){e[u][a]=b[a]});if("AdClickThru"===u)k(a,u,e,c);else if("EventBridgeEnded"===u)setTimeout(e[u],0);else e[u](a)},l)})};a.reset=function(){Object.keys(e).forEach(function(a){(b.hasEvent(a)?b:d).unsubscribe(e[a],a)});e={};a.synchronizer.reset()};a.attachTarget=function(a){c=a};
a.init=function(b){a.list=new ga(a,b);a.synchronizer=new ha(a);a.events=f(a.list.eventNames);a.synchronizer.init()};return a}(),ga=function(a,c){var b={startskipper:function(a){},skipped:function(a){},countdownupdate:function(a){},EventBridgeEnded:function(b){a.reset();E.stopAd("bridgeEventsReset");M.reset();E.stopAd("fullscreenEventsReset")},EventBridgeCleanupsFired:function(a){},clickTracking:function(a){e(a)},EventBridgeAdCreated:function(a){q.log(a)},EventBridgeLoadSource:function(a){q.log(a)}},
d={AdClickThru:function(a){e(h.createEvent("clickthrough"));q.log(a)},AdDurationChange:function(a){q.log(a)},AdError:function(a){q.log(a);q.sendError("GENERAL_VPAID_ERROR")},AdExpandedChange:function(a){q.log(a)},AdImpression:function(a){e(h.createEvent("impression"));q.log(a)},AdInteraction:function(a){q.log(a)},AdLinearChange:function(a){q.log(a)},AdLoaded:function(a){q.log(a)},AdLog:function(a){q.log(a)},AdPaused:function(a){e(h.createEvent("pause"));q.log(a)},AdPlaying:function(a){e(h.createEvent("resume"));
q.log(a)},AdSizeChange:function(a){q.log(a)},AdSkippableStateChange:function(a){q.log(a)},AdSkipped:function(a){e(h.createEvent("skip"));q.log(a)},AdStarted:function(a){e(h.createEvent("creativeview"));q.log(a)},AdStopped:function(a){q.log(a)},AdUserAcceptInvitation:function(a){e(h.createEvent("acceptinvitation"));q.log(a)},AdUserClose:function(a){e(h.createEvent("close"));q.log(a)},AdUserMinimize:function(a){e(h.createEvent("collapse"));q.log(a)},AdVideoComplete:function(a){e(h.createEvent("complete"));
q.log(a)},AdVideoFirstQuartile:function(a){e(h.createEvent("firstquartile"));q.log(a)},AdVideoMidpoint:function(a){e(h.createEvent("midpoint"));q.log(a)},AdVideoStart:function(a){e(h.createEvent("start"));q.log(a)},AdVideoThirdQuartile:function(a){e(h.createEvent("thirdquartile"));q.log(a)},AdVolumeChange:function(a){var b=0<getVPAIDAd().getAdVolume()?"unmute":"mute";e(h.createEvent(b));q.log(a)}},f={acceptinvitation:function(a){},acceptinvitationlinear:function(a){e(a)},clickthrough:function(b){a.dispatchEvent("clickTracking")},
close:function(a){},closelinear:function(a){e(a)},collapse:function(a){},complete:function(a){},creativeview:function(b){a.dispatchEvent("startskipper")},exitfullscreen:function(a){e(a)},expand:function(a){e(a)},firstquartile:function(a){},fullscreen:function(a){e(a)},impression:function(a){},midpoint:function(a){},mute:function(a){},pause:function(a){},progress:function(a){e(a)},resume:function(a){},rewind:function(a){e(a)},skip:function(a){},start:function(a){},thirdquartile:function(a){},unmute:function(a){}},
e=function(a){q.log(a);var b=a.type.toLowerCase();("progress"===b?K.getQueuedUrls():c[b]||[]).filter(z.isValid).forEach(function(b){var c=ia.run(b);q.log(a.type,c);H.getImg(b).then(function(a){q.log("IMG: sent",b,a)},function(a){q.log("IMG: failed",b,a)})})},k=n.mergeObjects(b,d,f),f=Object.keys(f),d=Object.keys(d),m=[].concat(f).concat(d);return{eventNames:[].concat(f).concat(d).concat(Object.keys(b)),vastEventNames:f,vpaidEventNames:d,adEventNames:m,allListeners:k}},ha=function(a){var c=a.list.allListeners;
return{init:function(){Object.keys(c).forEach(function(b){a.addEventListener(b,c[b])})},reset:function(){Object.keys(c).forEach(function(b){a.removeEventListener(b,c[b])})}}},M=function(){var a={video:void 0},c,b,d=[];a.reset=function(){a.unsubscribe();a.video=void 0;d=[]};var f=["fullscreenchange","mozfullscreenchange","MSFullscreenChange","fullscreenChange","webkitfullscreenchange"],e=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"],k=function(a){return e.some(function(b){return a&&
a[b]})};a.detect=function(e){a.video=e;var l=e.getDocument();f.forEach(function(a){var e=function(a){var d=k(l);d&&c?c(a):!d&&b&&b(a)};l.addEventListener(a,e);d.push(e)})};a.subscribe=function(a,d){"fullscreen"===a?c=d:"exitFullscreen"===a&&(b=d)};a.unsubscribe=function(){var b;a.video&&(b=a.video.getDocument(),f.forEach(function(a){d.forEach(function(c){b.removeEventListener(a,c)})}))};return a}(),K=function(){var a={},c=[];return{init:function(b,c){var f=b&&b.duration;if(f&&-1!==f)return Object.keys(c).forEach(function(b){var k=
Math.floor(L(b,f));a[k]={urlHasBeenSentToQueue:!1,url:c[b]}}),a},shouldSendUrls:function(b){var d=!1;Object.keys(a).forEach(function(f){var e=a[f];f=b>=f;!e.urlHasBeenSentToQueue&&f&&(c.push(e.url),d=e.urlHasBeenSentToQueue=!0)});return d},getQueuedUrls:function(){var a=c;c=[];return a}}}(),R=function(a){this.video=a;var c=0,b=0,d=!1,f=a.element.muted,e={seeking:function(){c=a.element.currentTime},playing:function(){setTimeout(function(){d=!1},0)},pause:function(){d=!0},timeupdate:function(){b=a.element.currentTime/
a.element.duration||0},volumechange:function(){setTimeout(function(){f=a.element.muted},0)}},k=function(b){Object.keys(e).forEach(function(c){a.element[b](c,e[c])})};k("addEventListener");p.addEventListener("EventBridgeEnded",function x(){k("removeEventListener");E.stopAd("vastEventsReset");p.removeEventListener("EventBridgeEnded",x)});var m=function(){return!0},l={acceptinvitation:{name:"click",condition:function(){}},acceptinvitationlinear:{name:"click",condition:function(){}},clickthrough:{name:"click",
condition:m},close:{name:"click",condition:function(){}},closelinear:{name:"click",condition:function(){}},collapse:{name:"click",condition:function(){}},complete:{name:"ended",condition:m,isUnique:!0,fired:!1},creativeview:{name:"playing",condition:m,isUnique:!0,fired:!1},exitfullscreen:{isFullScreenEvent:!0,condition:m},expand:{name:"click",condition:function(){}},firstquartile:{name:"timeupdate",condition:function(){return 0.25<=b},isUnique:!0,fired:!1},fullscreen:{isFullScreenEvent:!0,condition:m},
impression:{name:"playing",condition:m,isUnique:!0,fired:!1},midpoint:{name:"timeupdate",condition:function(){return 0.5<=b},isUnique:!0,fired:!1},mute:{name:"volumechange",condition:function(){return f}},pause:{name:"pause",condition:m},progress:{name:"timeupdate",condition:function(){return K.shouldSendUrls(a.element.currentTime)},isUnique:!1,fired:!1},resume:{name:"playing",condition:function(){return d}},rewind:{name:"seeked",condition:function(){return 0>a.element.currentTime-c}},start:{name:"playing",
condition:m,isUnique:!0,fired:!1},thirdquartile:{name:"timeupdate",condition:function(){return 0.75<=b},isUnique:!0,fired:!1},unmute:{name:"volumechange",condition:function(){return!f}}},g={},h=function(a){return!!l[a]};this.hasEvent=h;M.detect(a);this.subscribe=function(b,c){if(h(c)){var d=n.clone(l[c]);g[c]=function(){d.isUnique&&d.fired||!d.condition()||(b(),d.isUnique&&(d.fired=!0))};d.isFullScreenEvent?M.subscribe(c,g[c]):a.addEventListener(l[c].name,g[c])}};this.unsubscribe=function(b,c){g[c]&&
(a.removeEventListener(l[c].name,g[c]),g=n.del(g,c))}},ja=function(a){this.video=a;var c=0,b=!1,d={seeking:function(){},playing:function(){setTimeout(function(){b=!1},0)},pause:function(){b=!0},timeupdate:function(){c=a.element.currentTime/a.element.duration||0},volumechange:function(){setTimeout(function(){},0)}},f=function(b){Object.keys(d).forEach(function(c){a.element[b](c,d[c])})};f("addEventListener");p.addEventListener("EventBridgeEnded",function C(){f("removeEventListener");E.stopAd("vpaidEventsReset");
p.removeEventListener("EventBridgeEnded",C)});var e=function(){return!0},k={AdClickThru:{name:"click",condition:e},AdImpression:{name:"playing",condition:e,isUnique:!0,fired:!1},AdLoaded:{name:"canplay",condition:e,isUnique:!0,fired:!1},AdRemainingTimeChange:{name:"timeupdate",condition:e},AdPaused:{name:"pause",condition:e},AdPlaying:{name:"playing",condition:function(){return b}},AdStarted:{name:"playing",condition:e,isUnique:!0,fired:!1},AdStopped:{name:"ended",condition:e,isUnique:!0,fired:!1},
AdVideoComplete:{name:"ended",condition:e,isUnique:!0,fired:!1},AdVideoStart:{name:"playing",condition:e,isUnique:!0,fired:!1},AdVideoFirstQuartile:{name:"timeupdate",condition:function(){return 0.25<=c},isUnique:!0,fired:!1},AdVideoMidpoint:{name:"timeupdate",condition:function(){return 0.5<=c},isUnique:!0,fired:!1},AdVideoThirdQuartile:{name:"timeupdate",condition:function(){return 0.75<=c},isUnique:!0,fired:!1},AdVolumeChange:{name:"volumechange",condition:e},AdUserClose:{name:"click",condition:function(){}}},
m={},l=function(a){return!!k[a]};this.hasEvent=l;this.subscribe=function(b,c){if(l(c)){var d=n.clone(k[c]);m[c]=function(){d.isUnique&&d.fired||!d.condition()||(b(),d.isUnique&&(d.fired=!0))};a.addEventListener(k[c].name,m[c])}};this.unsubscribe=function(b,c){m[c]&&(a.removeEventListener(k[c].name,m[c]),m=n.del(m,c))}},S={"%%VIDEO_DURATION%%":"duration","%%REFERRER_URL_UNESC%%":"referrerUrl","%%REFERRER_URL_ESC_ESC%%":"referrerUrlEscEsc","%%CACHEBUSTER%%":"cachebuster","%%CLICK_URL_ESC_ESC%%":"clickThroughUrlEscEsc",
"%%CLICK_URL_UNESC%%":"clickThroughUrl","%%HEIGHT%%":"height","%%WIDTH%%":"width"},ia=function(){var a=function(a){var b=a;Object.keys(S).forEach(function(a){var c=P.get(S[a])||"";b=b.replace(a,c)});return b};return{run:function(c){return a(c)}}}(),P=function(){var a={duration:"",referrerUrl:"",referrerUrlEscEsc:"",cachebuster:"",clickThroughUrl:"",clickThroughUrlEscEsc:"",width:"",height:""},c={clickThroughUrl:!0,referrerUrl:!0},b=function(){a.cachebuster=Math.round((new Date).getTime()/1E3)},d=
function(d,e){var k=c[d];a[d]=e;k&&(a[d+"EscEsc"]=encodeURIComponent(encodeURIComponent(e)));b()};(function(){var a=r.getWindow().location.href;d("referrerUrl",a)})();return{init:function(c){b();Object.keys(a).forEach(function(a){var b=c[a];b&&d(a,b)})},get:function(b){return a[b]},show:function(){return a}}}(),ka=function(){this.vpaid=new B;this.mp4=new B;this.other=new B;this.bucket=function(a){a.isInvalid()||(a.isVPAID()?this.vpaid.push(a):a.isMP4()?this.mp4.push(a):this.other.push(a));return this}.bind(this);
this.selectOptimum=function(a,c,b){return this.vpaid.length?this.vpaid.selectOptimum.apply(this.vpaid,arguments):this.mp4.length?this.mp4.selectOptimum.apply(this.mp4,arguments):this.other.selectOptimum.apply(this.other,arguments)}.bind(this)},T=function(a){var c=!arguments.length;c||Object.keys(a).forEach(function(b){this[b]=a[b]}.bind(this));this.isEmpty=function(){return c};this.getWidth=function(){return parseInt(this.width)||0};this.getHeight=function(){return parseInt(this.height)||0};this.getAspectRatio=
function(){var a=this.getWidth()/this.getHeight();return!isNaN(a)&&isFinite(a)?a:0};this.getBitrate=function(){return parseInt(this.bitrate)||parseInt(this.maxBitrate)||0};this.getUrl=function(){return this.url};this.isProgressive=function(){return"progressive"===this.delivery};this.isMP4=function(){return"video/mp4"===this.type};this.isVPAID=function(){return"VPAID"===this.apiFramework&&("application/javascript"===this.type||"application/x-javascript"===this.type)};this.isInvalid=function(){return[/^rtmp/i].some(function(a){return a.test(this.url)}.bind(this))};
this.getDuration=function(){return this.duration||0};this.getSkipoffset=function(){return this.skipoffset||0}},B=function(a){arguments.length&&a.forEach(function(a){this.push(a)}.bind(this));var c=function(a,b,c){b=Math.abs(a-b.getAspectRatio());a=Math.abs(a-c.getAspectRatio());return b>=a?1:-1},b=function(a,b,c){b=Math.abs(a-b.getWidth());a=Math.abs(a-c.getWidth());return b>=a?1:-1},d=function(a,b,c){b=Math.abs(a-b.getBitrate());a=Math.abs(a-c.getBitrate());return b>=a?1:-1};this.selectByBitrate=
function(a){a=~a?a:0;var b=this.sort(d.bind(null,a));return a?b[0]:b.slice(-1)[0]};this.widthSort=function(a){this.sort(b.bind(null,a||screen.width));a=this.filter(function(a,b,c){return a.getWidth()===c[0].getWidth()});return new B(a)};this.aspectRatioSort=function(a){this.sort(c.bind(null,a));a=this.filter(function(a,b,c){return a.getAspectRatio()===c[0].getAspectRatio()});return new B(a)};this.selectOptimum=function(a,b,c){return this.aspectRatioSort(a/b).widthSort(a).selectByBitrate(c)||new T}};
B.prototype=[];var U=function(a,c,b,d){var f;return{vastEvents:function(a){return h.get("Tracking, Impression, ClickTracking",a).map(function(a){return{event:(h.getAttribute(a,"event")||h.getName(a)).toLowerCase().split(/-|_/g).join(""),urls:h.getData(a)}}).reduce(function(a,b){return a[b.event]?a[b.event].push(b.urls):a[b.event]=[b.urls],a},{})}(a),creativeData:{AdParameters:h.getData(h.getOne("AdParameters",a))},mediaFile:function(a){return h.get("MediaFile",a).map(function(a){var b=h.getAttributes(a);
b.url=h.getData(a);var c=h.getParentUntil(a,"Linear");a=h.getAttributes(c);c=h.getOne("Duration",c);a.duration=c?h.getText(c):void 0;b=n.mergeObjects(b,a);return new T(b)}).reduce(function(a,b){return a.bucket(b)},new ka).selectOptimum(c,b,d)}(a),companionAds:function(a){return(a=h.get("CompanionAds",a))&&a.length?h.serializeXMLNode(a[0]):""}(a),errorUrl:h.getData(h.getOne("Error",a)),clickThroughUrl:h.getData(h.getOne("ClickThrough",a)),progressOffsets:function(a){return h.get('Tracking[event="progress"]',
a).reduce(function(a,b){var c=h.getAttribute(b,"offset"),d=h.getData(b);c&&(a[c]=d);return a},{})}(a),version:function(a){f||(a=h.getOne("VAST",a))&&(f=a.getAttribute("version"));return f}(a)}},O=function(){var a={},c,b,d,f=function(a,b,c,d){d=q.run(h.parseXML.bind(this,d),"XML_PARSE_ERROR");c.push(d);d=h.getOne("VASTAdTagURI",d);return n.isTruthy(d)?H.get(h.getData(d)).then(f.bind(this,a,b,c),b):a(c)},e=function(a){return new U(a,c,b,d)},k=function(a,b){Object.keys(b).forEach(function(c){switch(c){case "vastEvents":a[c]=
n.mergeObjects(a[c],b[c]);break;case "creativeData":b[c].AdParameters&&(a[c].AdParameters=b[c].AdParameters);break;case "mediaFile":b[c].isEmpty()||(a[c]=b[c]);break;case "progressOffsets":a[c]=n.mergeObjects(a[c],b[c]);break;default:b[c]&&(a[c]=b[c])}});return a};a.getXml=function(a,e,f,k,h){c=e;b=f;d=k;k=n.isEmptyObj(h)||n.isFalsy(h.AdParameters)?void 0:(new J(h.AdParameters)).normalize("mediafile","MediaFile").select("MediaFile","MediaFiles").concatenateWithVAST();var p=z.getQueryParams(a);n.isEmptyObj(p)||
n.isFalsy(p.mediaUrl)?e=void 0:(h=z.toRelativeProtocol(p.mediaUrl),p=z.toRelativeProtocol(p.clickUrl),e=(new J).create("MediaFile","MediaFiles",{delivery:"progressive",bitrate:"600",width:e,height:f,type:"video/mp4"}).createCDATA(h,"MediaFile").createCDATA(p,"ClickThrough").concatenateWithVAST());e?(g.log("Using `mediaUrl` and `clickUrl`."),a=Promise.resolve(e)):k?(g.log("Using creativeData.AdParameters."),a=Promise.resolve(k)):(g.log("Using originalVast URL."),a=z.getOriginalVast(a),a=H.get(a));
return a};a.provideXml=function(a){n.isFalsy(a)&&(g.log("Missing media creative","error","q"),g.log("Missing media creative. Please specify one of the three: 1. `mediaUrl` and `clickUrl`; 2. `originalVast`; 3. Ad Parameters"));var b=[];return(new Promise(function(c,d){return f(c,d,b,a)})).then(function(a){return a.map(e).reduce(k,new U)},q.log)};return a}(),la=function(a,c,b){var d,f,e;function g(a){d=a.pageX;f=a.pageY;e=(new Date).getTime()}function m(a){Math.abs(d-a.pageX)<=l&&Math.abs(f-a.pageY)<=
l&&(new Date).getTime()-e<=n&&t(a);d=f=-1E10;e=0}e=f=d=void 0;var l=10,n=250,s=0<=navigator.userAgent.indexOf("iPhone")||0<=navigator.userAgent.indexOf("iPad"),A="ontouchstart"in document.documentElement&&s,x,I=!1,t=function(a){a=(a.target||a.srcElement).id;c.isPaused?c.resumeAd():"ias-skip-button"!==a&&(b.config.continueonclick||c.pauseAd(!0),x!==c&&(c.dispatchEvent?c.dispatchEvent(h.createEvent("click")):(p.dispatchEvent("AdClickThru"),p.dispatchEvent("clickthrough"),q.log("Can't dispatchEvent to IMA, need to create an intermediate dispatch target"),
r.getWindow().open(c.clickThroughUrl))))};d=f=-1E10;e=0;var v=function(){w();var b,d=(b=a.getWindow())&&b.innerWidth&&b.innerHeight,e;try{e=b===top}catch(f){}x=d&&!e?b:c;A?(x.addEventListener("touchstart",g),x.addEventListener("touchend",m)):x.addEventListener("click",t);I=!0},w=function(){x&&I&&(A?(x.removeEventListener("touchstart",g),x.removeEventListener("touchend",m)):x.removeEventListener("click",t),I=!1)};a.element.contentWindow.addEventListener("resize",v);a.element.addEventListener("load",
function(){a.element.contentDocument.addEventListener("onreadystatechange",function(){"complete"===a.element.contentDocument.readyState&&v()})});return{subscribe:v,unsubscribe:w}},ma=function(a,c){a.video=new Q(a.width,a.height,a.environmentVars.videoSlot,a.environmentVars.slot,c.progressOffsets);var b,d=a.video,f=c.mediaFile,e=f.getDuration(),f=f.getSkipoffset();d.countdown=new ea(a,c);d.skipButton=new fa(a,c);d.clickThroughUrl=c.clickThroughUrl;d.currentSeconds=0;d.remainingSeconds=Math.floor(d.element.duration);
d.skipoffsetSeconds=Math.floor(L(f,e));d.isPaused=!1;d.isStarted=!1;d.isStopped=!1;d.pauseFxnCalled=!1;d.vastVersion=c.version;d.adWidth=d.width;d.adHeight=d.height;d.adExpanded=!1;d.adLinear=!0;d.adSkippableState=!1;d.adVolume=d.element.muted?0:d.element.volume;d.adDuration=Math.floor(d.element.duration)||-2;d.adCompanions=c.companionAds;d.adIcons=null;var g=la(a,d,c);g.subscribe();var m={playing:function(){setTimeout(function(){d.isPaused=!1},0)},pause:function(){d.isPaused=!0},timeupdate:function(){d.currentSeconds=
Math.floor(d.element.currentTime);d.remainingSeconds=Math.floor(d.element.duration)-d.currentSeconds;d.adRemainingTime=d.remainingSeconds;d.adSkippableState=d.currentSeconds>=d.skipoffsetSeconds;p.dispatchEvent("countdownupdate")},volumechange:function(){d.adVolume=d.element.volume}};Object.keys(m).forEach(function(a){d.addEventListener(a,m[a])});p.addEventListener("EventBridgeLoadSource",function C(){d.vastEvents=new R(d);d.vpaidEvents=new ja(d);p.attachAd(d);d.setSource(c.mediaFile.url);p.removeEventListener("EventBridgeLoadSource",
C)});p.addEventListener("EventBridgeEnded",function A(){Object.keys(m).forEach(function(a){d.removeEventListener(a,m[a])});g.unsubscribe();p.removeEventListener("EventBridgeEnded",A)});p.addEventListener("AdLoaded",function(){d.isPaused=d.element.paused});d.subscribe=function(a,b,c){d.vpaidEvents.subscribe(c?a.bind(c):a,b)};d.unsubscribe=function(a,b){d.vpaidEvents.unsubscribe(a,b)};var l=function(a){a?["mozRequestFullScreen","webkitRequestFullScreen","msRequestFullScreen","requestFullscreen"].filter(function(a){return d.element[a]}).slice(0,
1).forEach(function(a){d.element[a]()}):["webkitExitFullscreen","mozCancelFullScreen","exitFullscreen"].filter(function(a){return document[a]}).slice(0,1).forEach(function(a){document[a]()})};d._resizeTo=function(b,c,e){"fullscreen"===b||"fullscreen"===e?(b=r.getWindow().innerWidth,c=r.getWindow().innerHeight,l(!0),d.updateProps({"style.width":"100%","style.height":"100%"}),a.updateProps({"style.width":"100%","style.height":"100%"})):(l(!1),d.updateProps({"style.width":h.toPx(b),"style.height":h.toPx(c)}),
a.updateProps({"style.width":h.toPx(b),"style.height":h.toPx(c)}));d.adWidth=b;d.adHeight=c};d.resizeAd=function(a,b,c){d._resizeTo(a,b,c);p.dispatchEvent("AdSizeChange")};d.startAd=function(){d.isStarted||d.isStopped||(d.isStarted=!0,d._startAd())};d.stopAd=function(){d.isStarted&&!d.isStopped&&(d.isStopped=!0,d.pause(),p.dispatchEvent("AdStopped"))};d.pauseAd=function(a){!d.isStarted||d.isStopped||d.isPaused||d.pause();a||d.pauseFunction()};d.pauseFunction=function(){d.isPaused=!0;c.config.hideplaybutton||
d.pauseFxnCalled||(d.pauseFxnCalled=!0,b&&b.remove(),b=null,b=new ba(a.width,a.height,d),b.appendTo(a))};d.resumeAd=function(){d.isStarted&&!d.isStopped&&d.isPaused&&(d.play(),d.isPaused=!1,b&&b.remove(),b=null)};d.expandAd=function(){d.adExpanded||(d.adExpanded=!0,l(!0),p.dispatchEvent("AdExpandedChange"))};d.collapseAd=function(){d.adExpanded&&(d.adExpanded=!1,l(!1),p.dispatchEvent("AdExpandedChange"))};d.skipAd=function(){d.adSkippableState&&(d.pause(),p.dispatchEvent("skip"),p.dispatchEvent("AdSkipped"),
p.dispatchEvent("AdStopped"))};d.setAdVolume=function(a){0<=a&&1>=a&&(d.element.volume=a,d.adVolume=a,"onvolumechange"in d.element||p.dispatchEvent("AdVolumeChange"))};return d},na=function(a,c){var b={},d=!1;b.handshakeVersion=function(a){d="2.0"===a;return"2.0"};b.onLoad=function(a){b.resolve=a;return b};b.initAd=function(f,e,g,h,l,n){d&&(b._vast=new ma(a,c),b.vastEvents=b._vast.vastEvents,b._refresh(),b.resolve(b._vast),b._vast._resizeTo(f,e,g),p.addEventListener("skipped",function A(){b._vast.skipAd();
p.removeEventListener("skipped",A)}))};b.subscribe=function(a,c,d){b._vast.subscribe(a,c,d)};b.unsubscribe=function(a,c){b._vast.unsubscribe(a,c)};b.resizeAd=function(a,c,d){b._vast.resizeAd(a,c,d)};b.startAd=function(){b._vast.startAd()};b.stopAd=function(){b._vast.stopAd()};b.pauseAd=function(){b._vast.pauseAd()};b.resumeAd=function(){b._vast.resumeAd()};b.expandAd=function(){b._vast.expandAd()};b.collapseAd=function(){b._vast.collapseAd()};b.skipAd=function(){b._vast.skipAd()};b.setAdVolume=function(a){b._vast.setAdVolume(a)};
b.getAdLinear=function(){return b._vast.adLinear};b.getAdWidth=function(){return b._vast.adWidth};b.getAdHeight=function(){return b._vast.adHeight};b.getAdExpanded=function(){return b._vast.adExpanded};b.getAdSkippableState=function(){return b._vast.adSkippableState};b.getAdRemainingTime=function(){return b._vast.adRemainingTime};b.getAdDuration=function(){return b._vast.adDuration};b.getAdVolume=function(){return b._vast.adVolume};b.getAdCompanions=function(){return b._vast.adCompanions};b.getAdIcons=
function(){return b._vast.adIcons};b._refresh=function(){b.adLinear=b._vast.adLinear;b.adWidth=b._vast.adWidth;b.adHeight=b._vast.adHeight;b.adExpanded=b._vast.adExpanded;b.adSkippableState=b._vast.adSkippableState;b.adRemainingTime=b._vast.adRemainingTime;b.adDuration=b._vast.adDuration;b.adVolume=b._vast.adVolume;b.adCompanions=b._vast.adCompanions;b.adIcons=b._vast.adIcons};return b},aa=function(a,c){a.vast=new na(a,c);a.vast.onLoad(function(b){a.ad=a.vast;p.dispatchEvent("EventBridgeAdCreated")});
p.addEventListener("AdLoaded",function d(){p.removeEventListener("AdLoaded",d)});a.vast.handshakeVersion("2.0");a.vast.initAd(a.width,a.height,a.viewMode,a.desiredBitrate,a.creativeData,a.environmentVars)},oa=function(a){var c=new v("script",{src:a.url,type:"text/javascript"});c.onLoad=function(a){c.resolve=a;return c};c.addEventListener("load",function(){c.ad=c.getWindow().getVPAIDAd();c.resolve(c);c.ad.handshakeVersion("2.0");c.ad.initAd(a.width,a.height,a.viewMode,a.desiredBitrate,a.creativeData,
a.environmentVars)});return c},$=function(a,c){a.video=new Q(a.width,a.height,a.environmentVars.videoSlot,a.environmentVars.slot,c.progressOffsets);a.vpaid=new oa({url:c.mediaFile.url,width:a.width,height:a.height,viewMode:a.viewMode,desiredBitrate:c.mediaFile.bitrate||a.desiredBitrate,creativeData:c.creativeData||a.creativeData,environmentVars:a.environmentVars});a.vpaid.onLoad(function(b){b.vastEvents=new R(a.video);p.attachAd(a.vpaid);a.ad=a.vpaid.ad;p.dispatchEvent("EventBridgeAdCreated")});p.addEventListener("AdLoaded",
function d(){p.removeEventListener("AdLoaded",d)});p.addEventListener("skipped",function f(){a.ad.skipAd();p.removeEventListener("skipped",f)});a.appendChild(a.vpaid)},t={pendingEvents:[],vastHandlerCachedAdSlot:void 0,postToJsvid:function(a){t.vastHandlerCachedAdSlot||(t.vastHandlerCachedAdSlot=window.getVPAIDAd(!0).adSlot);var c=t.vastHandlerCachedAdSlot.ownerDocument,c=c.defaultView||c.parentWindow;c.location.origin||(c.location.origin=c.location.protocol+"//"+c.location.hostname+(c.location.port?
":"+c.location.port:""));try{var b=c.location.origin;if("null"===b||"undefined"===b)b=!1;c.postMessage(JSON.stringify(a),b||"*");g.log('Posted to IAS script, event "'+a.messageType+'", params: '+JSON.stringify(a.eventData))}catch(d){}},sendVideoMessage:function(a,c){var b={messageType:a,id:g.getVideoId(),time:g.now(),eventData:c};t.handshakeComplete?t.postToJsvid(b):t.pendingEvents.push(b)},sendPerfSample:function(a){t.sendVideoMessage("PerfCheckpoint",{type:"jswrapper",code:a,timestamp:g.now()})},
issueVPAIDEvent:function(a,c,b,d){if(a instanceof s){var f=r.getWindow(),e=this.adTag;if("AdStarted"===a.eventName){if(f.issuedAdStart&&f.issuedAdStart[e])return;f.issuedAdStart||(f.issuedAdStart={});f.issuedAdStart[e]=!0}if("AdImpression"===a.eventName){if(f.issuedAdImpression&&f.issuedAdImpression[e])return;f.issuedAdImpression||(f.issuedAdImpression={});f.issuedAdImpression[e]=!0}(this.dispatchEvent_?this.dispatchEvent_.bind(this):V.dispatchEvent_.bind(this))(a.eventName);d||(b=b||a.eventName,
t.sendVideoMessage(b,c||{}))}else g.log("This function expects an object from the vpaidEvents enumeration.","error","j")},triggerAdRemainingTimeChange_:function(){var a=w.getAdRemainingTime.call(this),c=this.application_;a||(a=w.getAdDuration.call(this));t.issueVPAIDEvent(this.vpaidEvents.AD_DURATION_CHANGE,{adRemainingTime:a},"adRemainingTimeChange",c.lastRemainingTime===a);c.lastRemainingTime=a},exposeHandshake:function(){var a=g.getVideoId();this.adContainer["IASid"+a]=function(c){g.log("IAS function called with "+
c+". Expected : "+a+".");c==a&&(t.handshakeComplete=!0,t.flushPendingEvents(),t.sendPerfSample(60));return t.handshakeComplete?"jvw":null}},flushPendingEvents:function(){0<t.pendingEvents.length&&(t.pendingEvents.forEach(function(a){t.postToJsvid(a)}),t.pendingEvents.length=0)}},V={initialUserAction:function(){g.log("initialUserAction called");var a=this,c,b=function(){clearTimeout(c);a.adIsCreated=!0;a.loadAdsManager_(a.adDisplayContainer_.manager);a.sendPerfSample(120);a.initialized=!0;g.log("adsManager initialized.");
a.sendVideoMessage("initAd",{width:a.width_,height:a.height_,viewMode:"fullscreen"===a.viewMode_?"fullscreen":"normal",desiredBitrate:a.desiredBitrate_});a.sendPerfSample(110);a.adDisplayContainer_.manager.loadSource();a.companionAds=a.adDisplayContainer_.manager.ad.adCompanions};this.initialCalled||(this.initialCalled=!0,a.adIsCreated=!1,a.sendPerfSample(100),a.adDisplayContainer_=new Z(a.width_,a.height_,a.viewMode_,a.desiredBitrate_,a.creativeData_,a.environmentVars_),a.adDisplayContainer_.manager.addEventListener("EventBridgeAdCreated",
b.bind(a)),c=setTimeout(function(){g.log("cannot init adsManager.","error","G");a.issueVPAIDEvent(a.vpaidEvents.AD_ERROR,{})},5E3),a.wrappedUrl=g.getFullUrl(),a.adTag=g.getAdTagUrl(),a.adDisplayContainer_.provideVastURL(a.wrappedUrl))},requestAds:function(){g.log("requestAds called");this.adsRequested||(this.adsRequested=!0,this.application_.adsDone_||(this.application_.onClick_(),g.log("requesting ads from "+this.application_.adTagUrl_)))},onAdError_:function(a){g.log('Ad Error with message: "'+
a+'" called, but no callback provided by player.')},getVolume:function(){return this.adsManager_.ad.getAdVolume()},loadAdsManager_:function(a){g.log("Ads manager loaded.");this.sendPerfSample(130);this.adsManager_=a;F.addDomElement(a.element);this.processAdsManager_(this.adsManager_)},processAdsManager_:function(a){g.log("processing adsManager...");var c="AdClickThru AdDurationChange AdError AdExpandedChange AdImpression AdInteraction AdLinearChange AdLoaded AdLog AdPaused AdPlaying AdSizeChange AdSkippableStateChange AdSkipped AdStarted AdStopped AdUserAcceptInvitation AdUserClose AdUserMinimize AdVideoComplete AdVideoFirstQuartile AdVideoMidpoint AdVideoStart AdVideoThirdQuartile AdVolumeChange acceptinvitation acceptinvitationlinear clickthrough close closelinear collapse complete creativeview exitfullscreen expand firstquartile fullscreen impression midpoint mute pause progress resume rewind skip start thirdquartile unmute".split(" "),
b;for(b in c)a.addEventListener(c[b],this.onAdEvent_.bind(this))},onContentPauseRequested_:function(){this.application_.pauseForAd()},onAdEvent_:function(a){g.log("Ad event: "+a.type);var c=this.vpaidEvents,b;switch(a.type){case "AdClickThru":this.issueVPAIDEvent(c.AD_CLICK_THRU,{});this.application_.adClicked();break;case "AdDurationChange":b=!0;break;case "AdError":c="Ad blocked"===a.opts?"Ad blocked":a.toString();g.log("Ad error: "+c,"R");this.onAdError_(c);this.sendVideoMessage("adError",{error:c});
break;case "AdImpression":this.sendPerfSample(140);var d;a={};d=this.videoSlot;if("object"===typeof HTMLElement?d instanceof HTMLElement:d&&"object"===typeof d&&null!==d&&1===d.nodeType&&"string"===typeof d.nodeName)a.vpWidth=this.videoSlot.offsetWidth,a.vpHeight=this.videoSlot.offsetHeight;if(d=this.adsManager_.ad._vast)a.vVer=d.vastVersion;d=g.getAdTagUrl();a.origVastDomain=d&&d.match(/\/\/(.[^/]+)/)[1];a.isVpaid="undefined"!==typeof this.adsManager_.vpaid;this.issueVPAIDEvent(c.AD_IMPRESSION,a);
break;case "AdLinearChange":this.issueVPAIDEvent(c.AD_LINEAR_CHANGE,{});break;case "AdLoaded":this.issueVPAIDEvent(c.AD_LOADED,{});b=!0;this.sendVideoMessage("AdVolumeChange",{volume:this.getVolume()});break;case "AdLog":this.issueVPAIDEvent(c.AD_LOG,{});break;case "AdPaused":this.issueVPAIDEvent(c.AD_PAUSED,{});break;case "AdPlaying":this.issueVPAIDEvent(c.AD_PLAYING,{});break;case "AdSizeChange":this.issueVPAIDEvent(c.AD_SIZE_CHANGE,{});break;case "AdSkipped":this.issueVPAIDEvent(c.AD_SKIPPED,{});
break;case "AdSkippableStateChange":this.issueVPAIDEvent(c.AD_SKIPPABLE_STATE_CHANGE,{});break;case "AdStarted":this.issueVPAIDEvent(this.vpaidEvents.AD_STARTED,{});break;case "AdStopped":this.issueVPAIDEvent(c.AD_STOPPED,{});break;case "AdVideoComplete":this.issueVPAIDEvent(c.AD_VIDEO_COMPLETE,{});break;case "AdVideoFirstQuartile":this.issueVPAIDEvent(c.AD_VIDEO_FIRST_QUARTILE,{});break;case "AdVideoMidpoint":this.issueVPAIDEvent(c.AD_VIDEO_MIDPOINT,{});break;case "AdVideoStart":this.sendPerfSample(150);
this.application_.pauseForAd();this.issueVPAIDEvent(c.AD_VIDEO_START,{});break;case "AdVideoThirdQuartile":this.issueVPAIDEvent(c.AD_VIDEO_THIRD_QUARTILE,{});break;case "AdVolumeChange":this.issueVPAIDEvent(c.AD_VOLUME_CHANGE,{volume:this.getVolume()});break;case "AdUserClose":this.issueVPAIDEvent(c.AD_USER_CLOSE,{})}b&&this.triggerAdRemainingTimeChange_()},dispatchEvent_:function(a){var c,b=r.getWindow();a&&(c=r.getDoc().createEvent("HTMLEvents"),c.initEvent(a,!0,!0),"AdSkipped"===a?(this.adVideoSkippedIssued=
!0,b.dispatchEvent(c),this.stopLock()):"AdVideoComplete"===a?(this.adVideoCompleteIssued=!0,b.dispatchEvent(c),this.stopLock()):"AdStopped"===a?(this.adStoppedIssued=!0,this.stopLock(),setTimeout(function(){b.dispatchEvent(c)},750)):b.dispatchEvent(c))},setContainerDims:function(a,c){this.adContainer.style.height=c+"px";this.adContainer.style.width=a+"px"},subscribe:function(a,c,b){g.log("subscribing to "+c);"AdError"===c?this.onAdError_=a.bind(b):r.getWindow().addEventListener(c,a.bind(b))},unsubscribe:function(a,
c,b){g.log("unsubscribing from "+c);r.getWindow().removeEventListener(c,a.bind(b))}},s=function(a){this.eventName=a},pa={AD_LOADED:new s("AdLoaded"),AD_STARTED:new s("AdStarted"),AD_STOPPED:new s("AdStopped"),AD_SKIPPED:new s("AdSkipped"),AD_SKIPPABLE_STATE_CHANGE:new s("AdSkippableStateChange"),AD_SIZE_CHANGE:new s("AdSizeChange"),AD_LINEAR_CHANGE:new s("AdLinearChange"),AD_DURATION_CHANGE:new s("AdDurationChange"),AD_EXPANDED_CHANGE:new s("AdExpandedChange"),AD_REMAINING_TIME_CHANGE:new s("AdRemainingTimeChange"),
AD_VOLUME_CHANGE:new s("AdVolumeChange"),AD_IMPRESSION:new s("AdImpression"),AD_VIDEO_START:new s("AdVideoStart"),AD_VIDEO_FIRST_QUARTILE:new s("AdVideoFirstQuartile"),AD_VIDEO_MIDPOINT:new s("AdVideoMidpoint"),AD_VIDEO_THIRD_QUARTILE:new s("AdVideoThirdQuartile"),AD_VIDEO_COMPLETE:new s("AdVideoComplete"),AD_CLICK_THRU:new s("AdClickThru"),AD_INTERACTION:new s("AdInteraction"),AD_USER_ACCEPT_INVITATION:new s("AdUserAcceptInvitation"),AD_USER_MINIMIZE:new s("AdUserMinimize"),AD_USER_CLOSE:new s("AdUserClose"),
AD_PAUSED:new s("AdPaused"),AD_PLAYING:new s("AdPlaying"),AD_LOG:new s("AdLog"),AD_ERROR:new s("AdError")},qa={handshakeVersion:function(){return"2.0"},initAd:function(a,c,b,d,f,e){try{g.log("initAd called");this.videoSlot=e.videoSlot;this.adSlot=e.slot;this.sendPerfSample(70);var h=g.getQueryParamByName("forceHeight"),m=g.getQueryParamByName("forceWidth");"string"===typeof h&&h.length&&(c=h);"string"===typeof m&&m.length&&(a=m);"string"===typeof a&&(a=parseInt(a.replace("px","")));"string"===typeof c&&
(c=parseInt(c.replace("px","")));this.width_=a;this.height_=c;this.viewMode_=b;this.desiredBitrate_=d;this.creativeData_=f;this.environmentVars_=e;this.isRhythmOne="undefined"!==typeof e.rhythmone;var l=e.videoSlot&&e.videoSlot.videoSlotCanAutoPlay,p="true"===g.getQueryParamByName("forceStart");if(l||p)this.environmentVars_.videoSlotCanAutoPlay=!0;var n=this.adSlot.ownerDocument;(n.defaultView||n.parentWindow).ias_ev=function(a){var b={},c;for(c in a)"videoSlot"!==c&&"slot"!==c&&(b[c]=a[c]);return b}(e);
var q=this;(function(){var a=r.getDoc().createElement("ias-ad");a.style.top=0;a.style.setProperty("position","absolute","important");a.style.left=0;a.style.height="100%";a.style.width="100%";q.adSlot.insertBefore(a,a.nextSibling);q.adContainer=a;q.sendPerfSample(80);F.addDomElement(a)})();(function(){q.adContainer.getVersion=function(){return q.application_.version_}})();(function(){var a=g.getVideoId(),b=g.getIasScript(a);g.log("IAS script path: "+b);q.exposeHandshake();g.loadJsCssFile(b,"js",q.adContainer.ownerDocument);
q.sendPerfSample(90);g.log("attaching ias script with id "+a)})();this.initialUserAction();this.setContainerDims(a,c)}catch(s){N("html5Video_initAd",s)}},getAdSlotDocOrigin:function(){return this.adSlot?this.adSlot.ownerDocument.origin:void 0},resizeAd:function(a,c,b,d){"string"===typeof b&&(b=b.toLowerCase());"string"===typeof a&&(a=parseInt(a.replace("px","")));"string"===typeof c&&(c=parseInt(c.replace("px","")));if(d||a!==this.width_||c!==this.height_)g.log("resizeAd called"),this.adsManager_&&
(this.width_=a,this.height_=c,this.sendVideoMessage("resizeAd",{width:a,height:c,viewMode:"fullscreen"===b||this.application_.fullscreen?"fullscreen":"normal"}),this.adsManager_.ad.resizeAd(a,c,"normal"!==b||this.application_.fullscreen?"fullscreen":"normal"),this.setContainerDims(a,c))},startAd:function(){this.started||(this.adsManager_.ad.startAd(),this.issueVPAIDEvent(this.vpaidEvents.AD_STARTED,{}),this.started=!0);g.log("startAd called")},stopAd:function(){g.log("stopAd called");this.issueVPAIDEvent(this.vpaidEvents.AD_STOPPED,
{});this.adsManager_.ad.stopAd()},pauseAd:function(){g.log("pauseAd called");this.adsManager_.ad.pauseAd()},resumeAd:function(){g.log("resumeAd called");this.adsManager_.ad.resumeAd()},expandAd:function(){g.log("expandAd called");this.application_.onFullscreenClick_()},collapseAd:function(){g.log("collapseAd called");this.application_.onFullscreenClick_()},skipAd:function(){g.log("skipAd called");this.adsManager_.ad.skipAd()},getVPAID:function(){return this}},w={getAdLinear:function(){return this.adsManager_.ad.getAdLinear()},
setAdLinear:function(){g.log("'setAdLinear' is not implemented","warn")},getAdWidth:function(){return this.width_},setAdWidth:function(){g.log("'setAdWidth' is not implemented","warn")},getAdHeight:function(){return this.height_},setAdHeight:function(){g.log("'setAdHeight' is not implemented","warn")},getAdExpanded:function(){return this.application_.fullscreen?1:0},setAdExpanded:function(){g.log("'setAdExpanded' is not implemented","warn")},getAdSkippableState:function(){return this.adsManager_.ad.getAdSkippableState()},
setAdSkippableState:function(){g.log("'setAdSkippableState' is not implemented","warn")},getAdRemainingTime:function(){return this.adsManager_.ad.getAdRemainingTime()},setAdRemainingTime:function(){g.log("'setAdRemainingTime' is not implemented","warn")},getAdDuration:function(){var a=this.adsManager_.ad.getAdDuration();return a||-1},setAdDuration:function(){g.log("'setAdDuration' is not implemented","warn")},getAdVolume:function(){return this.adsManager_.ad.getAdVolume()},setAdVolume:function(a){this.adsManager_.ad.setAdVolume(a)},
getAdCompanions:function(){return this.companionAds},setAdCompanions:function(){g.log("'setAdCompanions' is not implemented","warn")},getAdIcons:function(){g.log("'getAdIcons' is not implemented","warn")},setAdIcons:function(){g.log("'setAdIcons' is not implemented","warn")}};Object.defineProperty(w,"adLinear",{get:function(){return this.getAdLinear()},set:function(a){this.setAdLinear(a)}});Object.defineProperty(w,"adWidth",{get:function(){return this.getAdWidth()},set:function(a){this.setAdWidth(a)}});
Object.defineProperty(w,"adHeight",{get:function(){return this.getAdHeight()},set:function(a){this.setAdHeight(a)}});Object.defineProperty(w,"adExpanded",{get:function(){return this.getAdExpanded()},set:function(a){this.setAdExpanded(a)}});Object.defineProperty(w,"adSkippableState",{get:function(){return this.getAdSkippableState()},set:function(a){this.setAdSkippableState(a)}});Object.defineProperty(w,"adRemainingTime",{get:function(){return this.getAdRemainingTime()},set:function(a){this.setAdRemainingTime(a)}});
Object.defineProperty(w,"adDuration",{get:function(){return this.getAdDuration()},set:function(a){this.setAdDuration(a)}});Object.defineProperty(w,"adVolume",{get:function(){return this.getAdVolume()},set:function(a){this.setAdVolume(a)}});Object.defineProperty(w,"adCompanions",{get:function(){return this.getAdCompanions()},set:function(a){this.setAdCompanions(a)}});Object.defineProperty(w,"adIcons",{get:function(){return this.getAdIcons()},set:function(a){this.setAdIcons(a)}});var W=function(a){var c=
this,b=r.getWindow();this.application_=a;this.contentCompleteCalled_=!1;this.adsManager_=null;this.initialized=this.adsRequested=this.initialCalled=!1;this.companionAds="";this.stopLock=function(){c.videoCallSentByJsVid&&c.adStoppedIssued&&(c.adVideoSkippedIssued||c.adVideoCompleteIssued)&&setTimeout(function(){var a;F.clearDomElements();g.log("dt -4 issued, issuing AdStopped");a=r.getDoc().createEvent("HTMLEvents");a.initEvent("AdStopped",!0,!0);b.dispatchEvent(a)},250)};b.addEventListener("message",
function(a){var b;try{b=JSON.parse(a.data),"unloadComplete"===b.msg&&b.id==g.getVideoId()&&(c.videoCallSentByJsVid=!0,c.stopLock())}catch(e){}});this.sendPerfSample(30)},y=function(){var a=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange"];this.adTagBox_=r.getDoc().getElementById("vpaidURL");this.fullscreenHeight=this.fullscreenWidth=null;for(var c in a)r.getDoc().addEventListener(a[c],this.bind_(this,this.onFullscreenClick_),!1);this.IAS_VID_OPTS=g.getIasVidOpts();this.fullscreen=
this.adsDone_=this.adsActive_=this.playing_=!1;this.adTagUrl_="";this.version_="17.4.30";t.sendPerfSample(20);this.ads_=new W(this);g.log("VWrapper constructed.")};y.prototype.pauseForAd=function(){this.playing_=this.adsActive_=!0};y.prototype.adClicked=function(){this.IAS_VID_OPTS.continueonclick||this.ads_.adDisplayContainer_.manager.video.element.paused||this.ads_.pauseAd()};y.prototype.bind_=function(a,c){return function(){c.apply(a,arguments)}};y.prototype.isMobilePlatform=function(){var a=g.getUserAgent();
return a.match(/(iPod|iPhone|iPad)/)||-1<a.toLowerCase().indexOf("android")};y.prototype.onClick_=function(){var a;g.log("VWRapper.onClick called");if(this.adsDone_)this.adsActive_&&(this.playing_?this.ads_.pauseAd():this.ads_.resume()),this.playing_=!this.playing_;else{if(a=g.getAdTagUrl())this.adTagUrl_=a;this.adsDone_=!0;this.ads_.initialUserAction()}};y.prototype.onFullscreenClick_=function(){var a,c=r.getWindow(),b=r.getDoc();if(this.fullscreen)if(c=b.exitFullscreen||b.exitFullScreen||b.webkitCancelFullScreen||
b.mozCancelFullScreen)c.call(b);else this.onFullscreenChange_();else(a=b.documentElement.requestFullscreen||b.documentElement.webkitRequestFullscreen||b.documentElement.mozRequestFullscreen||b.documentElement.requestFullScreen||b.documentElement.webkitRequestFullScreen||b.documentElement.mozRequestFullScreen)?(this.fullscreenWidth=c.screen.width,this.fullscreenHeight=c.screen.height,a.call(b.documentElement)):(this.fullscreenWidth=c.innerWidth,this.fullscreenHeight=c.innerHeight,this.onFullscreenChange_());
a.call(b.documentElement)};y.prototype.loadAds_=function(){this.adTagUrl_||(this.adTagUrl_=g.getAdTagUrl());this.ads_.requestAds(this.adTagUrl_)};y.prototype.onFullscreenChange_=function(){this.ads_.sendVideoMessage("adExpandedChange",{});this.fullscreen?this.fullscreen=!1:(this.makeAdsFullscreen_(),this.fullscreen=!0)};y.prototype.makeAdsFullscreen_=function(){this.ads_.resize(this.fullscreenWidth,this.fullscreenHeight)};(function(){var a,c=r.getWindow();t.sendPerfSample(10);"object"!==typeof JSON||
"function"!==typeof postMessage?g.log("Your browser is not compatible with HTML5 video ads","error","B"):(g.log("Building Ads interface..."),g.extend(W.prototype,[V,t,{vpaidEvents:pa},qa,w]),g.log("Constructing VWrapper..."),a=new y,c.getVPAIDAd=function(b){g.log("getVPAIDAd called");b||t.sendPerfSample(50);return a.ads_},t.sendPerfSample(40))})()}catch(ra){N("html5Video_Wrapper",ra)}})();
