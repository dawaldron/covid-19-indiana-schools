(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{489:function(t,e,r){},490:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return c}));var n=r(5),l=r.n(n);function o(source,t,e){return`${e} | ${l()(source,t,"")}`}const c=(t="")=>{const e={"&amp;":"&","&nbsp;":" ","&apos;":"'","&#39;":"'","&quot;":'"',"&#44;":","},r=new RegExp(Object.keys(e).join("|"),"gi");return t.replace(r,t=>e[t.toLowerCase()])}},492:function(t,e,r){"use strict";var n={name:"Breadcrumbs",props:{crumbs:{type:Array,default:()=>[]}}},l=(r(493),r(3)),component=Object(l.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nav",{staticClass:"breadcrumb",attrs:{"aria-label":"breadcrumb"}},[r("ul",t._l(t.crumbs,(function(e,n){return r("li",{key:n,attrs:{"data-testid":"crumb-"+e.name}},[""!==e.link?r("router-link",{attrs:{to:e.link}},[t._v("\n        "+t._s(e.name)+"\n      ")]):r("span",[t._v(t._s(e.name)+" ")])],1)})),0)])}),[],!1,null,"84678a94",null);e.a=component.exports},493:function(t,e,r){"use strict";r(489)},497:function(t,e,r){},498:function(t,e,r){"use strict";var n=r(6),l=r(5),o=r.n(l),c={name:"Arrow",props:{fillColor:{type:String,default:"#000"},title:{type:String,default:""}}},f=r(3),d=Object(f.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{width:"7",height:"12",viewBox:"0 0 7 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[this.title?e("title",[this._v(this._s(this.title))]):this._e(),this._v(" "),e("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.35363 0.646447C6.54889 0.841709 6.54889 1.15829 6.35363 1.35355L1.70718 6L6.35363 10.6464C6.54889 10.8417 6.54889 11.1583 6.35363 11.3536C6.15837 11.5488 5.84178 11.5488 5.64652 11.3536L0.292969 6L5.64652 0.646447C5.84178 0.451184 6.15837 0.451184 6.35363 0.646447Z",fill:this.fillColor}})])}),[],!1,null,null,null).exports,m=r(10),h={name:"Pagination",components:{Arrow:d},props:{currentPage:{type:Number,default:1},totalPages:{type:Number,default:1},pageNameParam:{type:String,default:"page_no"}},data:()=>({pageJump:null}),computed:{...Object(n.c)(["getGlobals"]),...Object(n.c)("translation",["getComponentTranslation"]),cssVars(){return{"--primary-color":o()(this.getGlobals,"info.primary_color.hex","#000000"),"--secondary-color":o()(this.getGlobals,"info.secondary_color.hex","#000000"),"--links-color":o()(this.getGlobals,"info.links_color.hex","#000000"),"--disabled-link":"#E1E1E1"}},paginationWithDots(){return Object(m.b)(this.currentPage,this.totalPages)},translations(){return this.getComponentTranslation("pagination")}},methods:{goToPage(){this.pageJump>0&&this.pageJump<=this.totalPages&&this.$router.push({query:{...this.$route.query,[this.pageNameParam]:this.pageJump}})}}},_=(r(499),Object(f.a)(h,(function(){var t,e,r=this,n=r.$createElement,l=r._self._c||n;return l("nav",{staticClass:"cms-pagination",style:r.cssVars},[l("ul",[l("li",{staticClass:"prev"},[r.currentPage>1?l("nuxt-link",{staticClass:"image-button",attrs:{to:{path:r.$route.path,query:Object.assign({},r.$route.query,(t={},t[r.pageNameParam]=r.currentPage-1,t))}}},[l("arrow",{attrs:{"fill-color":r.cssVars["--primary-color"],title:"Previous Page"}})],1):l("span",{staticClass:"image-button disabled"},[l("arrow",{attrs:{"fill-color":r.cssVars["--disabled-link"],title:"Previous Page"}})],1)],1),r._v(" "),r._l(r.paginationWithDots,(function(t,e){var n;return l("li",{key:e,class:{active:t==r.currentPage}},["..."!==t?l("nuxt-link",{attrs:{to:{path:r.$route.path,query:Object.assign({},r.$route.query,(n={},n[r.pageNameParam]=t,n))}}},[r._v("\n        "+r._s(t)+"\n      ")]):l("span",[r._v(r._s(t))])],1)})),r._v(" "),l("li",{staticClass:"next"},[r.currentPage<r.totalPages?l("nuxt-link",{staticClass:"image-button",attrs:{to:{path:r.$route.path,query:Object.assign({},r.$route.query,(e={},e[r.pageNameParam]=r.currentPage+1,e))}}},[l("arrow",{attrs:{"fill-color":r.cssVars["--primary-color"],title:"Next Page"}})],1):l("span",{staticClass:"image-button disabled"},[l("arrow",{attrs:{"fill-color":r.cssVars["--disabled-link"],title:"Next Page"}})],1)],1),r._v(" "),l("li",{staticClass:"jump"},[l("label",{attrs:{for:"jump-number"}},[r._v(r._s(r.translations.jump_to_page))]),r._v(" "),l("input",{directives:[{name:"model",rawName:"v-model",value:r.pageJump,expression:"pageJump"}],attrs:{id:"jump-number",type:"number",min:"1",max:r.totalPages},domProps:{value:r.pageJump},on:{keyup:function(t){return!t.type.indexOf("key")&&r._k(t.keyCode,"enter",13,t.key,"Enter")?null:r.goToPage.apply(null,arguments)},input:function(t){t.target.composing||(r.pageJump=t.target.value)}}})])],2)])}),[],!1,null,"21e5f2dd",null));e.a=_.exports},499:function(t,e,r){"use strict";r(497)},500:function(t,e,r){"use strict";r.d(e,"b",(function(){return v})),r.d(e,"a",(function(){return P})),r.d(e,"c",(function(){return w})),r.d(e,"d",(function(){return C}));var n=r(77),l=r.n(n),o=r(5),c=r.n(o),f=r(10);async function d(t,{url:e,params:r},n,l){n.filter_ids&&(n.filter_ids=n.filter_ids.split?n.filter_ids.split(","):n.filter_ids);const o=await l.get(e,{params:{...r,...n},cache:{ignoreCache:!1}}),{scores_schedules:c,meta:{links:d}}=o.data,{params:m}=Object(f.a)(d.last);return{games:c.sort((a,b)=>new Date(a.formatted_date)-new Date(b.formatted_date)),filters:t||[],totalPages:+m.page_no,currentPage:+n.page_no||1}}async function m(t,{url:e,params:r},n,l){const[o]=t,c=n.filter_id||o&&o.id,d=await l.get(e,{params:{...r,...n,filter_id:c},cache:{ignoreCache:!1}}),{articles:m,meta:{links:h}}=d.data,{params:_}=Object(f.a)(h.last);return{news:m,filters:t,selectedFilter:c,totalPages:+_.page_no,currentPage:+n.page_no||1}}async function h(t,{url:e,params:r},n,l){const[o]=t,c=n.filter_id||o&&o.id,d=await l.get(e,{params:{...n,...r,filter_id:c},cache:{ignoreCache:!1}}),{live_feeds:m,meta:{links:h}}=d.data,{params:_}=Object(f.a)(h.last);return{feeds:m,filters:t,selectedFilter:c,totalPages:+_.page_no,currentPage:+n.page_no||1}}async function _(t,{url:e,params:r},n,l){let o=e;n.id&&(o=`${e}/${n.id}`);const c=n.filter_ids&&n.filter_ids.split?n.filter_ids.split(","):"",d=await l.get(o,{params:{...r,...n,filter_ids:c},cache:{ignoreCache:!1}}).catch(async t=>l.get(e,{params:{...r,...n,filter_ids:c}}));if(d.data.directory)return{staff:[d.data.directory],filters:t,totalPages:0,total_entries:1,currentPage:1,memberName:d.data.directory.full_name};const{directories:m,meta:{links:h}}=d.data,{params:_}=Object(f.a)(h.last),y=m.reduce((t,e)=>(t.some(t=>t.id===e.id)||t.push(e),t),[]),{search:v}=n;return{staff:y,filters:t,totalPages:+_.page_no,total_entries:h.total_entries,currentPage:+n.page_no||1,search:v}}function y({type:t,fallbackSectionName:e,paths:r},n){return async function({dispatch:o,getters:c,commit:f},d,m){await o("setCustomSectionData",{type:t,fallbackSectionName:e});const h=c.getCustomSectionFilters({type:t}),_=c.getCustomSectionApi(m.defaults.baseURL,r),y=await async function(t,{url:e,params:r},n){let o=t;if(l()(o)){o=(await n.get(e,{params:{...r},cache:{ignoreCache:!1}})).data.meta.filters}return o}(h,_,m);return f("setDynamicPageFilters",{type:t,filters:y}),n(y,_,d,m)}}async function v(t,e,r){const n=t.getters.getCustomSectionPaths;return y({type:"scores_schedules",fallbackSectionName:"Athletics",paths:c()(n,"v4.athletics.main",n.athletics)},d)(t,e,r)}function P(t,e,r){return y({type:"articles",fallbackSectionName:"News",paths:t.getters.getCustomSectionPaths.news},m)(t,e,r)}function w(t,e,r){return y({type:"live_feeds",fallbackSectionName:"Live Feed",paths:t.getters.getCustomSectionPaths.live_feed},h)(t,e,r)}function C(t,e,r){const n=t.getters.getCustomSectionPaths;return y({type:"directories",fallbackSectionName:"Staff",paths:c()(n,"v4.staff.main",n.staff)},_)(t,e,r)}},508:function(t,e,r){},509:function(t,e,r){},518:function(t,e,r){"use strict";var n={name:"ts-col",props:{tsW:{type:[Number,String],default:12},tsXs:{type:[Number,String],default:""},tsSm:{type:[Number,String],default:""},tsLg:{type:[Number,String],default:""},tsOffset:{type:[Number,String],default:0},tsType:{type:String,default:null},tsJustify:{type:String,default:null},tsAlign:{type:String,default:null},tsOrder:{type:[String,Number],default:null}}},l=(r(547),r(3)),component=Object(l.a)(n,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"ts-col",class:["ts-xs-"+t.tsXs,"ts-sm-"+t.tsSm,"ts-lg-"+t.tsLg],style:{order:t.tsOrder,"justify-content":t.tsJustify,display:t.tsType,"align-items":t.tsAlign,"margin-left":100*t.tsOffset/12+"%",width:100*t.tsW/12+"%"}},[t._t("default")],2)}),[],!1,null,"52947d92",null);e.a=component.exports},519:function(t,e,r){"use strict";var n={name:"ts-row",props:{tsType:{type:String,default:""},tsW:{type:[Number,String],default:12},tsJustify:{type:String,default:null},tsAlign:{type:String,default:null}},computed:{styles(){const t=100*this.tsW/12+"%";return{alignItems:this.tsAlign,justifyContent:this.tsJustify,display:this.tsType,width:t}}}},l=(r(548),r(3)),component=Object(l.a)(n,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"ts-row",style:this.styles},[this._t("default")],2)}),[],!1,null,null,null);e.a=component.exports},547:function(t,e,r){"use strict";r(508)},548:function(t,e,r){"use strict";r(509)},600:function(t,e,r){},767:function(t,e,r){"use strict";r(600)},923:function(t,e,r){"use strict";r.r(e);var n=r(6),l=r(5),o=r.n(l),c=r(518),f=r(519),d=r(492),m=r(495),h=r(599),_=r(498),y=r(490),v=r(500),P={name:"LiveFeed",components:{tsCol:c.a,tsRow:f.a,Breadcrumbs:d.a,LoadingIndicator:m.a,Pagination:_.a},beforeRouteUpdate(t,e,r){this&&this.$config.ssg?(this.fetchLivefeed(t.query,document.cookie),r()):r()},asyncData:async({store:t,query:e,$axios:r})=>Object(v.c)(t,e,r),data:()=>({loading:!1,feeds:[],filters:[],bottom:!1,pageNumber:"1",selectedFilter:"",nextPageUrl:"",liveFeedDefaults:h}),head(){return{title:Object(y.a)(this.getGlobals,"info.school_name",this.getSectionName),titleTemplate:Object(y.a)(this.getGlobals,"info.school_name",this.getSectionName)}},computed:{...Object(n.c)(["getGlobals","getPathPrefix","getLiveFeed","getCustomSections","getSectionName"]),...Object(n.c)("translation",["getLanguage"]),htmlColors(){return{"--link-color":o()(this.getGlobals,"info.links_color.hex","#000000")}}},watchQuery(t,e){return this&&this.$config.ssg&&t.page_no!==e.page_no&&window.scrollTo(0,0),!(this&&this.$config.ssg)},created(){this.$config.ssg&&(this.filters=[],this.fetchLivefeed(this.$route.query,document.cookie))},methods:{async fetchLivefeed(t,e){this.loading=!0,this.totalPages=0;const{feeds:r,filters:n,totalPages:l,currentPage:o}=await Object(v.c)(this.$store,t,this.$axios);this.feeds=r,this.filters=n,this.totalPages=l,this.currentPage=o,this.loading=!1},setDefaultAvatar(t){t.target.src="https://www.apptegy.net/fallback/circled_default_avatar.png"},filterFeeds(){this.$router.push({query:{filter_id:this.selectedFilter}})},width(t){return 12/this.feeds[t].live_feed_images.length},openLightbox(t,e,r){this.$store.commit("setPrevFocusedElem",t.target),this.$store.commit("setLightBoxCurrentIndex",r),this.$store.commit("openLightbox"),this.$store.commit("setLightboxImages",e)}}},w=(r(767),r(3)),component=Object(w.a)(P,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"live-feed"}},[r("Breadcrumbs",{attrs:{crumbs:[{name:t.getGlobals.info.school_name,link:t.getPathPrefix+"/"},{name:t.getSectionName,link:t.getPathPrefix+"/live-feed"}]}}),t._v(" "),r("div",{staticClass:"page-container"},[t.filters&&t.filters.length>1?r("div",{staticClass:"filter"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedFilter,expression:"selectedFilter"}],attrs:{name:"filter","aria-label":"Select Live Feed Filter","data-testid":"filter-trigger-live-feed"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedFilter=e.target.multiple?r:r[0]},t.filterFeeds]}},t._l(t.filters,(function(filter){return r("option",{key:filter.id,domProps:{value:filter.id}},[t._v("\n          "+t._s(filter.name)+"\n        ")])})),0)]):t._e(),t._v(" "),t.loading?r("LoadingIndicator"):t._l(t.feeds,(function(e,n){return r("div",{key:n,staticClass:"page-container-item",attrs:{id:e.id}},[r("div",{staticClass:"avatar-holder"},[r("img",{attrs:{alt:"",src:e.avatar},on:{error:t.setDefaultAvatar}})]),t._v(" "),r("div",{staticClass:"status",style:t.htmlColors,domProps:{innerHTML:t._s(e.status)}}),t._v(" "),r("div",{staticClass:"date-author"},[t._v("\n        "+t._s(e.time_ago)+", "+t._s(e.author)+"\n      ")]),t._v(" "),e.live_feed_images.length>0?r("div",{staticClass:"images"},[r("ts-row",t._l(e.live_feed_images,(function(image,l){return r("ts-col",{key:l,attrs:{"ts-w":t.width(n),"ts-align":"center"}},[r("div",{staticClass:"image-wrapper"},[r("img",{attrs:{src:image.url,alt:image.alt_text},on:{click:function(r){return t.openLightbox(r,e.live_feed_images,l)}}})])])})),1)],1):t._e()])})),t._v(" "),t.totalPages>1?r("pagination",{attrs:{"current-page":t.currentPage,"total-pages":t.totalPages}}):t._e()],2)],1)}),[],!1,null,"d0c5f6f8",null);e.default=component.exports}}]);