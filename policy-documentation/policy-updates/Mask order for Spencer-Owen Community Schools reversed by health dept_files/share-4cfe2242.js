window.Teal=window.Teal||{};class Share{constructor(t){this.parent=t,this.svg={close:{title:"Close Share Options",path:'<path d="M12 10.586L6.707 5.293 5.293 6.707 10.586 12l-5.293 5.293 1.414 1.414L12 13.414l5.293 5.293 1.414-1.414L13.414 12l5.293-5.293-1.414-1.414L12 10.586z"/>'},copy:{title:"Copy URL",path:'<path d="M13.863 8.553a4.747 4.747 0 0 1 .888 7.403l-3.658 3.657a4.747 4.747 0 0 1-6.706 0 4.747 4.747 0 0 1 0-6.706l2.534-2.535a5.807 5.807 0 0 0 .37 3.29l-1.076 1.074c-.84.84-.84 2.208 0 3.048.84.84 2.208.84 3.049 0l3.658-3.657c.84-.84.84-2.208 0-3.049a2.138 2.138 0 0 0-1.018-.567zm-.956-4.166a4.747 4.747 0 0 1 6.706 0 4.747 4.747 0 0 1 0 6.706l-2.534 2.535a5.81 5.81 0 0 0-.37-3.29l1.075-1.074c.84-.84.84-2.208 0-3.048a2.158 2.158 0 0 0-3.048 0L11.08 9.874c-.84.84-.84 2.207 0 3.048.29.29.644.478 1.017.567l-1.958 1.959a4.747 4.747 0 0 1-.888-7.403z"/>'},email:{title:"Email",path:'<path d="M3 5.876A.88.88 0 0 1 3.893 5h16.214c.493 0 .893.404.893.876v12.248a.88.88 0 0 1-.893.876H3.893A.892.892 0 0 1 3 18.124V5.876zm9 5.218L3 6.74v1.741l9 4.353 9-4.353v-1.74l-9 4.352z" id="path-1"/>'},embed:{title:"Copy Embed Link",path:'<path d="M10 6.35L4.946 12 10 17.65 8.261 19 2 12l6.261-7L10 6.35zm4 11.3L19.054 12 14 6.35 15.739 5 22 12l-6.261 7L14 17.65z" id="path-1"/>'},facebook:{title:"Share on Facebook",path:'<path d="M12 3.5c4.97 0 9 4.054 9 9.055 0 4.52-3.291 8.266-7.594 8.945v-6.319h2.097l.399-2.617h-2.496v-1.699c0-.716.348-1.414 1.466-1.414h1.135V7.223s-1.03-.177-2.014-.177c-2.056 0-3.4 1.253-3.4 3.523v1.995H8.308v2.617h2.285V21.5C6.291 20.82 3 17.074 3 12.555 3 7.554 7.03 3.5 12 3.5z"/>'},sms:{title:"SMS Share",path:'<path d="M9.943 17.4L4.8 21v-3.6h-.008A1.8 1.8 0 0 1 3 15.605V4.795A1.79 1.79 0 0 1 4.792 3h14.416A1.8 1.8 0 0 1 21 4.795v10.81a1.79 1.79 0 0 1-1.792 1.795H9.943zm-1.808-4.401c.337 0 .644-.04.832-.09v-1.098c-.09.03-.277.06-.465.06-.327 0-.525-.15-.525-.614V9.079h1.02v-1.07h-1.02V6.683H6.541v1.326h-.663v1.07h.663v2.346c0 1.04.446 1.574 1.594 1.574zm1.208-.099h1.594l1.09-1.515 1.088 1.515h1.643l-1.9-2.495L14.65 8.01h-1.594l-.98 1.386-.98-1.386H9.451l1.792 2.396-1.9 2.495zm7.91.099c.337 0 .644-.04.832-.09v-1.098c-.09.03-.277.06-.465.06-.327 0-.525-.15-.525-.614V9.079h1.02v-1.07h-1.02V6.683h-1.436v1.326h-.663v1.07h.663v2.346c0 1.04.446 1.574 1.594 1.574z" id="path-1"/>'},twitter:{title:"Share on Twitter",path:'<path d="M21 6.776a7.213 7.213 0 0 1-2.12.596 3.778 3.778 0 0 0 1.623-2.095 7.273 7.273 0 0 1-2.346.918A3.642 3.642 0 0 0 15.462 5c-2.038 0-3.692 1.696-3.692 3.787 0 .296.032.585.095.862-3.069-.158-5.79-1.664-7.612-3.958a3.856 3.856 0 0 0-.5 1.906c0 1.313.652 2.472 1.643 3.152a3.626 3.626 0 0 1-1.673-.473v.047c0 1.835 1.273 3.366 2.963 3.713-.31.089-.636.133-.973.133-.238 0-.47-.023-.695-.067.47 1.504 1.833 2.599 3.45 2.628A7.292 7.292 0 0 1 3 18.3 10.282 10.282 0 0 0 8.66 20c6.794 0 10.508-5.77 10.508-10.774 0-.164-.003-.329-.01-.49A7.58 7.58 0 0 0 21 6.776" id="path-1"/>'},shareAPI:{title:"Share API",path:'<path d="'+(Teal.Utils.UA.isMobile?"M14.913 15.845l-5.058-2.92a2.998 2.998 0 0 0 .002-1.842l5.061-2.923a3 3 0 1 0-.896-1.792L8.63 9.481a3 3 0 1 0-.007 5.042l5.398 3.117a3 3 0 1 0 .892-1.795z":"M14 5l6 7-6 7V5zm0 4v6c-1.937-.271-3.937.062-6 1s-3.73 2.271-5 4c.909-3.576 2.242-6.242 4-8s4.091-2.758 7-3z")+'"/>'}},this.init()}init(){this._generateShareLinks(),this._createShareOverlay()}_copyLink(t,e){if(!this.copying){if(this.copying=!0,this.inputCopy.classList.remove("tealplayer-vis-hidden"),t.stopImmediatePropagation(),"embed"===e?(this.inputCopy.value=this.embedCode,this.copyText.innerText="EMBED COPIED!"):"url"===e&&(this.inputCopy.value=this.parent.data.pageURL.long,this.copyText.innerText="URL COPIED!"),Teal.Utils.UA.isIOS){let t=document.createRange();t.selectNodeContents(this.inputCopy);let e=window.getSelection();e.removeAllRanges(),e.addRange(t),this.inputCopy.setSelectionRange(0,999999)}else this.inputCopy.select();document.execCommand("copy"),this.inputCopy.classList.add("tealplayer-vis-hidden"),this.copyText.hidden=!1,setTimeout(()=>{this.copyText.hidden=!0,this.copying=!1},3e3)}}_createLink(t,e,a="_blank"){let i=document.createElement("a");return i.href=t,i.target=a,i.appendChild(e),i}_createShareOverlay(){let t=document.createDocumentFragment(),e=this.parent.controls._createDiv("tealplayer-overlay-container");this.overlay=this.parent.controls._createDiv("tealplayer-overlay"),this.overlay.hidden=!0,t.appendChild(this.overlay),this.overlay.appendChild(e),this.overlay.appendChild(this.parent.controls._createBtn(["close"],this)),this.shareTitle=this.parent.controls._createDiv("tealplayer-share-desc"),this.shareTitle.textContent="Share this video:",e.appendChild(this.shareTitle),this.title=this.parent.controls._createDiv("tealplayer-overlay-title"),this.title.textContent=this.parent.data.title,e.appendChild(this.title);let a=this.parent.controls._createDiv("tealplayer-overlay-btn-container");e.appendChild(a),this.parent.data.pageURL.long&&a.appendChild(this.parent.controls._createBtn(["copy"],this)),this.smsShareUrl&&(this.smsLink=this._createLink(this.smsShareUrl,this.parent.controls._createBtn(["sms"],this,!1),"_top"),a.appendChild(this.smsLink)),this.embedCode&&a.appendChild(this.parent.controls._createBtn(["embed"],this)),this.facebookShareUrl&&(this.fbLink=this._createLink(this.facebookShareUrl,this.parent.controls._createBtn(["facebook"],this,!1)),a.appendChild(this.fbLink)),this.twitterShareUrl&&(this.twitterLink=this._createLink(this.twitterShareUrl,this.parent.controls._createBtn(["twitter"],this,!1)),a.appendChild(this.twitterLink)),this.emailShareUrl&&(this.emailLink=this._createLink(this.emailShareUrl,this.parent.controls._createBtn(["email"],this,!1),"_top"),a.appendChild(this.emailLink)),this.shareAPIDataObj&&a.appendChild(this.parent.controls._createBtn(["shareAPI"],this)),this.copyText=this.parent.controls._createDiv("tealplayer-copy-text"),e.appendChild(this.copyText),this.inputCopy=document.createElement("input"),this.inputCopy.classList.add("tealplayer-copy-input"),this.inputCopy.classList.add("tealplayer-vis-hidden"),this.inputCopy.readonly=!0,e.appendChild(this.inputCopy),this.parent.elements.container.appendChild(t)}_generateShareLinks(){let t=this.parent.data.pageURL.long||"",e=this.parent.pageData.baseName||"",a=this.parent.data.title||this.parent.data.headline||"",i=e&&this.parent.data.id?`https://uw-media.${e}.com/embed/video/${this.parent.data.id}?placement=snow-embed`:"";t&&(this._shareAPIEnabled&&Teal.Utils.UA.isMobile||(this.facebookShareUrl=`https://www.facebook.com/sharer/sharer.php?u=${t}`,this.overlay&&(this.fbLink.href=this.facebookShareUrl),a&&(this.parent.pageData.publicationName&&(this.emailShareUrl=`mailto:?subject=${a}&body=Check out this video on ${this.parent.pageData.publicationName}: ${t}`,this.overlay&&(this.emailLink.href=this.emailShareUrl)),this.parent.pageData.twitter&&(this.twitterShareUrl=`https://twitter.com/intent/tweet?url=${t}&text=${a}&via=${this.parent.pageData.twitter}`,this.overlay&&(this.twitterLink.href=this.twitterShareUrl)))),!this._shareAPIEnabled&&Teal.Utils.UA.isMobile&&a&&(Teal.Utils.UA.isAndroid?this.smsShareUrl=`sms:?body=${a} ${encodeURIComponent(t)}`:this.smsShareUrl=`sms:&body=${a} ${encodeURIComponent(t)}`,this.overlay&&(this.smsLink.href=this.smsShareUrl))),!Teal.Utils.UA.isMobile&&i&&(this.embedCode=`<iframe title="${e.toUpperCase()}-Embed Player" width="540" height="350" frameborder="0" scrolling="no" allowfullscreen="true" marginheight="0" marginwidth="0" src="${i}"></iframe>`),this._shareAPIEnabled&&(this.shareAPIDataObj={url:i,title:a,text:this.parent.data.promoBrief||""})}_showOverlay(){this._update(),this.overlay.hidden=!1,this.overlay.querySelector(".tealplayer-btn").focus(),this.parent.controls._controlsHidden()}_update(){this.title.textContent!==this.parent.data.title&&(this.title.textContent=this.parent.data.title,this._generateShareLinks())}_onclose(){this.overlay.hidden=!0,this.parent.controls._showControls(),this.wasPlaying&&(this.parent.controls._onplay(),this.wasPlaying=!1),setTimeout(()=>{this.parent.controls.controlBar.querySelector(".tealplayer-share-btn").focus()},250)}_oncopy(t){this._copyLink(t,"url")}_onembed(t){this._copyLink(t,"embed")}_onshareAPI(){navigator.share(this.shareAPIDataObj)}get _shareAPIEnabled(){return this.parent.settings.share.enableShareAPI&&navigator.share}}window.Teal.Share=Share;