window.socialWarfare=window.socialWarfare||{},function(a,e){"use strict";function t(a){return"string"==typeof a&&a.length>0}if("function"!=typeof e){if("function"!=typeof jQuery)return void console.log("Social Warfare requires jQuery, or $ as an alias of jQuery. Please make sure your theme provides access to jQuery before activating Social Warfare.");var e=jQuery}socialWarfare.paddingTop=parseInt(e("body").css("padding-top")),socialWarfare.paddingBottom=parseInt(e("body").css("padding-bottom")),socialWarfare.initPlugin=function(){if(e("body").css({paddingTop:socialWarfare.paddingTop,paddingBottom:socialWarfare.paddingBottom}),socialWarfare.establishPanels(),socialWarfare.establishBreakpoint(),socialWarfare.panels.staticHorizontal||socialWarfare.panels.floatingSide||socialWarfare.panels.floatingHorizontal){socialWarfare.emphasizeButtons(),socialWarfare.createFloatHorizontalPanel(),socialWarfare.positionFloatSidePanel(),socialWarfare.activateHoverStates(),socialWarfare.handleButtonClicks(),socialWarfare.updateFloatingButtons(),socialWarfare.closeLightboxOverlay(),socialWarfare.preloadPinterestImages(),"object"==typeof swpPinIt&&1==swpPinIt.enabled&&(socialWarfare.createHoverSaveButton(),socialWarfare.triggerImageListeners()),setTimeout(function(){socialWarfare.checkListeners(0,5)},2e3);var i=Date.now();e(a).scroll(function(){i+50-Date.now()<0&&(socialWarfare.updateFloatingButtons(),i=Date.now())})}};var r;socialWarfare.onWindowResize=function(){clearTimeout(r),r=setTimeout(socialWarfare.initPlugin,100)},socialWarfare.establishPanels=function(){return socialWarfare.panels={staticHorizontal:null,floatingSide:null,floatingHorizontal:null},socialWarfare.panels.staticHorizontal=e(".swp_social_panel").not(".swp_social_panelSide"),socialWarfare.panels.floatingSide=e(".swp_social_panelSide"),socialWarfare.panels},socialWarfare.emphasizeButtons=function(){void 0!==socialWarfare.variables.emphasizeIcons&&(socialWarfare.isMobile()||jQuery(".swp_social_panel:not(.swp_social_panelSide)").each(function(a,e){jQuery(e).find(".nc_tweetContainer:not(.total_shares)").each(function(a,e){if(a<socialWarfare.variables.emphasizeIcons){var i=jQuery(e).find(".swp_share").width(),t=jQuery(e).find("i.sw").outerWidth(),r=i+t+35,o=jQuery(e).width(),n=1+(i+35)/o;n<2?jQuery(e).addClass("swp_nohover").css({flex:"2 1 0%"}).find(".iconFiller").width(r):jQuery(e).addClass("swp_nohover").css({flex:n+" 1 0%"}).find(".iconFiller").width(r)}})}))},socialWarfare.activateHoverStates=function(){socialWarfare.trigger("pre_activate_buttons"),e(".swp_social_panel:not(.swp_social_panelSide) .nc_tweetContainer").on("mouseenter",function(){if(!e(this).hasClass("swp_nohover")){socialWarfare.resetStaticPanel();var a=e(this).find(".swp_share").outerWidth(),i=e(this).find("i.sw").outerWidth(),t=e(this).width(),r=1+(a+35)/t;e(this).find(".iconFiller").width(a+i+25+"px"),e(this).css("flex",r+" 1 0%")}}),e(".swp_social_panel:not(.swp_social_panelSide)").on("mouseleave",socialWarfare.resetStaticPanel)},socialWarfare.resetStaticPanel=function(){e(".swp_social_panel:not(.swp_social_panelSide) .nc_tweetContainer:not(.swp_nohover) .iconFiller").removeAttr("style"),e(".swp_social_panel:not(.swp_social_panelSide) .nc_tweetContainer:not(.swp_nohover)").removeAttr("style")},socialWarfare.handleButtonClicks=function(){e(".nc_tweet, a.swp_CTT, .swp-hover-pin-button").off("click"),e(".nc_tweet, a.swp_CTT, .swp-hover-pin-button").on("click",function(i){if(e(this).parent(".swp_print").length>0)return i.preventDefault(),void a.print();if(!0===e(this).hasClass("pinterest_multi_image_select"))return i.preventDefault(),void socialWarfare.openMultiPinterestOverlay(e(this));if(e(this).parent(".swp_more").length>0)return i.preventDefault(),void socialWarfare.openMoreOptions(e(this));if(e(this).hasClass("noPop"))return i;if(void 0===e(this).data("link"))return i;i.preventDefault();var t,r,o,n,s,l,c=e(this).data("link").replace("â€™","'");t=270,r=500,e(this).is(".pinterest, .buffer_link, .flipboard")&&(t=550,r=775),e(this).hasClass("nc_tweet")?l=e(this).parents(".nc_tweetContainer").data("network"):e(this).hasClass("swp_CTT")&&(l="ctt"),o=a.screenY+(a.innerHeight-t)/2,n=a.screenX+(a.innerWidth-r)/2,s="height="+t+",width="+r+",top="+o+",left="+n,a.open(c,l,s),socialWarfare.trackClick(l)})},socialWarfare.openMultiPinterestOverlay=function(a){if(e(".pinterest-overlay").length>0)return e(".pinterest-overlay").fadeIn(),void e(".swp-lightbox-inner").scrollTop(0);var t="",r=a.data("pins"),o="";r.images.forEach(function(a){var e="https://pinterest.com/pin/create/button/?url="+r.url+"&media="+a+"&description="+encodeURIComponent(r.description),i="";i+='<div class="pin_image_select_wrapper">',i+='<img class="pin_image" src="'+a+'" />',i+='<a class="swp-hover-pin-button" href="'+e+'" data-link="'+e+'">Save</a>',i+="</div>",o+=i}),t+='<div class="swp-lightbox-wrapper pinterest-overlay"><div class="swp-lightbox-inner">',t+='<i class="sw swp_pinterest_icon top_icon"></i>',t+='<div class="swp-lightbox-close"></div>',t+="<h5>Which image would you like to pin?</h5>",t+='<div class="pin_images_wrapper">',t+=o,t+="</div>",t+=socialWarfare.buildPoweredByLink(),t+="</div></div>",e("body").append(t),e(".pinterest-overlay").hide().fadeIn(),socialWarfare.handleButtonClicks();var n=999999,s=0,l=e(".pinterest-overlay .pin_images_wrapper img");l.load(function(){++s===l.length&&l.each(function(){e(this).height()<n&&(n=e(this).height())}).promise().done(function(){l.height(n+"px");var a=Math.ceil(l.length/4);for(i=0;i<a;i++){var t=l.slice(4*i,4*i+4),r=t.length/4,o=e(".pin_images_wrapper").width(),s=0;t.each(function(){s+=e(this).width()});var c=o/s;t.each(function(){var a=e(this).width()*c/o*100*r-1;e(this).parent().width(a+"%"),e(this).height("auto")});var p=t.first().height();t.each(function(){e(this).width(e(this).width()).height(p)})}})})},socialWarfare.buildPoweredByLink=function(){var a="";if(!0===socialWarfare.variables.powered_by_toggle){var e="",i="";!1!==socialWarfare.variables.affiliate_link&&(e='<a href="'+socialWarfare.variables.affiliate_link+'" target="_blank">',i="</a>"),a='<div class="swp_powered_by">'+e+'<span>Powered by</span> <img src="/wp-content/plugins/social-warfare/assets/images/admin-options-page/social-warfare-pro-light.png">'+i+"</div>"}return a},socialWarfare.preloadPinterestImages=function(){if(!(e(".pinterest_multi_image_select").length<1)){e(".pinterest_multi_image_select").data("pins").images.forEach(function(a){(new Image).src=a})}},socialWarfare.openMoreOptions=function(a){if(e(".swp-more-wrapper").length>0)return void e(".swp-more-wrapper").fadeIn();var i=a.parents(".swp_social_panel").data("post-id"),t={action:"swp_buttons_panel",post_id:i,_ajax_nonce:swp_nonce};jQuery.post(swp_ajax_url,t,function(a){e("body").append(a),e(".swp-lightbox-wrapper").hide().fadeIn(),socialWarfare.activateHoverStates(),socialWarfare.handleButtonClicks()})},socialWarfare.closeLightboxOverlay=function(){e("body").on("click",".swp-lightbox-close",function(){e(".swp-lightbox-wrapper").fadeOut()}),e(document).keyup(function(a){"Escape"===a.key&&e(".swp-lightbox-wrapper").fadeOut()})},socialWarfare.createFloatHorizontalPanel=function(){if(socialWarfare.panels.staticHorizontal.length){var a=socialWarfare.panels.staticHorizontal.data("float"),i=socialWarfare.panels.staticHorizontal.data("float-mobile"),t=socialWarfare.panels.staticHorizontal.data("float-color"),r=e('<div class="nc_wrapper swp_floating_horizontal_wrapper" style="background-color:'+t+'"></div>'),o="";e(".nc_wrapper").length&&e(".nc_wrapper").remove(),e(".swp_floating_horizontal_wrapper").length&&e(".swp_floating_horizontal_wrapper").remove(),"top"!=a&&"bottom"!=a&&"top"!=i&&"bottom"!=i||(o=socialWarfare.isMobile()?i:a,r.addClass(o).hide().appendTo("body"),socialWarfare.panels.floatingHorizontal=socialWarfare.panels.staticHorizontal.first().clone(),socialWarfare.panels.floatingHorizontal.addClass("nc_floater").appendTo(r),socialWarfare.updateFloatingHorizontalDimensions(),e(".swp_social_panel .swp_count").css({transition:"padding .1s linear"}))}},socialWarfare.updateFloatingHorizontalDimensions=function(){if(socialWarfare.panels.staticHorizontal.length&&socialWarfare.panels.floatingHorizontal){var a="100%",e=0,i=socialWarfare.panels.staticHorizontal,t=i.parent();t.hasClass("swp-hidden-panel-wrap")&&(t=t.parent()),void 0!==i.offset().left&&(e=i.offset().left),void 0!==i.width()&&(a=i.width()),0==e&&(e=t.offset().left),100!=a&&0!=a||(a=t.width()),socialWarfare.panels.floatingHorizontal.css({width:a,left:e})}},socialWarfare.staticPanelIsVisible=function(){var i=!1,t=e(a).scrollTop();return e(".swp_social_panel").not(".swp_social_panelSide, .nc_floater").each(function(r){var o=e(this).offset();if(void 0!==socialWarfare.floatBeforeContent&&"1"!=socialWarfare.floatBeforeContent){var n=e(".swp-content-locator").parent();0===r&&n.length&&n.offset().top>t+e(a).height()&&(i=!0)}e(this).is(":visible")&&o.top+e(this).height()>t&&o.top<t+e(a).height()&&(i=!0)}),i},socialWarfare.updateFloatingButtons=function(){if(socialWarfare.panels.staticHorizontal.length)var a=socialWarfare.panels.staticHorizontal;else{if(!socialWarfare.panels.floatingSide.length)return;var a=socialWarfare.panels.floatingSide}var i=a.data("float");if(1==socialWarfare.isMobile())var i=a.data("float-mobile");return"none"==i?e(".nc_wrapper, .swp_floating_horizontal_wrapper, .swp_social_panelSide").hide():socialWarfare.isMobile()?(socialWarfare.toggleMobileButtons(),void socialWarfare.toggleFloatingHorizontalPanel()):("right"!=i&&"left"!=i||socialWarfare.toggleFloatingVerticalPanel(),void("bottom"!=i&&"top"!=i||socialWarfare.toggleFloatingHorizontalPanel()))},socialWarfare.toggleMobileButtons=function(){socialWarfare.panels.floatingSide.hide();var a=socialWarfare.staticPanelIsVisible()?"collapse":"visible";e(".nc_wrapper, .swp_floating_horizontal_wrapper").css("visibility",a)},socialWarfare.toggleFloatingVerticalPanel=function(){var a="",e=socialWarfare.panels.floatingSide.data("float"),i=socialWarfare.staticPanelIsVisible(),t="";if(socialWarfare.isMobile())return socialWarfare.panels.floatingSide.hide();socialWarfare.panels.floatingSide&&socialWarfare.panels.floatingSide.length||(i=!0),"slide"==socialWarfare.panels.floatingSide.data("transition")?(a=e,t=i?"-150px":"5px",socialWarfare.panels.floatingSide.css(a,t).show()):i?socialWarfare.panels.floatingSide.css("opacity",1).fadeOut(300).css("opacity",0):socialWarfare.panels.floatingSide.css("opacity",0).fadeIn(300).css("display","flex").css("opacity",1)},socialWarfare.hasReferencePanel=function(){return void 0!==socialWarfare.panels.staticHorizontal&&socialWarfare.panels.staticHorizontal.length>0},socialWarfare.toggleFloatingHorizontalPanel=function(){if(socialWarfare.hasReferencePanel()&&socialWarfare.panels.floatingHorizontal){var a=socialWarfare.panels.floatingHorizontal.first(),i=socialWarfare.isMobile()?e(a).data("float-mobile"):e(a).data("float"),t="bottom"==i?socialWarfare.paddingBottom:socialWarfare.paddingTop,r="padding-"+i;"off"!=i&&(socialWarfare.staticPanelIsVisible()?(e(".nc_wrapper, .swp_floating_horizontal_wrapper").hide(),socialWarfare.isMobile()&&e("#wpadminbar").length&&e("#wpadminbar").css("top",0)):(t+=50,e(".nc_wrapper, .swp_floating_horizontal_wrapper").show(),socialWarfare.isMobile()&&"top"==i&&e("#wpadminbar").length&&e("#wpadminbar").css("top",a.parent().height())),e("body").css(r,t))}},socialWarfare.positionFloatSidePanel=function(){var e,i,t,r=socialWarfare.panels.floatingSide;if(r&&r.length&&!r.hasClass("swp_side_top")&&!r.hasClass("swp_side_bottom")){if(e=r.outerHeight(),i=a.innerHeight,e>i)return r.css("top",0);t=(i-e)/2,r.css("top",t)}},socialWarfare.createHoverSaveButton=function(){if(e(".tve_editor_page").length)return e(".sw-pinit-button").remove(),void e(".sw-pinit").each(function(){var a=e(".sw-pinit").contents();e(this).replaceWith(a)});var a=e(document.createElement("a"));return a.css("display: none"),a.addClass("swp-hover-pin-button"),a.text("Save"),socialWarfare.hoverSaveButton=e(a),a},socialWarfare.triggerImageListeners=function(){e(".swp-content-locator").parent().find("img").off("mouseenter",socialWarfare.renderPinterestSaveButton),e(".swp-content-locator").parent().find("img").on("mouseenter",socialWarfare.renderPinterestSaveButton),setTimeout(socialWarfare.triggerImageListeners,2e3)},socialWarfare.getPinMedia=function(a){if(t(swpPinIt.image_source))return swpPinIt.image_source;if(t(a.attr("src")))return a.attr("src");var i=["src","lazy-src","media"],r="";if(i.some(function(e){if(t(a.data(e)))return r=a.data(e),!0}),""!=r){var o=e("<img>");return o.attr("src",r),o.prop("src")}},socialWarfare.getPinDescription=function(a){return t(a.data("pin-description"))?a.data("pin-description"):t(swpPinIt.image_description)?swpPinIt.image_description:t(a.attr("title"))?a.attr("title"):t(a.attr("alt"))?a.attr("alt"):t(swpPinIt.post_title)?swpPinIt.post_title:void 0},socialWarfare.enablePinterestSaveButtons=function(){jQuery("img").on("mouseenter",function(){var a=socialWarfare.findPinterestBrowserSaveButtons();void 0!==a&&a&&socialWarfare.removePinterestBrowserSaveButtons(a)})},socialWarfare.toggleHoverSaveDisplay=function(a){var i=a.offset().top,t=a.offset().left;switch(swpPinIt.vLocation){case"top":i+=15;break;case"middle":var r=a.height()/2-7.5-12;i+=r;break;case"bottom":i+=a.height()-15-24}switch(swpPinIt.hLocation){case"left":t+=15;break;case"center":var r=a.width()/2-7.5-60;t+=r;break;case"right":t+=a.width()-15-120}socialWarfare.hoverSaveButton.css("top",i),socialWarfare.hoverSaveButton.css("left",t),a.on("mouseleave",function(a){"swp-hover-pin-button"!=a.relatedTarget.className&&e(".swp-hover-pin-button").remove()}),e(document.body).append(socialWarfare.hoverSaveButton)},socialWarfare.renderPinterestSaveButton=function(i){function t(i){var t=e(a).width()-1264,r=e(a).height()-506,o=",top="+r+",left="+t;a.open(s,"Pinterest","width=632,height=253,status=0,toolbar=0,menubar=0,location=1,scrollbars=1"+o),socialWarfare.trackClick("pin_image"),e(".swp-hover-pin-button").remove()}if(!(i.relatedTarget&&"swp-hover-pin-button"==i.relatedTarget.className||e(".swp-hover-pin-button").length>0)){var r=e(i.target);if(!(void 0!=typeof swpPinIt.disableOnAnchors&&swpPinIt.disableOnAnchors&&r.parents().filter("a").length||r.outerHeight()<swpPinIt.minHeight||r.outerWidth()<swpPinIt.minWidth||r.hasClass("no_pin")||r.hasClass("no-pin"))){socialWarfare.toggleHoverSaveDisplay(r);var o=socialWarfare.getPinDescription(r),n=socialWarfare.getPinMedia(r),s="http://pinterest.com/pin/create/bookmarklet/?media="+encodeURI(n)+"&url="+encodeURI(document.URL)+"&is_video=false&description="+encodeURIComponent(o);e(".swp-hover-pin-button").on("click",t)}}},socialWarfare.findPinterestBrowserSaveButtons=function(){var e,i,t,r,o,n;return e="rgb(189, 8, 28)",i="rgb(230, 0, 35)",t="8675309",r="14px 14px",o=null,document.querySelectorAll("span").forEach(function(s,l){n=a.getComputedStyle(s),n.backgroundColor!=e&&n.backgroundColor!=i||n.backgroundSize==r&&n.zIndex==t&&(o=s)}),o},socialWarfare.removePinterestBrowserSaveButtons=function(e){var i,t,r;i=e.nextSibling,void 0!=i&&"SPAN"==i.nodeName&&(t=a.getComputedStyle(i),r="24px",0===t.width.indexOf(r)&&0===t.height.indexOf(r)&&i.remove()),e.remove()},socialWarfare.trigger=function(i){e(a).trigger(e.Event(i))},socialWarfare.trackClick=function(a){!0===swpClickTracking&&("function"==typeof ga&&ga("send","event","social_media","swp_"+a+"_share"),"object"==typeof dataLayer&&dataLayer.push({event:"swp_"+a+"_share"}))},socialWarfare.checkListeners=function(a,i){if(!(a>i)){var t=e(".swp_social_panel");if(t.length>0&&t.find(".swp_pinterest"))return void socialWarfare.handleButtonClicks();setTimeout(function(){socialWarfare.checkListeners(++a,i)},2e3)}},socialWarfare.establishBreakpoint=function(){var a=e(".swp_social_panel");socialWarfare.breakpoint=1100,(a.length&&a.data("min-width")||0==a.data("min-width"))&&(socialWarfare.breakpoint=parseInt(a.data("min-width")))},socialWarfare.isMobile=function(){return e(a).width()<socialWarfare.breakpoint},e(document).ready(function(){socialWarfare.initPlugin(),socialWarfare.panels.floatingSide.hide(),e(a).resize(socialWarfare.onWindowResize),"undefined"!=typeof swpPinIt&&swpPinIt.enabled&&socialWarfare.enablePinterestSaveButtons()}),e(a).on("load",function(){"undefined"!=typeof swpPinIt&&swpPinIt.enabled&&socialWarfare.enablePinterestSaveButtons(),a.clearCheckID=0})}(this,jQuery);