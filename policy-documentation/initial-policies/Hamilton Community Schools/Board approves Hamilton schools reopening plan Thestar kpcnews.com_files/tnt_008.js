function onYouTubeIframeAPIReady(){jQuery(window).load(function(){__tnt.log("Init YT:"),__tnt.youtube.players.init()})}window.__tnt||(window.__tnt={}),__tnt.client=function(t,e){return this.obj={},this.obj.userAgent=navigator.userAgent.toLowerCase(),this.obj.browser={name:function(){var t=navigator.userAgent;return-1!==t.indexOf("Chrome")&&-1==t.indexOf("Chromium")&&-1==t.indexOf("OPR")&&-1==t.indexOf("Edge")&&-1==t.indexOf("SamsungBrowser")?"Chrome":-1!==t.indexOf("Safari")&&-1==t.indexOf("Chrome")&&-1==t.indexOf("Chromium")&&-1==t.indexOf("Android")?"Safari":-1!==t.indexOf("Firefox")&&-1==t.indexOf("Seamonkey")?"Firefox":/trident/i.test(t)?"IE":-1!==t.indexOf("OPR")?"Opera":-1!==t.indexOf("SamsungBrowser")?"Samsung Internet":-1!==t.indexOf("Edge")&&-1!==t.indexOf("Chrome")?"Edge":"Other"}()},this.obj.browser.version=function(){if("Other"!=this.obj.browser.name){var t=this.obj.browser.name+"/",e=navigator.userAgent.indexOf(t),n=navigator.userAgent.substring(e+t.length),i=n.indexOf(" ");i>0&&(n=n.substring(0,i));var o=n.indexOf(".",2)>0?n.indexOf(".",2):n.indexOf(".",1),r=n.substring(0,o);return Number(r)}}(),this.obj.platform=t["eb.platform"]={win:/win/.test(this.obj.userAgent),mac:/mac/.test(this.obj.userAgent),touchDevice:function(){try{return"ontouchstart"in document.documentElement}catch(t){return!1}}(),android:this.obj.userAgent.indexOf("android")>-1,ipad:!!this.obj.userAgent.match(/ipad/i),iphone:!!this.obj.userAgent.match(/iphone/i),ipod:!!this.obj.userAgent.match(/ipod/i),winphone:!!this.obj.userAgent.match(/Windows Phone/i),blackberry:!!this.obj.userAgent.match(/BlackBerry/i),webos:!!this.obj.userAgent.match(/webOS/i)},this.obj.platform.ios=this.obj.platform.ipad||this.obj.platform.ipod||this.obj.platform.iphone,this.obj.touchOnly=this.obj.platform.touchDevice&&(this.obj.platform.android||this.obj.platform.ios||this.obj.platform.winphone||this.obj.platform.blackberry||this.obj.platform.webos||this.obj.platform.silk),this.obj.clickEvent=this.obj.touchOnly?"touchend":"click",this.obj.capabilities={supportsCookies:!!navigator.cookieEnabled,supportsLocalStorage:function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(t){return!1}},supportsFlash:function(){}},this.obj}(window),__tnt.user=function(t,e){return this.obj={authToken:!!TNCMS.User.isLoggedIn()||null,screenName:TNCMS.User.getScreenName(),avatar:Cookies.get("tncms-avatarurl"),remember:TNCMS.User.hasPersistentSession(),services:Cookies.get("tncms-services"),update:function(){__tnt.user.loggedIn=!!TNCMS.User.isLoggedIn()||null,__tnt.user.authToken=!!TNCMS.User.isLoggedIn()||null,__tnt.user.screenName=Cookies.get("tncms-screenname"),__tnt.user.remember=TNCMS.User.hasPersistentSession(),__tnt.user.services=Cookies.get("tncms-services"),__tnt&&__tnt.subscription&&__tnt.subscription.access&&__tnt.subscription.access.status&&(__tnt.subscription.access.status.data=null,__tnt.subscription.access.status.trigger(userStatus))}},this.obj.loggedIn=TNCMS.User.isLoggedIn(),this.obj}(window),__tnt.log=function(t){window.console&&console.log(t)},__tnt.urlHash=function(t){var e=new RegExp("#.*[?&]"+t+"=([^&]+)(&|$)"),n=location.href.match(e);return n?n[1]:""},__tnt.isAuthor=!1,document.addEventListener("DOMContentLoaded",function(){if(void 0!==document.body.dataset.authors){var t=JSON.parse(document.body.dataset.authors);__tnt.user.loggedIn&&-1!==t.indexOf(__tnt.user.screenName)&&(__tnt.isAuthor=!0)}}),__tnt.trackEventLater=[],__tnt.trackEvent=function(t){"object"===jQuery.type(t)&&__tnt.trackEventLater.push(t)},__tnt.truncateStr=function(t,e,n){return t.length>e&&(n=n||"",t=t.substring(0,e)+n),t},__tnt.compareArray=function(t,e){if(void 0!==t&&void 0!==e){"string"==typeof t&&(t=JSON.parse(t));return t.filter(function(t){return e.indexOf(t)>-1}).length>0}},__tnt.shuffleArray=function(t){for(var e,n,i=t.length;0!==i;)n=Math.floor(Math.random()*i),i-=1,e=t[i],t[i]=t[n],t[n]=e;return t},__tnt.elementOnScreen=function(t,e){if(0===$(t).length)return!1;var n=$(t),i=$(window),e=e||5,o=i.scrollTop(),r=o+i.height(),a=n.offset().top-e,s=a+n.height()-e;return r>=a&&o<=s},__tnt.outerHeight=function(t,e){var n,i,o=0;return"string"==typeof t?n=document.querySelector(t):"object"==typeof t&&(n=t),null!==n?(i=n.offsetHeight,!0===e&&(o=parseInt(document.defaultView.getComputedStyle(n,"").getPropertyValue("margin-top"))+parseInt(document.defaultView.getComputedStyle(n,"").getPropertyValue("margin-bottom"))),i+o):0},__tnt.dmp={},__tnt.dmp.audienceExtracted=function(t){var e=new CustomEvent("tnt-dmp-audience-extracted",{detail:{userAudience:t}});window.dispatchEvent(e),__tnt.client.capabilities.supportsLocalStorage()&&localStorage.getItem("tncms.dmp.audiences")!==JSON.stringify(t)&&localStorage.setItem("tncms.dmp.audiences",JSON.stringify(t))},__tnt.dmp.behaviorRec=function(t){var e=new CustomEvent("tnt-dmp-behavior-rec",{detail:{userAudience:t}});window.dispatchEvent(e)},__tnt.scrubUrl=function(t){if(-1==location.href.indexOf("tncms/admin"))return t;var e=location.href.split("/")[3],n="https://www."+e,i="https://"+e,o=new RegExp("https://admin[-.].*?.(com|net)/"+e,"g");return"/"==t.charAt(0)&&-1==t.indexOf("/"+e+"/tncms/admin/action/main/preview/site")||1==/^https:\/\/admin[\-\.].*?\.(com|net)/.test(t)&&-1==t.indexOf("/shared-content/")&&0==o.test(t)?"/"+e+"/tncms/admin/action/main/preview/site/-"+t.replace(/https:\/\/admin[\-\.].*?\.(com|net)/,""):0==t.indexOf("http://www."+e)?"/"+e+"/tncms/admin/action/main/preview/site/-"+t.replace("http://www."+e,""):0==t.indexOf(n)?"/"+e+"/tncms/admin/action/main/preview/site/-"+t.replace(n,""):t.indexOf("us-corp-qa-3")?"/"+e+"/tncms/admin/action/main/preview/site/-"+t.replace(i,""):t},__tnt.template=function(t,n,o,r,s){var c="";if(t)if(void 0===o&&(o=!1),"TEMPLATE"==t.nodeName){if("content"in document.createElement("template"))c=document.importNode(t.content,!0);else{c=document.createDocumentFragment();var u=t.childNodes;for(i=0;i<u.length;i++)c.appendChild(u[i].cloneNode(!0))}Array.isArray(r)&&r.forEach(function(t){var n=c;if(t&&(n=c.querySelectorAll(t.element),t.first&&(n=n.slice(0,1))),n){if(t.attr)for(a=0;a<t.attr.length;a++)for(e=0;e<n.length;e++)n[e].setAttribute(t.attr[a].attr,t.attr[a].value);if(t.html)for(i=0;i<n.length;i++)n[i].innerHTML=t.html}}),"function"==typeof s&&s(c),n&&(o?n.insertBefore(c,n.firstChild):n.appendChild(c))}else __tnt.log("__tnt.template - no valid template element found - update to use template tag");else __tnt.log("__tnt.template - no template element found");return c},__tnt.youtube=function(t,e){var n,i;return o={},o.create=[],o.playing=!1,o.state={change:function(t){switch(t.data){case YT.PlayerState.ENDED:__tnt.trackEvent({category:"video",action:"end",label:"youtube",value:"1"}),clearInterval(n);break;case YT.PlayerState.PLAYING:i=-1,t.target!=o.playing&&o.state.pause(),o.playing=t.target,__tnt.trackEvent({category:"video",action:"play",label:"youtube",value:"1"}),n=setInterval(function(){o.videoDataEvent(o.playing)},1e3);break;case YT.PlayerState.PAUSED:__tnt.trackEvent({category:"video",action:"pause",label:"youtube",value:"1"}),clearInterval(n)}},pause:function(){o.playing&&"function"==typeof o.playing.pauseVideo?o.playing.pauseVideo():console.log("TNT: o.playing.pauseVideo is not available")}},o.players={register:function(t){if(0===o.create.length){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}o.create.push(t)},init:function(){o.create.length>0&&(__tnt.log("  Players:"),$.each(o.create,function(t,e){__tnt.log("    "+e),new YT.Player(e,{events:{onStateChange:o.state.change}});var n=document.getElementById(e),i=function(t,e){t[0].isIntersecting?n.dataset.visible="true":n.dataset.visible="false"};new IntersectionObserver(i).observe(n)}))}},o.videoDataEvent=function(t){var e="",r=t.playerInfo.duration,a=t.playerInfo.currentTime,s=Math.round(100-(r-Math.floor(a))/r*100);s>=5&&s<=10?s=10:s>=20&&s<=25?s=25:s>=45&&s<=50?s=50:s>=70&&s<=75?s=75:s>=95&&s<=100&&(s=100),a<=1?(e="video_start",a=0):100==s?(e="video_end",a=r):(e="video_progress",a=r/100*s);var c=new CustomEvent("tntVideoData",{detail:{video_uuid:o.playing.h.dataset.uuid,video_title:o.playing.h.dataset.title,video_provider:"youtube",video_duration:Math.round(r),video_url:t.playerInfo.videoUrl,video_current_time:Math.round(a),video_progress:s,visible:o.playing.h.dataset.visible}});s>i&&(0==s||10==s||25==s||50==s||75==s||100==s)&&(i=s,dispatchEvent(c),console.log(c.detail),dataLayer.push({event:"tncms.event.trigger","tncms.event.trigger.name":e,"tncms.event.trigger.video_uuid":o.playing.h.dataset.uuid,"tncms.event.trigger.video_title":o.playing.h.dataset.title,"tncms.event.trigger.video_provider":"youtube","tncms.event.trigger.video_url":t.playerInfo.videoUrl,"tncms.event.trigger.video_duration":Math.round(r),"tncms.event.trigger.video_current_time":Math.round(a),"tncms.event.trigger.video_percent":s,"tncms.event.trigger.visible":o.playing.h.dataset.visible}),100==s&&clearInterval(n))},o}(window);
//# sourceMappingURL=tnt.440cdcae2c3272df39c09befc9eb3dd6.js.map