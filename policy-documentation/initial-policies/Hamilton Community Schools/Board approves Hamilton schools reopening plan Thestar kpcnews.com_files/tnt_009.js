!function(){function e(e){if("content"in document.createElement("template"))return e.content;var t=document.createDocumentFragment(),o=e.childNodes;for(i=0;i<o.length;i++)t.appendChild(o[i].cloneNode(!0));return t}function t(t,o){var n=e(o).cloneNode(!0),a=n.querySelector(".modal-title").textContent;n.querySelector(".modal-title").textContent=a.replace("{{subject}}",t.subject),n.querySelector(".notification-description").textContent=t.description;var r=n.querySelector(".follow-notify-form");r.action=__tnt.scrubUrl("/search/savedsearch/save/"+t.params),r.dataset.authorId=t.author_id,r.dataset.userUrl=__tnt.scrubUrl(t.user_url);var l=n.querySelector(".follow-notify-form a").href;return n.querySelector(".follow-notify-form a").href=__tnt.scrubUrl(l),n.querySelector(".input-notification-name").value=t.name,document.importNode(n,!0)}function o(){$("#follow-this-modal").modal({show:!1});for(var o=document.querySelectorAll(".followed-notify-btn"),n=0;n<o.length;n++)"A"==o[n].tagName?o[n].style.display="inline":"BUTTON"==o[n].tagName&&(o[n].disabled=!1);document.addEventListener("click",function(o){if(o.target.matches(".followed-notify-btn")){o.preventDefault();var n=o.target;$("#follow-this-modal").modal("show");var a,r=document.getElementById("follow-this-modal");if(__tnt.user.loggedIn){var l={subject:n.dataset.subject,description:n.dataset.description,params:n.dataset.params,name:n.dataset.name,author_id:n.dataset.authorId,user_url:n.dataset.userUrl};a=document.getElementById("follow-this-modal-logged-in");var i=t(l,a);r.replaceChild(i,r.firstElementChild)}else{a=document.getElementById("follow-this-modal-logged-out"),r.replaceChild(e(a).cloneNode(!0),r.firstElementChild);for(var d=r.querySelectorAll("a"),s=0;s<d.length;s++)d[s].href=__tnt.scrubUrl(d[s].href),d[s].href.indexOf(encodeURIComponent("?"))<0?d[s].href+=encodeURIComponent("?followid="+n.id):d[s].href+=encodeURIComponent("&followid="+n.id)}}});var a=document.getElementById("follow-this-modal");a.addEventListener("submit",function(e){function t(e){setTimeout(function(){n.querySelector(".tnt-svg").style.display="none",e.style.display="block",setTimeout(function(){e.style.transition="opacity 400ms ease-in-out",e.style.opacity=0,e.addEventListener("transitionend",function e(){this.style.display="none",this.removeEventListener("transitionend",e)})},2500)},2e3)}if(e.preventDefault(),"FORM"==e.target.tagName){var o=e.target,n=o.querySelector(".follow-btn");n.querySelector(".tnt-svg").style.display="inline-block",n.disabled=!0;var r=new XMLHttpRequest,l=o.action+"&title="+o.title.value;r.open("POST",l,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.onreadystatechange=function(){4===r.readyState&&(200===r.status?(t(a.querySelector(".alert-success")),o.dataset.authorId&&__tnt.trackEvent({network:"Site",socialAction:"Follow",url:o.dataset.userUrl+"profile/"+o.dataset.authorId})):t(a.querySelector(".alert-danger")))},r.send()}});var r=new URLSearchParams(window.location.search),l=r.get("followid");l&&document.getElementById(l)&&document.getElementById(l).click()}"loading"==document.readyState?document.addEventListener("DOMContentLoaded",function(){o()}):o()}();
//# sourceMappingURL=tnt.followed.notifications.6600e99595fd219e961e9882c796e61c.js.map