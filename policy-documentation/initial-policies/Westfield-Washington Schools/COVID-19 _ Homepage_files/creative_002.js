// ACCESSIBLE APP ACCORDION
// AUTHOR BRENTON KELLY - CREATIVE DEVELOPMENT MANAGER - BLACKBOARD INC.
// VERSION 11.11.2020

!function(u){u.fn.csAppAccordion=function(e){var a={accordionBreakpoints:[960,768,640,480,320]};e&&u.extend(a,e);var i,t,d,n=document.createElement("style");return n&&(n.setAttribute("type","text/css"),(i=document.getElementsByTagName("head")[0])&&i.insertBefore(n,i.childNodes[0]),t='body:before {content: "desktop";display: none;}@media (max-width: 1023px) {body:before {content: "768";}}@media (max-width: 767px) {body:before {content: "640";}}@media (max-width: 639px) {body:before {content: "480";}}@media (max-width: 479px) {body:before {content: "320";}}',u.each(a.accordionBreakpoints,function(e,i){switch(i){case 960:t+='.tab-panel div.ui-widget.app div.ui-widget-detail.with-sideb[aria-hidden="false"],.tab-panel div.ui-widget.app div.ui-widget-sidebar[aria-hidden="false"] {width: auto !important;}.tab-panel div.ui-widget.app div.ui-widget-sidebar[aria-hidden="true"] {display: none !important;}.tab-panel div.ui-widget.app .ui-widget-detail.with-sidebar,.tab-panel div.ui-widget.app .ui-widget-sidebar {float: none;}';break;case 768:t+='@media (max-width: 1023px) {.tab-panel div.ui-widget.app div.ui-widget-detail.with-sidebar[aria-hidden="false"],.tab-panel div.ui-widget.app div.ui-widget-sidebar[aria-hidden="false"] {width: auto !important;}.tab-panel div.ui-widget.app div.ui-widget-sidebar[aria-hidden="true"] {display: none !important;}.tab-panel div.ui-widget.app .ui-widget-detail.with-sidebar,.tab-panel div.ui-widget.app .ui-widget-sidebar {float: none;}}';break;case 640:t+='@media (max-width: 767px) {.tab-panel div.ui-widget.app div.ui-widget-detail.with-sidebar[aria-hidden="false"],.tab-panel div.ui-widget.app div.ui-widget-sidebar[aria-hidden="false"] {width: auto !important;}.tab-panel div.ui-widget.app div.ui-widget-sidebar[aria-hidden="true"] {display: none !important;}.tab-panel div.ui-widget.app .ui-widget-detail.with-sidebar,.tab-panel div.ui-widget.app .ui-widget-sidebar {float: none;}}';break;case 480:t+='@media (max-width: 639px) {.tab-panel div.ui-widget.app div.ui-widget-detail.with-sidebar[aria-hidden="false"],.tab-panel div.ui-widget.app div.ui-widget-sidebar[aria-hidden="false"] {width: auto !important;}.tab-panel div.ui-widget.app div.ui-widget-sidebar[aria-hidden="true"] {display: none !important;}.tab-panel div.ui-widget.app .ui-widget-detail.with-sidebar,.tab-panel div.ui-widget.app .ui-widget-sidebar {float: none;}}';break;case 320:t+='@media (max-width: 479px) {.tab-panel div.ui-widget.app div.ui-widget-detail.with-sidebar[aria-hidden="false"],.tab-panel div.ui-widget.app div.ui-widget-sidebar[aria-hidden="false"] {width: auto !important;}.tab-panel div.ui-widget.app div.ui-widget-sidebar[aria-hidden="true"] {display: none !important;}.tab-panel div.ui-widget.app .ui-widget-detail.with-sidebar,.tab-panel div.ui-widget.app .ui-widget-sidebar {float: none;}}'}}),d=document.createTextNode(t),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(d)),this.each(function(){var i=this,t=!1,p={tab:9,enter:13,esc:27,space:32,end:35,home:36,left:37,up:38,right:39,down:40};function e(){var e=window.getComputedStyle(document.querySelector("body"),":before").getPropertyValue("content").replace(/"|'/g,"");"desktop"==e&&(e=960),e=parseInt(e),-1<a.accordionBreakpoints.indexOf(e)?function(){{var a,d,n,r,s;t||(u(".ui-widget.app:not(.tabbed-widget-app)",i).each(function(){u(".ui-widget-header",this).hasClass("ui-helper-hidden")||""==u.trim(u(".ui-widget-header",this).text())?u(this).addClass("no-header"):(u(".ui-widget-header",this).attr({role:"button",tabindex:"0","aria-expanded":"false"}),u(".ui-widget-detail, .ui-widget-sidebar, .ui-widget-footer",this).hide().attr("aria-hidden","true"))}),u(".ui-widget-header",i).not(u(".no-header .ui-widget-header")).not(".tabbed-widget-app .ui-widget-header").click(function(){u(this).attr("aria-expanded","true"==u(this).attr("aria-expanded")?"false":"true").parent().toggleClass("open"),u("~ .ui-widget-detail",this).slideToggle("300","swing").attr("aria-hidden","true"==u("~ .ui-widget-detail",this).attr("aria-hidden")?"false":"true"),u("~ .ui-widget-sidebar",this).slideToggle("300","swing").attr("aria-hidden","true"==u("~ .ui-widget-sidebar",this).attr("aria-hidden")?"false":"true"),u("~ .ui-widget-footer",this).slideToggle("300","swing").attr("aria-hidden","true"==u("~ .ui-widget-footer",this).attr("aria-hidden")?"false":"true")}),u(".ui-widget-header",i).not(u(".no-header .ui-widget-header")).not(".tabbed-widget-app .ui-widget-header").keydown(function(e){switch(e.keyCode){case p.space:case p.enter:e.preventDefault(),u(this).attr("aria-expanded","true"==u(this).attr("aria-expanded")?"false":"true").parent().toggleClass("open"),u("~ .ui-widget-detail",this).slideToggle("300","swing").attr("aria-hidden","true"==u("~ .ui-widget-detail",this).attr("aria-hidden")?"false":"true"),u("~ .ui-widget-sidebar",this).slideToggle("300","swing").attr("aria-hidden","true"==u("~ .ui-widget-sidebar",this).attr("aria-hidden")?"false":"true"),u("~ .ui-widget-footer",this).slideToggle("300","swing").attr("aria-hidden","true"==u("~ .ui-widget-footer",this).attr("aria-hidden")?"false":"true")}}),a=u(":not(.no-header) .ui-widget-header, :not(.tabbed-widget-app) .ui-widget-header",i),d=u(a).index(u(a).first()),n=u(a).eq(u(a).index(u(a).first())),r=u(a).index(u(a).last()),s=u(a).eq(u(a).index(u(a).last())),u(a).keydown(function(e){var i=a.index(this),t=-1;switch(e.keyCode){case p.up:case p.left:e.preventDefault(),t=u(this).is(n)?r:i-1;break;case p.down:case p.right:e.preventDefault(),t=u(this).is(s)?d:i+1}-1!=t&&a.eq(t).focus()}),t=!0)}}():t&&(u(".ui-widget.app:not(.tabbed-widget-app)",i).each(function(){u(this).removeClass("open"),u(".ui-widget-header",this).removeAttr("role tabindex aria-expanded"),u(".ui-widget-detail, .ui-widget-sidebar, .ui-widget-footer",this).removeAttr("style aria-hidden"),u(".ui-widget-sidebar",this).show()}),u(".ui-widget-header",i).not(".tabbed-widget-app .ui-widget-header").unbind(),t=!1)}u("div[id^=sw-content-container]",i).each(function(){u(".ui-widget.app.tabbed-widget",this).length&&u(".ui-widget.app:not(.tabbed-widget)",this).each(function(){u(this).addClass("tabbed-widget-app")})}),e(),u(window).resize(function(){e()})})}}(jQuery);