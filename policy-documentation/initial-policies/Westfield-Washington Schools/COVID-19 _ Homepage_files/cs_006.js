// RESPONSIVE PHOTO GALLERY ROTATOR | INCLUDES CUSTOM JQUERY MOBILE SCRIPT FOR SWIPE EVENTS
// AUTHOR BRENTON KELLY - CREATIVE DEVELOPMENT MANAGER - BLACKBOARD, INC.
// VERSION 10.05.2020

!function($){$.fn.creativeGalleryRotate=function(settings){var config={efficientLoad:"yes",imageWidth:960,imageHeight:405,appHeader:"no",titles:"no",captions:"no",playPause:"no",mainControls:"no",galleryOverlay:"no",linkedElement:["image"],contMoreLink:"no",contMoreLinkText:"Read More",descMoreLink:"no",descMoreLinkText:"Read More",bullets:"no",bulletControls:"no",thumbnails:"no",thumbnailWidth:122,thumbnailHeight:52,thumbnailSlideDirection:"horizontal",hoverPause:"yes",fullScreenRotator:"no",fullScreenBreakpoints:["960","768","640","480","320"],autoRotate:"yes",transitionType:"fade",transitionSpeed:2,customResize:"no",customResizeFunction:function(e){},onImageLoad:function(){},allImagesLoaded:function(){},onThumbnailLoad:function(){},allThumbnailsLoaded:function(){},onTransitionStart:function(){},onTransitionEnd:function(){},allLoaded:function(){}};return settings&&$.extend(config,settings),this.each(function(){var element=this,moduleID=$(element).parent().parent().attr("id").replace("pmi-",""),myJSON=eval("photoGallery"+moduleID),recordNum=myJSON.Album.Images.length,elemID=moduleID,csKeyCodes={tab:9,enter:13,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40};$(window).bind("resize",windowResize),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,l=Number(arguments[1])||0;for((l=l<0?Math.ceil(l):Math.floor(l))<0&&(l+=t);l<t;l++)if(l in this&&this[l]===e)return l;return-1});var getWidth=$(window).width();function gatherMedia(){var e="";if("fade"==config.transitionType)for(var t=0;t<recordNum;t++){var l,a,i,o=0==t?" first active":"";1<recordNum?(l=1==t?" next":"",i="yes"==config.efficientLoad&&2==t?" next-load":"",a=t==recordNum-1?" last prev":""):i=a=l="";var s=myJSON.Album.Images[t].src.split("?"),r=myJSON.Album.lgpath+s[0];e+='<li class="image loading hidden'+o+l+a+i+'" aria-hidden="'+(-1<o.indexOf("active")?"false":"true")+'" index="'+t+'">',e+='<span class="record-src hidden">'+r+"</span>",e+='<span class="record-title hidden">'+myJSON.Album.Images[t].photoname+"</span>",e+='<span class="record-link hidden">'+myJSON.Album.Images[t].link+"</span>",e+='<span class="record-link-target hidden">'+myJSON.Album.Images[t].target+"</span>",e+='<div class="loader">Loading</div>',e+="</li>"}else if("slide"==config.transitionType)if(1==recordNum)for(var n=myJSON.Album.Images[0].src.split("?"),m=myJSON.Album.lgpath+n[0],t=0;t<3;t++){e+='<li class="'+(h=1==t?"image loading active":"image loading")+'" aria-hidden="'+(-1<h.indexOf("active")?"false":"true")+'">',e+='<span class="record-src hidden">'+m+"</span>",e+='<span class="record-title hidden">'+myJSON.Album.Images[0].photoname+"</span>",e+='<span class="record-link hidden">'+myJSON.Album.Images[0].link+"</span>",e+='<span class="record-link-target hidden">'+myJSON.Album.Images[0].target+"</span>",e+='<div class="loader">Loading</div>',e+="</li>"}else if(2==recordNum)for(var t=0,g=1;t<4;t++){var h=0==t?"image loading prev":1==t?"image loading active":2==t?"image loading next":"yes"==config.efficientLoad&&3==t?"image loading next-load":"image loading",s=myJSON.Album.Images[g].src.split("?"),r=myJSON.Album.lgpath+s[0];e+='<li class="'+h+'" index="'+g+'" aria-hidden="'+(-1<h.indexOf("active")?"false":"true")+'">',e+='<span class="record-src hidden">'+r+"</span>",e+='<span class="record-title hidden">'+myJSON.Album.Images[g].photoname+"</span>",e+='<span class="record-link hidden">'+myJSON.Album.Images[g].link+"</span>",e+='<span class="record-link-target hidden">'+myJSON.Album.Images[g].target+"</span>",e+="</li>",1==g?g=0:g++}else if(3==recordNum)for(t=0,g=2;t<6;t++){h=0==t?"image loading prev":1==t?"image loading active":2==t?"image loading next":"yes"==config.efficientLoad&&3==t?"image loading next-load":"image loading",s=myJSON.Album.Images[g].src.split("?"),r=myJSON.Album.lgpath+s[0];e+='<li class="'+h+'" index="'+g+'" aria-hidden="'+(-1<h.indexOf("active")?"false":"true")+'">',e+='<span class="record-src hidden">'+r+"</span>",e+='<span class="record-title hidden">'+myJSON.Album.Images[g].photoname+"</span>",e+='<span class="record-link hidden">'+myJSON.Album.Images[g].link+"</span>",e+='<span class="record-link-target hidden">'+myJSON.Album.Images[g].target+"</span>",e+="</li>",2==g?g=0:g++}else for(t=0,g=recordNum-1;t<recordNum;t++){h=0==t?"image loading prev":1==t?"image loading active":2==t?"image loading next":"yes"==config.efficientLoad&&3==t?"image loading next-load":"image loading",s=myJSON.Album.Images[g].src.split("?"),r=myJSON.Album.lgpath+s[0];e+='<li class="'+h+'" index="'+g+'" aria-hidden="'+(-1<h.indexOf("active")?"false":"true")+'">',e+='<span class="record-src hidden">'+r+"</span>",e+='<span class="record-title hidden">'+myJSON.Album.Images[g].photoname+"</span>",e+='<span class="record-link hidden">'+myJSON.Album.Images[g].link+"</span>",e+='<span class="record-link-target hidden">'+myJSON.Album.Images[g].target+"</span>",e+="</li>",g==recordNum-1?g=0:g++}buildStructure(e)}function buildStructure(e){var t="",t='<div class="ui-widget-detail">';if(t+='   <div class="rs-photo-gallery-container" id="rs-photo-gallery-container-'+elemID+'">',t+='   <div class="rs-photo-gallery-images">',t+='       <ul class="rs-photo-gallery-images-list">'+e+"</ul>",t+="   </div>","yes"==config.thumbnails&&1<recordNum){for(var l="",a=0;a<recordNum;a++){var i,o,s=0==a?" first active":"";o=1<recordNum?(i=1==a?" next":"",a==recordNum-1?" last prev":""):i="";var r=myJSON.Album.Images[a].src.split("?");l+='<li class="rs-photo-gallery-thumbnail thumbnail-image loading hidden'+s+i+o+'" role="button" tabindex="0" aria-label="Navigate to Slide '+(a+1)+'">',l+='<span class="thumbnail-src hidden">'+(myJSON.Album.lgpath+r[0])+"</span>",l+='<span class="thumbnail-title hidden">'+myJSON.Album.Images[a].photoname+"</span>",l+="</li>"}t+='<div class="rs-photo-gallery-thumbnails-outer">',t+='<div class="rs-photo-gallery-thumb-control back hidden" role="button" tabindex="0" aria-label="Scroll Thumbnails Backward"></div>',t+='<div class="rs-photo-gallery-thumbnails">',t+='<ul class="rs-photo-gallery-thumbnail-list">'+l+"</ul>",t+="</div>",t+='<div class="rs-photo-gallery-thumb-control next hidden" role="button" tabindex="0" aria-label="Scroll Thumbnails Forward"></div>',t+="</div>"}if("yes"==config.bullets&&1<recordNum){t+='<div class="rs-photo-gallery-bullets-outer">',t+='\t<div class="rs-photo-gallery-bullets ui-clear">',"yes"==config.bulletControls&&(t+='<div class="rs-photo-gallery-bullet-control back" role="button" tabindex="0" aria-label="Navigate to Previous Slide"></div>');for(var n=1;n<=recordNum;n++)t+=1==n?'<div class="rs-photo-gallery-bullet active first" role="button" tabindex="0" aria-label="Navigate to Slide '+n+'"></div>':2==n&&n==recordNum?'<div class="rs-photo-gallery-bullet next prev last" role="button" tabindex="0" aria-label="Navigate to Slide '+n+'"></div>':2==n?'<div class="rs-photo-gallery-bullet next" role="button" tabindex="0" aria-label="Navigate to Slide '+n+'"></div>':n==recordNum?'<div class="rs-photo-gallery-bullet prev last" role="button" tabindex="0" aria-label="Navigate to Slide '+n+'"></div>':'<div class="rs-photo-gallery-bullet" role="button" tabindex="0" aria-label="Navigate to Slide '+n+'"></div>';"yes"==config.bulletControls&&(t+='<div class="rs-photo-gallery-bullet-control next" role="button" tabindex="0" aria-label="Navigate to Next Slide"></div>'),t+="</div>",t+="</div>"}"yes"!=config.titles&&"yes"!=config.captions&&"yes"!=config.descMoreLink||("yes"==config.titles&&"no"==config.captions?"hide"==jQuery.trim(myJSON.Album.Images[0].photoname).toLowerCase()&&("yes"!=config.descMoreLink||""==jQuery.trim(myJSON.Album.Images[0].link))?t+='<div class="rs-photo-gallery-desc hidden">':t+='<div class="rs-photo-gallery-desc">':"no"==config.titles&&"yes"==config.captions?!("hide"!=jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()&&""!=jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()||"yes"==config.descMoreLink&&""!=jQuery.trim(myJSON.Album.Images[0].link))?t+='<div class="rs-photo-gallery-desc hidden">':t+='<div class="rs-photo-gallery-desc">':"yes"==config.titles&&"yes"==config.captions&&(("hide"==jQuery.trim(myJSON.Album.Images[0].photoname).toLowerCase()&&"hide"==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()||"hide"==jQuery.trim(myJSON.Album.Images[0].photoname).toLowerCase()&&""==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase())&&("yes"!=config.descMoreLink||""==jQuery.trim(myJSON.Album.Images[0].link))?t+='<div class="rs-photo-gallery-desc hidden">':t+='<div class="rs-photo-gallery-desc">'),"yes"==config.titles&&(t+='<div class="rs-photo-gallery-title">',"hide"==jQuery.trim(myJSON.Album.Images[0].photoname).toLowerCase()?t+='   <div class="rs-photo-title active hidden"></div>':(t+='   <div class="rs-photo-title active">',""!=jQuery.trim(myJSON.Album.Images[0].link)&&(-1<$.inArray("title",config.linkedElement)||-1<$.inArray("all",config.linkedElement))?t+='<h1><a href="'+jQuery.trim(myJSON.Album.Images[0].link)+'" target="'+myJSON.Album.Images[0].target+'">'+jQuery.trim(myJSON.Album.Images[0].photoname)+"</a></h1>":t+="<h1>"+jQuery.trim(myJSON.Album.Images[0].photoname)+"</h1>",t+="</div>"),1<recordNum&&("hide"==jQuery.trim(myJSON.Album.Images[1].photoname).toLowerCase()?t+='   <div class="rs-photo-title next hidden"></div>':(t+='   <div class="rs-photo-title next">',""!=jQuery.trim(myJSON.Album.Images[1].link)&&(-1<$.inArray("title",config.linkedElement)||-1<$.inArray("all",config.linkedElement))?t+='<h1><a href="'+jQuery.trim(myJSON.Album.Images[1].link)+'" target="'+myJSON.Album.Images[1].target+'">'+jQuery.trim(myJSON.Album.Images[1].photoname)+"</a></h1>":t+="<h1>"+jQuery.trim(myJSON.Album.Images[1].photoname)+"</h1>",t+="   </div>")),t+="</div>"),"yes"==config.captions&&(t+='<div class="rs-photo-gallery-caption">',"hide"==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()?t+='   <div class="rs-photo-caption active hidden"></div>':(t+='   <div class="rs-photo-caption active">',t+="       <p>"+jQuery.trim(myJSON.Album.Images[0].caption)+"</p>",t+="   </div>"),1<recordNum&&("hide"==jQuery.trim(myJSON.Album.Images[1].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[1].caption).toLowerCase()?t+='   <div class="rs-photo-caption next hidden"></div>':(t+='   <div class="rs-photo-caption next">',t+="       <p>"+jQuery.trim(myJSON.Album.Images[1].caption)+"</p>",t+="   </div>")),t+="</div>")),"yes"!=config.titles&&"yes"!=config.captions||("yes"==config.descMoreLink&&(""!=jQuery.trim(myJSON.Album.Images[0].link)?t+='<div class="rs-photo-gallery-desc-more-link"><a href="'+myJSON.Album.Images[0].link+'" target="'+myJSON.Album.Images[0].target+'" aria-label="Read more about gallery slide 1: '+jQuery.trim(myJSON.Album.Images[0].photoname).replace(/&#39;/gi,"'").replace(/&quot;/gi,'"')+'"><span>'+config.descMoreLinkText+"</span></a></div>":t+='<div class="rs-photo-gallery-desc-more-link hidden" style="display: none;"><a href="'+myJSON.Album.Images[0].link+'" target="'+myJSON.Album.Images[0].target+'" aria-label="Read more about gallery slide 1: '+jQuery.trim(myJSON.Album.Images[0].photoname).replace(/&#39;/gi,"'").replace(/&quot;/gi,'"')+'"><span>'+config.descMoreLinkText+"</span></a></div>"),t+="</div>"),1<recordNum&&("yes"==config.mainControls&&(t+='<div class="rs-photo-gallery-control back" role="button" tabindex="0" aria-label="Navigate to Slide '+recordNum+" of "+recordNum+'"></div>',t+='<div class="rs-photo-gallery-control next" role="button" tabindex="0" aria-label="Navigate to Slide 2 of '+recordNum+'"></div>'),"yes"==config.playPause&&(t+='<div class="rs-photo-gallery-control play-pause playing" role="button" tabindex="0" aria-label="Pause Gallery - Currently on Slide 1 of '+recordNum+'"></div>')),"yes"==config.contMoreLink&&(""!=jQuery.trim(myJSON.Album.Images[0].link)?t+='<div class="rs-photo-gallery-more-link"><a href="'+myJSON.Album.Images[0].link+'" target="'+myJSON.Album.Images[0].target+'" aria-label="Read more about gallery slide 1: '+jQuery.trim(myJSON.Album.Images[0].photoname).replace(/&#39;/gi,"'").replace(/&quot;/gi,'"')+'"><span>'+config.contMoreLinkText+"</span></a></div>":t+='<div class="rs-photo-gallery-more-link hidden" style="display: none;"><a href="'+myJSON.Album.Images[0].link+'" target="'+myJSON.Album.Images[0].target+'" aria-label="Read more about gallery slide 1: '+jQuery.trim(myJSON.Album.Images[0].photoname).replace(/&#39;/gi,"'").replace(/&quot;/gi,'"')+'"><span>'+config.contMoreLinkText+"</span></a></div>"),"yes"==config.galleryOverlay&&(""!=jQuery.trim(myJSON.Album.Images[0].link)&&-1<$.inArray("overlay",config.linkedElement)||""!=jQuery.trim(myJSON.Album.Images[0].link)&&-1<$.inArray("all",config.linkedElement)?t+='<span class="rs-photo-gallery-overlay" tabindex="0" role="link" onclick="'+("_self"==myJSON.Album.Images[0].target?"window.location.href = '"+jQuery.trim(myJSON.Album.Images[0].link)+"';":"window.open('"+jQuery.trim(myJSON.Album.Images[0].link)+"');")+'" aria-label="Read more about gallery slide 1: '+jQuery.trim(myJSON.Album.Images[0].photoname).replace(/&#39;/gi,"'").replace(/&quot;/gi,'"')+'"></span>':t+='<span class="rs-photo-gallery-overlay" aria-label="Read more about gallery slide 1: '+jQuery.trim(myJSON.Album.Images[0].photoname).replace(/&#39;/gi,"'").replace(/&quot;/gi,'"')+'"></span>'),t+="</div></div>",$(element).append(t),"slide"==config.transitionType&&sliderDimReset()}function loadInitImages(){loadImage(!0,0),"slide"==config.transitionType&&1==recordNum?(loadImage(!0,1),loadImage(!0,2)):1<recordNum&&loadImage(!0,1),"slide"==config.transitionType&&2<=recordNum&&loadImage(!0,2)}function loadImage(e,t){var l=1==e?$(".image.loading",element).eq(t):$(".image.loading.next-load",element),a=jQuery.trim($(".record-link",l).text()),i=jQuery.trim($(".record-link-target",l).text());"hide"==jQuery.trim($(".record-title",l).text()).toLowerCase()||jQuery.trim($(".record-title",l).text());$('<img src="'+jQuery.trim($(".record-src",l).text())+'" alt="'+jQuery.trim($(".record-title",l).text())+'" />').one("load",function(){$(".record-src, .record-title, .record-link, .record-link-target, .loader",l).remove(),l.removeClass("loading hidden next-load").prepend($(this)),""!=a&&(-1<$.inArray("image",config.linkedElement)||-1<$.inArray("all",config.linkedElement))&&l.children("img").wrapAll("<a href='"+a+"' target='"+i+"' tabindex='"+(l.hasClass("active")?"0":"-1")+"'></a>"),windowResize(),config.onImageLoad.call(this),$(".image.loading",element).length||config.allImagesLoaded.call(this)})}function loadImages(){$(".image.loading",element).each(function(){var e=$(this),t=jQuery.trim($(".record-link",e).text()),l=jQuery.trim($(".record-link-target",e).text());"hide"==jQuery.trim($(".record-title",e).text()).toLowerCase()||jQuery.trim($(".record-title",e).text());$('<img src="'+jQuery.trim($(".record-src",e).text())+'" alt="'+jQuery.trim($(".record-title",e).text())+'" />').one("load",function(){$(".record-src, .record-title, .record-link, .record-link-target, .loader",e).remove(),e.removeClass("loading hidden").prepend($(this)),""!=t&&(-1<$.inArray("image",config.linkedElement)||-1<$.inArray("all",config.linkedElement))&&e.children("img").wrapAll("<a href='"+t+"' target='"+l+"' tabindex='"+(e.hasClass("active")?"0":"-1")+"'></a>"),windowResize(),config.onImageLoad.call(this),$(".image.loading",element).length||config.allImagesLoaded.call(this)})})}function batchImageLoad(){$(".image.batch-item",element).each(function(){var e=$(this),t=jQuery.trim($(".record-link",e).text()),l=jQuery.trim($(".record-link-target",e).text());"hide"==jQuery.trim($(".record-title",e).text()).toLowerCase()||jQuery.trim($(".record-title",e).text());$('<img src="'+jQuery.trim($(".record-src",e).text())+'" alt="'+jQuery.trim($(".record-title",e).text())+'" />').one("load",function(){$(".record-src, .record-title, .record-link, .record-link-target, .loader",e).remove(),e.removeClass("loading hidden batch-item").prepend($(this)),""!=t&&(-1<$.inArray("image",config.linkedElement)||-1<$.inArray("all",config.linkedElement))&&e.children("img").wrapAll("<a href='"+t+"' target='"+l+"' tabindex='"+(e.hasClass("active")?"0":"-1")+"'></a>"),config.onImageLoad.call(this),$(".image.loading",element).length||config.allImagesLoaded.call(this)})})}function loadThumbs(){"yes"==config.thumbnails&&1<recordNum&&$(".thumbnail-image.loading",element).each(function(){var n=$(this),e="hide"==jQuery.trim($(".thumbnail-title",n).text()).toLowerCase()?"":'title="'+jQuery.trim($(".thumbnail-title",n).text())+'"';$('<img src="'+jQuery.trim($(".thumbnail-src",n).text())+'" '+e+' alt="'+jQuery.trim($(".thumbnail-title",n).text())+'" />').one("load",function(){var e,t,l,a,i,o,s,r;$(".thumbnail-src, .thumbnail-title",n).remove(),n.removeClass("loading hidden").prepend($(this)),config.onThumbnailLoad.call(this),$(".thumbnail-image.loading",element).length||(config.allThumbnailsLoaded.call(this),"vertical"==config.thumbnailSlideDirection?(a=$(".rs-photo-gallery-thumbnail-list",element).outerWidth(!0),$(".rs-photo-gallery-thumbnails-outer",element).css("width",a+"px"),$(".rs-photo-gallery-thumbnails",element).css("width",a+"px"),$(".rs-photo-gallery-thumbnails",element).outerHeight(!0)<(s=$(".rs-photo-gallery-thumbnail-list",element).outerHeight(!0))&&(e=$(".rs-photo-gallery-thumb-control.back",element).outerHeight(!0)+10,t=$(".rs-photo-gallery-thumb-control.next",element).outerHeight(!0)+10,$(".rs-photo-gallery-thumb-control",element).removeClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({top:e+"px",bottom:t+"px"}),$(".rs-photo-gallery-thumbnail-list",element).css({"padding-top":"0px","padding-bottom":"0px","margin-top":"0px","margin-bottom":"0px"}))):"horizontal"==config.thumbnailSlideDirection&&(l=0,$(".rs-photo-gallery-thumbnail",element).each(function(){l+=$(this).outerWidth(!0)}),$(".rs-photo-gallery-thumbnail-list",element).css("width",l+"px"),$(".rs-photo-gallery-thumbnails",element).outerWidth(!0)<(a=$(".rs-photo-gallery-thumbnail-list",element).outerWidth(!0))&&(i=$(".rs-photo-gallery-thumb-control.back",element).outerWidth(!0)+10,o=$(".rs-photo-gallery-thumb-control.next",element).outerWidth(!0)+10,$(".rs-photo-gallery-thumb-control",element).removeClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({left:i+"px",right:o+"px"}),$(".rs-photo-gallery-thumbnail-list",element).css({"padding-left":"0px","padding-right":"0px","margin-left":"0px","margin-right":"0px"})),s=$(".rs-photo-gallery-thumbnail-list",element).outerHeight(!0),$(".rs-photo-gallery-thumbnails-outer",element).css("height",s+"px"),$(".rs-photo-gallery-thumbnails",element).css("height",s+"px"),r=s/2,$(".rs-photo-gallery-thumb-control",element).css("padding-top",r+"px")))})})}function galleryEvents(){$(document).on("keydown",function(e){setTimeout(function(){$("#rs-photo-gallery-container-"+elemID).find(":focus").length?($(".rs-photo-gallery-container",element).addClass("cs-hover"),timerStop()):$(".rs-photo-gallery-container",element).hasClass("cs-hover")&&($(".rs-photo-gallery-container",element).removeClass("cs-hover"),timerStop(),timerReset())},100)}),"yes"==config.mainControls&&($(".rs-photo-gallery-control",element).click(function(){$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),$(this).hasClass("next")?galleryAnimate("next"):$(this).hasClass("back")&&galleryAnimate("prev"),timerReset())}),$(".rs-photo-gallery-control",element).keydown(function(e){e.keyCode!=csKeyCodes.space&&e.keyCode!=csKeyCodes.enter||(e.preventDefault(),$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),$(this).hasClass("next")?galleryAnimate("next"):$(this).hasClass("back")&&galleryAnimate("prev"),timerReset()))})),$("#rs-photo-gallery-container-"+elemID).on("swiperight",function(e){$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),galleryAnimate("prev"),timerReset())}),$("#rs-photo-gallery-container-"+elemID).on("swipeleft",function(e){$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),galleryAnimate("next"),timerReset())}),"yes"==config.bulletControls&&($(".rs-photo-gallery-bullet-control",element).click(function(){$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),$(this).hasClass("next")?galleryAnimate("next"):$(this).hasClass("back")&&galleryAnimate("prev"),timerReset())}),$(".rs-photo-gallery-bullet-control",element).keydown(function(e){e.keyCode!=csKeyCodes.space&&e.keyCode!=csKeyCodes.enter||(e.preventDefault(),$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),$(this).hasClass("next")?galleryAnimate("next"):$(this).hasClass("back")&&galleryAnimate("prev"),timerReset()))})),"yes"==config.bullets&&($(".rs-photo-gallery-bullet",element).click(function(){var e;$(this).hasClass("active")||$(".rs-photo-gallery-container",element).hasClass("animating")||(e=$(this).index(),timerStop(),bulletGalleryAnimate(e),timerReset())}),$(".rs-photo-gallery-bullet",element).keydown(function(e){switch(e.keyCode){case csKeyCodes.left:case csKeyCodes.up:e.preventDefault(),$(this).hasClass("first")?$(this).parent().find(".rs-photo-gallery-bullet.last").focus():$(this).prev(".rs-photo-gallery-bullet").focus();break;case csKeyCodes.right:case csKeyCodes.down:e.preventDefault(),$(this).hasClass("last")?$(this).parent().find(".rs-photo-gallery-bullet.first").focus():$(this).next(".rs-photo-gallery-bullet").focus();break;case csKeyCodes.home:e.preventDefault(),$(this).parent().find(".rs-photo-gallery-bullet.last").focus();break;case csKeyCodes.end:e.preventDefault(),$(this).parent().find(".rs-photo-gallery-bullet.first").focus();break;case csKeyCodes.space:case csKeyCodes.enter:var t;e.preventDefault(),$(this).hasClass("active")||$(".rs-photo-gallery-container",element).hasClass("animating")||(t=$(this).index(),timerStop(),bulletGalleryAnimate(t),timerReset())}})),"yes"==config.thumbnails&&($("#rs-photo-gallery-container-"+elemID).on("click keydown",".rs-photo-gallery-thumb-control",function(e){var t,l,a,i,o,s;("click"==e.type||"keydown"==e.type&&e.keyCode==csKeyCodes.enter||"keydown"==e.type&&e.keyCode==csKeyCodes.space)&&(e.preventDefault(),$(".rs-photo-gallery-thumbnails-outer",element).hasClass("animating")||($(".rs-photo-gallery-thumbnails-outer",element).addClass("animating"),"horizontal"==config.thumbnailSlideDirection?(t=$(".thumbnail-image",element).outerWidth(!0),l=$(".thumbnail-image.first",element).outerWidth(!0),a=$(".thumbnail-image.last",element).outerWidth(!0),i=-1*parseInt($(".rs-photo-gallery-thumbnail-list",element).css("left")),o=$(".rs-photo-gallery-thumbnail-list",element).outerWidth(!0)-$(".rs-photo-gallery-thumbnails",element).outerWidth(!0)-i,s=0,$(this).hasClass("next")?(s=o<a?i+o:i+t,$(".rs-photo-gallery-thumbnail-list",element).animate({left:"-"+s+"px"},400,function(){$(".rs-photo-gallery-thumbnails-outer",element).removeClass("animating")})):$(this).hasClass("back")&&(s=i<l?0:i-t,$(".rs-photo-gallery-thumbnail-list",element).animate({left:"-"+s+"px"},400,function(){$(".rs-photo-gallery-thumbnails-outer",element).removeClass("animating")}))):"vertical"==config.thumbnailSlideDirection&&(t=$(".thumbnail-image",element).outerHeight(!0),l=$(".thumbnail-image.first",element).outerHeight(!0),a=$(".thumbnail-image.last",element).outerHeight(!0),i=-1*parseInt($(".rs-photo-gallery-thumbnail-list",element).css("top")),o=$(".rs-photo-gallery-thumbnail-list",element).outerHeight(!0)-$(".rs-photo-gallery-thumbnails",element).outerHeight(!0)-i,s=0,$(this).hasClass("next")?(s=o<a?i+o:i+t,$(".rs-photo-gallery-thumbnail-list",element).animate({top:"-"+s+"px"},400,function(){$(".rs-photo-gallery-thumbnails-outer",element).removeClass("animating")})):$(this).hasClass("back")&&(s=i<l?0:i-t,$(".rs-photo-gallery-thumbnail-list",element).animate({top:"-"+s+"px"},400,function(){$(".rs-photo-gallery-thumbnails-outer",element).removeClass("animating")})))))}),$(".rs-photo-gallery-thumbnail",element).click(function(){var e;$(this).hasClass("active")||$(".rs-photo-gallery-container",element).hasClass("animating")||(e=$(this).index(),"yes"==config.autoRotate&&clearInterval(galleryTimer[elemID]),thumbnailGalleryAnimate(e),timerReset())}),$(".rs-photo-gallery-thumbnail",element).keydown(function(e){switch(e.keyCode){case csKeyCodes.left:case csKeyCodes.up:e.preventDefault(),$(this).hasClass("first")?$(this).parent().find(".rs-photo-gallery-thumbnail.last").focus():$(this).prev(".rs-photo-gallery-thumbnail").focus();break;case csKeyCodes.right:case csKeyCodes.down:e.preventDefault(),$(this).hasClass("last")?$(this).parent().find(".rs-photo-gallery-thumbnail.first").focus():$(this).next(".rs-photo-gallery-thumbnail").focus();break;case csKeyCodes.home:e.preventDefault(),$(this).parent().find(".rs-photo-gallery-thumbnail.last").focus();break;case csKeyCodes.end:e.preventDefault(),$(this).parent().find(".rs-photo-gallery-thumbnail.first").focus();break;case csKeyCodes.space:case csKeyCodes.enter:var t;e.preventDefault(),$(this).hasClass("active")||$(".rs-photo-gallery-container",element).hasClass("animating")||(t=$(this).index(),"yes"==config.autoRotate&&clearInterval(galleryTimer[elemID]),thumbnailGalleryAnimate(t),timerReset())}})),"yes"==config.hoverPause&&($(".rs-photo-gallery-container",element).hover(function(){$(this).addClass("cs-hover"),timerStop()},function(){$("#rs-photo-gallery-container-"+elemID).find(":focus").length||($(this).removeClass("cs-hover"),timerStop(),timerReset())}),$(".rs-photo-gallery-container",element).on("touchend",function(e){$("#rs-photo-gallery-container-"+elemID).find(":focus").length||($(this).removeClass("cs-hover"),timerStop(),timerReset())})),$(".rs-photo-gallery-control.play-pause",element).click(function(){$(this).hasClass("playing")?($(this).removeClass("playing").addClass("paused").attr("aria-label","Play Gallery - Currently on Slide "+(parseInt($(".rs-photo-gallery-images-list li.active",element).attr("index"))+1)+" of "+recordNum),timerStop()):$(this).hasClass("paused")&&($(this).removeClass("paused").addClass("playing").attr("aria-label","Pause Gallery - Currently on Slide "+(parseInt($(".rs-photo-gallery-images-list li.active",element).attr("index"))+1)+" of "+recordNum),$("#rs-photo-gallery-container-"+elemID).find(":focus").length||(timerStop(),timerReset()))}),$(".rs-photo-gallery-control.play-pause",element).keydown(function(e){e.keyCode!=csKeyCodes.space&&e.keyCode!=csKeyCodes.enter||(e.preventDefault(),$(this).hasClass("playing")?($(this).removeClass("playing").addClass("paused").attr("aria-label","Play Gallery - Currently on Slide "+(parseInt($(".rs-photo-gallery-images-list li.active",element).attr("index"))+1)+" of "+recordNum),timerStop()):$(this).hasClass("paused")&&($(this).removeClass("paused").addClass("playing").attr("aria-label","Pause Gallery - Currently on Slide "+(parseInt($(".rs-photo-gallery-images-list li.active",element).attr("index"))+1)+" of "+recordNum),$("#rs-photo-gallery-container-"+elemID).find(":focus").length||(timerStop(),timerReset())))}),"yes"!=config.fullScreenRotator&&$(element).parents(".region").children().on("click",function(){windowResize()})}function timerReset(){"yes"==config.playPause?$(".rs-photo-gallery-control.play-pause",element).hasClass("playing")&&!$(".rs-photo-gallery-container",element).hasClass("cs-hover")&&"yes"==config.autoRotate&&galleryTimer():$(".rs-photo-gallery-container",element).hasClass("cs-hover")||"yes"==config.autoRotate&&galleryTimer()}function timerStop(){"yes"==config.autoRotate&&clearInterval(galleryTimer[elemID])}function galleryRotate(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).hasClass("last")?galleryAnimate("first"):galleryAnimate("next")}function galleryAnimate(e){var t,l,a;$(".rs-photo-gallery-container",element).addClass("animating"),"next"==e?(config.onTransitionStart.call(this),"yes"!=config.titles&&"yes"!=config.captions||fadeTitlesCaptions(),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading.next-load",element).length&&loadImage(),"yes"==config.bullets&&($(".rs-photo-gallery-bullet.active",element).removeClass("active"),$(".rs-photo-gallery-bullet.prev",element).removeClass("prev"),$(".rs-photo-gallery-bullet.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-bullet.active",element).next(".rs-photo-gallery-bullet").addClass("next"),$(".rs-photo-gallery-bullet.active",element).prev(".rs-photo-gallery-bullet").addClass("prev"),$(".rs-photo-gallery-bullet.next",element).length||$(".rs-photo-gallery-bullet.first",element).addClass("next"),$(".rs-photo-gallery-bullet.prev",element).length||$(".rs-photo-gallery-bullet.last",element).addClass("prev")),"yes"==config.thumbnails&&($(".rs-photo-gallery-thumbnail.active",element).removeClass("active"),$(".rs-photo-gallery-thumbnail.prev",element).removeClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-thumbnail.active",element).next(".rs-photo-gallery-thumbnail").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).prev(".rs-photo-gallery-thumbnail").addClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).length||$(".rs-photo-gallery-thumbnail.first",element).addClass("next"),$(".rs-photo-gallery-thumbnail.prev",element).length||$(".rs-photo-gallery-thumbnail.last",element).addClass("prev")),"fade"==config.transitionType?(updateMoreLinks(a=$(".rs-photo-gallery-images-list li.next",element).index()),updateOverlay(a),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).fadeOut(1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).removeClass("active").attr("aria-hidden","true"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).removeClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active").attr("aria-hidden","false"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.first",element).addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.last",element).addClass("prev"),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load")),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("display",""),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),updateControls(),config.onTransitionEnd.call(this)})):"slide"==config.transitionType&&(updateMoreLinks(a=$(".rs-photo-gallery-images-list li.next",element).attr("index")),updateOverlay(a),l=-1*parseInt($(".rs-photo-gallery-images-list",element).css("left"))+("yes"==config.fullScreenRotator?$(window).width():$(element).width()>config.imageWidth?config.imageWidth:$(element).width()),a=$(".rs-photo-gallery-images-list li.next",element).attr("index"),$(".rs-photo-gallery-images-list",element).animate({left:"-"+l+"px"},1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images-list",element).append($(".rs-photo-gallery-images-list li",element).eq(0)),$(".rs-photo-gallery-images-list li.active",element).removeClass("active").attr("aria-hidden","true"),$(".rs-photo-gallery-images-list li.prev",element).removeClass("prev"),$(".rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active").attr("aria-hidden","false"),$(".rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load")),sliderDimReset(),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),updateControls(),config.onTransitionEnd.call(this)}))):"prev"==e?(config.onTransitionStart.call(this),"yes"==config.efficientLoad&&"fade"==config.transitionType&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.prev",element).hasClass("loading")&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.prev",element).addClass("next-load"),loadImage())),"yes"==config.bullets&&($(".rs-photo-gallery-bullet.next",element).removeClass("next"),$(".rs-photo-gallery-bullet.prev",element).removeClass("prev").addClass("next"),$(".rs-photo-gallery-bullet.active",element).removeClass("active"),$(".rs-photo-gallery-bullet.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-bullet.active",element).next(".rs-photo-gallery-bullet").addClass("next"),$(".rs-photo-gallery-bullet.active",element).prev(".rs-photo-gallery-bullet").addClass("prev"),$(".rs-photo-gallery-bullet.next",element).length||$(".rs-photo-gallery-bullet.first",element).addClass("next"),$(".rs-photo-gallery-bullet.prev",element).length||$(".rs-photo-gallery-bullet.last",element).addClass("prev")),"yes"==config.thumbnails&&($(".rs-photo-gallery-thumbnail.next",element).removeClass("next"),$(".rs-photo-gallery-thumbnail.prev",element).removeClass("prev").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).removeClass("active"),$(".rs-photo-gallery-thumbnail.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-thumbnail.active",element).next(".rs-photo-gallery-thumbnail").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).prev(".rs-photo-gallery-thumbnail").addClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).length||$(".rs-photo-gallery-thumbnail.first",element).addClass("next"),$(".rs-photo-gallery-thumbnail.prev",element).length||$(".rs-photo-gallery-thumbnail.last",element).addClass("prev")),"slide"==config.transitionType&&($(".rs-photo-gallery-images-list",element).prepend($(".rs-photo-gallery-images-list li",element).last()),"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).first().hasClass("loading")&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).first().addClass("next-load"),loadImage())),sliderDimReset()),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).removeClass("prev").addClass("next"),"fade"==config.transitionType?t=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).index():"slide"==config.transitionType&&(t=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).attr("index")),"yes"==config.titles&&("hide"==jQuery.trim(myJSON.Album.Images[t].photoname).toLowerCase()?$(".rs-photo-title.next",element).empty().addClass("hidden"):""!=jQuery.trim(myJSON.Album.Images[t].link)&&(-1<$.inArray("title",config.linkedElement)||-1<$.inArray("all",config.linkedElement))?$(".rs-photo-title.next",element).html("<h1><a href='"+jQuery.trim(myJSON.Album.Images[t].link)+"' target='"+myJSON.Album.Images[t].target+"'>"+jQuery.trim(myJSON.Album.Images[t].photoname)+"</a></h1>").removeClass("hidden").removeAttr("style"):$(".rs-photo-title.next",element).html("<h1>"+jQuery.trim(myJSON.Album.Images[t].photoname)+"</h1>").removeClass("hidden").removeAttr("style")),"yes"==config.captions&&("hide"==jQuery.trim(myJSON.Album.Images[t].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[t].caption)?$(".rs-photo-caption.next",element).empty().addClass("hidden"):$(".rs-photo-caption.next",element).html("<p>"+jQuery.trim(myJSON.Album.Images[t].caption)+"</p>").removeClass("hidden").removeAttr("style")),"yes"!=config.titles&&"yes"!=config.captions||fadeTitlesCaptions(),"fade"==config.transitionType?(updateMoreLinks(a=$(".rs-photo-gallery-images-list li.next",element).index()),updateOverlay(a),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).fadeOut(1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).removeClass("active").attr("aria-hidden","true"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active").attr("aria-hidden","false"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.first",element).addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.last",element).addClass("prev"),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load")),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("display",""),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),updateControls(),config.onTransitionEnd.call(this)})):"slide"==config.transitionType&&(updateMoreLinks(a=$(".rs-photo-gallery-images-list li.active",element).prev(".image").attr("index")),updateOverlay(a),l=-1*parseInt($(".rs-photo-gallery-images-list",element).css("left"))-("yes"==config.fullScreenRotator?$(window).width():$(element).width()>config.imageWidth?config.imageWidth:$(element).width()),a=$(".rs-photo-gallery-images-list li."+e,element).index()-1,$(".rs-photo-gallery-images-list",element).animate({left:"-"+l+"px"},1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images-list li.active",element).removeClass("active").attr("aria-hidden","true"),$(".rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active").attr("aria-hidden","false"),$(".rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load")),sliderDimReset(),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),updateControls(),config.onTransitionEnd.call(this)}))):"first"==e&&(config.onTransitionStart.call(this),"yes"!=config.titles&&"yes"!=config.captions||fadeTitlesCaptions(),"yes"==config.bullets&&($(".rs-photo-gallery-bullet.active",element).removeClass("active"),$(".rs-photo-gallery-bullet.prev",element).removeClass("prev"),$(".rs-photo-gallery-bullet.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-bullet.active",element).next(".rs-photo-gallery-bullet").addClass("next"),$(".rs-photo-gallery-bullet.active",element).prev(".rs-photo-gallery-bullet").addClass("prev"),$(".rs-photo-gallery-bullet.prev",element).length||$(".rs-photo-gallery-bullet.last",element).addClass("prev")),"yes"==config.thumbnails&&($(".rs-photo-gallery-thumbnail.active",element).removeClass("active"),$(".rs-photo-gallery-thumbnail.prev",element).removeClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-thumbnail.active",element).next(".rs-photo-gallery-thumbnail").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).prev(".rs-photo-gallery-thumbnail").addClass("prev"),$(".rs-photo-gallery-thumbnail.prev",element).length||$(".rs-photo-gallery-thumbnail.last",element).addClass("prev")),updateMoreLinks(0),updateOverlay(0),"fade"==config.transitionType&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).fadeOut(1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).removeClass("active").attr("aria-hidden","true"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).removeClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active").attr("aria-hidden","false"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.last",element).addClass("prev"),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load")),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("display",""),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),updateControls(),config.onTransitionEnd.call(this)}))}function bulletGalleryAnimate(t){if($(".rs-photo-gallery-container",element).addClass("animating"),"yes"==config.bulletControls&&--t,$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).removeClass("prev").removeClass("next"),$(".rs-photo-gallery-bullet",element).removeClass("prev").removeClass("next"),"yes"==config.thumbnails&&$(".rs-photo-gallery-thumbnail",element).removeClass("prev").removeClass("next"),"fade"==config.transitionType)$(".rs-photo-gallery-images .rs-photo-gallery-images-list li:eq("+t+")",element).addClass("next"),"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).hasClass("loading")&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).addClass("next-load"),loadImage(),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load"))));else if("slide"==config.transitionType){var e=$(".rs-photo-gallery-bullet.active",element).index();"yes"==config.bulletControls&&--e;var l,a=0,i="";if(t<e){i="backward",a=e-t;for(var o=0;o<a;o++){var s=$(".rs-photo-gallery-images-list li",element).eq(recordNum-1).clone().attr("class","image clone");$(".rs-photo-gallery-images-list",element).prepend(s)}sliderDimReset()}else if(e<t){i="forward",a=t-e,"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".image.loading",element).each(function(){$(this).addClass("batch-item")}));for(o=0;o<a;o++){s=$(".rs-photo-gallery-images-list li",element).eq(o).clone().removeClass("prev next active").addClass("clone");$(".rs-photo-gallery-images-list",element).append(s)}"yes"==config.efficientLoad&&$(".batch-item",element).length&&batchImageLoad(),sliderDimReset()}"forward"==i?l=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).index()+a:"backward"==i&&(l=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).index()-a),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).eq(l).addClass("next")}var r,n;$(".rs-photo-gallery-bullet:eq("+t+")",element).addClass("next"),"yes"==config.thumbnails&&$(".rs-photo-gallery-thumbnail:eq("+t+")",element).addClass("next"),"fade"==config.transitionType?r=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).index():"slide"==config.transitionType&&(r=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).attr("index")),"yes"==config.titles&&("hide"==jQuery.trim(myJSON.Album.Images[r].photoname).toLowerCase()?$(".rs-photo-title.next",element).empty().addClass("hidden"):""!=jQuery.trim(myJSON.Album.Images[r].link)&&(-1<$.inArray("title",config.linkedElement)||-1<$.inArray("all",config.linkedElement))?$(".rs-photo-title.next",element).html("<h1><a href='"+jQuery.trim(myJSON.Album.Images[r].link)+"' target='"+myJSON.Album.Images[r].target+"'>"+jQuery.trim(myJSON.Album.Images[r].photoname)+"</a></h1>").removeClass("hidden").removeAttr("style"):$(".rs-photo-title.next",element).html("<h1>"+jQuery.trim(myJSON.Album.Images[r].photoname)+"</h1>").removeClass("hidden").removeAttr("style")),"yes"==config.captions&&("hide"==jQuery.trim(myJSON.Album.Images[r].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[r].caption)?$(".rs-photo-caption.next",element).empty().addClass("hidden"):$(".rs-photo-caption.next",element).html("<p>"+jQuery.trim(myJSON.Album.Images[r].caption)+"</p>").removeClass("hidden").removeAttr("style")),$(".rs-photo-gallery-bullet.active",element).removeClass("active"),$(".rs-photo-gallery-bullet.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-bullet.active",element).next(".rs-photo-gallery-bullet").addClass("next"),$(".rs-photo-gallery-bullet.active",element).prev(".rs-photo-gallery-bullet").addClass("prev"),$(".rs-photo-gallery-bullet.next",element).length||$(".rs-photo-gallery-bullet.first",element).addClass("next"),$(".rs-photo-gallery-bullet.prev",element).length||$(".rs-photo-gallery-bullet.last",element).addClass("prev"),"yes"==config.thumbnails&&($(".rs-photo-gallery-thumbnail.active",element).removeClass("active"),$(".rs-photo-gallery-thumbnail.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-thumbnail.active",element).next(".rs-photo-gallery-thumbnail").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).prev(".rs-photo-gallery-thumbnail").addClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).length||$(".rs-photo-gallery-thumbnail.first",element).addClass("next"),$(".rs-photo-gallery-thumbnail.prev",element).length||$(".rs-photo-gallery-thumbnail.last",element).addClass("prev")),updateMoreLinks(r),updateOverlay(r),config.onTransitionStart.call(this),"yes"!=config.titles&&"yes"!=config.captions||fadeTitlesCaptions(),"fade"==config.transitionType?$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).fadeOut(1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).removeClass("active").attr("aria-hidden","true"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active").attr("aria-hidden","false"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.first",element).addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.last",element).addClass("prev"),"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading.next-load",element).length&&loadImage(),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load"))),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("display",""),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),updateControls(),config.onTransitionEnd.call(this)}):"slide"==config.transitionType&&(n=("yes"==config.fullScreenRotator?$(window).width():$(element).width()>config.imageWidth?config.imageWidth:$(element).width())*$(".rs-photo-gallery-images-list li.next",element).index(),$(".rs-photo-gallery-images-list",element).animate({left:"-"+n+"px"},1e3*config.transitionSpeed,function(){if($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.clone",element).remove(),"backward"==i){for(var e=0;e<a;e++)$(".rs-photo-gallery-images-list",element).prepend($(".rs-photo-gallery-images-list li",element).last());sliderDimReset()}else if("forward"==i){for(e=0;e<a;e++)$(".rs-photo-gallery-images-list",element).append($(".rs-photo-gallery-images-list li",element).first());sliderDimReset()}$(".rs-photo-gallery-images-list li.active",element).removeClass("active").attr("aria-hidden","true"),$(".rs-photo-gallery-images-list li.prev",element).removeClass("prev"),$(".rs-photo-gallery-images-list li.next",element).removeClass("next"),$(".rs-photo-gallery-images-list li[index='"+t+"']",element).first().addClass("active").attr("aria-hidden","false"),$(".rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),sliderDimReset(),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),updateControls(),config.onTransitionEnd.call(this)}))}function thumbnailGalleryAnimate(t){if($(".rs-photo-gallery-container",element).addClass("animating"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).removeClass("prev").removeClass("next"),"yes"==config.bullets&&$(".rs-photo-gallery-bullet",element).removeClass("prev").removeClass("next"),$(".rs-photo-gallery-thumbnail",element).removeClass("prev").removeClass("next"),"fade"==config.transitionType)$(".rs-photo-gallery-images .rs-photo-gallery-images-list li:eq("+t+")",element).addClass("next"),"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).hasClass("loading")&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).addClass("next-load"),loadImage(),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load"))));else if("slide"==config.transitionType){var e,l=$(".rs-photo-gallery-thumbnail.active",element).index(),a=0,i="";if(t<l){i="backward",a=l-t;for(var o=0;o<a;o++){var s=$(".rs-photo-gallery-images-list li",element).eq(recordNum-1).clone().attr("class","image clone");$(".rs-photo-gallery-images-list",element).prepend(s)}sliderDimReset()}else if(l<t){i="forward",a=t-l,"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".image.loading",element).each(function(){$(this).addClass("batch-item")}));for(o=0;o<a;o++){s=$(".rs-photo-gallery-images-list li",element).eq(o).clone().attr("class","image clone");$(".rs-photo-gallery-images-list",element).append(s)}"yes"==config.efficientLoad&&$(".batch-item",element).length&&batchImageLoad(),sliderDimReset()}"forward"==i?e=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).index()+a:"backward"==i&&(e=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).index()-a),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).eq(e).addClass("next")}var r,n;"yes"==config.bullets&&$(".rs-photo-gallery-bullet:eq("+t+")",element).addClass("next"),$(".rs-photo-gallery-thumbnail:eq("+t+")",element).addClass("next"),"fade"==config.transitionType?r=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).index():"slide"==config.transitionType&&(r=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).attr("index")),"yes"==config.titles&&("hide"==jQuery.trim(myJSON.Album.Images[r].photoname).toLowerCase()?$(".rs-photo-title.next",element).empty().addClass("hidden"):""!=jQuery.trim(myJSON.Album.Images[r].link)&&(-1<$.inArray("title",config.linkedElement)||-1<$.inArray("all",config.linkedElement))?$(".rs-photo-title.next",element).html("<h1><a href='"+jQuery.trim(myJSON.Album.Images[r].link)+"' target='"+myJSON.Album.Images[r].target+"'>"+jQuery.trim(myJSON.Album.Images[r].photoname)+"</a></h1>").removeClass("hidden").removeAttr("style"):$(".rs-photo-title.next",element).html("<h1>"+jQuery.trim(myJSON.Album.Images[r].photoname)+"</h1>").removeClass("hidden").removeAttr("style")),"yes"==config.captions&&("hide"==jQuery.trim(myJSON.Album.Images[r].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[r].caption)?$(".rs-photo-caption.next",element).empty().addClass("hidden"):$(".rs-photo-caption.next",element).html("<p>"+jQuery.trim(myJSON.Album.Images[r].caption)+"</p>").removeClass("hidden").removeAttr("style")),"yes"==config.bullets&&($(".rs-photo-gallery-bullet.active",element).removeClass("active"),$(".rs-photo-gallery-bullet.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-bullet.active",element).next(".rs-photo-gallery-bullet").addClass("next"),$(".rs-photo-gallery-bullet.active",element).prev(".rs-photo-gallery-bullet").addClass("prev"),$(".rs-photo-gallery-bullet.next",element).length||$(".rs-photo-gallery-bullet.first",element).addClass("next"),$(".rs-photo-gallery-bullet.prev",element).length||$(".rs-photo-gallery-bullet.last",element).addClass("prev")),$(".rs-photo-gallery-thumbnail.active",element).removeClass("active"),$(".rs-photo-gallery-thumbnail.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-thumbnail.active",element).next(".rs-photo-gallery-thumbnail").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).prev(".rs-photo-gallery-thumbnail").addClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).length||$(".rs-photo-gallery-thumbnail.first",element).addClass("next"),$(".rs-photo-gallery-thumbnail.prev",element).length||$(".rs-photo-gallery-thumbnail.last",element).addClass("prev"),updateMoreLinks(r),updateOverlay(r),config.onTransitionStart.call(this),"yes"!=config.titles&&"yes"!=config.captions||fadeTitlesCaptions(),"fade"==config.transitionType?$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).fadeOut(1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).removeClass("active").attr("aria-hidden","true"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active").attr("aria-hidden","false"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.first",element).addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.last",element).addClass("prev"),"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading.next-load",element).length&&loadImage(),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load"))),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("display",""),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),updateControls(),config.onTransitionEnd.call(this)}):"slide"==config.transitionType&&(n=("yes"==config.fullScreenRotator?$(window).width():$(element).width()>config.imageWidth?config.imageWidth:$(element).width())*$(".rs-photo-gallery-images-list li.next",element).index(),$(".rs-photo-gallery-images-list",element).animate({left:"-"+n+"px"},1e3*config.transitionSpeed,function(){if($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.clone",element).remove(),"backward"==i){for(var e=0;e<a;e++)$(".rs-photo-gallery-images-list",element).prepend($(".rs-photo-gallery-images-list li",element).last());sliderDimReset()}else if("forward"==i){for(e=0;e<a;e++)$(".rs-photo-gallery-images-list",element).append($(".rs-photo-gallery-images-list li",element).first());sliderDimReset()}$(".rs-photo-gallery-images-list li.active",element).removeClass("active").attr("aria-hidden","true"),$(".rs-photo-gallery-images-list li.prev",element).removeClass("prev"),$(".rs-photo-gallery-images-list li.next",element).removeClass("next"),$(".rs-photo-gallery-images-list li[index='"+t+"']",element).first().addClass("active").attr("aria-hidden","false"),$(".rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),sliderDimReset(),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),updateControls(),config.onTransitionEnd.call(this)}))}function fadeTitlesCaptions(){var a,e=$(".rs-photo-gallery-images ul.rs-photo-gallery-images-list li.next",element).index();"fade"==config.transitionType?(a=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).index()+1)==recordNum&&(a=0):"slide"==config.transitionType&&(a=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).next(".image").attr("index"));var i=1e3*config.transitionSpeed/2;"yes"==config.titles&&"no"==config.captions?!$(".rs-photo-title.next",element).hasClass("hidden")||"yes"==config.descMoreLink&&""!=jQuery.trim(myJSON.Album.Images[e].link)||(i=1e3*config.transitionSpeed,$(".rs-photo-gallery-desc",element).fadeOut(1e3*config.transitionSpeed,function(){$(this).addClass("hidden").removeAttr("style")})):"no"==config.titles&&"yes"==config.captions?!$(".rs-photo-caption.next",element).hasClass("hidden")||"yes"==config.descMoreLink&&""!=jQuery.trim(myJSON.Album.Images[e].link)||(i=1e3*config.transitionSpeed,$(".rs-photo-gallery-desc",element).fadeOut(1e3*config.transitionSpeed,function(){$(this).addClass("hidden").removeAttr("style")})):"yes"==config.titles&&"yes"==config.captions&&$(".rs-photo-caption.next",element).hasClass("hidden")&&$(".rs-photo-title.next",element).hasClass("hidden")&&("yes"!=config.descMoreLink||""==jQuery.trim(myJSON.Album.Images[e].link))&&(i=1e3*config.transitionSpeed,$(".rs-photo-gallery-desc",element).fadeOut(1e3*config.transitionSpeed,function(){$(this).addClass("hidden").removeAttr("style")})),"yes"==config.titles&&"no"==config.captions?$(".rs-photo-gallery-desc",element).hasClass("hidden")&&($(".rs-photo-title.next",element).hasClass("hidden")&&("yes"!=config.descMoreLink||""==jQuery.trim(myJSON.Album.Images[e].link))||$(".rs-photo-gallery-desc",element).fadeIn(1e3*config.transitionSpeed,function(){$(this).removeClass("hidden").removeAttr("style")})):"no"==config.titles&&"yes"==config.captions?$(".rs-photo-gallery-desc",element).hasClass("hidden")&&($(".rs-photo-caption.next",element).hasClass("hidden")&&("yes"!=config.descMoreLink||""==jQuery.trim(myJSON.Album.Images[e].link))||$(".rs-photo-gallery-desc",element).fadeIn(1e3*config.transitionSpeed,function(){$(this).removeClass("hidden").removeAttr("style")})):"yes"==config.titles&&"yes"==config.captions&&$(".rs-photo-gallery-desc",element).hasClass("hidden")&&($(".rs-photo-caption.next",element).hasClass("hidden")&&$(".rs-photo-title.next",element).hasClass("hidden")&&("yes"!=config.descMoreLink||""==jQuery.trim(myJSON.Album.Images[e].link))||$(".rs-photo-gallery-desc",element).fadeIn(1e3*config.transitionSpeed,function(){$(this).removeClass("hidden").removeAttr("style")})),"yes"==config.titles&&$(".rs-photo-title.active",element).fadeOut(i,function(){var e,t,l=$(this);$(".rs-photo-title.next",element).hasClass("hidden")?(e=$(".rs-photo-title.next",element),setNextTitle(a,e,l)):(t=0,$(this).hasClass("hidden")&&!$(".rs-photo-gallery-desc",element).hasClass("hidden")&&(t=1e3*config.transitionSpeed/2),$(".rs-photo-title.next",element).delay(t).fadeIn(i,function(){var e=$(this);setNextTitle(a,e,l)}))}),"yes"==config.captions&&$(".rs-photo-caption.active",element).fadeOut(i,function(){var e,t,l=$(this);$(".rs-photo-caption.next",element).hasClass("hidden")?(e=$(".rs-photo-caption.next",element),setNextCaption(a,e,l)):(t=0,$(this).hasClass("hidden")&&!$(".rs-photo-gallery-desc",element).hasClass("hidden")&&(t=1e3*config.transitionSpeed/2),$(".rs-photo-caption.next",element).delay(t).fadeIn(i,function(){var e=$(this);setNextCaption(a,e,l)}))})}function setNextTitle(e,t,l){l.removeClass("active").addClass("next"),t.removeClass("next").addClass("active"),$(".rs-photo-title",element).removeAttr("style"),"hide"==jQuery.trim(myJSON.Album.Images[e].photoname).toLowerCase()?$(".rs-photo-title.next",element).empty().addClass("hidden").removeAttr("style"):""!=jQuery.trim(myJSON.Album.Images[e].link)&&(-1<$.inArray("title",config.linkedElement)||-1<$.inArray("all",config.linkedElement))?$(".rs-photo-title.next",element).html("<h1><a href='"+jQuery.trim(myJSON.Album.Images[e].link)+"' target='"+myJSON.Album.Images[e].target+"'>"+jQuery.trim(myJSON.Album.Images[e].photoname)+"</a></h1>").removeClass("hidden").removeAttr("style"):$(".rs-photo-title.next",element).html("<h1>"+jQuery.trim(myJSON.Album.Images[e].photoname)+"</h1>").removeClass("hidden").removeAttr("style")}function setNextCaption(e,t,l){l.removeClass("active").addClass("next"),t.removeClass("next").addClass("active"),$(".rs-photo-caption",element).removeAttr("style"),"hide"==jQuery.trim(myJSON.Album.Images[e].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[e].caption)?$(".rs-photo-caption.next",element).empty().addClass("hidden").removeAttr("style"):$(".rs-photo-caption.next",element).html("<p>"+jQuery.trim(myJSON.Album.Images[e].caption)+"</p>").removeClass("hidden").removeAttr("style")}function updateMoreLinks(e){var t;"yes"==config.contMoreLink&&($(".rs-photo-gallery-more-link a",element).attr({href:myJSON.Album.Images[e].link,target:myJSON.Album.Images[e].target,"aria-label":"Read more about gallery slide "+(parseInt(e)+1)+": "+jQuery.trim(myJSON.Album.Images[e].photoname).replace(/&#39;/gi,"'").replace(/&quot;/gi,'"')}),$(".rs-photo-gallery-more-link",element).hasClass("hidden")&&""!=jQuery.trim(myJSON.Album.Images[e].link)?(t=1e3*config.transitionSpeed/2,$(".rs-photo-gallery-more-link",element).delay(t).fadeIn(1e3*config.transitionSpeed/2,function(){$(this).removeClass("hidden")})):$(".rs-photo-gallery-more-link",element).hasClass("hidden")||""!=jQuery.trim(myJSON.Album.Images[e].link)||$(".rs-photo-gallery-more-link",element).fadeOut(1e3*config.transitionSpeed/2,function(){$(this).addClass("hidden")})),"yes"==config.descMoreLink&&($(".rs-photo-gallery-desc-more-link a",element).attr({href:myJSON.Album.Images[e].link,target:myJSON.Album.Images[e].target,"aria-label":"Read more about gallery slide "+(parseInt(e)+1)+": "+jQuery.trim(myJSON.Album.Images[e].photoname).replace(/&#39;/gi,"'").replace(/&quot;/gi,'"')}),$(".rs-photo-gallery-desc-more-link",element).hasClass("hidden")&&""!=jQuery.trim(myJSON.Album.Images[e].link)?(t=1e3*config.transitionSpeed/2,$(".rs-photo-gallery-desc-more-link",element).delay(t).fadeIn(1e3*config.transitionSpeed/2,function(){$(this).removeClass("hidden")})):$(".rs-photo-gallery-desc-more-link",element).hasClass("hidden")||""!=jQuery.trim(myJSON.Album.Images[e].link)||$(".rs-photo-gallery-desc-more-link",element).fadeOut(1e3*config.transitionSpeed/2,function(){$(this).addClass("hidden")}))}function updateOverlay(e){"yes"==config.galleryOverlay&&(""!=jQuery.trim(myJSON.Album.Images[e].link)&&-1<$.inArray("overlay",config.linkedElement)||""!=jQuery.trim(myJSON.Album.Images[e].link)&&-1<$.inArray("all",config.linkedElement)?$(".rs-photo-gallery-overlay",element).attr({onclick:"_self"==myJSON.Album.Images[e].target?"window.location.href = '"+jQuery.trim(myJSON.Album.Images[e].link)+"';":"window.open('"+jQuery.trim(myJSON.Album.Images[e].link)+"');",tabindex:"0",role:"link","aria-label":"Read more about gallery slide "+(parseInt(e)+1)+": "+jQuery.trim(myJSON.Album.Images[e].photoname).replace(/&#39;/gi,"'").replace(/&quot;/gi,'"')}):$(".rs-photo-gallery-overlay",element).removeAttr("style onclick tabindex role").attr("aria-label","Read more about gallery slide "+(parseInt(e)+1)+": "+jQuery.trim(myJSON.Album.Images[e].photoname).replace(/&#39;/gi,"'").replace(/&quot;/gi,'"')))}function updateControls(){"yes"==config.mainControls&&("slide"==config.transitionType?($(".rs-photo-gallery-control.back",element).attr("aria-label","Navigate to slide "+(parseInt($(".rs-photo-gallery-images-list li.prev",element).attr("index"))+1)+" of "+recordNum),$(".rs-photo-gallery-control.next",element).attr("aria-label","Navigate to slide "+(parseInt($(".rs-photo-gallery-images-list li.next",element).attr("index"))+1)+" of "+recordNum)):($(".rs-photo-gallery-control.back",element).attr("aria-label","Navigate to slide "+(parseInt($(".rs-photo-gallery-images-list li.prev",element).index())+1)+" of "+recordNum),$(".rs-photo-gallery-control.next",element).attr("aria-label","Navigate to slide "+(parseInt($(".rs-photo-gallery-images-list li.next",element).index())+1)+" of "+recordNum))),"yes"==config.playPause&&($(".rs-photo-gallery-control.play-pause",element).hasClass("playing")?$(".rs-photo-gallery-control.play-pause",element).attr("aria-label","Pause Gallery - Currently on Slide "+(parseInt($(".rs-photo-gallery-images-list li.active",element).attr("index"))+1)+" of "+recordNum):$(".rs-photo-gallery-control.play-pause",element).attr("aria-label","Play Gallery - Currently on Slide "+(parseInt($(".rs-photo-gallery-images-list li.active",element).attr("index"))+1)+" of "+recordNum))}function galleryTimer(){var e=myJSON.Album.transitiondelay<=config.transitionSpeed?config.transitionSpeed+1:myJSON.Album.transitiondelay;galleryTimer[elemID]=setInterval(function(){galleryRotate()},1e3*e+1e3*config.transitionSpeed)}function buildStyleSheet(){var e,t,l,a,i,o,s,r,n,m,g,h,p,d,c,y=document.createElement("style");y&&(y.setAttribute("type","text/css"),(e=document.getElementsByTagName("head")[0])&&e.insertBefore(y,e.childNodes[0]),o=i=a=l=t="","fade"==config.transitionType?(a="width: 100%; height: 100%; position: static;",t="position: relative;",l="width: 100%; position: absolute; top: 0px; left: 0px; display: none;"):"slide"==config.transitionType&&(a="position: relative;",t="position: absolute; top: 0px; left: 0px;",l="float: left;",i="#rs-photo-gallery-container-"+elemID+".rs-photo-gallery-container { position: relative; }"),"yes"==config.fullScreenRotator&&(o="overflow: hidden;"),p=h=g=m=n=r=s="","horizontal"==config.thumbnailSlideDirection?(s="bottom: 0px; left: 0px; right: 0px;",r="top: 0px; left: 0px; right: 0px;",n="margin-right: 10px; float: left;",m="top: 0px; bottom: 0px; left: 0px;",g="top: 0px; bottom: 0px; right: 0px;",h='content: "◀"; margin-top: -6.5px;',p='content: "▶"; margin-top: -6.5px;'):"vertical"==config.thumbnailSlideDirection&&(s="top: 0px; bottom: 0px; right: 0px;",r="left: 0px; top: 0px; bottom: 0px;",n="margin-bottom: 10px;",m="top: 0px; left: 0px; right: 0px;",g="bottom: 0px; left: 0px; right: 0px;",h='content: "▲";',p='content: "▼";'),d=".hidden {display: none;}"+i+"#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images {"+a+"}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list {"+t+"list-style: none;margin: 0px;padding: 0px;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list li {"+l+o+"background: #000;z-index: 1;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list li.active {display: block;z-index: 4;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list li.next {display: block;z-index: 3;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list li.prev {display: block;z-index: 2;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list li img {width: 100%;transform: rotate(.0001deg);}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumbnails-outer {"+s+"position: absolute;background: #000;background: rgba(0, 0, 0, .75);z-index: 20;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumbnails {"+r+"position: absolute;overflow: hidden;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumbnail-list {list-style: none;margin: 0px;padding: 10px;position: absolute;top: 0px;left: 0px;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumbnail-list li {width: "+config.thumbnailWidth+"px;height: "+config.thumbnailHeight+"px;"+n+'cursor: pointer;overflow: hidden;opacity: .5;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter: alpha(opacity=50);-khtml-opacity: 0.5;-moz-opacity: 0.5;-webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box;}#rs-photo-gallery-container-'+elemID+' .rs-photo-gallery-thumbnail-list li.active {opacity: 1;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter: alpha(opacity=100);-khtml-opacity: 1;-moz-opacity: 1;}#rs-photo-gallery-container-'+elemID+" .rs-photo-gallery-thumbnail-list li.last {margin: 0px;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumbnail-list li img {display: block;width: 100%;height: auto;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumb-control {padding: 7px 10px;cursor: pointer;background: #000;background: rgba(0, 0, 0, .20);-webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumb-control.back {"+m+"position: absolute;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumb-control.back:before {"+h+"display: block;text-align: center;line-height: 1;color: #FFF;font-size: 13px;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumb-control.next {"+g+"position: absolute;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumb-control.next:before {"+p+"display: block;text-align: center;line-height: 1;color: #FFF;font-size: 13px;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-desc {position: absolute;bottom: 0px;right: 0px;left: 0px;z-index: 20;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-control-text {position: relative;display: block;width: 0px !important;height: 0px !important;overflow: hidden !important;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-control.play-pause {width: 24px;height: 25px;position: absolute;bottom: 20px;left: 20px;z-index: 15;border-radius: 5px;background: #000;background: rgba(0, 0, 0, .80);}#rs-photo-gallery-container-"+elemID+' .rs-photo-gallery-control.play-pause.playing:before {content: "";width: 0px;height: 15px;position: absolute;top: 5px;left: 7.5px;border-left: double 10px #FFF;}#rs-photo-gallery-container-'+elemID+' .rs-photo-gallery-control.play-pause.paused:before {content: "";width: 0px;height: 0px;border-style: solid;border-width: 7.5px 0 7.5px 10px;border-color: transparent transparent transparent #FFF;position: absolute;top: 5px;left: 8.5px;}#rs-photo-gallery-container-'+elemID+" .rs-photo-gallery-control.back {width: 30px;height: 30px;position: absolute;top: 50%;left: 20px;margin-top: -15px;z-index: 20;cursor: pointer;}#rs-photo-gallery-container-"+elemID+' .rs-photo-gallery-control.back:before {content: "<";display: block;text-align: center;line-height: 100%;color: #FFF;font-size: 50px;}#rs-photo-gallery-container-'+elemID+" .rs-photo-gallery-control.next {width: 30px;height: 30px;position: absolute;top: 50%;right: 20px;margin-top: -15px;z-index: 20;cursor: pointer;}#rs-photo-gallery-container-"+elemID+' .rs-photo-gallery-control.next:before {content: ">";display: block;text-align: center;line-height: 100%;color: #FFF;font-size: 50px;}#rs-photo-gallery-container-'+elemID+" .rs-photo-gallery-bullets-outer {position: absolute;top: 0px;left: 0px;text-align: center;z-index: 10;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-bullet {width: 12px;height: 12px;background: #FFF;border: solid 1px #666;display: inline-block;margin: 0px 5px;cursor: pointer;border-radius: 8px;-moz-background-clip: padding;-webkit-background-clip: padding;background-clip: padding-box;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-bullet.active {background: #999;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-bullet-control {width: 15px;height: 15px;display: inline-block;margin: 0px 10px;cursor: pointer;vertical-align: top;}#rs-photo-gallery-container-"+elemID+' .rs-photo-gallery-bullet-control.back:before {content: "<";color: #FFF;font-size: 20px;display: block;line-height: 12px;text-align: center;}#rs-photo-gallery-container-'+elemID+' .rs-photo-gallery-bullet-control.next:before {content: ">";color: #FFF;font-size: 20px;display: block;line-height: 12px;text-align: center;}#rs-photo-gallery-container-'+elemID+" .rs-photo-caption.active, .rs-photo-title.active {position: relative;z-index: 2;}#rs-photo-gallery-container-"+elemID+" .rs-photo-caption.next, .rs-photo-title.next {display: none;position: relative;z-index: 1;}#rs-photo-gallery-container-"+elemID+" .image.loading .loader {display: block;position: absolute;top: 50%;left: 50%;width: 150px;height: 150px;line-height: 150px;color: #ccc;font-size: 14px;margin: -75px 0px 0px -75px;box-sizing: border-box;text-align: center;z-index: 5;text-transform: uppercase;}#rs-photo-gallery-container-"+elemID+' .loader:before, .loader:after {opacity: 0;box-sizing: border-box;content: "\\0020";position: absolute;top: 0;left: 0;width: 100%;height: 100%;border-radius: 100px;border: 5px solid #fff;box-shadow: 0 0 50px #fff, inset 0 0 50px #fff;}#rs-photo-gallery-container-'+elemID+" .loader:after {z-index: 1;-webkit-animation: gogoloader 2s infinite 1s;}#rs-photo-gallery-container-"+elemID+" .loader:before {z-index: 2;-webkit-animation: gogoloader 2s infinite;}@-webkit-keyframes gogoloader {0% {-webkit-transform: scale(0);opacity: 0;}50% {opacity: 1;}100% {-webkit-transform: scale(1);opacity: 0;}}",c=document.createTextNode(d),y.styleSheet?y.styleSheet.cssText=d:y.appendChild(c))}function sliderDimReset(){var e,t,l,a,i,o,s,r,n,m,g,h,p,d=getBreakPoint();"yes"==config.customResize?config.customResizeFunction.call(this,element,config.imageWidth,config.imageHeight):"yes"==config.fullScreenRotator&&-1<config.fullScreenBreakpoints.indexOf(d)?(e=$(element).offset().top,n=$(window).width(),t=$(window).height()-e,g=n*$(".rs-photo-gallery-images-list li",element).length,l=n,o=0,a=config.imageWidth,(o=l*(i=config.imageHeight/a))<t&&(l=(o=t)/i),s=(l-n)/2,r=(o-t)/2,p=$(".rs-photo-gallery-images-list li.active",element).index()*(n=parseInt(n)),$(".rs-photo-gallery-container",element).css({height:t+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images",element).css({height:t+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list",element).css({width:g+"px",height:t+"px",left:"-"+p+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css({width:n+"px",height:t+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li img",element).css({width:l+"px",height:o+"px",margin:"-"+r+"px 0px 0px -"+s+"px"})):(m=(h=$(element).width()>config.imageWidth?config.imageWidth:$(element).width())*(config.imageHeight/config.imageWidth),g=h*$(".rs-photo-gallery-images-list li",element).length,p=$(".rs-photo-gallery-images-list li.active",element).index()*(h=parseInt(h)),$(".rs-photo-gallery-container .rs-photo-gallery-images",element).css({height:m+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list",element).css({width:g+"px",height:m+"px",left:"-"+p+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css({width:h+"px",height:m+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li img",element).removeAttr("style"))}function windowResize(){var e,t,l,a,i,o,s,r,n,m,g,h,p,d,c,y,u,f;1<recordNum&&timerStop(),"yes"==config.customResize?config.customResizeFunction.call(this,element,config.imageWidth,config.imageHeight):("fade"==config.transitionType&&(e=getBreakPoint(),"yes"==config.fullScreenRotator&&-1<config.fullScreenBreakpoints.indexOf(e)?(t=$(element).offset().top,i=(l=$(window).width())*((a=$(window).height()-t)/l),r=l,g=0,n=config.imageWidth,(g=r*(m=config.imageHeight/n))<a&&(r=(g=a)/m),o=(r-l)/2,s=(g-a)/2,$(".rs-photo-gallery-container",element).css("height",i+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images",element).css("height",i+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list",element).css("height",i+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("height",i+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li img",element).css({width:r+"px",height:g+"px",margin:"-"+s+"px 0px 0px -"+o+"px"})):(r=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).width(),n=config.imageWidth,g=r*(m=config.imageHeight/n),$(".rs-photo-gallery-container .rs-photo-gallery-images",element).css("height",g+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list",element).css("height",g+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("height",g+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li img",element).removeAttr("style"))),"slide"==config.transitionType&&sliderDimReset()),1<recordNum&&timerReset(),"yes"==config.thumbnails&&("vertical"==config.thumbnailSlideDirection?(h=-1*parseInt($(".rs-photo-gallery-thumbnail-list",element).css("top")),(p=$(".rs-photo-gallery-thumbnail-list",element).outerHeight(!0)-$(".rs-photo-gallery-thumbnails",element).outerHeight(!0))<h&&$(".rs-photo-gallery-thumbnail-list",element).css("top","-"+p+"px"),$(".rs-photo-gallery-thumbnails",element).outerHeight(!0)<$(".rs-photo-gallery-thumbnail-list",element).outerHeight(!0)?(d=$(".rs-photo-gallery-thumb-control.back",element).outerHeight(!0)+10,c=$(".rs-photo-gallery-thumb-control.next",element).outerHeight(!0)+10,$(".rs-photo-gallery-thumb-control",element).removeClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({top:d+"px",bottom:c+"px"}),$(".rs-photo-gallery-thumbnail-list",element).css({"padding-top":"0px","padding-bottom":"0px","margin-top":"0px","margin-bottom":"0px"})):($(".rs-photo-gallery-thumb-control",element).addClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({top:"0px",bottom:"0px"}),$(".rs-photo-gallery-thumbnail-list",element).removeAttr("style"))):"horizontal"==config.thumbnailSlideDirection&&($(".rs-photo-gallery-thumbnails",element).outerWidth(!0)<$(".rs-photo-gallery-thumbnail-list",element).outerWidth(!0)?(y=$(".rs-photo-gallery-thumb-control.back",element).outerWidth(!0)+10,u=$(".rs-photo-gallery-thumb-control.next",element).outerWidth(!0)+10,$(".rs-photo-gallery-thumb-control",element).removeClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({left:y+"px",right:u+"px"}),$(".rs-photo-gallery-thumbnail-list",element).css({"padding-left":"0px","padding-right":"0px","margin-left":"0px","margin-right":"0px"})):(f=0,$(".rs-photo-gallery-thumbnail",element).each(function(){f+=$(this).outerWidth(!0)}),$(".rs-photo-gallery-thumbnail-list",element).removeAttr("style").css("width",f+"px"),$(".rs-photo-gallery-thumb-control",element).addClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({left:"0px",right:"0px"}))))}function getBreakPoint(){return 1024<=$(window).width()?"960":768<=$(window).width()&&$(window).width()<1024?"768":640<=$(window).width()&&$(window).width()<768?"640":480<=$(window).width()&&$(window).width()<640?"480":320<=$(window).width()&&$(window).width()<480?"320":void 0}"yes"==config.appHeader&&$(element).prepend('<div class="ui-widget-header"><h1>'+myJSON.Album.title+"</h1></div>"),0<recordNum&&(buildStyleSheet(),gatherMedia(),("yes"==config.efficientLoad?loadInitImages:loadImages)(),loadThumbs(),1<recordNum&&(galleryEvents(),"yes"==config.autoRotate&&galleryTimer()),windowResize()),config.allLoaded.call(this)})}}(jQuery),function(t,l,a){"function"==typeof define&&define.amd?define(["jquery"],function(e){return a(e,t,l),e.mobile}):a(t.jQuery,t,l)}(this,document,function(e,t,l,a){function m(e,t,l,a){var i=l.type;l.type=t,a?g.event.trigger(l,s,e):g.event.dispatch.call(e,l),l.type=i}var g,o,s,h,i,r,n,p,d,c,y;(function(p,e,d){function c(e){for(;e&&void 0!==e.originalEvent;)e=e.originalEvent;return e}function o(e){for(var t,l,a={};e;){for(l in t=p.data(e,x))t[l]&&(a[l]=a.hasVirtualBinding=!0);e=e.parentNode}return a}function i(){T=!0}function s(){T=!1}function r(){n(),w=setTimeout(function(){R=w=0,J.length=0,D=!1,i()},p.vmouse.resetTimerDuration)}function n(){w&&(clearTimeout(w),w=0)}function m(e,t,l){var a;return(l&&l[e]||!l&&function(e,t){for(var l;e;){if((l=p.data(e,x))&&(!t||l[t]))return e;e=e.parentNode}}(t.target,e))&&(a=function(e,t){var l,a,i,o,s,r,n,m,g,h=e.type;if((e=p.Event(e)).type=t,l=e.originalEvent,a=p.event.props,-1<h.search(/^(mouse|click)/)&&(a=k),l)for(n=a.length;n;)e[o=a[--n]]=l[o];if(-1<h.search(/mouse(down|up)|click/)&&!e.which&&(e.which=1),-1!==h.search(/^touch/)&&(h=(i=c(l)).touches,s=i.changedTouches,r=h&&h.length?h[0]:s&&s.length?s[0]:d))for(m=0,g=I.length;m<g;m++)e[o=I[m]]=r[o];return e}(t,e),p(t.target).trigger(a)),a}function g(e){var t,l=p.data(e.target,C);D||R&&R===l||(t=m("v"+e.type,e))&&(t.isDefaultPrevented()&&e.preventDefault(),t.isPropagationStopped()&&e.stopPropagation(),t.isImmediatePropagationStopped()&&e.stopImmediatePropagation())}function h(e){var t,l,a,i=c(e).touches;!i||1!==i.length||(l=o(t=e.target)).hasVirtualBinding&&(R=L++,p.data(t,C,R),n(),s(),O=!1,a=c(e).touches[0],A=a.pageX,N=a.pageY,m("vmouseover",e,l),m("vmousedown",e,l))}function y(e){T||(O||m("vmousecancel",e,o(e.target)),O=!0,r())}function u(e){var t,l,a,i;T||(t=c(e).touches[0],l=O,a=p.vmouse.moveDistanceThreshold,i=o(e.target),(O=O||Math.abs(t.pageX-A)>a||Math.abs(t.pageY-N)>a)&&!l&&m("vmousecancel",e,i),m("vmousemove",e,i),r())}function f(e){var t,l,a;T||(i(),m("vmouseup",e,t=o(e.target)),O||(l=m("vclick",e,t))&&l.isDefaultPrevented()&&(a=c(e).changedTouches[0],J.push({touchID:R,x:a.clientX,y:a.clientY}),D=!0),m("vmouseout",e,t),O=!1,r())}function v(e){var t,l=p.data(e,x);if(l)for(t in l)if(l[t])return 1}function b(){}var $,t,x="virtualMouseBindings",C="virtualTouchID",l="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),I="clientX clientY pageX pageY screenX screenY".split(" "),a=p.event.mouseHooks?p.event.mouseHooks.props:[],k=p.event.props.concat(a),S={},w=0,A=0,N=0,O=!1,J=[],D=!1,T=!1,j="addEventListener"in e,Q=p(e),L=1,R=0;for(p.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},t=0;t<l.length;t++)p.event.special[l[t]]=function(l){var a=l.substr(1);return{setup:function(){v(this)||p.data(this,x,{}),p.data(this,x)[l]=!0,S[l]=(S[l]||0)+1,1===S[l]&&Q.bind(a,g),p(this).bind(a,b),j&&(S.touchstart=(S.touchstart||0)+1,1===S.touchstart&&Q.bind("touchstart",h).bind("touchend",f).bind("touchmove",u).bind("scroll",y))},teardown:function(){--S[l],S[l]||Q.unbind(a,g),j&&(--S.touchstart,S.touchstart||Q.unbind("touchstart",h).unbind("touchmove",u).unbind("touchend",f).unbind("scroll",y));var e=p(this),t=p.data(this,x);t&&(t[l]=!1),e.unbind(a,b),v(this)||e.removeData(x)}}}(l[t]);j&&e.addEventListener("click",function(e){var t,l,a,i,o,s=J.length,r=e.target;if(s)for(t=e.clientX,l=e.clientY,$=p.vmouse.clickDistanceThreshold,a=r;a;){for(i=0;i<s;i++)if(o=J[i],a===r&&Math.abs(o.x-t)<$&&Math.abs(o.y-l)<$||p.data(a,C)===o.touchID)return e.preventDefault(),void e.stopPropagation();a=a.parentNode}},!0)})(e,l),e.mobile={},y={touch:"ontouchend"in l},(c=e).mobile.support=c.mobile.support||{},c.extend(c.support,y),c.extend(c.mobile.support,y),o=this,h=(g=e)(l),i=g.mobile.support.touch,r="touchmove scroll",n=i?"touchstart":"mousedown",p=i?"touchend":"mouseup",d=i?"touchmove":"mousemove",g.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(e,t){g.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)},g.attrFn&&(g.attrFn[t]=!0)}),g.event.special.scrollstart={enabled:!0,setup:function(){function t(e,t){m(i,(l=t)?"scrollstart":"scrollstop",e)}var l,a,i=this;g(i).bind(r,function(e){g.event.special.scrollstart.enabled&&(l||t(e,!0),clearTimeout(a),a=setTimeout(function(){t(e,!1)},50))})},teardown:function(){g(this).unbind(r)}},g.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var s=this,r=g(s),n=!1;r.bind("vmousedown",function(e){function t(){clearTimeout(i)}function l(){t(),r.unbind("vclick",a).unbind("vmouseup",t),h.unbind("vmousecancel",l)}function a(e){l(),n||o!==e.target?n&&e.preventDefault():m(s,"tap",e)}if(n=!1,e.which&&1!==e.which)return!1;var i,o=e.target;r.bind("vmouseup",t).bind("vclick",a),h.bind("vmousecancel",l),i=setTimeout(function(){g.event.special.tap.emitTapOnTaphold||(n=!0),m(s,"taphold",g.Event("taphold",{target:o}))},g.event.special.tap.tapholdThreshold)})},teardown:function(){g(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),h.unbind("vmousecancel")}},g.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var t=o.pageXOffset,l=o.pageYOffset,a=e.clientX,i=e.clientY;return 0===e.pageY&&Math.floor(i)>Math.floor(e.pageY)||0===e.pageX&&Math.floor(a)>Math.floor(e.pageX)?(a-=t,i-=l):(i<e.pageY-l||a<e.pageX-t)&&(a=e.pageX-t,i=e.pageY-l),{x:a,y:i}},start:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e,l=g.event.special.swipe.getLocation(t);return{time:(new Date).getTime(),coords:[l.x,l.y],origin:g(e.target)}},stop:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e,l=g.event.special.swipe.getLocation(t);return{time:(new Date).getTime(),coords:[l.x,l.y]}},handleSwipe:function(e,t,l,a){if(t.time-e.time<g.event.special.swipe.durationThreshold&&Math.abs(e.coords[0]-t.coords[0])>g.event.special.swipe.horizontalDistanceThreshold&&Math.abs(e.coords[1]-t.coords[1])<g.event.special.swipe.verticalDistanceThreshold){var i=e.coords[0]>t.coords[0]?"swipeleft":"swiperight";return m(l,"swipe",g.Event("swipe",{target:a,swipestart:e,swipestop:t}),!0),m(l,i,g.Event(i,{target:a,swipestart:e,swipestop:t}),!0),!0}return!1},eventInProgress:!1,setup:function(){var o=this,e=g(o),s={},t=g.data(this,"mobile-events");t||(t={length:0},g.data(this,"mobile-events",t)),t.length++,(t.swipe=s).start=function(e){var t,l,a,i;g.event.special.swipe.eventInProgress||(g.event.special.swipe.eventInProgress=!0,l=g.event.special.swipe.start(e),a=e.target,i=!1,s.move=function(e){l&&!e.isDefaultPrevented()&&(t=g.event.special.swipe.stop(e),i||(i=g.event.special.swipe.handleSwipe(l,t,o,a))&&(g.event.special.swipe.eventInProgress=!1),Math.abs(l.coords[0]-t.coords[0])>g.event.special.swipe.scrollSupressionThreshold&&e.preventDefault())},s.stop=function(){i=!0,g.event.special.swipe.eventInProgress=!1,h.off(d,s.move),s.move=null},h.on(d,s.move).one(p,s.stop))},e.on(n,s.start)},teardown:function(){var e,t=g.data(this,"mobile-events");t&&(e=t.swipe,delete t.swipe,t.length--,0===t.length&&g.removeData(this,"mobile-events")),e&&(e.start&&g(this).off(n,e.start),e.move&&h.off(d,e.move),e.stop&&h.off(p,e.stop))}},g.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(e,t){g.event.special[e]={setup:function(){g(this).bind(t,g.noop)},teardown:function(){g(this).unbind(t)}}})});