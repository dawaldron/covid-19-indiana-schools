// JAVASCRIPT LOGIC FOR CONTENT ACCORDION APP
// AUTHOR BRENTON KELLY - WEB DEVELOPMENT MANAGER - BLACKBOARD, INC.
// VERSION 04.17.19

var CsContentAccordionApp={KeyCodes:{tab:9,enter:13,esc:27,space:32,end:35,home:36,left:37,up:38,right:39,down:40},Init:function(t){this.SetProperties(t),this.SetAutoExpand(t),this.Events(t)},SetProperties:function(t){$("#pmi-"+t+" .ui-widget.app.content-accordion .ui-articles > li").each(function(t){$(".ui-article-title",this).attr("aria-label","Accordion item "+(t+1)+" - "+$(".ui-article-title",this).attr("aria-label"))})},SetAutoExpand:function(t){$("#pmi-"+t+" .ui-widget.app.content-accordion .ui-articles > li").each(function(t){"True"==$(".ui-article",this).attr("data-auto-expand")&&($(".content-accordion-button",this).attr("aria-expanded","true"),$(".content-accordion-panel",this).attr("aria-hidden","false").show(),$(".ui-article",this).addClass("active"))})},Events:function(i){var n=this,o=$("#pmi-"+i+" .content-accordion-button"),c=$(o).index($(o).first()),s=$(o).eq($(o).index($(o).first())),r=$(o).index($(o).last()),l=$(o).eq($(o).index($(o).last()));$("#pmi-"+i).on("click keydown",".content-accordion-button",function(t){if(n.AllyClick(t)&&(t.preventDefault(),$("#pmi-"+i+" .content-accordion-panel").stop(!0,!0),"false"==$(this).attr("aria-expanded")?($(this).attr("aria-expanded","true"),$("+ .content-accordion-panel",this).attr("aria-hidden","false").slideDown(),$(this).parent().addClass("active")):($(this).attr("aria-expanded","false"),$("+ .content-accordion-panel",this).attr("aria-hidden","true").slideUp(),$(this).parent().removeClass("active"))),"keydown"==t.type){var e=o.index(this),a=-1;switch(t.keyCode){case n.KeyCodes.up:case n.KeyCodes.left:t.preventDefault(),a=$(this).is(s)?r:e-1;break;case n.KeyCodes.down:case n.KeyCodes.right:t.preventDefault(),a=$(this).is(l)?c:e+1}-1!=a&&o.eq(a).focus()}}),$("#pmi-"+i).on("click keydown",".content-accordion-toggle",function(t){n.AllyClick(t)&&(t.preventDefault(),"expand"==$(this).attr("data-toggle-status")?($(this).attr("data-toggle-status","collapse").text("Collapse All").attr("aria-label","Collapse All Accordion Items"),$("#pmi-"+i+" .content-accordion-panel").slideDown(),$("#pmi-"+i+" .ui-article").addClass("active"),$("#pmi-"+i+" .ui-article-title").attr("aria-expanded","true")):($(this).attr("data-toggle-status","expand").text("Expand All").attr("aria-label","Expand All Accordion Items"),$("#pmi-"+i+" .content-accordion-panel").slideUp(),$("#pmi-"+i+" .ui-article").removeClass("active"),$("#pmi-"+i+" .ui-article-title").attr("aria-expanded","false")))})},AllyClick:function(t){return"click"==t.type||"keydown"==t.type&&(t.keyCode==this.KeyCodes.space||t.keyCode==this.KeyCodes.enter)}};