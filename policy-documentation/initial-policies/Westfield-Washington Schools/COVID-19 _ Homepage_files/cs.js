$(function(){CreativeTCWUpgrade.Init()});var CreativeTCWUpgrade={Init:function(){var e=!1;if(window.self!==window.top){var t=document.referrer,a=window.location.protocol+"//"+window.location.host+"/",i=t.split("/");i=i[2];var n=a.split("/");i==(n=n[2])&&(e=!0)}if(e&&$("body",window.parent.document).hasClass("sw-ide")){var o=this;$("#accordion",window.parent.document).hasClass("tcw-upgraded")||(this.ApplyStyles(),this.BuildFlyOut(),this.FilesAndFoldersButton(),this.ImageNames()),this.AppPreview(),this.MoveApps(),this.AppPreviewToggle(),this.AccordionActions(),this.RemoveTCWUpgrade(),this.RemoveAppPreview(),this.DragAndDrop(),setTimeout(function(){$("#templateconfiguration-pnl-configure #cs-tcw-upgrade",window.parent.document).length||o.BuildFlyOut()},5e3),$(window).resize(function(){o.WindowResize()})}},WindowResize:function(){this.AccordionReset()},AccordionReset:function(){$("div#cs-tcw-upgrade .cs-element-set-header",window.parent.document).attr("aria-selected","false").removeClass("active"),$("div#cs-tcw-upgrade .cs-element-set-header:first-child",window.parent.document).attr("aria-selected","true").addClass("active")},ApplyStyles:function(){$("head",window.parent.document).append('<style type="text/css" id="tcw-upgrade-css">@font-face {font-family: "tcw-upgrade";src: url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBVUAAAC8AAAAYGNtYXAXVtKJAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZvmlY34AAAF4AAABPGhlYWQXXb7yAAACtAAAADZoaGVhCCsEKAAAAuwAAAAkaG10eBCkAAAAAAMQAAAAHGxvY2EAngEMAAADLAAAABBtYXhwAAoAKwAAAzwAAAAgbmFtZa8Uj4wAAANcAAABknBvc3QAAwAAAAAE8AAAACAAAwMpAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpAgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6QL//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAD/wAJAA8AAKAAABTgBMSImJwEuATU0NjcBPgEzMhYVFAYHMQkBHgEVFAYHMQ4BIzgBOQECAA4XCP5ACQoKCQHACBgNGyUKCf5tAZMJCgoJCBcOQAoJAcAIGA0NGAgBwAkKJRsNGAj+bf5tCBgNDRgICQoAAAACAAD/vwQAA8AABAAJAAATNwEHAREBFwEnAEQDvEP8QwO9Q/xERAN8RPxERAO8/IcDvEP8Q0QAAAIAAP/ABGgDwAAGAA0AAAkBJwkBNwEFAScJATcBAl3+aMUBRP68xQGcAgP+Y8QBRP7AxAGdAbH+D3ABiQGbbP4PHv4PcAGJAZts/g8AAAAAAQAAAAEAAD5A+qVfDzz1AAsEAAAAAADZ6z07AAAAANnrPTsAAP+/BGgDwAAAAAgAAgAAAAAAAAABAAADwP/AAAAEZAAA//wEaAABAAAAAAAAAAAAAAAAAAAABwQAAAAAAAAAAAAAAAIAAAACQAAABAAAAARkAAAAAAAAAAoAFAAeAFoAdgCeAAEAAAAHACkAAgAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAOAK4AAQAAAAAAAQAIAAAAAQAAAAAAAgAHAGkAAQAAAAAAAwAIADkAAQAAAAAABAAIAH4AAQAAAAAABQALABgAAQAAAAAABgAIAFEAAQAAAAAACgAaAJYAAwABBAkAAQAQAAgAAwABBAkAAgAOAHAAAwABBAkAAwAQAEEAAwABBAkABAAQAIYAAwABBAkABQAWACMAAwABBAkABgAQAFkAAwABBAkACgA0ALBkaXN0cmljdABkAGkAcwB0AHIAaQBjAHRWZXJzaW9uIDEuMABWAGUAcgBzAGkAbwBuACAAMQAuADBkaXN0cmljdABkAGkAcwB0AHIAaQBjAHRkaXN0cmljdABkAGkAcwB0AHIAaQBjAHRSZWd1bGFyAFIAZQBnAHUAbABhAHJkaXN0cmljdABkAGkAcwB0AHIAaQBjAHRGb250IGdlbmVyYXRlZCBieSBJY29Nb29uLgBGAG8AbgB0ACAAZwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAC4AAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA") format("truetype");font-weight: normal;font-style: normal;font-display: block;}.tcw-upgrade {font-family: "tcw-upgrade" !important;speak: none;font-style: normal;font-weight: normal;font-variant: normal;text-transform: none;line-height: 1;-webkit-font-smoothing: antialiased;-moz-osx-font-smoothing: grayscale;}.ui-accordion-header {display:none;}#cs-tcw-upgrade {position:relative;}#cs-element-flyout {position:absolute;left:100%;top:0px;width:220px;overflow:hidden;-ms-transition: all .3s ease 0s;-moz-transition: all .3s ease 0s;-webkit-transition: all .3s ease 0s;transition: all .3s ease 0s;}#cs-element-flyout-inner {background: #262626;border:1px solid #767676;}#cs-element-flyout.closed {width:0px;}#templateconfiguration-pnl-configure #accordion {background:transparent;display: flex;display: -webkit-box;display: -ms-flexbox;display: -webkit-flex;flex-direction: column;-webkit-flex-direction: column;border:0px;border-radius:0px;height: calc(100vh - 261px);justify-content: flex-end;-webkit-justify-content: flex-end;width:auto;}#templateconfiguration-pnl-configure #accordion.ui-accordion .cs-accordion-content-active {height: auto !important;flex-grow:1;-webkit-flex-grow: 1;margin:0;padding:10px 22px 100px !important;border:0;}#templateconfiguration-pnl-configure #accordion.ui-accordion .cs-accordion-content-active::after {height: 80px;display:block;content: "";}#cs-tcw-element-set-list {padding: 0px;margin: 0px !important;max-height: calc(100vh - 330px);overflow: auto;}#cs-element-flyout-toggle {color: #ffffff;font-size:14px;padding: 8px 15px;background: #404040;opacity: 0;-ms-transition: all .3s ease 0s;-moz-transition: all .3s ease 0s;-webkit-transition: all .3s ease 0s;transition: all .3s ease 0s;position:relative;}#cs-element-flyout-toggle span {position:absolute;right:10px;top:10px;font-size:11px;cursor:pointer;}#cs-element-flyout-toggle.closed {opacity: 1;cursor:pointer;}#cs-tcw-element-set-list-header {font-size:16px;font-weight:600;font-family:"OpenSans-SemiBold", sans-serif;color:#fff;padding:12px 30px 12px 15px;position:relative;}#cs-tcw-element-set-list-header span {position:absolute;right:10px;top:12px;cursor:pointer;}.cs-element-set-header {color: #ffffff;font-size:14px;padding: 12px 30px;line-height: 1.2;border-bottom: 1px solid #000;position:relative;-ms-transition: all .3s ease 0s;-moz-transition: all .3s ease 0s;-webkit-transition: all .3s ease 0s;transition: all .3s ease 0s;}.cs-element-set-header:last-child {border-bottom: 0px;}.cs-element-set-header.active {background: #fff;color:#262626;}.cs-element-set-header span {position:absolute;left:11px;top:calc(50% - 7px);opacity:0;-ms-transition: all .3s ease 0s;-moz-transition: all .3s ease 0s;-webkit-transition: all .3s ease 0s;transition: all .3s ease 0s;}.cs-element-set-header.active span {opacity:1;}.ui-accordion-content-active {display:none !important;}.cs-accordion-content-active {display:block !important;}#templateconfiguration-btn-save {margin-left:10px !important;}#cs-app-preview {position:relative;background:#a234b5;order:2;padding-right:30px;}#cs-app-preview::after {width: 0;height: 0;border-left: 5px solid transparent;border-right: 5px solid transparent;border-top: 5px solid #fff;display:block;content:"";position:absolute;right:12px;top:17px;}#app-preview-dd {position:absolute;top:calc(100% + 15px);right:10px;background:#262626;color:#000;min-height:100px;padding:10px;width:447px;white-space:break-spaces;display:none;border-radius:2px;}#app-preview-dd::before {width: 0;height: 0;border-left: 8px solid transparent;border-right: 8px solid transparent;border-bottom: 9px solid #262626;display:block;content:"";position:absolute;right:150px;bottom:100%;}#cs-app-preview-column-container {display: flex;display: -webkit-box;display: -ms-flexbox;display: -webkit-flex;}.app-preview-column.one {max-width: 150px;font-size: 11px;color: #fff;display: flex;display: -webkit-box;display: -ms-flexbox;display: -webkit-flex;flex-direction: column;align-items: flex-start;-webkit-flex-direction: column;-webkit-align-items: flex-start;position: relative;border-right: 1px solid #000;box-sizing: border-box;padding-right: 10px;}.app-preview-column.two {flex-grow:1;-webkit-flex-grow:1;}.cs-available-region {border:1px solid #000;padding:10px;}#cs-app-preview:hover {opacity:1 !important;}.cs-app-preview-row.current {padding-bottom:10px;max-height:400px;overflow:auto;}.cs-app-preview-row.button {padding:10px 0px 10px 10px;display: flex;display: -webkit-box;display: -ms-flexbox;display: -webkit-flex;justify-content:space-between;-webkit-justify-content:space-between;}.cs-app-region-row {padding:8px 0px 8px 10px;}.cs-app-data {display:block;min-height:30px;box-sizing:border-box;border:1px solid #cdcdcd;border-radius:2px;padding:10px;margin:2px 0px !important;background:#fff;}.cs-empty-li {min-height:5px;}.cs-region-heading {padding-bottom:5px;margin-bottom:5px;color:#fff;font-weight:700;}.cs-app-preview-button {background:#777;color:#fff;padding:9px 13px;border:0;cursor:pointer;-ms-transition: all .4s ease 0s;-moz-transition: all .4s ease 0s;-webkit-transition: all .4s ease 0s;transition: all .4s ease 0s;}.cs-app-preview-button:hover {background:#5d5c5c;}#cs-app-preview-instructions {list-style-type: decimal;padding-left: 11px;margin-top: 10px;}#cs-app-preview-instructions li {padding: 5px 0px;line-height: 1.3;}#cs-disclaimer {position: absolute;bottom: 0px;left: 5px;width: calc(100% - 5px);max-height: none !important;}</style>')},DragAndDrop:function(){if(!$("#tcw-upgrade-js",window.parent.document).length){var e=window.parent.document.createElement("script");e.id="tcw-upgrade-js",e.text='let selected = null\nfunction dragOver(e) {\nif (isBefore(selected, e.target)) {\ne.target.parentNode.insertBefore(selected, e.target)\n} else {\ne.target.parentNode.insertBefore(selected, e.target.nextSibling)\n}\n}\nfunction dragEnd() {\nselected = null\nupDateAppRegion();\n}\nfunction dragStart(e) {\ne.dataTransfer.effectAllowed = "move"\ne.dataTransfer.setData("text/plain", null)\nselected = e.target\n}\nfunction isBefore(el1, el2) {\nlet cur\nif (el2.parentNode === el1.parentNode) {\nfor (cur = el1.previousSibling; cur; cur = cur.previousSibling) {\nif (cur === el2) return true\n}\n}\nreturn false;\n}\nfunction upDateAppRegion(){\n$(".cs-app-region-row").each(function(){\nvar currentRegion = $(this).find(".cs-region-heading").attr("data-region-id");\n$(this).find(".cs-app-data").attr("data-current-region",currentRegion);\n})\n}',window.parent.document.getElementsByTagName("head")[0].appendChild(e)}},BuildFlyOut:function(){var e="";$("div#accordion .ui-accordion-header",window.parent.document).each(function(){var t=$(this).attr("id"),a=$(this).text(),i=t.split("-");if(null==i[4]){var n=parseInt(i[2])+1;e+='<li class="cs-element-set-header" aria-controls="ui-id-'+n+'" data-accordion-panel="ui-id-'+n+'"><span class="tcw-upgrade" aria-hidden="true">&#xe900;</span>'+a+"</li>"}else{n=i[4];e+='<li class="cs-element-set-header" aria-controls="ui-accordion-accordion-panel-'+n+'" data-accordion-panel="ui-accordion-accordion-panel-'+n+'"><span class="tcw-upgrade" aria-hidden="true">&#xe900;</span>'+a+"</li>"}});var t='<div id="cs-tcw-upgrade"><div id="cs-element-flyout-toggle" aria-controls="cs-element-flyout" aria-expanded="true">Template Options<span class="tcw-upgrade">&#xe902;</span></div><div id="cs-element-flyout" aria-hidden="false"><div id="cs-element-flyout-inner"><div id="cs-tcw-element-set-list-header">Template Options<span class="tcw-upgrade">&#xe901;</span></div><ul id="cs-tcw-element-set-list">'+e+"</ul></div></div></div>";$("#templateconfiguration-pnl-configure",window.parent.document).prepend(t),$("div#cs-tcw-upgrade .cs-element-set-header:first-child",window.parent.document).attr("aria-selected","true").addClass("active"),$("div#accordion .ui-accordion-content:nth-child(2)",window.parent.document).addClass("cs-accordion-content-active"),$("#accordion",window.parent.document).addClass("tcw-upgraded"),this.AccordionActions()},AccordionActions:function(){var e=$("div#cs-tcw-upgrade .cs-element-set-header.active",window.parent.document).attr("data-accordion-panel");$("div#accordion .ui-accordion-content",window.parent.document).removeClass("cs-accordion-content-active").attr("aria-expanded","false"),$("div#accordion .ui-accordion-content#"+e,window.parent.document).addClass("cs-accordion-content-active").show().attr("aria-expanded","true"),$("div#cs-tcw-upgrade .cs-element-set-header",window.parent.document).click(function(){var e=$(this).attr("data-accordion-panel");$(this).text();$("div#cs-tcw-upgrade .cs-element-set-header",window.parent.document).attr("aria-selected","false").removeClass("active"),$(this).attr("aria-selected","true").addClass("active"),$("div#accordion .ui-accordion-content",window.parent.document).removeClass("cs-accordion-content-active").attr("aria-expanded","false"),$("div#accordion .ui-accordion-content#"+e,window.parent.document).addClass("cs-accordion-content-active").show().attr("aria-expanded","true")}),$("#cs-tcw-element-set-list-header span",window.parent.document).click(function(){$("#cs-element-flyout",window.parent.document).addClass("closed"),$("#cs-element-flyout-toggle",window.parent.document).addClass("closed")}),$("#cs-element-flyout-toggle",window.parent.document).click(function(){$(this).removeClass("closed"),$("#cs-element-flyout",window.parent.document).removeClass("closed")})},ImageNames:function(){$("body",window.parent.document).on("click",".image-picker-current-image",function(){setTimeout(function(){$(".image-picker-image-list li",window.parent.document).each(function(){var e=$(this).attr("file").split("/");$(this).attr("title",e[1])})},2e3)}),$("body",window.parent.document).on("click",".image-picker-category-list",function(){setTimeout(function(){$(".image-picker-image-list li",window.parent.document).each(function(){var e=$(this).attr("file").split("/");$(this).attr("title",e[1])})},1e3)})},RemoveTCWUpgrade:function(){$("body",window.parent.document).on("click","ul#templatepicker-lst-templatelistList li",function(){$("#tcw-upgrade-css, #cs-tcw-upgrade, #cs-app-preview, #app-preview-dd",window.parent.document).remove(),$("#accordion",window.parent.document).removeClass("tcw-upgraded"),$("#templateconfiguration-iframe-preview",window.parent.document).css("border","0px")})},RemoveAppPreview:function(){$("body",window.parent.document).on("click","#templateconfiguration-btn-preview",function(){$("#templateconfiguration-iframe-preview",window.parent.document).css("border","0px")})},FilesAndFoldersButton:function(){$("#cs-upload-images",window.parent.document).length||$("#templateconfiguration-btn-preview",window.parent.document).after('<a class="ui-btn-toolbar ui-btn-toolbar-primary" id="cs-upload-images" target="popup" onclick="window.open(\'/cms/UserControls/FilesAndFolders/FilesAndFolders.aspx?FolderType=TemplateLibrary\',\'popup\'); return false;" title="Upload images to Use in this template."><span>Upload Images</span></a>')},AppPreview:function(){$("#cs-app-preview",window.parent.document).length||$("#templateconfiguration-btn-save",window.parent.document).after('<div class="ui-btn-toolbar ui-btn-toolbar-primary" id="cs-app-preview"><span>App Preview</span></div><div id="app-preview-dd"></div>');var e=[];$("#gb-page .ui-hp").each(function(){var t=$(this).attr("id");e.push(t)});var t=0,a="";$("#gb-page .ui-hp").each(function(){switch(t){case 0:var i="A";break;case 1:i="B";break;case 2:i="C";break;case 3:i="D";break;case 4:i="E";break;case 5:i="F";break;case 6:i="G";break;case 7:i="H";break;case 8:i="I";break;case 9:i="J";break;case 10:i="K";break;case 11:i="L"}var n="";$(this).find(".app").each(function(){var e=$.trim($(this).find(".ui-widget-header h1").text());""!=e&&(e=" ("+e+")");var t=$(this).attr("class"),a=t.split(" ");"last-app"!=(a=a.slice(-1)[0])&&"detail"!=a&&"app"!=a||(a=(a=t.split(" ")).slice(-2,-1)[0]);var i="";switch(a){case"multimedia-gallery":i="MMG";break;case"cs-rs-multimedia-rotator":i="MMR";break;case"upcomingevents":i="Upcoming Events";break;case"flexpage":i="Content";break;case"blog":i="Blog";break;case"headlines":i="Headlines";break;case"facts-and-figures":i="Facts & Figures";break;case"announcements":i="Announcements";break;case"bell-schedule":i="Bell Schedule";break;case"assignment":i="Assignment";break;case"article-library":i="Article Library";break;case"google-events-calendar":i="Google Events Calendar";break;case"image":i="Image";break;case"content-accordion":i="Content Accordion";break;case"school-directory":i="School Directory";break;case"siteshortcuts":i="Site Shortcuts";break;case"lunchmenu":i="Lunch Menu";break;case"link-library":i="Link Library";break;case"icons-horizontal":i="Icons Horizontal";break;case"heading":i="Heading";break;case"alumni-directory":i="Alumni Directory";break;case"board-policies":i="Board Policies";break;case"book-list":i="Book List";break;case"maps-directions":i="Maps & Directions";break;case"divider-app":i="Divider";break;case"file-library":i="File Library";break;case"idea-board":i="Idea Board";break;case"twitter-retweet":i="Twitter Retweet";break;case"about-teacher":i="About Teacher";break;case"table":i="Table";break;case"tabbed-content":i="Tabbed Content";break;case"staffdirectorydiv":i="Staff Directory";break;case"program-portal":i="Program Portal";break;case"podcast":i="Podcast";break;case"figure":i="Figure";break;case"facebook-like":i="Facebook Like";break;case"document-viewer":i="Document Viewer";break;case"discussion":i="Discussion";break;case"content-accordion":i="Content Accordion";break;case"calendar":i="Calendar";break;case"heading":case"heading":case"heading":i="Heading";break;default:i="App"}var o=$(this).closest("[id*='pmi']").attr("id");n+="<li class='cs-app-data' draggable='true' ondragend='dragEnd()' ondragover='dragOver(event)' ondragstart='dragStart(event)' data-app-pmi='"+o+"' title='"+e+"'>"+i+"</li>"}),a+="<ul class='cs-app-region-row'><li class='cs-region-heading' data-region-id='"+e[t]+"'>Region "+i+":</li>"+n+"<li class='cs-empty-li' draggable='true' ondragend='dragEnd()' ondragover='dragOver(event)' ondragstart='dragStart(event)'></li></ul>",t++}),$("#app-preview-dd",window.parent.document).html("<div id='cs-app-preview-column-container'><div class='app-preview-column one'><p><strong style='font-size:12px;'>App Preview</strong></p><ol id='cs-app-preview-instructions'><li>Drag and drop apps into desired regions.*</li><li>Click 'Preview Apps in New Regions' to display apps in new regions.</li><li>Clicking 'Save & Preview' will reset the apps to their locations on your live website.</li></ol><p id='cs-disclaimer'>*App Preview does NOT change app placement on your live website. To do that, use the Homepage Editor in the Site Workspace.</p></div><div class='app-preview-column two'><div class='cs-app-preview-row current'>"+a+"</div><div class='cs-app-preview-row button'><button id='cs-app-preview-initiate' class='cs-app-preview-button'>Preview Apps in New Regions</button><button id='cs-app-preview-close-dd' class='cs-app-preview-button'>Close</button></div></div></div>"),$(".cs-app-region-row",window.parent.document).each(function(){var e=$(this).find(".cs-region-heading").attr("data-region-id");$(this).find(".cs-app-data").attr("data-current-region",e)});var i=$("#templateconfiguration-iframe-preview",window.parent.document).attr("src");$("#cs-app-preview-initiate",window.parent.document).on("click",function(){var e="&csAppPreviewData=";$(".cs-app-data",window.parent.document).each(function(){e+=$(this).attr("data-app-pmi")+"_"+$(this).attr("data-current-region")+"+"}),$("#template-frame",window.parent.document).empty().html('<iframe id="templateconfiguration-iframe-preview" src="'+i+"&"+e+'" frameborder="0" width="100%" scrolling="auto" style="height:calc(100vh - 200px); box-sizing:border-box; border:8px solid #a234b5;"></iframe>')})},AppPreviewToggle:function(){$("#cs-app-preview",window.parent.document).click(function(){$("#app-preview-dd",window.parent.document).slideDown(),$(this).addClass("open")}),$("#cs-app-preview-close-dd",window.parent.document).click(function(){$("#app-preview-dd",window.parent.document).slideUp(),$("#cs-app-preview",window.parent.document).removeClass("open")})},MoveApps:function(){var e=window.location.href;if(e.includes("csAppPreviewData")){var t,a=e.split("=");a=(a=a.slice(-1)[0]).slice(0,-1),$("#gb-page .ui-hp").hide(),appPositionArray=a.split("+");var i="",n="",o="";for(t=0;t<appPositionArray.length;++t)n=(i=appPositionArray[t].split("_"))[0],o=i[1],$("#"+n).appendTo("#"+o);$("#gb-page .ui-hp").show(),$("#app-preview-dd",window.parent.document).empty(),this.AppPreview()}}};