(window.webpackJsonp=window.webpackJsonp||[]).push([[184],{"/2Cm":function(e,t,o){"use strict";var n=o("tBqf");e.exports=n},"4LIG":function(e,t,o){"use strict";var n={OS:"web",select:function(e){return"web"in e?e.web:e.default},get isTesting(){return!1}};t.a=n},"5RdJ":function(e,t,o){"use strict";o.r(t);var n=o("97Jx"),i=o.n(n),s=o("ERkP"),r=o("v6aA"),a=o("+cai"),c=o("nvLZ");t.default=function(e){const{featureSwitches:t}=s.useContext(r.a),o={vdl_with_icon:"experimentalPillWithIcon",vdl_without_icon:"experimentalPillWithoutIcon"}[t.getStringValue("responsive_web_search_visual_refresh_variant")];return s.createElement(c.a,i()({},e,{emojiInfo:a.default,experimentType:o}))}},Iok7:function(e,t,o){"use strict";var n=o("Y3fD"),i=o.n(n),s=o("gHc1"),r={_currentlyFocusedNode:null,currentlyFocusedField:function(){return document.activeElement!==this._currentlyFocusedNode&&(this._currentlyFocusedNode=null),this._currentlyFocusedNode},focusTextInput:function(e){null!==e&&(this._currentlyFocusedNode=e,document.activeElement!==e&&s.a.focus(e))},blurTextInput:function(e){null!==e&&(this._currentlyFocusedNode=null,document.activeElement===e&&s.a.blur(e))}},a=function(){r.blurTextInput(r.currentlyFocusedField())},c=o("tI3i"),l=o.n(c),d=o("Wkb5"),h=o("i4Oy"),u=o("Xo28"),p=o("4LIG"),f=o("/2Cm"),m=o.n(f),g={},y={Mixin:{scrollResponderMixinGetInitialState:function(){return{isTouching:!1,lastMomentumScrollBeginTime:0,lastMomentumScrollEndTime:0,observedScrollSinceBecomingResponder:!1,becameResponderWhileAnimating:!1}},scrollResponderHandleScrollShouldSetResponder:function(){return this.state.isTouching},scrollResponderHandleStartShouldSetResponder:function(){return!1},scrollResponderHandleStartShouldSetResponderCapture:function(e){return this.scrollResponderIsAnimating()},scrollResponderHandleResponderReject:function(){m()(!1,"ScrollView doesn't take rejection well - scrolls anyway")},scrollResponderHandleTerminationRequest:function(){return!this.state.observedScrollSinceBecomingResponder},scrollResponderHandleTouchEnd:function(e){var t=e.nativeEvent;this.state.isTouching=0!==t.touches.length,this.props.onTouchEnd&&this.props.onTouchEnd(e)},scrollResponderHandleResponderRelease:function(e){this.props.onResponderRelease&&this.props.onResponderRelease(e);var t=r.currentlyFocusedField();this.props.keyboardShouldPersistTaps||null==t||e.target===t||this.state.observedScrollSinceBecomingResponder||this.state.becameResponderWhileAnimating||(this.props.onScrollResponderKeyboardDismissed&&this.props.onScrollResponderKeyboardDismissed(e),r.blurTextInput(t))},scrollResponderHandleScroll:function(e){this.state.observedScrollSinceBecomingResponder=!0,this.props.onScroll&&this.props.onScroll(e)},scrollResponderHandleResponderGrant:function(e){this.state.observedScrollSinceBecomingResponder=!1,this.props.onResponderGrant&&this.props.onResponderGrant(e),this.state.becameResponderWhileAnimating=this.scrollResponderIsAnimating()},scrollResponderHandleScrollBeginDrag:function(e){this.props.onScrollBeginDrag&&this.props.onScrollBeginDrag(e)},scrollResponderHandleScrollEndDrag:function(e){this.props.onScrollEndDrag&&this.props.onScrollEndDrag(e)},scrollResponderHandleMomentumScrollBegin:function(e){this.state.lastMomentumScrollBeginTime=Date.now(),this.props.onMomentumScrollBegin&&this.props.onMomentumScrollBegin(e)},scrollResponderHandleMomentumScrollEnd:function(e){this.state.lastMomentumScrollEndTime=Date.now(),this.props.onMomentumScrollEnd&&this.props.onMomentumScrollEnd(e)},scrollResponderHandleTouchStart:function(e){this.state.isTouching=!0,this.props.onTouchStart&&this.props.onTouchStart(e)},scrollResponderHandleTouchMove:function(e){this.props.onTouchMove&&this.props.onTouchMove(e)},scrollResponderIsAnimating:function(){return Date.now()-this.state.lastMomentumScrollEndTime<16||this.state.lastMomentumScrollEndTime<this.state.lastMomentumScrollBeginTime},scrollResponderGetScrollableNode:function(){return this.getScrollableNode?this.getScrollableNode():Object(u.a)(this)},scrollResponderScrollTo:function(e,t,o){if("number"==typeof e);else{var n=e||g;e=n.x,t=n.y,o=n.animated}var i=this.scrollResponderGetScrollableNode(),s=e||0,r=t||0;"function"==typeof i.scroll?i.scroll({top:r,left:s,behavior:o?"smooth":"auto"}):(i.scrollLeft=s,i.scrollTop=r)},scrollResponderZoomTo:function(e,t){"ios"!==p.a.OS&&l()("zoomToRect is not implemented")},scrollResponderFlashScrollIndicators:function(){},scrollResponderScrollNativeHandleToKeyboard:function(e,t,o){this.additionalScrollOffset=t||0,this.preventNegativeScrollOffset=!!o,s.a.measureLayout(e,Object(u.a)(this.getInnerViewNode()),this.scrollResponderTextInputFocusError,this.scrollResponderInputMeasureAndScrollToKeyboard)},scrollResponderInputMeasureAndScrollToKeyboard:function(e,t,o,n){var i=h.a.get("window").height;this.keyboardWillOpenTo&&(i=this.keyboardWillOpenTo.endCoordinates.screenY);var s=t-i+n+this.additionalScrollOffset;this.preventNegativeScrollOffset&&(s=Math.max(0,s)),this.scrollResponderScrollTo({x:0,y:s,animated:!0}),this.additionalOffset=0,this.preventNegativeScrollOffset=!1},scrollResponderTextInputFocusError:function(e){},UNSAFE_componentWillMount:function(){this.keyboardWillOpenTo=null,this.additionalScrollOffset=0},scrollResponderKeyboardWillShow:function(e){this.keyboardWillOpenTo=e,this.props.onKeyboardWillShow&&this.props.onKeyboardWillShow(e)},scrollResponderKeyboardWillHide:function(e){this.keyboardWillOpenTo=null,this.props.onKeyboardWillHide&&this.props.onKeyboardWillHide(e)},scrollResponderKeyboardDidShow:function(e){e&&(this.keyboardWillOpenTo=e),this.props.onKeyboardDidShow&&this.props.onKeyboardDidShow(e)},scrollResponderKeyboardDidHide:function(e){this.keyboardWillOpenTo=null,this.props.onKeyboardDidHide&&this.props.onKeyboardDidHide(e)}}},S=o("ERkP"),_=o.n(S),v=o("vlSS"),R=o("MWbm"),E=o("Nfwf");function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function b(e){return{nativeEvent:{contentOffset:{get x(){return e.target.scrollLeft},get y(){return e.target.scrollTop}},contentSize:{get height(){return e.target.scrollHeight},get width(){return e.target.scrollWidth}},layoutMeasurement:{get height(){return e.target.offsetHeight},get width(){return e.target.offsetWidth}}},timeStamp:Date.now()}}var C=S.forwardRef((function(e,t){var o=e.onScroll,n=e.onTouchMove,i=e.onWheel,s=e.scrollEnabled,r=void 0===s||s,a=e.scrollEventThrottle,c=void 0===a?0:a,l=e.showsHorizontalScrollIndicator,d=e.showsVerticalScrollIndicator,h=e.style,u=function(e,t){if(null==e)return{};var o,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)o=s[n],t.indexOf(o)>=0||(i[o]=e[o]);return i}(e,["onScroll","onTouchMove","onWheel","scrollEnabled","scrollEventThrottle","showsHorizontalScrollIndicator","showsVerticalScrollIndicator","style"]),p=S.useRef({isScrolling:!1,scrollLastTick:0}),f=S.useRef(null),m=S.useRef(null);function g(e){return function(t){r&&e&&e(t)}}function y(e){p.current.scrollLastTick=Date.now(),o&&o(b(e))}var _=!1===l||!1===d;return S.createElement(R.a,w({},u,{onScroll:function(e){var t,n,i;e.stopPropagation(),e.target===m.current&&(e.persist(),null!=f.current&&clearTimeout(f.current),f.current=setTimeout((function(){!function(e){p.current.isScrolling=!1,o&&o(b(e))}(e)}),100),p.current.isScrolling?(t=p.current.scrollLastTick,n=c,i=Date.now()-t,n>0&&i>=n&&y(e)):function(e){p.current.isScrolling=!0,y(e)}(e))},onTouchMove:g(n),onWheel:g(i),ref:Object(E.a)(m,t),style:[h,!r&&k.scrollDisabled,_&&k.hideScrollbar]}))})),k=v.a.create({scrollDisabled:{overflowX:"hidden",overflowY:"hidden",touchAction:"none"},hideScrollbar:{scrollbarWidth:"none"}}),j=C;function I(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function T(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?I(Object(o),!0).forEach((function(t){D(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):I(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function D(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}var P={},O=i()({displayName:"ScrollView",mixins:[y.Mixin],getInitialState:function(){return this.scrollResponderMixinGetInitialState()},flashScrollIndicators:function(){this.scrollResponderFlashScrollIndicators()},getScrollResponder:function(){return this},getScrollableNode:function(){return this._scrollNodeRef},getInnerViewRef:function(){return this._innerViewRef},getInnerViewNode:function(){return this._innerViewRef},getNativeScrollRef:function(){return this._scrollNodeRef},scrollTo:function(e,t,o){if("number"==typeof e);else{var n=e||P;t=n.x,e=n.y,o=n.animated}this.getScrollResponder().scrollResponderScrollTo({x:t||0,y:e||0,animated:!1!==o})},scrollToEnd:function(e){var t=!1!==(e&&e.animated),o=this.props.horizontal,n=this.getScrollResponder(),i=n.scrollResponderGetScrollableNode(),s=o?i.scrollWidth:0,r=o?0:i.scrollHeight;n.scrollResponderScrollTo({x:s,y:r,animated:t})},render:function(){var e=this.props,t=e.contentContainerStyle,o=e.horizontal,n=e.onContentSizeChange,i=e.refreshControl,s=e.stickyHeaderIndices,r=e.pagingEnabled,a=(e.forwardedRef,e.keyboardDismissMode,e.onScroll,function(e,t){if(null==e)return{};var o,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)o=s[n],t.indexOf(o)>=0||(i[o]=e[o]);return i}(e,["contentContainerStyle","horizontal","onContentSizeChange","refreshControl","stickyHeaderIndices","pagingEnabled","forwardedRef","keyboardDismissMode","onScroll"])),c={};n&&(c={onLayout:this._handleContentOnLayout});var d=!o&&Array.isArray(s),h=d||r?_.a.Children.map(this.props.children,(function(e,t){var o=d&&s.indexOf(t)>-1;return null!=e&&(o||r)?_.a.createElement(R.a,{style:v.a.compose(o&&N.stickyHeader,r&&N.pagingEnabledChild)},e):e})):this.props.children,u=_.a.createElement(R.a,x({},c,{children:h,collapsable:!1,ref:this._setInnerViewRef,style:v.a.compose(o&&N.contentContainerHorizontal,t)})),p=o?N.baseHorizontal:N.baseVertical,f=o?N.pagingEnabledHorizontal:N.pagingEnabledVertical,m=T(T({},a),{},{style:[p,r&&f,this.props.style],onTouchStart:this.scrollResponderHandleTouchStart,onTouchMove:this.scrollResponderHandleTouchMove,onTouchEnd:this.scrollResponderHandleTouchEnd,onScrollBeginDrag:this.scrollResponderHandleScrollBeginDrag,onScrollEndDrag:this.scrollResponderHandleScrollEndDrag,onMomentumScrollBegin:this.scrollResponderHandleMomentumScrollBegin,onMomentumScrollEnd:this.scrollResponderHandleMomentumScrollEnd,onStartShouldSetResponder:this.scrollResponderHandleStartShouldSetResponder,onStartShouldSetResponderCapture:this.scrollResponderHandleStartShouldSetResponderCapture,onScrollShouldSetResponder:this.scrollResponderHandleScrollShouldSetResponder,onScroll:this._handleScroll,onResponderGrant:this.scrollResponderHandleResponderGrant,onResponderTerminationRequest:this.scrollResponderHandleTerminationRequest,onResponderTerminate:this.scrollResponderHandleTerminate,onResponderRelease:this.scrollResponderHandleResponderRelease,onResponderReject:this.scrollResponderHandleResponderReject}),g=j;return l()(void 0!==g,"ScrollViewClass must not be undefined"),i?_.a.cloneElement(i,{style:m.style},_.a.createElement(g,x({},m,{ref:this._setScrollNodeRef,style:p}),u)):_.a.createElement(g,x({},m,{ref:this._setScrollNodeRef}),u)},_handleContentOnLayout:function(e){var t=e.nativeEvent.layout,o=t.width,n=t.height;this.props.onContentSizeChange(o,n)},_handleScroll:function(e){"on-drag"===this.props.keyboardDismissMode&&a(),this.scrollResponderHandleScroll(e)},_setInnerViewRef:function(e){this._innerViewRef=e},_setScrollNodeRef:function(e){this._scrollNodeRef=e,null!=e&&(e.getScrollResponder=this.getScrollResponder,e.getInnerViewNode=this.getInnerViewNode,e.getInnerViewRef=this.getInnerViewRef,e.getNativeScrollRef=this.getNativeScrollRef,e.getScrollableNode=this.getScrollableNode,e.scrollTo=this.scrollTo,e.scrollToEnd=this.scrollToEnd,e.flashScrollIndicators=this.flashScrollIndicators,e.scrollResponderZoomTo=this.scrollResponderZoomTo,e.scrollResponderScrollNativeHandleToKeyboard=this.scrollResponderScrollNativeHandleToKeyboard),Object(d.a)(this.props.forwardedRef)(e)}}),F={flexGrow:1,flexShrink:1,transform:[{translateZ:0}],WebkitOverflowScrolling:"touch"},N=v.a.create({baseVertical:T(T({},F),{},{flexDirection:"column",overflowX:"hidden",overflowY:"auto"}),baseHorizontal:T(T({},F),{},{flexDirection:"row",overflowX:"auto",overflowY:"hidden"}),contentContainerHorizontal:{flexDirection:"row"},stickyHeader:{position:"sticky",top:0,zIndex:10},pagingEnabledHorizontal:{scrollSnapType:"x mandatory"},pagingEnabledVertical:{scrollSnapType:"y mandatory"},pagingEnabledChild:{scrollSnapAlign:"start"}}),H=_.a.forwardRef((function(e,t){return _.a.createElement(O,x({},e,{forwardedRef:t}))}));H.displayName="ScrollView";t.a=H},Xo28:function(e,t,o){"use strict";var n=o("7nmT");t.a=function(e){var t;try{t=Object(n.findDOMNode)(e)}catch(e){}return t}},Y3fD:function(e,t,o){"use strict";var n=o("ERkP"),i=o("ttFy");if(void 0===n)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var s=(new n.Component).updater;e.exports=i(n.Component,n.isValidElement,s)},nvLZ:function(e,t,o){"use strict";var n=o("97Jx"),i=o.n(n),s=o("KEM+"),r=o.n(s),a=(o("kYxP"),o("ERkP")),c=o("py1r"),l=o("I4+6"),d=o("oLZl"),h=o("rHpw"),u=o("MWbm");const p=l.a.generate({backgroundColor:"transparent",color:h.a.theme.colors.primary});class f extends a.PureComponent{constructor(...e){super(...e),r()(this,"_handleClick",(()=>{const{category:e,onClick:t}=this.props;t(e)})),r()(this,"_handleKeyDown",(e=>{const{key:t}=e,{altKey:o,ctrlKey:n,metaKey:i}=e;o||n||i||t===d.a.Enter&&(this._handleClick(),e.preventDefault(),e.stopPropagation())}))}render(){const{icon:e,isActive:t,isDisabled:o}=this.props;return a.createElement(c.a,{disabled:o},(({isHovered:n,isPressed:i,isFocused:s})=>a.createElement(u.a,{style:m.container},a.createElement(u.a,{accessibilityDisabled:o,accessibilityRole:"button",onClick:this._handleClick,onKeyDown:s?this._handleKeyDown:void 0,style:[m.iconWrapper,n||t?void 0:m.faded,p.transitionStyle,n&&p.hoverStyle,i&&p.pressedStyle,s&&p.focusedStyle]},e),a.createElement(u.a,{style:[m.border,t?{backgroundColor:h.a.theme.colors.primary}:null]}))))}}const m=h.a.create((e=>({container:{flex:1},iconWrapper:{width:"100%",alignItems:"center",paddingVertical:e.spaces.space4},border:{height:e.borderWidths.large,width:"100%",borderRadius:e.borderRadii.infinite},faded:{filter:"grayscale(100%) contrast(80%)",opacity:.5}})));var g=f,y=o("z4Oz");const S=(e,t)=>{const o=t&&t.codepoint;if(!(o&&_(e.skin_variations,o)>1))return o&&e.skin_variations&&e.skin_variations[o]?e.skin_variations[o]:void 0},_=(e={},t)=>{let o=0;for(const n in e)t&&n.indexOf(t)>=0&&(o+=1);return o},v=()=>`emojiPicker-${Math.random()}`;var R=o("U+bB"),E=o("3XMw"),w=o.n(E);const b="none",C="light",k="medium-light",j="medium",I="medium-dark",T="dark",D={[b]:{id:b,name:w.a.ff3dd27b,color:"#FFDC5D"},[C]:{codepoint:"1f3fb",id:C,name:w.a.b554fcf3,color:"#F7DECE"},[k]:{codepoint:"1f3fc",id:k,name:w.a.j590b148,color:"#F3D2A2"},[j]:{codepoint:"1f3fd",id:j,name:w.a.e7d4ee85,color:"#D5AB88"},[I]:{codepoint:"1f3fe",id:I,name:w.a.ia423ebb,color:"#AF7E57"},[T]:{codepoint:"1f3ff",id:T,name:w.a.a2cf0941,color:"#7C533E"}},x={search:w.a.j824dc05,notFoundHeader:w.a.e39c4391,notFoundMessage:w.a.f2625275,skintext:w.a.d67ad795,clear:w.a.e6388bfa,recentCategoryName:w.a.j7c67ec9,searchCategoryName:w.a.da539d38},P={EmojiWidth:h.a.theme.spaces.space20,EmojiHeight:h.a.theme.spaces.space20,EmojiGutter:h.a.theme.spaces.space4},O="search",F="recent";class N extends a.PureComponent{render(){const{accessibilityLabel:e,skinTone:t,emoji:o,style:n}=this.props,i=((e,t)=>{const o=(S(e,t)||e).unified;return y.a.getTwemojiUrl(o)})(o,t);return i?a.createElement(R.a,{accessibilityLabel:e,alt:o.name,draggable:!1,resizeMode:"stretch",source:i,style:[H.root,n]}):null}}const H=h.a.create((e=>({root:{height:P.EmojiHeight,width:P.EmojiWidth}})));var M=N;const A={people:"😀",nature:"🐻",food:"🍔",activity:"⚽️",travel:"🚘",objects:"💡",symbols:"🔣",flags:"🚩",recent:"🕑"};class L extends a.PureComponent{render(){const{activeCategory:e,categories:t,onAnchorClick:o,disableAll:n}=this.props;return a.createElement(u.a,{style:B.root},t.map((t=>{const{anchorless:i,emojis:s,id:r,name:c}=t,l=s&&0===s.length||n,d=!!e&&t.id===e.id;return i?null:a.createElement(g,{category:t,icon:this._getIcon(r,c),isActive:d,isDisabled:l,key:r,onClick:o})})))}_getIcon(e,t){const{emojiData:o}=this.props,n=o[A[e]];return a.createElement(M,{accessibilityLabel:t,emoji:n})}}const B=h.a.create((e=>({root:{flexDirection:"row",justifyContent:"space-between"}})));var W=L,z=o("t62R"),U=o("/yvb"),V=o("2ZFc");class Y extends a.PureComponent{constructor(...e){super(...e),r()(this,"_handleHover",(()=>{const{emoji:e,onHover:t}=this.props;t&&t(e)})),r()(this,"_handleFocus",(()=>{const{emoji:e,onFocus:t}=this.props;t&&t(e)})),r()(this,"_getBackgroundPositionStyle",(()=>{const{emoji:e,spriteSheetColumns:t,spriteSheetRows:o}=this.props,n=this.props.spritePosition||e.sprite_position,i=100/(o-1);return`${100/(t-1)*n[0]}% ${i*n[1]}%`})),r()(this,"_handleClick",(()=>{const{emoji:e,onSelect:t}=this.props;t&&t(e)}))}render(){const{ariaDescendantId:e,emoji:t,emojiName:o,spriteUrl:n}=this.props,i={backgroundImage:`url(${n})`,backgroundPosition:this._getBackgroundPositionStyle(),backgroundSize:`${100*this.props.spriteSheetColumns}% ${100*this.props.spriteSheetRows}%`};return a.createElement(c.a,{onFocusRingGained:this._handleFocus,onHoverIn:this._handleHover},(({isFocused:n,isHovered:s,isPressed:r})=>a.createElement(u.a,{accessibilityLabel:o||t.name,accessibilityRole:"option",accessibilityState:{selected:!!e},nativeID:e,onClick:this._handleClick,style:[G.container,K.transitionStyle,s&&K.hoverStyle,r&&K.pressedStyle,(n||e)&&K.focusedStyle]},a.createElement(u.a,{style:[i,G.emoji]}))))}}const K=l.a.generate({backgroundColor:h.a.theme.colors.transparent,color:h.a.theme.colors.gray700}),G=h.a.create((e=>({container:{alignItems:"center",borderRadius:e.borderRadii.small,boxSizing:"border-box",padding:P.EmojiGutter},emoji:{display:"inline-block",outlineStyle:"none",height:P.EmojiHeight,width:P.EmojiWidth}})));var $=Y,q=o("FIs5"),Z=o("mtvn"),J=o("7nmT"),X=o.n(J);class Q extends a.PureComponent{render(){const{children:e,style:t,withTopBorder:o}=this.props;return a.createElement(u.a,{style:[ee.root,o?ee.topBorder:h.a.isVdlRefreshEnabled()?void 0:ee.bottomBorder,t]},e)}}r()(Q,"defaultProps",{withTopBorder:!1});const ee=h.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,borderColor:e.colors.borderColor,padding:e.spaces.space12},bottomBorder:{borderBottomWidth:e.borderWidths.small},topBorder:{borderTopWidth:e.borderWidths.small}})));var te=Q,oe=o("OiMc");class ne extends a.PureComponent{constructor(...e){super(...e),r()(this,"_createDismissOnSelect",(e=>t=>{const{onSelect:o}=this.props;e(),o&&o(t)})),r()(this,"_getEmojisForActiveSkinTone",(e=>{const{activeSkinTone:t,emoji:o,...n}=this.props,{codepoint:s}=t,{skin_variations:r}=o,c=[a.createElement($,i()({},n,{emoji:{...o},key:"none",onSelect:this._createDismissOnSelect(e),spritePosition:o.sprite_position}))];for(const t in r)if(s&&t.indexOf(s)>=0){const{unified:s,sprite_position:l}=r[t];c.push(a.createElement($,i()({},n,{emoji:{...o,text:s},key:t,onSelect:this._createDismissOnSelect(e),spritePosition:l})))}return c})),r()(this,"renderEmojis",(e=>{const t=((e,t)=>{const o=null==e?0:e.length;if(!o||t<1)return[];let n=0,i=0;const s=new Array(Math.ceil(o/t));for(;n<o;)s[i]=e.slice(n,n+=t),i+=1;return s})(this._getEmojisForActiveSkinTone(e),10);return a.createElement(u.a,{style:ie.emojisContainer},t.map(((e,t)=>a.createElement(u.a,{key:t,style:ie.row},e))))}))}render(){const{activeSkinTone:e,emoji:t,onSelect:o,...n}=this.props;return a.createElement(oe.a,{contentStyle:ie.contentStyle,renderContent:this.renderEmojis,withArrow:!0},a.createElement($,i()({},n,{emoji:t,spritePosition:t.sprite_position})))}}const ie=h.a.create((e=>({row:{flexDirection:"row"},contentStyle:{minWidth:"100%"},emojisContainer:{padding:e.spaces.space12}})));var se=ne;class re extends a.PureComponent{render(){const{activeSkinTone:e,...t}=this.props,{emoji:o}=this.props,{skin_variations:n}=o,{codepoint:s}=e,r=_(n,s),c=s&&n&&n[s];return 0!==r||c?1===r&&c?a.createElement($,i()({},t,{spritePosition:c.sprite_position})):a.createElement(se,i()({},t,{activeSkinTone:e})):a.createElement($,i()({},t,{spritePosition:o.sprite_position}))}}var ae=re,ce=a.forwardRef((function(e,t){const[o,n]=a.useState(!0),s=a.useRef({containerRef:null,intersectionObserver:window.IntersectionObserver&&new window.IntersectionObserver(((e,t)=>{const{intersectionObserver:o}=s.current;e.some((e=>e.isIntersecting))&&o&&(o.disconnect(),n(!1))}))});a.useLayoutEffect((()=>{o&&e.isActiveCategory&&n(!1)}),[o,e.isActiveCategory]),a.useEffect((()=>{const{containerRef:e,intersectionObserver:t}=s.current;e&&t&&t.observe(e)}),[s.current.containerRef,s.current.intersectionObserver]);const r=a.useMemo((()=>e=>{const o=X.a.findDOMNode(e);o instanceof HTMLElement?s.current.containerRef=o:s.current.containerRef=null,"function"==typeof t&&t(e)}),[t]);return o?a.createElement(le,i()({ref:r},e,{withPlaceholder:!0})):a.createElement(le,i()({},e,{ref:t}))}));class le extends a.PureComponent{constructor(e){super(e),r()(this,"_top",0),r()(this,"_bottom",0),r()(this,"_renderEmptyState",(()=>{const{notFoundHeader:e,notFoundMessage:t}=x;return a.createElement(q.a,{header:e,message:t})})),r()(this,"updatePosition",(()=>{const e=X.a.findDOMNode(this._containerRef.current),t=e&&e.parentNode;if(e&&e instanceof window.HTMLElement&&t&&t instanceof window.HTMLElement){const{top:o,height:n}=e.getBoundingClientRect(),{top:i}=t.getBoundingClientRect();this._top=o-i+t.scrollTop,this._bottom=this._top+n}})),r()(this,"getTop",(()=>this._top)),r()(this,"getBottom",(()=>this._bottom)),r()(this,"updateDisplay",(e=>{const t=X.a.findDOMNode(this._containerRef.current);t&&t instanceof window.HTMLElement&&t.style&&(t.style.display=e?"flex":"none")})),this._containerRef=a.createRef()}componentDidMount(){this.updatePosition()}componentDidUpdate(e){e.emojiIDs!==this.props.emojiIDs&&this.updatePosition()}render(){const{name:e,emojiIDs:t,headerButton:o,onStickyHeaderRef:n,withEmptyState:i}=this.props,s=t.length>0||i;return a.createElement(u.a,{key:e,ref:this._containerRef},a.createElement(u.a,{accessibilityLabel:e,accessibilityRole:"group",key:e,ref:this._containerRef,style:s?de.shown:de.hidden},a.createElement(u.a,{ref:n,style:de.headerContainer},a.createElement(te,{style:de.headerSection,withTopBorder:!!h.a.isVdlRefreshEnabled()},a.createElement(z.c,{size:"headline2",style:de.header,weight:"bold"},e),o)),i?this._renderEmptyState():a.createElement(te,null,this._renderEmojis())))}_renderEmojis(){const{emojiIDs:e,rowSize:t}=this.props,o=Math.ceil(e.length/t),n=Object(Z.a)(0,o);return a.createElement(u.a,{style:de.emojiGroup},n.map((o=>{const n=e.slice(o*t,(o+1)*t);return a.createElement(u.a,{key:`emoji-row-${o}`,style:de.emojiRow},this.props.withPlaceholder?a.createElement(u.a,{style:[de.rowItem,de.spacer]}):this._renderRow(n))})))}_renderRow(e){const{activeSkinTone:t,ariaDescendantId:o,data:n,focusedEmojiId:s,onFocusedEmojiRef:r,onEmojiFocus:c,onEmojiHover:l,rowSize:d,onSelect:h,spriteUrl:p}=this.props;return Object(Z.a)(0,d).map((d=>{const f=e[d];if(!f)return a.createElement(u.a,{key:`row-spacer-${d}`,style:de.rowItem},a.createElement(u.a,{style:de.spacer}));const m=n.emojis[f.toLowerCase()];if(!m)return null;const g=!!m.skin_variations,{spriteSheetColumns:y,spriteSheetRows:S}=n,_={ariaDescendantId:f===s?o:void 0,emoji:m,onFocus:c,onHover:l,onSelect:h,spriteUrl:p,spriteSheetRows:S,spriteSheetColumns:y};return a.createElement(u.a,{key:m.unified,ref:f===s?r:void 0,style:de.rowItem},g?a.createElement(ae,i()({},_,{activeSkinTone:t})):a.createElement($,_))}))}}r()(le,"defaultProps",{headerButton:null,rowSize:9,withEmptyState:!1});const de=h.a.create((e=>({emojiGroup:{flexDirection:"column",flexWrap:"wrap"},emojiRow:{flexDirection:"row",justifyContent:"space-between"},header:{paddingHorizontal:e.spaces.space4},headerSection:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},headerContainer:{position:"sticky",top:0,zIndex:1},hidden:{display:"none"},shown:{display:"flex"},rowItem:{flex:1},spacer:{alignSelf:"center",margin:P.EmojiGutter,height:P.EmojiHeight,width:P.EmojiWidth}})));var he=o("zrc3"),ue=o("Myq3"),pe=o("EhiH");class fe{constructor(e,t,o){this._categories=e,this._rowSize=o,this._emojis=t}getInitialFocus(){const e=Object(he.a)(this._categories,(e=>e.emojis.length>0));return this.formatFocusParams(0,0,this._categories[e])}getCategoryById(e){const t=Object(he.a)(this._categories,(t=>t.id===e));return this._categories[t]}getPreviousCategory(e){if(e===O)return;const t=Object(he.a)(this._categories,(t=>t.id===e));return Object(ue.a)(this._categories.slice(0,t),(e=>e.emojis.length>0))}getNextCategory(e){if(e===O)return;const t=Object(he.a)(this._categories,(t=>t.id===e))+1;return Object(pe.a)(this._categories.slice(t,this._categories.length),(e=>e.emojis.length>0))}getCategoryLastRow(e){const{length:t}=e.emojis;return t<this._rowSize?0:Math.ceil(t/this._rowSize)-1}getLastRowLength(e){const{length:t}=e.emojis;return t?t%this._rowSize||this._rowSize:0}formatFocusParams(e,t,o){const n=o.emojis[e*this._rowSize+t];return{focusRow:e,focusCol:t,focusCategoryId:o.id,focusItem:n,previewEmoji:this._emojis[n]}}focusCategory(e){return this.formatFocusParams(0,0,this.getCategoryById(e))}focusNextColumn({focusRow:e,focusCol:t,focusCategoryId:o}){if(e<0||t<0||!o)return this.getInitialFocus();let n=e,i=t,s=this.getCategoryById(o);if(n*this._rowSize+i+1>=s.emojis.length){if(s=this.getNextCategory(o),!s)return this.formatFocusParams(e,t,this.getCategoryById(o));n=0,i=0}else n+=i===this._rowSize-1?1:0,i=i===this._rowSize-1?0:i+1;return this.formatFocusParams(n,i,s)}focusPreviousColumn({focusRow:e,focusCol:t,focusCategoryId:o}){if(e<0||t<0||!o)return this.getInitialFocus();let n=e,i=t,s=this.getCategoryById(o);if(n*this._rowSize+i-1<0){if(s=this.getPreviousCategory(o),!s)return this.formatFocusParams(e,t,this.getCategoryById(o));n=this.getCategoryLastRow(s),i=this.getLastRowLength(s)-1}else n-=0===i?1:0,i=0===i?this._rowSize-1:i-1;return this.formatFocusParams(n,i,s)}focusNextRow({focusRow:e,focusCol:t,focusCategoryId:o}){if(e<0||t<0||!o)return this.getInitialFocus();let n=e,i=t,s=this.getCategoryById(o);if(n*this._rowSize+i+this._rowSize>=s.emojis.length)if(n<this.getCategoryLastRow(s))n+=1,i=this.getLastRowLength(s)-1;else{if(s=this.getNextCategory(o),!s)return this.formatFocusParams(e,t,this.getCategoryById(o));n=0,i=Math.min(i,s.emojis.length-1)}else n+=1;return this.formatFocusParams(n,i,s)}focusPreviousRow({focusRow:e,focusCol:t,focusCategoryId:o}){if(e<0||t<0||!o)return this.getInitialFocus();let n=e,i=t,s=this.getCategoryById(o);if(n*this._rowSize+i-this._rowSize<0){if(s=this.getPreviousCategory(o),!s)return this.formatFocusParams(e,t,this.getCategoryById(o));n=this.getCategoryLastRow(s),i=Math.min(i,this.getLastRowLength(s)-1)}else n-=1;return this.formatFocusParams(n,i,s)}}var me=o("xoZN"),ge=o("s1N3"),ye=o("tn7R");function Se(e,t){const o=[...t];let n=0,i=e;for(;n<o.length;){const e=i.children[o[n]];if(!e)break;n+=1,i=e}return{node:i,tail:o.slice(n)}}function _e(e,t,o){const{node:n,tail:i}=Se(e,t);let s=n;i.forEach(((e,t)=>{const o={results:[],children:{}};s.children[e]=o,s=o})),s.results?s.results.push(o):s.results=[o]}function ve(e,t){const{node:o,tail:n}=Se(e,t);if(!o||n.length>0)return[];const i=[];return function e(t){t.results.length&&i.push(...t.results),Object(ye.a)(t.children).forEach((t=>e(t)))}(o),Object(ge.a)(i)}const Re=(e,t)=>{const o=Object(ge.a)(e),n=Object(ge.a)(t);return o.filter((e=>n.indexOf(e)>=0))};var Ee=class{constructor(e){r()(this,"_getScoreAndInsertResults",((e,t,o)=>{const n={};for(const i in e){const s=e[i],{search:r}=s,a=r.indexOf(t);if(-1!==a){let e=a+1;t===i&&(e=0),_e(o,t,s),n[i]=e}}return n})),this._data=e,this._index={results:[],children:{}},this._originalEmojis=this._data.emojis}search(e,t){const o=t&&t.maxResults?t.maxResults:75;let n=[];const i=this._originalEmojis,s=this._index;if(e.length){let t=e.toLowerCase().split(/[\s|,|\-|_]+/);t=t.slice(0,2);const o=t.map((e=>{let t=[];const o=ve(s,e);if(0===o.length){const o=this._getScoreAndInsertResults(i,e,s);t=ve(s,e),t.sort(((e,t)=>o[e.id]-o[t.id]))}else t=o;return t})).filter((e=>!!e));n=o.length>1?Re(...o):o.length?o[0]:[]}return n.length>o&&(n=n.slice(0,o)),n}},we=o("6OUF"),be=o("VwDm"),Ce=o("fs1G"),ke=o("VY6S");const je=a.forwardRef(((e,t)=>{const{autoFocus:o=!1,maxResults:n=75,onSearch:i=Ce.a,data:s,ariaActiveDescendant:r,categoriesDomId:c,experimentalSearchInputVariant:l}=e,d=a.useState("")[1],h=a.useMemo((()=>new Ee(s)),[s]),p=a.useMemo((()=>Object(ke.a)((function(e){const t=h.search(e,{maxResults:n});i(e,t)}),100)),[h,n,i]),f=a.useCallback((e=>{const t=e.target&&e.target.value||"";d(t),p(t)}),[d,p]),m=a.useCallback((()=>{d(""),p("")}),[d,p]),g=()=>"experimentalPillWithIcon"===l||"experimentalPillWithoutIcon"===l?"experimentalPill":void 0;return a.createElement(u.a,{accessibilityRole:"combobox"},a.createElement(we.a,{Icon:"experimentalPillWithoutIcon"===l?void 0:be.a,ariaActiveDescendant:r,ariaControls:c,ariaExpanded:!0,ariaLabel:x.search,autoFocus:o,inputStyle:g()?null:Ie.textInput,onChange:f,onClear:m,placeholder:x.search,ref:t,style:Ie.fieldTextInput,styleType:g(),withClearButton:!0}))})),Ie=h.a.create((e=>({textInput:{paddingVertical:e.spaces.space4,paddingLeft:e.spaces.space4},fieldTextInput:{margin:e.spaces.space4}})));var Te=a.memo(je),De=o("IMYl");class xe extends a.Component{constructor(...e){super(...e),r()(this,"_handleFocus",(()=>{const{onFocus:e,skinTone:t}=this.props;e&&e(t)})),r()(this,"_handleFocusLost",(()=>{const{onFocusLost:e,skinTone:t}=this.props;e&&e(t)})),r()(this,"_handleHover",(()=>{const{onHover:e,skinTone:t}=this.props;e&&e(t)})),r()(this,"_handleHoverLeave",(()=>{const{onHoverLeave:e,skinTone:t}=this.props;e&&e(t)})),r()(this,"_handleClick",(()=>{const{onSelect:e,skinTone:t}=this.props;e&&e(t)})),r()(this,"_handleKeyDown",(e=>{const{key:t}=e,{altKey:o,ctrlKey:n,metaKey:i}=e;o||n||i||t===d.a.Enter&&(this._handleClick(),e.preventDefault(),e.stopPropagation())}))}render(){const{accessibilityLabel:e,skinTone:t,isSelected:o,accessibilityRole:n,style:i}=this.props,s=l.a.generate({backgroundColor:t.color,color:h.a.theme.colors.white});return a.createElement(c.a,{onFocusRingGained:this._handleFocus,onFocusRingLost:this._handleFocusLost,onHoverIn:this._handleHover,onHoverOut:this._handleHoverLeave},(({isHovered:r,isFocused:c,isPressed:l})=>a.createElement(u.a,{accessibilityLabel:e,accessibilityRole:n||"button",accessibilityState:{checked:!!o},focusable:!0,onClick:this._handleClick,onKeyDown:c?this._handleKeyDown:void 0,style:i},a.createElement(u.a,{style:[Pe.root,{backgroundColor:t.color},s.transitionStyle,(r||c)&&s.focusedStyle,(l||o)&&Pe.selected]},o?a.createElement(De.a,{style:Pe.checkmarkIcon}):null))))}}const Pe=h.a.create((e=>({outer:{paddingLeft:e.spaces.space4},root:{alignItems:"center",justifyContent:"center",height:"1.25em",width:"1.25em",borderRadius:e.borderRadii.infinite},selected:{boxShadow:`0 0 0 ${e.borderWidths.medium} ${e.colors.primary}`},checkmarkIcon:{height:"1em",width:"1em",color:e.colors.cellBackground}})));var Oe=xe;class Fe extends a.Component{constructor(...e){super(...e),r()(this,"state",{showPalette:!1,focusedOption:void 0,hoveredOption:void 0}),r()(this,"_renderPalette",(()=>{const{activeSkinTone:e}=this.props;return a.createElement(u.a,{accessibilityRole:"radiogroup",style:Ne.palette},Object(ye.a)(D).map((t=>{const o=t===e;return a.createElement(Oe,{accessibilityLabel:t.name,accessibilityRole:"radio",isSelected:o,key:t.id,onFocus:this._handleSkinToneFocus,onFocusLost:this._handleSkinToneFocusLost,onHover:this._handleSkinToneHover,onHoverLeave:this._handleSkinToneHoverLeave,onSelect:this._handleSkinToneSelectionClick,skinTone:t,style:Ne.skinToneOption})})))})),r()(this,"_renderCurrentSkinTone",(()=>{const{activeSkinTone:e}=this.props;return a.createElement(Oe,{accessibilityLabel:x.skintext,isSelected:!0,onSelect:this._handleShowPaletteClick,skinTone:e})})),r()(this,"_handleShowPaletteClick",(()=>{this.setState({showPalette:!0})})),r()(this,"_handleSkinToneSelectionClick",(e=>{this.setState({showPalette:!1}),this.props.onSelect(e)})),r()(this,"_handleSkinToneHover",(e=>{this.setState({hoveredOption:e},this._handlePreview)})),r()(this,"_handleSkinToneHoverLeave",(e=>{this.setState({hoveredOption:void 0},this._handlePreview)})),r()(this,"_handleSkinToneFocus",(e=>{this.setState({focusedOption:e},this._handlePreview)})),r()(this,"_handleSkinToneFocusLost",(e=>{this.setState({focusedOption:void 0},this._handlePreview)})),r()(this,"_handlePreview",(()=>{const{onPreview:e}=this.props;e&&e(this.state.hoveredOption||this.state.focusedOption)}))}render(){const{showPalette:e}=this.state,{style:t}=this.props;return a.createElement(u.a,{style:t},e?this._renderPalette():this._renderCurrentSkinTone())}}const Ne=h.a.create((e=>({palette:{flexDirection:"row"},skinToneOption:{paddingHorizontal:e.spaces.space2}})));var He=Fe,Me=o("iChn");const Ae={name:"a",keywords:"j",sprite_position:"k",skin_variations:"l"},Le={unified:"key",skin_tone:"d",sprite_position:"k"},Be=e=>{const t=[],o=(e,o)=>{e&&(Array.isArray(e)?e:[e]).forEach((e=>{(o?e.split(/[-|_|\s]+/):[e]).forEach((e=>{const o=e.toLowerCase();-1===t.indexOf(o)&&t.push(o)}))}))};return o(e.short_names,!0),o(e.name,!0),o(e.keywords,!1),t.join(",")},We=(e,t)=>{for(const o in t)e[o]=e[t[o]],delete e[t[o]]};var ze=o("Qyxo"),Ue=o("Iok7");const Ve="emojiPicker2",Ye=[O,F],Ke="emoji_picker_categories_dom_id";class Ge extends a.PureComponent{constructor(e){super(e),r()(this,"_categoryRefs",{}),r()(this,"_scrollRef",a.createRef()),r()(this,"_searchRef",a.createRef()),r()(this,"_selectedEmojis",[]),r()(this,"_shouldScrollToFocusedItem",!0),r()(this,"_shouldUpdateScrollPosition",!1),r()(this,"_renderAnchors",(e=>{const{activeCategory:t,query:o}=this.state;return a.createElement(W,{activeCategory:o?void 0:t,categories:e,disableAll:!!o,emojiData:this._uncompressedData.emojis,onAnchorClick:this._handleAnchorClick})})),r()(this,"_renderSearch",(()=>a.createElement(Te,{ariaActiveDescendant:this.state.ariaDescendantId,autoFocus:!0,categoriesDomId:Ke,data:this._uncompressedData,experimentalSearchInputVariant:this.props.experimentType,onSearch:this._handleSearch,ref:this._searchRef}))),r()(this,"_renderCategories",(e=>{const{spriteUrl:t,rowSize:o}=this.props,{activeSkinTone:n,activeCategory:s,ariaDescendantId:r,focusCategoryId:c,focusItem:l,query:d}=this.state;return a.createElement(Ue.a,{accessibilityRole:"listbox",nativeID:Ke,onMouseLeave:this._handleClearPreview,onScroll:this._handleScroll,ref:this._scrollRef,scrollEventThrottle:100,style:$e.categoriesContainer},e.map(((e,h)=>{const u=c===e.id,p=s&&s.id===e.id,f={activeSkinTone:n,ariaDescendantId:u?r:void 0,data:this._uncompressedData,emojiIDs:e.emojis,focusedEmojiId:u?l:void 0,id:e.id,isActiveCategory:p,name:e.name,onEmojiFocus:this._handleEmojiPreview,onEmojiHover:this._handleEmojiPreview,onFocusedEmojiRef:u?this._handleFocusedItemRef:void 0,onSelect:this._handleSelect,onStickyHeaderRef:p?this._handleStickyHeaderRef:void 0,rowSize:o,spriteUrl:t};return e.id===F&&(f.headerButton=a.createElement(U.a,{accessibilityLabel:x.clear,onPress:this._handleClearRecent,size:"small",type:"text"},x.clear)),e.id===O&&(f.withEmptyState=!e.emojis.length&&!!d),a.createElement(ce,i()({},f,{key:e.name,ref:this._setCategoryRef(`category-${e.id}`)}))})))})),r()(this,"_scrollEmojiIntoViewIfNeeded",(()=>{this._shouldScrollToFocusedItem&&this._focusedItemRef&&(!function(e,t,o=0){if(e&&t){const{height:n,top:i}=e.getBoundingClientRect(),s=i+o,{top:r,bottom:a}=t.getBoundingClientRect(),c=n+i;if(r<s){const t=s-r;e.scrollTop=Math.max(0,e.scrollTop-t)}else if(r>c||a>c){const t=a-c;e.scrollTop=Math.max(0,e.scrollTop+t)}}}(this._getScrollParent(),this._focusedItemRef,this._getStickyHeaderOffset()),this._shouldScrollToFocusedItem=!1)})),r()(this,"_handleStickyHeaderRef",(e=>{this._stickyHeaderRef=e,this._stickyHeaderHeight=void 0,this._shouldScrollToFocusedItem=!0})),r()(this,"_handleFocusedItemRef",(e=>{this._focusedItemRef=e,this._scrollEmojiIntoViewIfNeeded()})),r()(this,"_getStickyHeaderOffset",(()=>{if(void 0===this._stickyHeaderHeight){const e=this._stickyHeaderRef;if(e){const{height:t}=e.getBoundingClientRect();this._stickyHeaderHeight=t}}return this._stickyHeaderHeight||0})),r()(this,"_handleSkinToneSelect",(e=>{this.setState({activeSkinTone:e,previewSkinTone:void 0,withDescription:!0}),this._focusSearch()})),r()(this,"_handleSkinTonePreview",(e=>{this.setState({previewSkinTone:e,withDescription:!1})})),r()(this,"_renderPreview",(()=>{const{previewEmoji:e,activeSkinTone:t,previewSkinTone:o}=this.state,n=e||this._defaultPreviewEmoji,i=o||t;return a.createElement(U.a,{accessibilityLabel:n.name,icon:a.createElement(M,{emoji:n,skinTone:i,style:$e.twemoji}),onClick:this._handlePreviewClick,type:"text"})})),r()(this,"_handlePreviewClick",(()=>{const{previewEmoji:e}=this.state,t=e||this._defaultPreviewEmoji;this._handleSelect(t)})),r()(this,"_renderEmojiDescription",(()=>{const{previewEmoji:e}=this.state;return e?a.createElement(z.c,{align:"left",color:"gray700",numberOfLines:1,size:"subtext2",style:$e.emojiDescription},e.name):null})),r()(this,"_renderFooter",(()=>{const{withDescription:e}=this.state;return a.createElement(u.a,{style:$e.footer},this._renderPreview(),e?this._renderEmojiDescription():null,a.createElement(He,{activeSkinTone:this.state.activeSkinTone,onPreview:this._handleSkinTonePreview,onSelect:this._handleSkinToneSelect,style:$e.skinTonePicker}))})),r()(this,"_setCategoryRef",(e=>t=>{t&&(this._categoryRefs[e]=t)})),r()(this,"_handleKeyDown",(e=>{const{key:t}=e,{altKey:o,ctrlKey:n,metaKey:i}=e,{focusRow:s,focusCol:r,focusCategoryId:a,focusItem:c}=this.state,l={focusRow:s,focusCol:r,focusCategoryId:a};if(!(o||n||i))return t===d.a.ArrowDown?(this._updateFocus(this._focusHelper.focusNextRow(l)),void e.preventDefault()):t===d.a.ArrowUp?(this._updateFocus(this._focusHelper.focusPreviousRow(l)),void e.preventDefault()):t===d.a.ArrowRight?(this._updateFocus(this._focusHelper.focusNextColumn(l)),void e.preventDefault()):t===d.a.ArrowLeft?(this._updateFocus(this._focusHelper.focusPreviousColumn(l)),void e.preventDefault()):t===d.a.Enter&&c?(this._handleSelect(this._uncompressedData.emojis[c]),void e.preventDefault()):void 0})),r()(this,"_updateFocus",(e=>{const{ariaDescendantId:t,focusItem:o}=this.state,n=o!==e.focusItem;this._shouldScrollToFocusedItem=n,this.setState({...e,ariaDescendantId:n?v():t})})),r()(this,"_handleScroll",(()=>{this._updateActiveCategory()})),r()(this,"_handleSearch",((e,t)=>{const o=t?t.map((e=>e.unified)):[];Object(ye.a)(this._categoryRefs).forEach((t=>{t&&"search"!==t.props.id&&t.updateDisplay(!e)})),this.setState({searchResults:o,query:e}),this._scrollTo(0)})),r()(this,"_handleSelect",(e=>{const{onSelect:t}=this.props,{activeSkinTone:o}=this.state,n=((e,t)=>{const{name:o,short_names:n,text:i}=e,s=S(e,t),r=s?s.unified:e.unified;return{id:e.id||n[0],name:o,text:i||r,unified:r}})(e,o);t&&t(n);const i=[];for(let t=this._selectedEmojis.length;t>=0;t--){const o=t===this._selectedEmojis.length?e.unified:this._selectedEmojis[t];i.indexOf(o)<0&&i.push(o)}this._selectedEmojis=i.reverse()})),r()(this,"_handleClearRecent",(e=>{this._selectedEmojis=[],this.setState({recentlyUsed:[],activeCategory:this._staticCategories()[0]},(()=>{this._shouldUpdateScrollPosition=!0}))})),r()(this,"_getActiveCategory",(()=>{const e=this._scrollRef.current&&X.a.findDOMNode(this._scrollRef.current);let t=this.state.activeCategory;if(e&&e instanceof window.HTMLElement){const{scrollTop:o}=e;for(let e=0;e<this._categories.length;e++){const n=this._categories[e],i=this._categoryRefs[`category-${n.id}`];if(i&&o>=i.getTop()&&o<i.getBottom()){t=n;break}}}return t})),r()(this,"_updateActiveCategory",(()=>{const e=this._getActiveCategory();e!==this.state.activeCategory&&this.setState({activeCategory:e})})),r()(this,"_getUpdatedRecentlyUsedEmojiList",(()=>{const{recentlyUsed:e}=this.state,{rowSize:t}=this.props;if(0===this._selectedEmojis.length)return e;const o=-2*t;return[...e.filter((e=>this._selectedEmojis.indexOf(e)<0)),...this._selectedEmojis].slice(o)})),r()(this,"_handleClearPreview",(()=>{this.state.previewEmoji&&this.setState({previewEmoji:void 0})})),r()(this,"_handleEmojiPreview",(e=>{e!==this.state.previewEmoji&&this.setState({previewEmoji:e})})),r()(this,"_handleAnchorClick",(e=>{this._shouldUpdateScrollPosition&&(this._shouldUpdateScrollPosition=!1,Object(ye.a)(this._categoryRefs).forEach((e=>e.updatePosition())));const t=this._categoryRefs[`category-${e.id}`];0!==e.emojis.length&&(this.setState({activeCategory:e}),t&&this._scrollTo(t.getTop()+1),this.state.focusItem&&this._updateFocus(this._focusHelper.focusCategory(e.id))),this._focusSearch()})),r()(this,"_focusSearch",(()=>{this._searchRef.current&&this._searchRef.current.focus()})),r()(this,"_scrollTo",(e=>{this._scrollRef.current&&this._scrollRef.current.scrollTo({y:e,animated:!1})})),r()(this,"_staticCategories",(()=>this._categories.filter((e=>-1===Ye.indexOf(e.id)))));const{emojiInfo:t}=this.props;this._uncompressedData=(e=>{const t=JSON.parse(JSON.stringify(e));t.compressed=!1;for(const e in t.emojis){const o=t.emojis[e];We(o,Ae),o.id=e,o.unified=e,o.short_names=[e],o.text||(o.text=""),o.search=Be(o),o.skin_variations&&(o.skin_variations.forEach((e=>{We(e,Le)})),o.skin_variations=Object(Me.a)(o.skin_variations,(e=>{const{skin_tone:t}=e;let o=t[0];for(let e=1;e<t.length;e++)o+=`+${t[e]}`;return o})))}return t})(t||{}),this._categories=this._uncompressedData.categories,this._searchCategoryInitialValue={anchorless:!0,id:O,name:x.searchCategoryName,emojis:[]},this._recentlyUsedCategoryInitialValue={id:F,name:x.recentCategoryName,emojis:[]},this._defaultPreviewEmoji=this._uncompressedData.emojis[this.props.previewEmojiCodepoint],this._categories.unshift(this._recentlyUsedCategoryInitialValue),this._focusHelper=new fe(this._categories,this._uncompressedData.emojis,e.rowSize),this.state={activeCategory:this._categories[1],activeSkinTone:D[e.defaultSkinTone],ariaDescendantId:v(),categories:[this._searchCategoryInitialValue,...this._categories],focusRow:-1,focusCol:-1,recentlyUsed:[],previewSkinTone:void 0,query:"",searchResults:[],withDescription:!0}}componentWillUnmount(){V.a.set(Ve,{recentlyUsed:this._getUpdatedRecentlyUsedEmojiList(),activeSkinToneId:this.state.activeSkinTone.id})}componentDidMount(){V.a.get(Ve).then((e=>{if(e&&"object"==typeof e){const{recentlyUsed:t=[],activeSkinToneId:o}=e,n="string"==typeof o&&D[o],i=Object.assign({},{recentlyUsed:Array.isArray(t)?Object(ze.a)(t,(e=>"string"==typeof e?e:void 0)):[],activeCategory:this._categories[1]},n?{activeSkinTone:n}:{});this.setState(i),this._shouldUpdateScrollPosition=!0}}))}componentDidUpdate(e,t){const{categories:o,searchResults:n,recentlyUsed:i}=this.state,{rowSize:s}=this.props;if(t.searchResults!==n||t.recentlyUsed!==i){const e={...this._searchCategoryInitialValue,emojis:n},t={...this._recentlyUsedCategoryInitialValue,emojis:i.length?[...i].reverse():[]};this.setState({activeCategory:this._getActiveCategory(),categories:[e,t].concat(this._staticCategories()),focusCategoryId:void 0,focusCol:-1,focusRow:-1,focusItem:void 0})}t.categories===o&&e.rowSize===s||(this._focusHelper=new fe(o,this._uncompressedData.emojis,s))}_getScrollParent(){if(!this._scrollParent){const e=X.a.findDOMNode(this._scrollRef.current);this._scrollParent=e instanceof window.Element?e:void 0}return this._scrollParent}render(){const{partialRender:e}=this.props,{recentlyUsed:t,searchResults:o}=this.state,n={...this._searchCategoryInitialValue,emojis:o},i={...this._recentlyUsedCategoryInitialValue,emojis:t.length?[...t].reverse():[]},s=this._staticCategories(),r=[n,i].concat(s),c=[n,i,s[0]];return a.createElement(me.a,{onKeyDown:this._handleKeyDown,style:$e.root},a.createElement(te,{style:$e.searchSection},this._renderSearch()),a.createElement(te,{style:$e.anchorsSection},this._renderAnchors(r)),this._renderCategories(e?c:r),a.createElement(te,{style:$e.footerContainer,withTopBorder:!0},this._renderFooter()))}}r()(Ge,"defaultProps",{defaultSkinTone:b,partialRender:!1,previewEmojiCodepoint:"👋",rowSize:9});const $e=h.a.create((e=>({root:{flexShrink:1,flexGrow:1},categoriesContainer:{flexShrink:1,overflowY:"auto"},searchSection:{borderTopLeftRadius:e.borderRadii.xLarge,borderTopRightRadius:e.borderRadii.xLarge,padding:0},anchorsSection:{padding:0,marginTop:e.spaces.space4},footer:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",overflow:"hidden"},footerContainer:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge},emojiDescription:{paddingHorizontal:e.spaces.space12,maxWidth:"180px",flex:1},twemoji:{height:"2em",width:"2em"},skinTonePicker:{marginHorizontal:e.spaces.space12}})));t.a=Ge},tBqf:function(e,t,o){"use strict";function n(e){return function(){return e}}var i=function(){};i.thatReturns=n,i.thatReturnsFalse=n(!1),i.thatReturnsTrue=n(!0),i.thatReturnsNull=n(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},ttFy:function(e,t,o){"use strict";var n=o("maj8"),i={};function s(e,t,o,n,i,s,r,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[o,n,i,s,r,a],d=0;(c=new Error(t.replace(/%s/g,(function(){return l[d++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}var r="mixins";e.exports=function(e,t,o){var a=[],c={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},l={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},d={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var o=0;o<t.length;o++)u(e,t[o])},childContextTypes:function(e,t){e.childContextTypes=n({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=n({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=f(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=n({},e.propTypes,t)},statics:function(e,t){!function(e,t){if(!t)return;for(var o in t){var n=t[o];if(t.hasOwnProperty(o)){if(s(!(o in d),'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',o),o in e)return s("DEFINE_MANY_MERGED"===(l.hasOwnProperty(o)?l[o]:null),"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",o),void(e[o]=f(e[o],n));e[o]=n}}}(e,t)},autobind:function(){}};function h(e,t){var o=c.hasOwnProperty(t)?c[t]:null;_.hasOwnProperty(t)&&s("OVERRIDE_BASE"===o,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&s("DEFINE_MANY"===o||"DEFINE_MANY_MERGED"===o,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function u(e,o){if(o){s("function"!=typeof o,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),s(!t(o),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var n=e.prototype,i=n.__reactAutoBindPairs;for(var a in o.hasOwnProperty(r)&&d.mixins(e,o.mixins),o)if(o.hasOwnProperty(a)&&a!==r){var l=o[a],u=n.hasOwnProperty(a);if(h(u,a),d.hasOwnProperty(a))d[a](e,l);else{var p=c.hasOwnProperty(a);if("function"==typeof l&&!p&&!u&&!1!==o.autobind)i.push(a,l),n[a]=l;else if(u){var g=c[a];s(p&&("DEFINE_MANY_MERGED"===g||"DEFINE_MANY"===g),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",g,a),"DEFINE_MANY_MERGED"===g?n[a]=f(n[a],l):"DEFINE_MANY"===g&&(n[a]=m(n[a],l))}else n[a]=l}}}else;}function p(e,t){for(var o in s(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."),t)t.hasOwnProperty(o)&&(s(void 0===e[o],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",o),e[o]=t[o]);return e}function f(e,t){return function(){var o=e.apply(this,arguments),n=t.apply(this,arguments);if(null==o)return n;if(null==n)return o;var i={};return p(i,o),p(i,n),i}}function m(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function g(e,t){return t.bind(e)}var y={componentDidMount:function(){this.__isMounted=!0}},S={componentWillUnmount:function(){this.__isMounted=!1}},_={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},v=function(){};return n(v.prototype,e.prototype,_),function(e){var t=function(e,n,r){this.__reactAutoBindPairs.length&&function(e){for(var t=e.__reactAutoBindPairs,o=0;o<t.length;o+=2){var n=t[o],i=t[o+1];e[n]=g(e,i)}}(this),this.props=e,this.context=n,this.refs=i,this.updater=r||o,this.state=null;var a=this.getInitialState?this.getInitialState():null;s("object"==typeof a&&!Array.isArray(a),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=a};for(var n in t.prototype=new v,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],a.forEach(u.bind(null,t)),u(t,y),u(t,e),u(t,S),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),s(t.prototype.render,"createClass(...): Class specification must implement a `render` method."),c)t.prototype[n]||(t.prototype[n]=null);return t}}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/ondemand.EmojiPicker.50c7bd75.js.map