(window.webpackJsonp=window.webpackJsonp||[]).push([[166],{V2l4:function(e,t,s){"use strict";s.r(t),s.d(t,"UserPicker",(function(){return f}));var o=s("KEM+"),i=s.n(o),n=s("ERkP"),r=s("ZcYN"),a=s("3XMw"),l=s.n(a),d="searchPeople",c=s("4e/K"),p=s("MWbm"),h=s("oSwX"),u=s("aV/s"),m=s("rHpw"),y=s("GZwR");const w=[y.a.Users],_=l.a.fc9dd578,g=l.a.gdb7bc24;class f extends n.Component{constructor(e,t){super(e,t),i()(this,"_renderSelectedUsersList",(()=>{const{selectedUsers:e}=this.props;return n.createElement(p.a,{style:I.selectedUsersList},e.map(this._renderSelectedUserPill))})),i()(this,"_renderSelectedUserPill",(e=>{const{withCompactPills:t}=this.props,s=this.props.onRemove.bind(this,e),o=e.type===y.b.User?n.createElement(h.default,{accessibilityHidden:!0,focusable:!1,size:"custom",uri:e.data.profile_image_url_https}):void 0;return n.createElement(u.a,{accessibilityLabel:g({name:e.data.name}),avatar:o,compact:t,key:e.id,mode:"remove",onClick:s,style:I.selectionPill,text:e.data.name})})),i()(this,"_getItemIsDisabled",(e=>{const{getItemIsDisabled:t,preselectedUsers:s}=this.props;return s.indexOf(e.id)>=0||!(!t||!t(e))})),i()(this,"_getItemDisabledMessage",(e=>{const{getItemDisabledMessage:t,preselectedUsers:s}=this.props;return s.indexOf(e.id)>=0?void 0:t?t(e):void 0})),i()(this,"_handleQueryChange",(e=>{const{onQueryChange:t}=this.props;this.setState({query:e}),t&&t(e)})),i()(this,"_handleOnSelect",(e=>{const{onSelect:t}=this.props;t&&t(e)})),this.state={query:""}}render(){const{injections:e,selectedUsers:t,shouldAutoFocus:s,preselectedUsers:o,renderHeader:i,source:a}=this.props,l=t.map((({id:e})=>e)).concat(o);return n.createElement(p.a,{style:I.root},n.createElement(c.default,{alwaysOpen:!0,disableClearButton:!0,filter:w,getItemDisabledMessage:this._getItemDisabledMessage,getItemIsDisabled:this._getItemIsDisabled,injectedItems:e,isModal:!0,onItemClick:this._handleOnSelect,onQueryChange:this._handleQueryChange,placeholder:_,renderHeader:i,renderInSearchField:t.length?this._renderSelectedUsersList:void 0,renderUserDecoration:r.a,selectedItems:l,shouldAutoFocus:s,shouldClearOnSelect:!0,shouldFocusOnClear:!0,source:a,testID:d,withSectionDivider:!1}))}}i()(f,"defaultProps",{preselectedUsers:[],shouldAutoFocus:!0,withCompactPills:!1});const I=m.a.create((e=>({root:{flex:1},selectionPill:{margin:e.spaces.space4,maxWidth:`calc(100% - ${e.spaces.space16})`},selectedUsersList:{flexDirection:"row",flexWrap:"wrap",padding:e.spaces.space4}})));t.default=f},bJYH:function(e,t,s){"use strict";s.r(t),s.d(t,"GenericTypeaheadComposeWrapper",(function(){return D}));var o=s("KEM+"),i=s.n(o),n=s("ERkP"),r=s("oEoC"),a=(s("SrCX"),s("oQhu")),l=s("7nmT"),d=s.n(l),c=s("WPfJ"),p=s("OEYw"),h=s("MWbm"),u=s("Irs7"),m=s("0FVZ"),y=s("xoZN"),w=s("7N4s"),_=s("rHpw"),g=s("GZwR");const f=[g.a.Users],I=[g.a.Topics];let b=0;class D extends n.Component{constructor(e,t){super(e,t),i()(this,"_typeaheadActive",!1),i()(this,"_renderTypeaheadDropdown",(e=>{const{contextText:t,onSelectItem:s,source:o,isInlineReply:i}=this.props,{isModal:r}=this.context,a=e.resultType===g.a.Topics?"hashtag":void 0,l=n.createElement(p.a,{ariaDescendantId:this.state.ariaDescendantId,contextText:t,domId:this._dropdownDomId,filter:this._getFilter(e.resultType),maxTopics:8,onItemClick:s,onItemFocusChanged:this._handleItemFocusChanged,query:e.word,ref:this._handleTypeaheadRef,source:o,style:this._calcStyle(),topicType:a,withItemAlwaysSelected:!0});return r||i?n.createElement(m.a.HalfSheet,null,n.createElement(n.Fragment,null,n.createElement(h.a,{onClick:this._handleDismiss,style:x.mask}),l)):n.createElement(n.Fragment,null,n.createElement(h.a,{onClick:this._handleDismiss,style:x.mask}),l)})),i()(this,"render",(()=>{const{children:e,query:t}=this.props,s=n.cloneElement(e,{ariaAutocomplete:"list",ariaControls:this._dropdownDomId,ariaActiveDescendant:this.state.ariaDescendantId,ref:t=>{this._textInputNode=d.a.findDOMNode(t),this._textInputRef=t;const{ref:s}=e;s&&s(t)}});return n.createElement(h.a,{style:x.inputContainer},n.createElement(y.a,{onKeyDown:this._handleKeyDown},s,this._textInputNode&&t?this._renderTypeaheadDropdown(t):null))})),i()(this,"_getFilter",(e=>"users"===e?f:I)),i()(this,"_calcStyle",(()=>{const{isModal:e}=this.context,{isInline:t,isInlineReply:s}=this.props,o=this._textInputNode,i=window.innerHeight,n=window.innerWidth,r=this._textInputRef&&this._textInputRef.getTextInputHeight()||20;if(o instanceof window.HTMLElement){if(e||t){const t=o.getBoundingClientRect();return[this._getDropdownPositioningStyle(i,n,t.top,t.top+r,t.left,e,!!s),x.dropdownStyle]}return[this._getModalFullViewportStyle(r),x.modalFullViewportStyle]}return[this._getDropdownPositioningStyle(r,n,0,0,0,e,!!s),x.dropdownStyle]})),i()(this,"_handleKeyDown",(e=>{const{selectedItem:t}=this.state,{onSelectItem:s,query:o}=this.props,{key:i}=e;r.e(e)&&o&&("ArrowDown"===i?(this._typeaheadRef&&this._typeaheadRef.focusNext(),e.preventDefault()):"ArrowUp"===i?(this._typeaheadRef&&this._typeaheadRef.focusPrevious(),e.preventDefault()):"Enter"===i||"Tab"===i?t&&(s(t),e.preventDefault()):"Escape"===i&&(this._handleDismiss(),e.preventDefault()))})),i()(this,"_handleItemFocusChanged",(e=>this.setState({ariaDescendantId:r.b(),selectedItem:e}))),i()(this,"_handleTypeaheadRef",(e=>{this._typeaheadRef=e})),i()(this,"_handleDismiss",(()=>{this._textInputRef&&this._textInputRef.focus(),this.props.onDismiss()})),i()(this,"_getDropdownHeight",Object(a.a)(((e,t)=>{const s=50*e/100;return s>t?t:s}))),i()(this,"_getModalOrInlineReplyDropdownStyles",Object(a.a)(((e,t,s)=>e?{bottom:`${s}px`}:{top:`${t}px`}))),i()(this,"_getDropdownPositioningStyle",Object(a.a)(((e,t,s=0,o=0,i=0,n=!1,r=!1)=>{const a=t-i-10,l=e-o,d=s,c=l/e<.5&&d>l,p={maxWidth:`${a}px`,minWidth:`${Math.min(a,300)}px`,maxHeight:`${c?this._getDropdownHeight(e,d-10):this._getDropdownHeight(e,l-10)}px`};return n||r?{...p,position:"fixed",left:`${i}px`,...this._getModalOrInlineReplyDropdownStyles(c,o,e-s)}:c?{...p,bottom:"100%",position:"absolute"}:{...p,top:"100%",position:"absolute"}}))),i()(this,"_getModalFullViewportStyle",Object(a.a)((e=>({position:"absolute",top:`${e||0}px`,overflowX:"hidden",overflowY:"auto"})))),this.state={ariaDescendantId:r.b()},this._dropdownDomId=`typeaheadDropdownWrapped-${b}`,b+=1}componentDidUpdate(){const{onTypeaheadStateChange:e,query:t}=this.props,s=!(!this._textInputNode||!t);s!==this._typeaheadActive&&(this._typeaheadActive=s,e&&e(s))}resetSelectedItem(){this.setState({selectedItem:void 0})}}i()(D,"contextType",w.a),i()(D,"defaultProps",{source:g.d.Compose});const x=_.a.create((e=>({dropdownStyle:{backgroundColor:e.colors.cellBackground,borderRadius:e.borderRadii.small,boxShadow:e.boxShadows.medium,minHeight:100,overflowX:"hidden",overflowY:"auto"},mask:{..._.a.absoluteFillObject,position:"fixed"},modalFullViewportStyle:{backgroundColor:e.colors.cellBackground,right:0,left:0,borderTopColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:e.borderWidths.small,minHeight:100},inputContainer:{flexGrow:1,position:"relative",width:"100%",zIndex:c.g}})));t.default=Object(u.a)(D,{component:"compose"})}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.Typeahead.137d7b35.js.map