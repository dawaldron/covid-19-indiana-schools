!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=9)}([function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Utils=void 0;var o=r(n(1)),i=r(n(2)),s=function(){function t(){(0,o.default)(this,t)}return(0,i.default)(t,null,[{key:"validateSetup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.filter((function(e){return void 0===t[e]||""}));n.length&&this.throwError("missing required setup: ".concat(n.join(", ")))}},{key:"throwError",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"exiting processing";throw new Error("atoms library critical error - ".concat(t))}},{key:"logWarning",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"warning";console.warn("atoms library warning - ".concat(t))}},{key:"logError",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";console.error("atoms library error - ".concat(t))}},{key:"camelToDashes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(t.charAt(0).toLowerCase()+t.slice(1)).replace(/[A-Z]/g,(function(t){return"-".concat(t.toLowerCase())}))}},{key:"getCookie",value:function(t){try{return(document.cookie.split("; ").find((function(e){return e.startsWith("".concat(t,"="))}))||"").split("=")[1]}catch(t){return""}}},{key:"setCookie",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;(t=new Date).setTime(t.getTime()+24*r*60*60*1e3),t.toUTCString(),document.cookie="".concat(e,"=").concat(n,"; expires=").concat(t.toUTCString(),"; path=/")}},{key:"getObjectValues",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];try{if(Array.isArray(t))return t;for(var e=[],n=Object.keys(t),r=0;r<n.length;r++){var o=n[r];e.push(t[o])}return e}catch(t){return[]}}},{key:"getMapping",value:function(t,e,n){var r=this;return fetch("https://atoms.gannettdigital.com/atoms-config/"+t+"/dist/mappings/"+e+"/"+n+".json").then((function(t){if(t.ok)return t.json()})).catch((function(t){r.throwError(t)}))}}]),t}();e.Utils=s},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.User=void 0;var o=r(n(1)),i=r(n(2)),s=n(3),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,o.default)(this,t),Object.assign(this,{key:e,meta:(n.user||{}).meta||{},response:(n.user||{}).response||{}}),this.isFailedUserResponse=200!==this.meta.status,this.silent=r}return(0,i.default)(t,[{key:"get",value:function(){switch(this.key.toLowerCase()){case"anonymous":return this.meta.isAnonymous||!1;case"anonymousid":return this.response.anonymousId||null;case"authenticated":return!!this.isFailedUserResponse||(this.meta.isAuthenticatedInCurrentContext||!1);case"authorized":return!!this.isFailedUserResponse||((this.response.user||{}).hasMarketAccess||!1);case"email":return(this.response.user||{}).email||null;case"name":return(this.response.user||{}).firstName||null;case"newsletters":return(this.response.attributes||{}).newsletters||null;default:return this.silent||s.Utils.logWarning("unable to retrieve user data: ".concat(this.key)),null}}}]),t}();e.User=a},function(t,e,n){t.exports=n(14)},function(t,e){function n(t,e,n,r,o,i,s){try{var a=t[i](s),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var s=t.apply(e,r);function a(t){n(s,o,i,a,u,"next",t)}function u(t){n(s,o,i,a,u,"throw",t)}a(void 0)}))}}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Target=void 0;var o=r(n(1)),i=n(3);e.Target=function t(e){var n=e.element,r=e.component;(0,o.default)(this,t);var s=r.target||"";try{if(s.toLowerCase().includes("atoms")){for(var a=document.querySelector(s);a.hasChildNodes();)a.removeChild(node.lastChild);a.appendChild(n)}}catch(t){i.Utils.logError("unable to create ".concat(r.name," in target ").concat(s," - ").concat(t))}}},function(t,e,n){n(10),n(11),n(12),t.exports=n(13)},function(t,e,n){"use strict";n.r(e);
/*! (c) Andrea Giammarchi - ISC */
var r={};try{!function(t,e){if("+"!==new t("q=%2B").get("q")||"+"!==new t({q:"+"}).get("q")||"+"!==new t([["q","+"]]).get("q")||"q=%0A"!==new t("q=\n").toString()||"q=+%26"!==new t({q:" &"}).toString())throw t;r.URLSearchParams=t}(URLSearchParams)}catch(t){!function(t,e,n){var o=t.create,i=t.defineProperty,s=/[!'\(\)~]|%20|%00/g,a=/\+/g,u={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},c={append:function(t,e){f(this._ungap,t,e)},delete:function(t){delete this._ungap[t]},get:function(t){return this.has(t)?this._ungap[t][0]:null},getAll:function(t){return this.has(t)?this._ungap[t].slice(0):[]},has:function(t){return t in this._ungap},set:function(t,n){this._ungap[t]=[e(n)]},forEach:function(t,n){var r=this;for(var o in r._ungap)r._ungap[o].forEach(i,o);function i(i){t.call(n,i,e(o),r)}},toJSON:function(){return{}},toString:function(){var t=[];for(var e in this._ungap)for(var n=g(e),r=0,o=this._ungap[e];r<o.length;r++)t.push(n+"="+g(o[r]));return t.join("&")}};for(var l in c)i(h.prototype,l,{configurable:!0,writable:!0,value:c[l]});function h(t){var e=o(null);switch(i(this,"_ungap",{value:e}),!0){case!t:break;case"string"==typeof t:"?"===t.charAt(0)&&(t=t.slice(1));for(var r=t.split("&"),s=0,a=r.length;s<a;s++){var u=(c=r[s]).indexOf("=");-1<u?f(e,d(c.slice(0,u)),d(c.slice(u+1))):c.length&&f(e,d(c),"")}break;case n(t):for(s=0,a=t.length;s<a;s++){var c;f(e,(c=t[s])[0],c[1])}break;case"forEach"in t:t.forEach(p,e);break;default:for(var l in t)f(e,l,t[l])}}function p(t,e){f(this,e,t)}function f(t,e,r){var o=n(r)?r.join(","):r;e in t?t[e].push(o):t[e]=[o]}function d(t){return decodeURIComponent(t.replace(a," "))}function g(t){return encodeURIComponent(t).replace(s,m)}function m(t){return u[t]}r.URLSearchParams=h}(Object,String,Array.isArray)}!function(t){var e=!1;try{e=!!Symbol.iterator}catch(t){}function n(t,n){var r=[];return t.forEach(n,r),e?r[Symbol.iterator]():{next:function(){var t=r.shift();return{done:void 0===t,value:t}}}}"forEach"in t||(t.forEach=function(t,e){var n=this,r=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach((function(o){!o.length||o in r||(r[o]=n.getAll(o)).forEach((function(r){t.call(e,r,o,n)}))}))}),"keys"in t||(t.keys=function(){return n(this,(function(t,e){this.push(e)}))}),"values"in t||(t.values=function(){return n(this,(function(t,e){this.push(t)}))}),"entries"in t||(t.entries=function(){return n(this,(function(t,e){this.push([e,t])}))}),!e||Symbol.iterator in t||(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=function(){for(var t,e,n,r=this.entries(),o=r.next(),i=o.done,s=[],a=Object.create(null);!i;)e=(n=o.value)[0],s.push(e),e in a||(a[e]=[]),a[e].push(n[1]),i=(o=r.next()).done;for(s.sort(),t=0;t<s.length;t++)this.delete(s[t]);for(t=0;t<s.length;t++)e=s[t],this.append(e,a[e].shift())}),function(e){var n=e.defineProperty,r=e.getOwnPropertyDescriptor,o=function(e){var n=e.append;e.append=t.append,URLSearchParams.call(e,e._usp.search.slice(1)),e.append=n},i=function(t,e){if(!(t instanceof e))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+e.name)},s=function(s){var a,u,c=s.prototype,l=r(c,"searchParams"),h=r(c,"href"),p=r(c,"search");!l&&p&&p.set&&(u=function(e){function r(n,r){t.append.call(this,n,r),n=this.toString(),e.set.call(this._usp,n?"?"+n:"")}function o(n){t.delete.call(this,n),n=this.toString(),e.set.call(this._usp,n?"?"+n:"")}function i(n,r){t.set.call(this,n,r),n=this.toString(),e.set.call(this._usp,n?"?"+n:"")}return function(t,e){return t.append=r,t.delete=o,t.set=i,n(t,"_usp",{configurable:!0,writable:!0,value:e})}}(p),a=function(t,e){return n(t,"_searchParams",{configurable:!0,writable:!0,value:u(e,t)}),e},e.defineProperties(c,{href:{get:function(){return h.get.call(this)},set:function(t){var e=this._searchParams;h.set.call(this,t),e&&o(e)}},search:{get:function(){return p.get.call(this)},set:function(t){var e=this._searchParams;p.set.call(this,t),e&&o(e)}},searchParams:{get:function(){return i(this,s),this._searchParams||a(this,new URLSearchParams(this.search.slice(1)))},set:function(t){i(this,s),a(this,t)}}}))};try{s(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&s(URL)}catch(t){}}(Object)}(r.URLSearchParams.prototype),e.default=r.URLSearchParams},function(t,e,n){"use strict";n.r(e),n.d(e,"Headers",(function(){return c})),n.d(e,"Request",(function(){return m})),n.d(e,"Response",(function(){return v})),n.d(e,"DOMException",(function(){return _})),n.d(e,"fetch",(function(){return w}));var r={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(r.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(t){return t&&o.indexOf(Object.prototype.toString.call(t))>-1};function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function a(t){return"string"!=typeof t&&(t=String(t)),t}function u(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r.iterable&&(e[Symbol.iterator]=function(){return e}),e}function c(t){this.map={},t instanceof c?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function h(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function p(t){var e=new FileReader,n=h(e);return e.readAsArrayBuffer(t),n}function f(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:r.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:r.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():r.arrayBuffer&&r.blob&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=f(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||i(t))?this._bodyArrayBuffer=f(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var t,e,n,r=l(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=h(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(t,e){t=s(t),e=a(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},c.prototype.delete=function(t){delete this.map[s(t)]},c.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},c.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},c.prototype.set=function(t,e){this.map[s(t)]=a(e)},c.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},c.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),u(t)},c.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),u(t)},c.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),u(t)},r.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(t,e){var n,r,o=(e=e||{}).body;if(t instanceof m){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new c(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new c(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),g.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function y(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o))}})),e}function v(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new c(e.headers),this.url=e.url||"",this._initBody(t)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},d.call(m.prototype),d.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var b=[301,302,303,307,308];v.redirect=function(t,e){if(-1===b.indexOf(e))throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})};var _=self.DOMException;try{new _}catch(t){(_=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack}).prototype=Object.create(Error.prototype),_.prototype.constructor=_}function w(t,e){return new Promise((function(n,o){var i=new m(t,e);if(i.signal&&i.signal.aborted)return o(new _("Aborted","AbortError"));var s=new XMLHttpRequest;function a(){s.abort()}s.onload=function(){var t,e,r={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new c,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();e.append(r,o)}})),e)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;n(new v(o,r))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.onabort=function(){o(new _("Aborted","AbortError"))},s.open(i.method,i.url,!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&r.blob&&(s.responseType="blob"),i.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),i.signal&&(i.signal.addEventListener("abort",a),s.onreadystatechange=function(){4===s.readyState&&i.signal.removeEventListener("abort",a)}),s.send(void 0===i._bodyInit?null:i._bodyInit)}))}w.polyfill=!0,self.fetch||(self.fetch=w,self.Headers=c,self.Request=m,self.Response=v)},function(t,e){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;for(var o=0|e,i=Math.max(o>=0?o:r-Math.abs(o),0);i<r;){if(function(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}(n[i],t))return!0;i++}return!1}})},function(t,e,n){"use strict";var r=n(0),o=r(n(6)),i=r(n(7)),s=r(n(1)),a=n(15),u=n(16),c=n(27),l=n(32),h=n(3);!function(t,e,n,r){try{new function t(e,n,r,h){var p=this;(0,s.default)(this,t),window[r]=window[r]||{},window[r][h]=window[r][h]||{};var f=window[r][h];f.initialized||(f.initialized=!0,this.setup=f.setup||{},new l.Setup(this.setup),new a.Api(this.setup).getConfig().then((function(t){var e=new c.Journey(p.setup,t).getModules(),n=!0,r=!1,s=void 0;try{for(var a,l=function(){var t=a.value;(0,i.default)(o.default.mark((function e(){var n,r,i,s,a,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,r=!1,i=void 0,e.prev=3,s=t[Symbol.iterator]();case 5:if(n=(a=s.next()).done){e.next=14;break}return c=a.value,e.next=9,new u.Module(p.setup,c).render();case 9:if(!e.sent){e.next=11;break}return e.abrupt("break",14);case 11:n=!0,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),r=!0,i=e.t0;case 20:e.prev=20,e.prev=21,n||null==s.return||s.return();case 23:if(e.prev=23,!r){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}}),e,null,[[3,16,20,28],[21,,23,27]])})))()},h=e[Symbol.iterator]();!(n=(a=h.next()).done);n=!0)l()}catch(t){r=!0,s=t}finally{try{n||null==h.return||h.return()}finally{if(r)throw s}}})))}(t,e,"gannett","atoms")}catch(t){h.Utils.throwError(t)}}(window,document)},function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function u(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,i=Object.create(o.prototype),s=new x(r||[]);return i._invoke=function(t,e,n){var r=l;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===f){if("throw"===o)throw i;return j()}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=E(s,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=c(t,e,n);if("normal"===u.type){if(r=n.done?f:h,u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=f,n.method="throw",n.arg=u.arg)}}}(t,n,s),i}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l="suspendedStart",h="suspendedYield",p="executing",f="completed",d={};function g(){}function m(){}function y(){}var v={};v[i]=function(){return this};var b=Object.getPrototypeOf,_=b&&b(b(S([])));_&&_!==n&&r.call(_,i)&&(v=_);var w=y.prototype=g.prototype=Object.create(v);function k(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function C(t){var e;this._invoke=function(n,o){function i(){return new Promise((function(e,i){!function e(n,o,i,s){var a=c(t[n],t,o);if("throw"!==a.type){var u=a.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,i,s)}),(function(t){e("throw",t,i,s)})):Promise.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,s)}))}s(a.arg)}(n,o,e,i)}))}return e=e?e.then(i,i):i()}}function E(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=c(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,d;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,d):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function S(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,s=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}return{next:j}}function j(){return{value:e,done:!0}}return m.prototype=w.constructor=y,y.constructor=m,y[a]=m.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},k(C.prototype),C.prototype[s]=function(){return this},t.AsyncIterator=C,t.async=function(e,n,r,o){var i=new C(u(e,n,r,o));return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(w),w[a]="Generator",w[i]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var u=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:S(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Api=void 0;var o=r(n(1)),i=r(n(2)),s=n(3),a=function(){function t(e){(0,o.default)(this,t),s.Utils.validateSetup(e,["platform","siteCode"]);var n=e.platform,r=e.siteCode,i=e.environment,a=e.camId,u=void 0===a?"control":a,c=window.location.hostname.split("."),l=3===c.length?c[1]:2===c.length?c[0]:"gannettdigital";this.endpoint="https://atoms.".concat(l,".com/atoms-configs/").concat(i,"/dist/").concat(n,"/").concat(r,"/").concat(u,"/journey.json")}return(0,i.default)(t,[{key:"getConfig",value:function(){return fetch(this.endpoint).then((function(t){if(t.ok)return t.json()})).catch((function(t){s.Utils.throwError(t)}))}}]),t}();e.Api=a},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Module=void 0;var o=r(n(4)),i=r(n(6)),s=r(n(7)),a=r(n(1)),u=r(n(2)),c=n(17),l=n(18),h=n(8),p=n(19),f=n(20),d=n(21),g=n(5),m=n(3),y=n(22),v=n(23),b=n(24),_=n(25),w=function(){function t(e,n){var r=n.props,o=void 0===r?{}:r,i=n.component,s=void 0===i?{}:i,u=n.conditions,c=void 0===u?{}:u,l=n.fallback,h=void 0===l?{}:l,p=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,a.default)(this,t),Object.assign(this,{setup:e,props:o,component:s,conditions:c,fallback:h,fallbackTriggered:p})}var e,n;return(0,u.default)(t,[{key:"render",value:(n=(0,s.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!this.component.disabled,!e.t0){e.next=5;break}return e.next=4,this._validateConditions();case 4:e.t0=e.sent;case 5:if(!e.t0){e.next=26;break}new f.Library(this.setup),e.prev=8,e.t1=(this.component.type||"").toLowerCase(),e.next="modal"===e.t1?12:"bar"===e.t1?14:16;break;case 12:return new l.Modal(this._getComponentConfig()),e.abrupt("break",17);case 14:return new c.Bar(this._getComponentConfig()),e.abrupt("break",17);case 16:document.querySelector(this.component.target)&&new h.Target(this._getComponentConfig());case 17:e.next=23;break;case 19:return e.prev=19,e.t2=e.catch(8),m.Utils.logError("unable to create module ".concat(this.component.name,": ").concat(e.t2)),e.abrupt("return",!1);case 23:return e.abrupt("return",!0);case 26:if(!Object.keys(this.fallback).length||this.fallbackTriggered){e.next=30;break}return e.next=29,new t(this.setup,this.fallback,!0).render();case 29:return e.abrupt("return",e.sent);case 30:return e.abrupt("return",!1);case 31:case"end":return e.stop()}}),e,this,[[8,19]])}))),function(){return n.apply(this,arguments)})},{key:"_getComponentConfig",value:function(){return{element:this._getComponent(),setup:this.setup,component:this.component}}},{key:"_getComponent",value:function(){var t=this;return Object.keys(this.props).map((function(e){var n=t.props[e];if("object"===(0,o.default)(n)&&"string"==typeof n.type)switch(n.type){case"setup":t.props[e]=t._getPropSetup(n);break;case"link":t.props[e]=t._getPropLink(n);break;case"analytics":t.props[e]=t._getPropAnalytics(n);break;case"user":var r=t._getPropUser(n);r||!1===r?t.props[e]=r:delete t.props[e];break;case"gup_lng":t.props[e]=t._getPropGupLng(n);break;case"gnt_region":t.props[e]=t._getPropGntRegion(n);break;case"gnt_cec":t.props[e]=t._getPropGntCec(n)}})),new p.Component(this.component.name,this.props)}},{key:"_getPropSetup",value:function(t){var e=t.value;return this.setup[e]}},{key:"_getPropLink",value:function(t){var e=t.value,n=t.params,r=t.path,o=t.uaid;return new d.Link(e,n,r,o,this.setup).get()}},{key:"_getPropAnalytics",value:function(t){var e=this,n=t.method,r=t.variant,i=void 0===r?"":r,s=this.setup,a=s.platform,u=s.protectionState,c=s.viewRemaining,l=s.ssts,h=s.pageType;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"==typeof t?t=[h,l,e.component.name,i,a,t,"metered"===u?c:""].filter(Boolean).join("|").toLowerCase():"object"===(0,o.default)(t)&&(t.module=[e.component.name,i].filter(Boolean).join("|").toLowerCase()),e.setup.analytics[n](t)}}},{key:"_getPropUser",value:function(t){var e=t.value,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new g.User(e,this.setup,n).get()}},{key:"_getPropGupLng",value:function(t){var e=t.value;return new y.Gup_lng(e,this.setup).get()}},{key:"_getPropGntRegion",value:function(t){var e=t.value;return new v.Gnt_region(e,this.setup).get()}},{key:"_getPropGntCec",value:function(t){var e=t.value;return new b.Gnt_cec(e,this.setup).get()}},{key:"_validateConditions",value:(e=(0,s.default)(i.default.mark((function t(){var e,n,r,o=this;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=!1,n=!1,!(r=Object.keys(this.conditions).every((function(t){return"rate"===t?(e=!0,!0):"parselyMatchByRegion"===t?(n=!0,!0):t.includes(":")?o._validateParentCondition(t,o.conditions[t]):"ssts"===t?o._validateSSTS():"taxonomy"===t?o._validateTaxonomy():"slot"===t?o._validateTestingSlot():"abv"===t?o._validateAbvValue():o.conditions[t]===o.setup[t]||o.conditions[t]===o._getPropUser({value:t},!0)})))||!n){t.next=7;break}return t.next=6,this._validateParselyMatchByRegion();case 6:return t.abrupt("return",t.sent);case 7:if(!r||!e){t.next=9;break}return t.abrupt("return",this._validateRateLimit());case 9:return t.abrupt("return",Promise.resolve(r));case 10:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"_validateParentCondition",value:function(t,e){var n=t.split(":"),r=n[0],o=n[1],i=Array.isArray(e);switch(r){case"user":return e===this._getPropUser({value:o},!0);case"gup_lng":return e===this._getPropGupLng({value:o});case"gnt_region":return i?e.includes(this._getPropGntRegion({value:o})):e===this._getPropGntRegion({value:o});case"gnt_cec":return e===this._getPropGntCec({value:o});default:return!1}}},{key:"_validateSSTS",value:function(){var t=(this.setup.ssts||"").toLowerCase().replace(/^\/|\/$/g,"");if(Array.isArray(this.conditions.ssts))return this.conditions.ssts.map((function(t){return t.toLowerCase().replace(/^\/|\/$/g,"")})).includes(this.setup.ssts.toLowerCase().replace(/^\/|\/$/g,""));var e=(this.conditions.ssts||"").toLowerCase().replace(/^\/|\/$/g,"");return t.startsWith(e)}},{key:"_validateTaxonomy",value:function(){return Array.isArray(this.setup.taxonomy)&&this.setup.taxonomy.map((function(t){return t.toLowerCase()})).includes(this.conditions.taxonomy.toLowerCase())}},{key:"_validateRateLimit",value:function(){var t=[this.component.name,this.component.variant].filter(Boolean).join(":");return new _.Gnt_atoms_rate(t,this.conditions.rate,this.setup).validateComponentRate()}},{key:"_validateTestingSlot",value:function(){return Array.isArray(this.conditions.slot)?this.conditions.slot.includes(this.setup.slot):this.conditions.slot===this.setup.slot}},{key:"_validateAbvValue",value:function(){return this.conditions.abv===this.setup.abv}},{key:"_validateParselyMatchByRegion",value:function(){var t=this;return!(!m.Utils.getCookie("gnt_region")&&!this.setup.gnt_region)&&m.Utils.getMapping(this.setup.environment,this._getPropGntRegion({value:"site_code"}).toLowerCase(),"parsely").then((function(e){for(var n in e)if(t.setup.ssts.startsWith(n))return t.props.localCoverageRoute=e[n].localCoverageRoute,t.props.tag=e[n].tag,!0;return!1}))}}]),t}();e.Module=w},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Bar=void 0;var o=r(n(1)),i=r(n(2)),s=n(3),a=(n(8),function(){function t(e){var n=e.element,r=e.setup,i=e.component;(0,o.default)(this,t),Object.assign(this,{element:n,setup:r,component:i}),this._createBar()}return(0,i.default)(t,[{key:"_createBar",value:function(){this.setup.customBar?this._createCustomBar():this._createDefaultBar()}},{key:"_createDefaultBar",value:function(){try{var t="99";"cp"===this.setup.platform&&(t="120");var e=this.component.styles||{},n=["display:block","position:fixed","position:-webkit-sticky","position:sticky","width:".concat(e.width||"100%"),"bottom:".concat(e.bottom||"0"),"left:".concat(e.left||"0"),"right:".concat(e.right||"0"),"z-index:".concat(t)];this.element.setAttribute("style",n.join("; ")),this.element.id="gannettAtomsComponentBar",document.body.appendChild(this.element)}catch(t){s.Utils.logError("failed to create ".concat(this.component.name," using default bar function"))}}},{key:"_createCustomBar",value:function(){try{this.setup.customBar(this.element)}catch(t){s.Utils.logError("unable to create ".concat(this.component.name,' using "customBar" function'))}}}]),t}());e.Bar=a},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Modal=void 0;var o=r(n(1)),i=r(n(2)),s=n(3),a=function(){function t(e){var n=e.element,r=e.setup,i=e.component;(0,o.default)(this,t),Object.assign(this,{element:n,setup:r,component:i}),this._createModal()}return(0,i.default)(t,[{key:"_createModal",value:function(){this.setup.customModal?this._createCustomModal():this._createDefaultModal()}},{key:"_createDefaultModal",value:function(){var t=this;try{var e="gannett-atoms-component-ui-modal",n=document.getElementsByTagName(e);n.length&&n.forEach((function(t){return t.remove()}));var r=document.createElement(e);["fullScreen"].map((function(e){t.component.hasOwnProperty(e)&&"boolean"==typeof t.component[e]&&(r[e]=t.component[e])})),this.element.close=function(){return r.close()},r.appendChild(this.element),document.body.appendChild(r)}catch(t){s.Utils.logError("unable to create ".concat(this.component.name," using default modal function"))}}},{key:"_createCustomModal",value:function(){try{var t=this.setup.customModal(this.element);t.open(),this.element.close=t.close}catch(t){s.Utils.logError("unable to create ".concat(this.component.name,' using "customModal" function'))}}}]),t}();e.Modal=a},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0;var o=r(n(4)),i=r(n(1)),s=n(3);e.Component=function t(e,n){(0,i.default)(this,t);var r=["analytics","comment"],a=document.createElement("".concat("gannett-atoms-component","-").concat(e));return Object.keys(n).map((function(t){r.includes(t)||"object"===(0,o.default)(n[t])||"function"==typeof n[t]?a[t]=n[t]:void 0!==n[t]&&a.setAttribute(s.Utils.camelToDashes(t),n[t])})),a}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Library=void 0;var o=r(n(1)),i=r(n(2)),s=function(){function t(e){(0,o.default)(this,t);var n=window.location.hostname.split("."),r=3===n.length?n[1]:2===n.length?n[0]:"gannettdigital";this.namespace="gannett-atoms-components",this.base="https://atoms.".concat(r,".com/atoms-components/").concat(e.environment,"/dist/").concat(this.namespace,"/"),this.createScript("".concat(this.namespace,".esm.js"),"gannettAtomsComponentsLibraryEsm","type","module"),this.createScript("".concat(this.namespace,".js"),"gannettAtomsComponentsLibrary","nomodule")}return(0,i.default)(t,[{key:"createScript",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"gannett-atoms-components.js",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(e&&!document.getElementById(e)){var o=document.createElement("script");o.src="".concat(this.base).concat(t),o.setAttribute("data-stencil-namespace",this.namespace),o.setAttribute("data-resources-url","".concat(this.base)),o.setAttribute(n,r),o.id=e,o.async=!0,document.body.appendChild(o)}}}]),t}();e.Library=s},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Link=void 0;var o=r(n(1)),i=r(n(2)),s=n(3),a=(n(5),function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"GUP",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};(0,o.default)(this,t);var a=Object.keys(n).filter((function(t){return t.startsWith("utm_")}));a&&a.forEach((function(t){return n["itm_"+t.split("_")[1]]=n[t]})),Object.assign(this,{key:e,params:n,path:r,setup:s});var u=window.top.location.host||"",c=u.split(".").slice(-2).join(".");switch(this.redirectParams=["return-url","cancel-url","success-url"],this.url="",e.toLowerCase()){case"activate":this.addRedirectParams=!0,this.url="https://account.".concat(c,"/account-lookup");break;case"login":this.addRedirectParams=!0,this.url="https://login.".concat(c,"/").concat(s.siteCode,"-").concat(i,"/authenticate");break;case"account":this.url="https://account.".concat(c);break;case"register":this.addRedirectParams=!0,this.url="https://login.".concat(c,"/").concat(s.siteCode,"-").concat(i,"/authenticate?requested-state=create-account");break;case"subscribe":this.addRedirectParams=!0,this.addTerm=!0,this.url="https://subscribe.".concat(c);break;case"help":this.url="https://help.".concat(c);break;case"homepage":this.url="https://".concat(u);break;case"newsletter":this.url="https://user.".concat(c,"/").concat(s.siteCode,"-").concat(i,"/user/newsletters/");break;case"attributes":this.url="https://user.".concat(c,"/").concat(s.siteCode,"-").concat(i,"/user/attributes/");break;case"profile":this.url="https://profile.".concat(c,"/newsletters/manage");break;case"homeservices":this.url="https://homeservices.".concat(c);break;case"facebook":this.params.app_id&&(this.url="https://www.facebook.com/dialog/feed?name=".concat(this.getTitle(),"&link=").concat(this.getCanonical(),"&redirect_uri=").concat(window.location.href,"&app_id="));break;case"twitter":this.url="https://twitter.com/intent/tweet?text=".concat(this.getTitle(),"&url=").concat(this.getCanonical());break;case"email":this.url="mailto:?subject=".concat(this.getTitle(),"&body=").concat(this.getCanonical());break;case"sms":this.setup.mobile&&(this.url="sms:?&body=".concat(this.getTitle(),"%0A%0A").concat(this.getCanonical()));break;case"voterguide":this.url="https://www.".concat(c,"/storytelling/election-2020-voter-guide/");break;case"voterregistration":this.url="https://www.".concat(c,"/storytelling/election-2020-voter-guide/register-to-vote/register/");break;case"parselytop":this.url="https://api.parsely.com/v2/top/posts";break;case"parselysearch":this.url="https://api.parsely.com/v2/search";break;case"subscriberguide":this.url="https://cm.".concat(c,"/subscriberguide");break;case"enewspaper":this.url="https://user.".concat(c,"/user/enewspaper")}}return(0,i.default)(t,[{key:"get",value:function(){var t=this;try{if(this.url){var e=new URL(this.url);return"metered"===this.setup.protectionState&&this.params.utm_content&&(this.params.utm_content="".concat(this.setup.viewRemaining).concat(this.params.utm_content),this.params.itm_content="".concat(this.setup.viewRemaining).concat(this.params.itm_content)),this.addTerm&&!this.params.hasOwnProperty("utm_term")&&this.setup.camId&&"control"!==this.setup.camId&&(this.params.utm_term=this.setup.camId.toLowerCase(),this.params.itm_term=this.setup.camId.toLowerCase()),this.path&&(e.pathname=this.path),this.addRedirectParams&&this.redirectParams.map((function(t){return e.searchParams.set(t,window.top.location.href)})),Object.keys(this.params).map((function(n){return e.searchParams.set(n,t.params[n])})),e.href}return""}catch(t){return s.Utils.logWarning("unable to construct link - ".concat(this.key,": ").concat(t)),this.url||""}}},{key:"getTitle",value:function(){return(document.querySelector('meta[property="og:title"]')||{}).content||document.title||""}},{key:"getCanonical",value:function(){return(document.querySelector('link[rel="canonical"]')||{}).href||window.location.href}}]),t}());e.Link=a},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Gup_lng=void 0;var o=r(n(1)),i=r(n(2)),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.default)(this,t),Object.assign(this,{key:e,gup_lng:n.gup_lng||{}})}return(0,i.default)(t,[{key:"get",value:function(){switch(this.key.toLowerCase()){case"auth":case"isAuthenticatedInCurrentContext":return this.gup_lng.hasOwnProperty("auth")?this.gup_lng.auth:null;case"hma":case"hasMarketAccess":return this.gup_lng.hasOwnProperty("hma")?this.gup_lng.hma:null;case"lic":case"userLicenseType":return this.gup_lng.lic||null;case"name":case"welcomeName":return this.gup_lng.name||null;case"ret-sub":case"returningSubscriber":return this.gup_lng.hasOwnProperty("ret-sub")?this.gup_lng["ret-sub"]:null;case"ret-usr":case"returningUser":return this.gup_lng.hasOwnProperty("ret-usr")?this.gup_lng["ret-usr"]:null;case"updated":case"lastUpdated":return this.gup_lng.updated||null;case"ce":case"ccExpiration":return this.gup_lng.ce||null;default:return null}}}]),t}();e.Gup_lng=s},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Gnt_region=void 0;var o=r(n(1)),i=r(n(2)),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.default)(this,t),Object.assign(this,{key:e.toLowerCase(),gnt_region:n.gnt_region||{}})}return(0,i.default)(t,[{key:"get",value:function(){switch(this.key){case"state":return this.gnt_region.state||null;case"state_name":return this.gnt_region.state_name||null;case"market":return this.gnt_region.market||null;case"site_code":return this.gnt_region.site_code||null;case"domain":return this.gnt_region.domain||null;case"gh":return!!this.gnt_region.hasOwnProperty("gh")&&this.gnt_region.gh;case"exists":return!!Object.keys(this.gnt_region).length;default:return this.gnt_region[this.key]||null}}}]),t}();e.Gnt_region=s},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Gnt_cec=void 0;var o=r(n(1)),i=r(n(2)),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.default)(this,t),Object.assign(this,{key:e.toLowerCase(),gnt_cec:n.gnt_cec||""})}return(0,i.default)(t,[{key:"get",value:function(){switch(this.key){case"exists":return!!this.gnt_cec;case"sam_or_snap":return!!Object.keys(this.gnt_cec).length&&new RegExp("sam|snap$").test(this.gnt_cec);default:return this.gnt_cec[this.key]||null}}}]),t}();e.Gnt_cec=s},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Gnt_atoms_rate=void 0;var o=r(n(26)),i=r(n(1)),s=r(n(2)),a=n(3),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,i.default)(this,t),this.COOKIE_NAMESPACE="gnt_atoms_rate",this.SEGMENT_PROP="_segment",this.setup=r;var o=n.toLowerCase().split(":");Object.assign(this,{name:e.toLowerCase(),rate:{string:n,count:parseInt(o[0])||0,daysInMs:864e5*parseInt(o[1])||0,type:o[2]||""},segment:(this.setup.camId||"").split(":")[0].toLowerCase(),cookie:this.setup[this.COOKIE_NAMESPACE]||this._getCookie(),currentTime:Date.now(),isGetCookieError:!1}),this._updateSetup(),this._extractCookieComponent()}return(0,s.default)(t,[{key:"validateComponentRate",value:function(){if(this.isGetCookieError||!this._isValidRate())return this._deleteComponentEntry(),!1;if(this._isNewUserSegment()&&this._resetCookieSegment(),!this._isTrackedComponent()||this._isExpiredComponent()||this._isUpdatedRate())this._setNewComponentEntry();else if(!this._isWithinRateLimit())return!1;return this._updateCookieAndReturnStatus()}},{key:"_getCookie",value:function(){try{var t=a.Utils.getCookie(this.COOKIE_NAMESPACE);return t?JSON.parse(decodeURIComponent(t)):{}}catch(t){return this.isGetCookieError=!0,a.Utils.logError("unable to read ".concat(this.COOKIE_NAMESPACE," cookie")),{}}}},{key:"_extractCookieComponent",value:function(){var t=this.cookie[this.name]||{},e=t.count,n=void 0===e?0:e,r=t.expires,o=void 0===r?0:r,i=t.rate,s=void 0===i?"":i,a=t.next,u=void 0===a?0:a;this.component={expires:o,rate:s},this._isSequential()?this.component.count=n:this.component.next=u}},{key:"_updateSetup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!t&&this.setup[this.COOKIE_NAMESPACE]||(this.setup[this.COOKIE_NAMESPACE]=this.cookie)}},{key:"_isValidRate",value:function(){return this.rate.daysInMs>0&&this.rate.count>0}},{key:"_deleteComponentEntry",value:function(){delete this.cookie[this.name]}},{key:"_isNewUserSegment",value:function(){return(this.cookie[this.SEGMENT_PROP]||"")!==this.segment}},{key:"_resetCookieSegment",value:function(){this.cookie=(0,o.default)({},this.SEGMENT_PROP,this.segment)}},{key:"_isTrackedComponent",value:function(){return!!this.cookie[this.name]}},{key:"_isExpiredComponent",value:function(){return this.currentTime>this.component.expires}},{key:"_isUpdatedRate",value:function(){return this.component.rate!==this.rate.string}},{key:"_isSequential",value:function(){return"seq"===this.rate.type}},{key:"_isWithinRateLimit",value:function(){return this._isSequential()?this._isWithinRateLimitSequential():this._isWithinRateLimitEven()}},{key:"_isWithinRateLimitEven",value:function(){var t=this.currentTime>=this.component.next;return t&&(this.component.next=this._getNextOccurrence()),t}},{key:"_isWithinRateLimitSequential",value:function(){var t=this.component.count<this.rate.count;return t&&this.component.count++,t}},{key:"_getNextOccurrence",value:function(){return this.currentTime+this.rate.daysInMs/this.rate.count}},{key:"_setNewComponentEntry",value:function(){this._isSequential()?this.component.count=1:this.component.next=this._getNextOccurrence(),this.component.expires=this.currentTime+this.rate.daysInMs,this.component.rate=this.rate.string}},{key:"_updateCookieAndReturnStatus",value:function(){try{if(this.cookie[this.name]=this.component,a.Utils.setCookie(this.COOKIE_NAMESPACE,encodeURIComponent(JSON.stringify(this.cookie)),30),!a.Utils.getCookie(this.COOKIE_NAMESPACE))throw"cookie was not set";return this._updateSetup(!0),!0}catch(t){return a.Utils.logWarning("unable to write ".concat(this.COOKIE_NAMESPACE," cookie")),!1}}}]),t}();e.Gnt_atoms_rate=u},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Journey=void 0;var o=r(n(28)),i=r(n(1)),s=r(n(2)),a=n(3),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,t),this.setup=e,this.cfg=n,this.modules=[]}return(0,s.default)(t,[{key:"getModules",value:function(){var t=(this.setup.protectionState||"").toLowerCase();if(this.setup.roadblock)switch(t){case"premium-only":case"premium":this.modules=this._getInlineRoadblockPremiumModules();break;default:this.modules=this._getInlineRoadblockModules()}else{switch(t){case"premium-only":case"premium":this.modules=this.modules.concat(this._getPremiumModules());break;case"metered":case"meter":this.modules=this.modules.concat(this._getMeteredModules());break;case"free":this.modules=this.modules.concat(this._getFreeModules())}this.modules=this.modules.concat(this._getGenericModules()),this._sortModulesByType()}return this._sortGroupedModulesByRank(),this.modules.filter((function(t){return t.length}))}},{key:"_getPremiumModules",value:function(){return a.Utils.getObjectValues(this.cfg["premium-only"])}},{key:"_getMeteredModules",value:function(){var t=this.cfg.metered||{};return a.Utils.getObjectValues(t[this.setup.viewRemaining]||t.default)}},{key:"_getFreeModules",value:function(){return a.Utils.getObjectValues(this.cfg.free)}},{key:"_getGenericModules",value:function(){return a.Utils.getObjectValues(this.cfg.all)}},{key:"_getInlineRoadblockModules",value:function(){return[a.Utils.getObjectValues((this.cfg["inline-roadblock"]||{}).metered)]}},{key:"_getInlineRoadblockPremiumModules",value:function(){return[a.Utils.getObjectValues((this.cfg["inline-roadblock"]||{})["premium-only"])]}},{key:"_sortModulesByType",value:function(){var t=[],e=[],n={};this.modules.forEach((function(r){if(r.component)switch(r.component.type){case"bar":t.push(r);break;case"modal":e.push(r);break;default:r.component.target&&(n.hasOwnProperty(r.component.target)||(n[r.component.target]=[]),n[r.component.target].push(r))}})),this.modules=[t,e].concat((0,o.default)(a.Utils.getObjectValues(n)))}},{key:"_sortGroupedModulesByRank",value:function(){var t=this;this.modules.map((function(e){return t._sortModulesByRank(e)}))}},{key:"_sortModulesByRank",value:function(t){return t.sort((function(t,e){var n=t.component,r=void 0===n?{}:n,o=e.component,i=void 0===o?{}:o;return!r.hasOwnProperty("rank")||r.rank>i.rank?1:!i.hasOwnProperty("rank")||r.rank<i.rank?-1:void 0}))}}]),t}();e.Journey=u},function(t,e,n){var r=n(29),o=n(30),i=n(31);t.exports=function(t){return r(t)||o(t)||i()}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Setup=void 0;var o=r(n(4)),i=r(n(1)),s=r(n(2)),a=n(3),u=n(5),c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,t),this.setup=e,this.errors=!1,this.whitelist={platform:"string",siteCode:"string",environment:"string",camId:"string",camEnabled:"boolean",camTriggered:"boolean",authorized:"boolean",authenticated:"boolean",email:"string",user:"object",ssts:"string",taxonomy:"object",pageType:"string",protectionState:"string",viewCount:"number",viewThreshold:"number",roadblock:"boolean",mobile:"boolean",analytics:"object",comment:"function",customBar:"function",customModal:"function",gup_lng:"object",gnt_region:"string",gnt_cec:"string",parselyMatchByRegion:"boolean",abv:"string"},this._validate(),this._throwSetupErrors(),this._setEnv(),this._setViewRemaining(),this._setBaseUserData(),this._setGupLngCookie(),this._setTestingSlot(),this._setAbvValue(),this._setGntRegionCookie(),this._setGntCecCookie(),this.setup.platform=(this.setup.platform||"").toLowerCase()}return(0,s.default)(t,[{key:"_validate",value:function(){var t=this;Object.keys(this.setup).map((function(e){Object.keys(t.whitelist).includes(e)&&void 0!==t.setup[e]&&null!==t.setup[e]?t._logTypeError(e):delete t.setup[e]}))}},{key:"_setEnv",value:function(){var t=(this.setup.environment||"").toLowerCase(),e=["prod","stage"];e.includes(t)||(a.Utils.logWarning('invalid environment value: "'.concat(this.setup.environment,'". Allowed values: ').concat(e.join(", "),'. Defaulting to "prod"')),this.setup.environment="prod")}},{key:"_setViewRemaining",value:function(){this.setup.viewRemaining=(this.setup.viewThreshold||0)-(this.setup.viewCount||0)}},{key:"_setBaseUserData",value:function(){var t=this;["authorized","authenticated"].map((function(e){t.setup.hasOwnProperty(e)||(t.setup[e]=new u.User(e,t.setup).get())}))}},{key:"_setGupLngCookie",value:function(){try{this.setup.gup_lng||(this.setup.gup_lng=JSON.parse(decodeURIComponent(a.Utils.getCookie("gup_lng"))))}catch(t){this.setup.gup_lng={},a.Utils.logWarning("gup_lng cookie unavailable")}}},{key:"_setTestingSlot",value:function(){try{this.setup.slot=parseInt(a.Utils.getCookie("gnt_sb"))||null}catch(t){this.setup.slot=null,a.Utils.logWarning("gnt_sb cookie unavailable")}}},{key:"_setGntRegionCookie",value:function(){try{this.setup.gnt_region||(this.setup.gnt_region=a.Utils.getCookie("gnt_region")),this.setup.gnt_region=JSON.parse(atob(this.setup.gnt_region))}catch(t){this.setup.gnt_region={},a.Utils.logWarning("gnt_region cookie unavailable")}}},{key:"_setGntCecCookie",value:function(){try{this.setup.gnt_cec||(this.setup.gnt_cec=a.Utils.getCookie("gnt_cec"))}catch(t){this.setup.gnt_cec="",a.Utils.logWarning("gnt_cec cookie unavailable")}}},{key:"_setAbvValue",value:function(){this.setup.abv||(this.setup.abv="")}},{key:"_logTypeError",value:function(t){var e=(0,o.default)(this.setup[t]);e!==this.whitelist[t]&&(a.Utils.logError('invalid setup type: "'.concat(t,'" - "').concat(e,'". should be "').concat(this.whitelist[t],'"')),this.errors=!0)}},{key:"_throwSetupErrors",value:function(){this.errors&&a.Utils.throwError("invalid setup types. exiting processing.")}}]),t}();e.Setup=c}]);
//# sourceMappingURL=gannett-atoms-library.js.map