// FULL SCREEN STREAMING VIDEO
// AUTHORS - PAUL NAUMAN, MATT BASSET, BRENTON KELLY
// VERSION 04.20.21 - ADDED MUTE PARAMETER TO YOUTUBE PLAYER BY JACINDA GRANNAS

!function(y){y.fn.fullScreenRotator=function(e){var g={videoSource:"youtube",videoID:"",myvrspotVideoWidth:"853.5",myvrspotVideoHeight:"480",fullScreenBreakpoints:[960],showControls:!0,showWatchVideoButton:!1,watchVideoButtonText:"Watch Video",showProgressBar:!1,progressBarType:"line",progressBarCircleWidth:70,progressBarCircleHeight:70,progressBarStrokeWidth:7,progressBarStrokeColor:"#FFF",showMobileBackgroundPhoto:!0,mobileBackgroundPhoto:"//placehold.it/640x400",mobileBackgroundPhotoBreakpoint:640,useCustomResize:!1,extendResize:function(e,t,o){},onReady:function(e){},onStateChange:function(e){}};return e&&y.extend(g,e),Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},this.each(function(e,t){g.videoSource=g.videoSource.toLowerCase();var n,o,i,s,r,a=this,u="",l="",c="myvrspot"==g.videoSource&&""!=y.trim(g.myvrspotVideoWidth)&&Number.isInteger(g.myvrspotVideoWidth)?g.myvrspotVideoWidth:853.5,d="myvrspot"==g.videoSource&&""!=y.trim(g.myvrspotVideoHeight)&&Number.isInteger(g.myvrspotVideoHeight)?g.myvrspotVideoHeight:480,f={tab:9,enter:13,esc:27,space:32,end:35,home:36,left:37,up:38,right:39,down:40};function v(e){var o=e||{width:c,height:d},t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e),window.onYouTubeIframeAPIReady=function(){var e,t;g.showProgressBar&&"circle"==g.progressBarType&&(e=document.getElementById("cs-fullscreen-video-loader"),"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(e),t=e.getContext("2d")),l=new YT.Player("cs-fullscreen-video",{height:d,width:c,videoId:g.videoID,playerVars:{autoplay:1,mute:1,modestbranding:1,controls:0,rel:0,loop:1,showinfo:0,wmode:"opaque",playlist:g.videoID},events:{onReady:function(e){l.mute(),0===e.data&&l.playVideo(),g.showProgressBar&&("line"==g.progressBarType?setInterval(function(){var e=l.getCurrentTime(),t=l.getDuration();y(".cs-fullscreen-video-progessbar.line-progressbar").css("width",e/t*100+"%")},500):"circle"==g.progressBarType&&setInterval(function(){var e=(l.getCurrentTime()/l.getDuration()*360).toFixed(2);t.clearRect(0,0,g.progressBarCircleWidth,g.progressBarCircleHeight),t.beginPath(),t.arc(g.progressBarCircleWidth/2,g.progressBarCircleHeight/2,g.progressBarCircleWidth/2,h(0)-Math.PI/2,h(e)-Math.PI/2,!1),t.lineWidth=g.progressBarStrokeWidth,t.strokeStyle=g.progressBarStrokeColor,t.stroke()},500)),y(document).on("click keydown",".cs-fullscreen-video-buttons.cs-fullscreen-video-youtube-buttons .play-button",function(e){b(e)&&(e.preventDefault(),g.onStateChange.call(this,o),l.playVideo(),y(".cs-fullscreen-video-buttons.cs-fullscreen-video-youtube-buttons").hasClass("video-paused")&&y(".cs-fullscreen-video-buttons.cs-fullscreen-video-youtube-buttons").removeClass("video-paused").addClass("video-playing"))}),y(document).on("click keydown",".cs-fullscreen-video-buttons.cs-fullscreen-video-youtube-buttons .pause-button",function(e){b(e)&&(e.preventDefault(),g.onStateChange.call(this,o),l.pauseVideo(),y(".cs-fullscreen-video-buttons.cs-fullscreen-video-youtube-buttons").hasClass("video-playing")&&y(".cs-fullscreen-video-buttons.cs-fullscreen-video-youtube-buttons").removeClass("video-playing").addClass("video-paused"))}),y(document).on("click keydown",".cs-fullscreen-video-buttons.cs-fullscreen-video-youtube-buttons .mute-button",function(e){b(e)&&(e.preventDefault(),g.onStateChange.call(this,o),l.mute(),y(".cs-fullscreen-video-buttons.cs-fullscreen-video-youtube-buttons").hasClass("video-unmuted")&&y(".cs-fullscreen-video-buttons.cs-fullscreen-video-youtube-buttons").removeClass("video-unmuted").addClass("video-muted"))}),y(document).on("click keydown",".cs-fullscreen-video-buttons.cs-fullscreen-video-youtube-buttons .unmute-button",function(e){b(e)&&(e.preventDefault(),g.onStateChange.call(this,o),l.unMute(),y(".cs-fullscreen-video-buttons.cs-fullscreen-video-youtube-buttons").hasClass("video-muted")&&y(".cs-fullscreen-video-buttons.cs-fullscreen-video-youtube-buttons").removeClass("video-muted").addClass("video-unmuted"))}),g.onReady.call(this,o)},onStateChange:function(e){0===e.data?l.playVideo():1===e.data?(y(".cs-fullscreen-video-buttons.cs-fullscreen-video-youtube-buttons").hasClass("video-paused")&&y(".cs-fullscreen-video-buttons.cs-fullscreen-video-youtube-buttons").removeClass("video-paused").addClass("video-playing"),g.showProgressBar):2===e.data&&y(".cs-fullscreen-video-buttons.cs-fullscreen-video-youtube-buttons").hasClass("video-playing")&&y(".cs-fullscreen-video-buttons.cs-fullscreen-video-youtube-buttons").removeClass("video-playing").addClass("video-paused")}}})}}function h(e){return e*(Math.PI/180)}function p(e){var o=e||{width:c,height:d};y("#cs-fullscreen-video").replaceWith(function(){return'<iframe id="cs-fullscreen-video" src="//player.vimeo.com/video/'+g.videoID+"?title=0&byline=0&portrait=0&playbar=0&loop=1&autoplay=1&player_id="+y(a)[0].id+'&muted=1" frameborder="0" aria-hidden="true" tabindex="-1" allow="autoplay; fullscreen"></iframe>'});e=document.getElementById("cs-fullscreen-video");(l=new Vimeo.Player(e)).ready().then(function(){var e,t;l.play(),l.setVolume(0),g.showProgressBar&&("line"==g.progressBarType?l.on("progress",function(e){var t=e.seconds,e=e.duration;y(".cs-fullscreen-video-progessbar.line-progressbar").css("width",t/e*100+"%")}):"circle"==g.progressBarType&&(e=document.getElementById("cs-fullscreen-video-loader"),"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(e),t=e.getContext("2d"),l.on("progress",function(e){e=(360*e.percent).toFixed(2);t.clearRect(0,0,g.progressBarCircleWidth,g.progressBarCircleHeight),t.beginPath(),t.arc(g.progressBarCircleWidth/2,g.progressBarCircleHeight/2,g.progressBarCircleWidth/2,h(0)-Math.PI/2,h(e)-Math.PI/2,!1),t.lineWidth=g.progressBarStrokeWidth,t.strokeStyle=g.progressBarStrokeColor,t.stroke()}))),y(document).on("click keydown",".cs-fullscreen-video-buttons.cs-fullscreen-video-vimeo-buttons .play-button",function(e){b(e)&&(e.preventDefault(),g.onStateChange.call(this,o),l.play(),y(".cs-fullscreen-video-buttons.cs-fullscreen-video-vimeo-buttons").hasClass("video-paused")&&y(".cs-fullscreen-video-buttons.cs-fullscreen-video-vimeo-buttons").removeClass("video-paused").addClass("video-playing"))}),y(document).on("click keydown",".cs-fullscreen-video-buttons.cs-fullscreen-video-vimeo-buttons .pause-button",function(e){b(e)&&(e.preventDefault(),g.onStateChange.call(this,o),l.pause(),y(".cs-fullscreen-video-buttons.cs-fullscreen-video-vimeo-buttons").hasClass("video-playing")&&y(".cs-fullscreen-video-buttons.cs-fullscreen-video-vimeo-buttons").removeClass("video-playing").addClass("video-paused"))}),y(document).on("click keydown",".cs-fullscreen-video-buttons.cs-fullscreen-video-vimeo-buttons .mute-button",function(e){b(e)&&(e.preventDefault(),g.onStateChange.call(this,o),l.setVolume(0),y(".cs-fullscreen-video-buttons.cs-fullscreen-video-vimeo-buttons").hasClass("video-unmuted")&&y(".cs-fullscreen-video-buttons.cs-fullscreen-video-vimeo-buttons").removeClass("video-unmuted").addClass("video-muted"))}),y(document).on("click keydown",".cs-fullscreen-video-buttons.cs-fullscreen-video-vimeo-buttons .unmute-button",function(e){b(e)&&(e.preventDefault(),g.onStateChange.call(this,o),l.setVolume(1),y(".cs-fullscreen-video-buttons.cs-fullscreen-video-vimeo-buttons").hasClass("video-muted")&&y(".cs-fullscreen-video-buttons.cs-fullscreen-video-vimeo-buttons").removeClass("video-muted").addClass("video-unmuted"))})}),g.onReady.call(this,o)}function m(){switch(window.getComputedStyle(document.querySelector("body"),":before").getPropertyValue("content").replace(/"|'/g,"")){case"desktop":return 960;case"768":return 768;case"640":return 640;case"480":return 480;case"320":return 320}}function b(e){return"click"==e.type||"keydown"==e.type&&(e.keyCode==f.space||e.keyCode==f.enter)}(i=document.createElement("style"))&&(i.setAttribute("type","text/css"),(o=document.getElementsByTagName("head")[0])&&o.insertBefore(i,o.childNodes[0]),n='body:before {content: "desktop";display: none;}.cs-fullscreen-video-button[data-show-button="false"] {display: none !important;}#cs-fullscreen-video-outer[data-hide-video="960"] #cs-fullscreen-video {display: none;}@media (max-width: 1023px) {body:before {content: "768";}#cs-fullscreen-video-outer[data-hide-video="768"] #cs-fullscreen-video {display: none;}}@media (max-width: 767px) {body:before {content: "640";}#cs-fullscreen-video-outer[data-hide-video="640"] #cs-fullscreen-video {display: none;}}@media (max-width: 639px) {body:before {content: "480";}#cs-fullscreen-video-outer[data-hide-video="480"] #cs-fullscreen-video {display: none;}}@media (max-width: 479px) {body:before {content: "320";}#cs-fullscreen-video-outer[data-hide-video="320"] #cs-fullscreen-video {display: none;}}#cs-fullscreen-video-outer {position: relative;}#cs-fullscreen-video-outer:after {content: "";display: block;position: absolute;top: 0px;bottom: 0px;left: 0px;right: 0px;}#cs-fullscreen-video {width: 100vw;height: calc(100vw * '+d/c+");}.cs-fullscreen-video-buttons {position: absolute;bottom: 0;left: 0;z-index: 5;}.cs-fullscreen-video-button {cursor: pointer;}.cs-fullscreen-video-progessbar.circle-progressbar {position: absolute;bottom: 0;left: 0;z-index: 5;}#cs-fullscreen-video-loader {width: "+g.progressBarCircleWidth+"px;height: "+g.progressBarCircleHeight+"px;border-radius: 50%;}.cs-fullscreen-video-progessbar.line-progressbar {position: absolute;bottom: 0;left: 0;z-index: 5;width: 0;height: "+g.progressBarStrokeWidth+"px;background: "+g.progressBarStrokeColor+';-webkit-transition: width 1s linear;-moz-transition: width 1s linear;-ms-transition: width 1s linear;-o-transition: width 1s linear;transition: width 1s linear;} .cs-fullscreen-video-window {width: 100%;height: 100%;position: fixed;top: 0px;left: 0px;box-sizing: border-box;background: rgba(0, 0, 0, .75);animation: streamingVideoAnimateVideoWindowIn .3s;z-index: 9999999999;} .cs-fullscreen-video-window.close-video {animation: streamingVideoAnimateVideoWindowOut 1s;animation-fill-mode: forwards;} .cs-fullscreen-video-outer {width: calc(100% - 80px);height: calc(100% - 80px);margin: 40px 0px 0px 40px;padding: 20px 20px 40px;box-sizing: border-box;animation: streamingVideoAnimateVideoIn 1s;background: #FFF;position: relative;}@media (max-width: 767px) { .cs-fullscreen-video-outer {width: calc(100% - 30px);height: calc(100% - 30px);margin: 15px 0px 0px 15px;padding: 15px 15px 40px;box-sizing: border-box;animation: streamingVideoAnimateVideoIn 1s;background: #FFF;position: relative;}} .cs-fullscreen-video-window.close-video .cs-fullscreen-video-outer {animation: streamingVideoAnimateVideoOut 1s;animation-fill-mode: forwards;} .cs-fullscreen-video-viewer {width: 100%;height: 100%;box-sizing: border-box;background: #000;position: relative;overflow: hidden;} .cs-fullscreen-video-viewer iframe {width: 100%;height: 100%;box-sizing: border-box;position: relative;z-index: 2;background: #000;} .cs-fullscreen-video-close {position: absolute;right: 20px;bottom: 15px;color: #333;line-height: 1;font-size: 16px;font-family: "Trebuchet MS", "Lucida Sans", Tahoma, sans-serif;text-decoration: underline;}@keyframes streamingVideoAnimateVideoWindowIn {0% {background: rgba(0, 0, 0, 0);}100% {background: rgba(0, 0, 0, .75);}}@-webkit-keyframes streamingVideoAnimateVideoWindowIn {0% {background: rgba(0, 0, 0, 0);}100% {background: rgba(0, 0, 0, .75);}}@keyframes streamingVideoAnimateVideoWindowOut {0% {background: rgba(0, 0, 0, .75);}70% {background: rgba(0, 0, 0, .75);}to {background: rgba(0, 0, 0, 0);}}@-webkit-keyframes streamingVideoAnimateVideoWindowOut {0% {background: rgba(0, 0, 0, .75);}70% {background: rgba(0, 0, 0, .75);}to {background: rgba(0, 0, 0, 0);}}@keyframes streamingVideoAnimateVideoIn {from, 60%, 75%, 90%, to {-moz-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);-webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);-ms-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);}0% {opacity: 0;-moz-transform: translate3d(0, -3000px, 0);-webkit-transform: translate3d(0, -3000px, 0);-ms-transform: translate3d(0, -3000px, 0);transform: translate3d(0, -3000px, 0);}60% {opacity: 1;-moz-transform: translate3d(0, 25px, 0);-webkit-transform: translate3d(0, 25px, 0);-ms-transform: translate3d(0, 25px, 0);transform: translate3d(0, 25px, 0);}75% {-moz-transform: translate3d(0, -10px, 0);-webkit-transform: translate3d(0, -10px, 0);-ms-transform: translate3d(0, -10px, 0);transform: translate3d(0, -10px, 0);}90% {-moz-transform: translate3d(0, 5px, 0);-webkit-transform: translate3d(0, 5px, 0);-ms-transform: translate3d(0, 5px, 0);transform: translate3d(0, 5px, 0);}to {-moz-transform: none;-webkit-transform: none;-ms-transform: none;transform: none;}}@-webkit-keyframes streamingVideoAnimateVideoIn {from, 60%, 75%, 90%, to {-webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);}0% {opacity: 0;-webkit-transform: translate3d(0, -3000px, 0);}60% {opacity: 1;-webkit-transform: translate3d(0, 25px, 0);}75% {-webkit-transform: translate3d(0, -10px, 0);}90% {-webkit-transform: translate3d(0, 5px, 0);}to {-webkit-transform: none;}}@keyframes streamingVideoAnimateVideoOut {20% {-moz-transform: translate3d(0, -10px, 0);-webkit-transform: translate3d(0, -10px, 0);-ms-transform: translate3d(0, -10px, 0);transform: translate3d(0, -10px, 0);}40%, 45% {opacity: 1;-moz-transform: translate3d(0, 20px, 0);-webkit-transform: translate3d(0, 20px, 0);-ms-transform: translate3d(0, 20px, 0);transform: translate3d(0, 20px, 0);}to {opacity: 0;-moz-transform: translate3d(0, -2000px, 0);-webkit-transform: translate3d(0, -2000px, 0);-ms-transform: translate3d(0, -2000px, 0);transform: translate3d(0, -2000px, 0);}}',g.fullScreenBreakpoints.length&&y.each(g.fullScreenBreakpoints,function(e,t){var o="#cs-fullscreen-video-outer {width: 100vw;height: 100vh;position: fixed;top: 0;left: 0;z-index: 1;overflow: hidden;display: -ms-flexbox;display: -webkit-flex;display: flex;-webkit-align-items: center;-ms-flex-align: center;align-items: center;-webkit-justify-content: center;-ms-flex-pack: center;justify-content: center;}#cs-fullscreen-video {width: 100vw;height: 100vh;min-width: calc(100vh / "+d/c+");min-height: calc(100vw * "+d/c+");}";switch(t){case 960:n+="@media (min-width: 1024px) {"+o+"}";break;case 768:n+="@media (max-width: 1023px) and (min-width: 768px) {"+o+"}";break;case 640:n+="@media (max-width: 767px) and (min-width: 640px) {"+o+"}";break;case 480:n+="@media (max-width: 639px) and (min-width: 480px) {"+o+"}";break;case 320:n+="@media (max-width: 479px) {"+o+"}"}}),o=document.createTextNode(n),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(o)),r="",g.showMobileBackgroundPhoto&&""!==g.mobileBackgroundPhoto&&(r=' data-hide-video="'+g.mobileBackgroundPhotoBreakpoint+'"'),u+='<div id="cs-fullscreen-video-outer"'+r+">",u+='<div id="cs-fullscreen-video" class="cs-fullscreen-video" aria-hidden="true" tabindex="-1"></div>',g.showMobileBackgroundPhoto&&""!==g.mobileBackgroundPhoto&&(u+='<div class="cs-fullscreen-video-background-photo hide960 show'+g.mobileBackgroundPhotoBreakpoint+'" aria-hidden="true"><img src="'+g.mobileBackgroundPhoto+'" alt="Background Photo" width="100%" height="auto" role="presentation" /></div>'),u+="</div>",y(a).append(u),g.showProgressBar&&(s="",s+='<div class="cs-fullscreen-video-progessbar-outer" aria-hidden="true">',"line"==g.progressBarType?s+='<div class="cs-fullscreen-video-progessbar line-progressbar"></div>':"circle"==g.progressBarType&&(s+='<div class="cs-fullscreen-video-progessbar circle-progressbar"><canvas id="cs-fullscreen-video-loader" width="'+g.progressBarCircleWidth+'" height="'+g.progressBarCircleHeight+'"></canvas></div>'),s+="</div>",y(a).append(s)),g.showControls&&(s='<div class="cs-fullscreen-video-buttons cs-fullscreen-video-'+g.videoSource+'-buttons video-playing video-muted" data-show-watch-video-button="'+g.showWatchVideoButton+'">',g.showWatchVideoButton?s+='<div class="cs-fullscreen-video-button watch-video-button" data-show-button="'+g.showWatchVideoButton+'" tabindex="0" role="button" aria-label="'+g.watchVideoButtonText+'"><span class="cs-fullscreen-video-control-text">'+g.watchVideoButtonText+"</span></div>":s+='<div class="cs-fullscreen-video-button watch-video-button" data-show-button="'+g.showWatchVideoButton+'" role="button" aria-label="'+g.watchVideoButtonText+'"><span class="cs-fullscreen-video-control-text">'+g.watchVideoButtonText+"</span></div>",s+='<div class="cs-fullscreen-video-button play-button" tabindex="0" role="button"><span class="cs-fullscreen-video-control-text">Play</span></div><div class="cs-fullscreen-video-button pause-button" tabindex="0" role="button"><span class="cs-fullscreen-video-control-text">Pause</span></div><div class="cs-fullscreen-video-button mute-button" tabindex="0" role="button"><span class="cs-fullscreen-video-control-text">Mute</span></div><div class="cs-fullscreen-video-button unmute-button" tabindex="0" role="button"><span class="cs-fullscreen-video-control-text">Unmute</span></div>',s+="</div>",y(a).append(s),y(document).on("click keydown",".watch-video-button",function(e){b(e)&&(e.preventDefault(),e=(e=y("#cs-fullscreen-video").attr("src")).split("?"),y(".cs-fullscreen-video-buttons").hasClass("video-playing")&&(y(".cs-fullscreen-video-button.pause-button").click(),y(".cs-fullscreen-video-buttons").addClass("video-was-playing")),y(".cs-fullscreen-video-buttons").hasClass("video-unmuted")&&(y(".cs-fullscreen-video-button.mute-button").click(),y(".cs-fullscreen-video-buttons").addClass("video-was-unmuted")),y("body").append('<div class="cs-fullscreen-video-window"><div class="cs-fullscreen-video-outer"><div class="cs-fullscreen-video-viewer"><div class="mmg-loader"><div class="mmg-loader-set one"></div><div class="mmg-loader-set two"></div></div><iframe width="560" height="315" src="'+e[0]+'" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><a href="#" class="cs-fullscreen-video-close" aria-label="Close video dialog" role="button">Close</a></div></div>'),setTimeout(function(){y(".cs-fullscreen-video-close").focus()},100))}),y(document).on("click keydown",".cs-fullscreen-video-close",function(e){b(e)?(e.preventDefault(),y(".cs-fullscreen-video-window").addClass("close-video"),y(".cs-fullscreen-video-buttons").hasClass("video-was-playing")&&(y(".cs-fullscreen-video-button.play-button").click(),y(".cs-fullscreen-video-buttons").removeClass("video-was-playing")),y(".cs-fullscreen-video-buttons").hasClass("video-was-unmuted")&&(y(".cs-fullscreen-video-button.unmute-button").click(),y(".cs-fullscreen-video-buttons").removeClass("video-was-unmuted")),setTimeout(function(){y(".cs-fullscreen-video-window").remove(),y(".cs-fullscreen-video-button.watch-video-button").focus()},1e3)):9===e.keyCode&&(e.preventDefault(),y(".cs-fullscreen-video-window").find(":focusable").first().focus()),"keydown"==e.type&&e.keyCode==f.tab&&(e.preventDefault(),y(".cs-fullscreen-video-viewer iframe")[0].contentWindow.focus())}),y(document).on("focusout",".cs-fullscreen-video-window",function(e){e.preventDefault(),y(".cs-fullscreen-video-close").focus()})),g.useCustomResize?(y(a).removeAttr("style"),g.extendResize(a,d,c)):y("#cs-fullscreen-video-outer").length&&-1<g.fullScreenBreakpoints.indexOf(m())?y(a).css("height","calc(100vh - "+y(a).offset().top+"px)"):y(a).removeAttr("style"),"youtube"==g.videoSource?(""==y.trim(g.videoID)&&(g.videoID="QkefIAVRQpI"),y.ajax({url:"https://noembed.com/embed?callback=?",dataType:"jsonp",contentType:"application/json; charset=utf-8",async:!0,data:{url:"https://youtube.com/watch?v="+g.videoID},success:function(e){c=e.width,d=e.height,v(e)},error:function(e){v(!1)}})):"vimeo"==g.videoSource?(""==y.trim(g.videoID)&&(g.videoID="22439234"),y.ajax({url:"https://vimeo.com/api/oembed.json?callback=?",dataType:"jsonp",async:!1,data:{url:"http://vimeo.com/"+g.videoID},success:function(e){c=e.width,d=e.height,p(e)},error:function(e){p(!1)}})):"myvrspot"==g.videoSource&&(""==y.trim(g.videoID)?console.log("No MyVRSpot video ID has been provided for the streaming video element."):function(e){var t=e||{width:c,height:d};y(a).trigger("click"),y("#cs-fullscreen-video").replaceWith(function(){return'<iframe id="cs-fullscreen-video" src="//live.myvrspot.com/iframe?v='+g.videoID+'" frameborder="0" aria-hidden="true" tabindex="-1" onload="playMyvrspotVideo();" allow="autoplay; fullscreen" scrolling="no"></iframe>'}),l=y("#cs-fullscreen-video")[0],y(document).on("click keydown",".cs-fullscreen-video-buttons.cs-fullscreen-video-myvrspot-buttons .play-button",function(e){b(e)&&(e.preventDefault(),g.onStateChange.call(this,t),l.contentWindow.postMessage("play","*"),y(".cs-fullscreen-video-buttons.cs-fullscreen-video-myvrspot-buttons").hasClass("video-paused")&&y(".cs-fullscreen-video-buttons.cs-fullscreen-video-myvrspot-buttons").removeClass("video-paused").addClass("video-playing"))}),y(document).on("click keydown",".cs-fullscreen-video-buttons.cs-fullscreen-video-myvrspot-buttons .pause-button",function(e){b(e)&&(e.preventDefault(),g.onStateChange.call(this,t),l.contentWindow.postMessage("pause","*"),y(".cs-fullscreen-video-buttons.cs-fullscreen-video-myvrspot-buttons").hasClass("video-playing")&&y(".cs-fullscreen-video-buttons.cs-fullscreen-video-myvrspot-buttons").removeClass("video-playing").addClass("video-paused"))}),y(document).on("click keydown",".cs-fullscreen-video-buttons.cs-fullscreen-video-myvrspot-buttons .mute-button",function(e){b(e)&&(e.preventDefault(),g.onStateChange.call(this,t),l.contentWindow.postMessage("mute","*"),y(".cs-fullscreen-video-buttons.cs-fullscreen-video-myvrspot-buttons").hasClass("video-unmuted")&&y(".cs-fullscreen-video-buttons.cs-fullscreen-video-myvrspot-buttons").removeClass("video-unmuted").addClass("video-muted"))}),y(document).on("click keydown",".cs-fullscreen-video-buttons.cs-fullscreen-video-myvrspot-buttons .unmute-button",function(e){b(e)&&(e.preventDefault(),g.onStateChange.call(this,t),l.contentWindow.postMessage("unmute","*"),y(".cs-fullscreen-video-buttons.cs-fullscreen-video-myvrspot-buttons").hasClass("video-muted")&&y(".cs-fullscreen-video-buttons.cs-fullscreen-video-myvrspot-buttons").removeClass("video-muted").addClass("video-unmuted"))}),g.onReady.call(this,t),window.playMyvrspotVideo=function(){y("#cs-fullscreen-video")[0].contentWindow.postMessage("play","*"),y("#cs-fullscreen-video")[0].contentWindow.postMessage("loop","*")}}()),y(window).resize(function(){g.useCustomResize?(y(a).removeAttr("style"),g.extendResize(a,d,c)):y("#cs-fullscreen-video-outer").length&&-1<g.fullScreenBreakpoints.indexOf(m())?y(a).css("height","calc(100vh - "+y(a).offset().top+"px)"):y(a).removeAttr("style")})})}}(jQuery),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e.Vimeo=e.Vimeo||{},e.Vimeo.Player=t())}(this,function(){"use strict";function s(e,t){return 0===e.indexOf(t.toLowerCase())?e:""+t.toLowerCase()+e.substr(0,1).toUpperCase()+e.substr(1)}function a(e){return/^(https?:)?\/\/((player|www).)?vimeo.com(?=$|\/)/.test(e)}function r(e){var t=0<arguments.length&&void 0!==e?e:{},o=t.id,e=t.url,t=o||e;if(!t)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(e=t,!isNaN(parseFloat(e))&&isFinite(e)&&Math.floor(e)==e)return"https://vimeo.com/"+t;if(a(t))return t.replace("http:","https:");if(o)throw new TypeError("“"+o+"” is not a valid video id.");throw new TypeError("“"+t+"” is not a vimeo.com url.")}function e(e,t){return e(t={exports:{}},t.exports),t.exports}function u(e,t,o){var n=g.get(e.element)||{};t in n||(n[t]=[]),n[t].push(o),g.set(e.element,n)}function l(e,t){return(g.get(e.element)||{})[t]||[]}function c(e,t,o){var n=g.get(e.element)||{};if(!n[t])return 1;if(!o)return n[t]=[],g.set(e.element,n),1;o=n[t].indexOf(o);return-1!==o&&n[t].splice(o,1),g.set(e.element,n),n[t]&&0===n[t].length}function d(n,e){e=1<arguments.length&&void 0!==e?e:{};return i.reduce(function(e,t){var o=n.getAttribute("data-vimeo-"+t);return!o&&""!==o||(e[t]=""===o?1:o),e},e)}function f(s,e){var r=1<arguments.length&&void 0!==e?e:{};return new Promise(function(t,o){if(!a(s))throw new TypeError("“"+s+"” is not a vimeo.com url.");var e,n="https://vimeo.com/api/oembed.json?url="+encodeURIComponent(s);for(e in r)r.hasOwnProperty(e)&&(n+="&"+e+"="+encodeURIComponent(r[e]));var i=new("XDomainRequest"in window?XDomainRequest:XMLHttpRequest);i.open("GET",n,!0),i.onload=function(){if(404!==i.status)if(403!==i.status)try{var e=JSON.parse(i.responseText);t(e)}catch(e){o(e)}else o(new Error("“"+s+"” is not embeddable."));else o(new Error("“"+s+"” was not found."))},i.onerror=function(){var e=i.status?" ("+i.status+")":"";o(new Error("There was an error fetching the embed code from Vimeo"+e+"."))},i.send()})}function v(e,t){var o=e.html;if(!t)throw new TypeError("An element must be provided");if(null!==t.getAttribute("data-vimeo-initialized"))return t.querySelector("iframe");e=document.createElement("div");return e.innerHTML=o,t.appendChild(e.firstChild),t.setAttribute("data-vimeo-initialized","true"),t.querySelector("iframe")}function h(e){return"string"==typeof e&&(e=JSON.parse(e)),e}function p(e,t,o){e.element.contentWindow&&e.element.contentWindow.postMessage&&(t={method:t},void 0!==o&&(t.value=o),8<=(o=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1")))&&o<10&&(t=JSON.stringify(t)),e.element.contentWindow.postMessage(t,e.origin))}function m(o,n){n=h(n);var e,t,i,s=[],r=void 0;n.event?("error"===n.event&&l(o,n.data.method).forEach(function(e){var t=new Error(n.data.message);t.name=n.data.name,e.reject(t),c(o,n.data.method,e)}),s=l(o,"event:"+n.event),r=n.data):n.method&&(e=o,t=n.method,(i=!((i=l(e,t)).length<1)&&(i=i.shift(),c(e,t,i),i))&&(s.push(i),r=n.value)),s.forEach(function(e){try{if("function"==typeof e)return void e.call(o,r);e.resolve(r)}catch(e){}})}var t="undefined"!=typeof global&&"[object global]"==={}.toString.call(global),o=void 0!==Array.prototype.indexOf,n="undefined"!=typeof window&&void 0!==window.postMessage;if(!(t||o&&n))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var y="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},b=(e(function(e,t){function o(e,t){function o(e){if(!this||this.constructor!==o)return new o(e);this._keys=[],this._values=[],this._itp=[],this.objectOnly=t,e&&function(e){this.add?e.forEach(this.add,this):e.forEach(function(e){this.set(e[0],e[1])},this)}.call(this,e)}return t||b(e,"size",{get:v}),(e.constructor=o).prototype=e,o}function n(e){return this.has(e)&&(this._keys.splice(m,1),this._values.splice(m,1),this._itp.forEach(function(e){m<e[0]&&e[0]--})),-1<m}function i(e){return this.has(e)?this._values[m]:void 0}function s(e,t){if(this.objectOnly&&t!==Object(t))throw new TypeError("Invalid value used as weak collection key");if(t!=t||0===t)for(m=e.length;m--&&!g(e[m],t););else m=e.indexOf(t);return-1<m}function r(e){return s.call(this,this._values,e)}function a(e){return s.call(this,this._keys,e)}function u(e,t){return this.has(e)?this._values[m]=t:this._values[this._keys.push(e)-1]=t,this}function l(e){return this.has(e)||this._values.push(e),this}function c(){(this._keys||0).length=this._values.length=0}function d(){return f(this._itp,this._values)}function f(o,n,i){var s=[0],r=!1;return o.push(s),{next:function(){var e,t=s[0];return!r&&t<n.length?(e=i?[n[t],i[t]]:n[t],s[0]++):(r=!0,o.splice(o.indexOf(s),1)),{done:r,value:e}}}}function v(){return this._values.length}function h(e,t){for(var o=this.entries();;){var n=o.next();if(n.done)break;e.call(t,n.value[1],n.value[0],this)}}var p,m,b,g;p=y,b=Object.defineProperty,g=function(e,t){return e===t||e!=e&&t!=t},"undefined"==typeof WeakMap&&(p.WeakMap=o({delete:n,clear:c,get:i,has:a,set:u},!0)),"undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next||(p.Map=o({delete:n,has:a,get:i,set:u,keys:function(){return f(this._itp,this._keys)},values:d,entries:function(){return f(this._itp,this._keys,this._values)},forEach:h,clear:c})),"undefined"!=typeof Set&&"function"==typeof(new Set).values&&(new Set).values().next||(p.Set=o({has:r,add:l,delete:n,clear:c,keys:d,values:d,entries:function(){return f(this._itp,this._values,this._values)},forEach:h})),"undefined"==typeof WeakSet&&(p.WeakSet=o({delete:n,add:l,clear:c,has:r},!0))}),e(function(e){var t,o,m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(o=y)[t="Promise"]=o[t]||function(){function i(e,t){f.add(e,t),d||(d=h(f.drain))}function s(e){var t,o=void 0===e?"undefined":m(e);return null==e||"object"!=o&&"function"!=o||(t=e.then),"function"==typeof t&&t}function r(){for(var e=0;e<this.chain.length;e++)t(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function t(e,t,o){var n,i;try{!1===t?o.reject(e.msg):(n=!0===t?e.msg:t.call(void 0,e.msg),n===o.promise?o.reject(TypeError("Promise-chain cycle")):(i=s(n))?i.call(n,o.resolve,o.reject):o.resolve(n))}catch(e){o.reject(e)}}function a(e){var o,n=this;if(!n.triggered){n.triggered=!0,n.def&&(n=n.def);try{(o=s(e))?i(function(){var t=new c(n);try{o.call(e,function(){a.apply(t,arguments)},function(){u.apply(t,arguments)})}catch(e){u.call(t,e)}}):(n.msg=e,n.state=1,n.chain.length>0&&i(r,n))}catch(e){u.call(new c(n),e)}}}function u(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&i(r,t))}function l(e,o,n,i){for(var t=0;t<o.length;t++)!function(t){e.resolve(o[t]).then(function(e){n(t,e)},i)}(t)}function c(e){this.def=e,this.triggered=!1}function o(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function e(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var n=new o(this);this.then=function(e,t){var o={success:"function"!=typeof e||e,failure:"function"==typeof t&&t};return o.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");o.resolve=e,o.reject=t}),n.chain.push(o),0!==n.state&&i(r,n),o.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,function(e){a.call(n,e)},function(e){u.call(n,e)})}catch(e){u.call(n,e)}}var n,d,f,v=Object.prototype.toString,h="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),n=function(e,t,o,n){return Object.defineProperty(e,t,{value:o,writable:!0,configurable:!1!==n})}}catch(i){n=function(e,t,o){return e[t]=o,e}}f=function(){function o(e,t){this.fn=e,this.self=t,this.next=void 0}var n,i,s;return{add:function(e,t){s=new o(e,t),i?i.next=s:n=s,i=s,s=void 0},drain:function(){var e=n;for(n=i=d=void 0;e;)e.fn.call(e.self),e=e.next}}}();var p=n({},"constructor",e,!1);return n(e.prototype=p,"__NPO__",0,!1),n(e,"resolve",function(o){var e=this;return o&&"object"==(void 0===o?"undefined":m(o))&&1===o.__NPO__?o:new e(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");e(o)})}),n(e,"reject",function(o){return new this(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");t(o)})}),n(e,"all",function(t){var r=this;return"[object Array]"!=v.call(t)?r.reject(TypeError("Not an array")):0===t.length?r.resolve([]):new r(function(o,e){if("function"!=typeof o||"function"!=typeof e)throw TypeError("Not a function");var n=t.length,i=Array(n),s=0;l(r,t,function(e,t){i[e]=t,++s===n&&o(i)},e)})}),n(e,"race",function(t){var n=this;return"[object Array]"!=v.call(t)?n.reject(TypeError("Not an array")):new n(function(o,e){if("function"!=typeof o||"function"!=typeof e)throw TypeError("Not a function");l(n,t,function(e,t){o(t)},e)})}),e}(),e.exports&&(e.exports=o[t])})),g=new WeakMap,i=["id","url","width","maxwidth","height","maxheight","portrait","title","byline","color","autoplay","autopause","loop","responsive","speed","background","transparent"],n=function(e,t,o){return t&&C(e.prototype,t),o&&C(e,o),e},w=new WeakMap,k=new WeakMap,n=(n(x,[{key:"callMethod",value:function(o){var n=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return new b(function(e,t){return n.ready().then(function(){u(n,o,{resolve:e,reject:t}),p(n,o,i)})})}},{key:"get",value:function(o){var n=this;return new b(function(e,t){return o=s(o,"get"),n.ready().then(function(){u(n,o,{resolve:e,reject:t}),p(n,o)})})}},{key:"set",value:function(n,e){var i=this;return b.resolve(e).then(function(o){if(n=s(n,"set"),null==o)throw new TypeError("There must be a value to set.");return i.ready().then(function(){return new b(function(e,t){u(i,n,{resolve:e,reject:t}),p(i,n,o)})})})}},{key:"on",value:function(e,t){if(!e)throw new TypeError("You must pass an event name.");if(!t)throw new TypeError("You must pass a callback function.");if("function"!=typeof t)throw new TypeError("The callback must be a function.");0===l(this,"event:"+e).length&&this.callMethod("addEventListener",e).catch(function(){}),u(this,"event:"+e,t)}},{key:"off",value:function(e,t){if(!e)throw new TypeError("You must pass an event name.");if(t&&"function"!=typeof t)throw new TypeError("The callback must be a function.");c(this,"event:"+e,t)&&this.callMethod("removeEventListener",e).catch(function(e){})}},{key:"loadVideo",value:function(e){return this.callMethod("loadVideo",e)}},{key:"ready",value:function(){var e=k.get(this);return b.resolve(e)}},{key:"addCuePoint",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.callMethod("addCuePoint",{time:e,data:t})}},{key:"removeCuePoint",value:function(e){return this.callMethod("removeCuePoint",e)}},{key:"enableTextTrack",value:function(e,t){if(!e)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:e,kind:t})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(e){return this.set("autopause",e)}},{key:"getColor",value:function(){return this.get("color")}},{key:"setColor",value:function(e){return this.set("color",e)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(e){return this.set("currentTime",e)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(e){return this.set("loop",e)}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(e){return this.set("playbackRate",e)}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(e){return this.set("volume",e)}}]),x);function x(i){var s=this,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,x),window.jQuery&&i instanceof jQuery&&(1<i.length&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),i=i[0]),"string"==typeof i&&(i=document.getElementById(i)),!(i instanceof window.HTMLElement))throw new TypeError("You must pass either a valid element or a valid id.");if("IFRAME"===i.nodeName||(e=i.querySelector("iframe"))&&(i=e),"IFRAME"===i.nodeName&&!a(i.getAttribute("src")||""))throw new Error("The player element passed isn’t a Vimeo embed.");if(w.has(i))return w.get(i);this.element=i,this.origin="*";var e=new b(function(n,t){var e=function(e){if(a(e.origin)&&s.element.contentWindow===e.source){"*"===s.origin&&(s.origin=e.origin);var t=h(e.data),o="event"in t&&"ready"===t.event,e="method"in t&&"ping"===t.method;if(o||e)return s.element.setAttribute("data-ready","true"),void n();m(s,t)}};window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent&&window.attachEvent("onmessage",e),"IFRAME"!==s.element.nodeName&&f(r(e=d(i,o)),e).then(function(e){var t,o,n=v(e,i);return s.element=n,t=i,o=n,n=g.get(t),g.set(o,n),g.delete(t),w.set(s.element,s),e}).catch(function(e){return t(e)})});return k.set(this,e),w.set(this.element,this),"IFRAME"===this.element.nodeName&&p(this,"ping"),this}function C(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return t||(function(e){function o(e){"console"in window&&console.error&&console.error("There was an error creating an embed: "+e)}e=0<arguments.length&&void 0!==e?e:document,e=[].slice.call(e.querySelectorAll("[data-vimeo-id], [data-vimeo-url]"));e.forEach(function(t){try{if(null!==t.getAttribute("data-vimeo-defer"))return;var e=d(t);f(r(e),e).then(function(e){return v(e,t)}).catch(o)}catch(t){o(t)}})}(),function(e){var i=0<arguments.length&&void 0!==e?e:document,e=function(e){if(a(e.origin)&&e.data&&"spacechange"===e.data.event)for(var t=i.querySelectorAll("iframe"),o=0;o<t.length;o++)if(t[o].contentWindow===e.source){var n=t[o].parentElement;n&&-1!==n.className.indexOf("vimeo-space")&&(n.style.paddingBottom=e.data.data[0].bottom+"px");break}};window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent&&window.attachEvent("onmessage",e)}()),n});
